var o0=a=>{throw TypeError(a)};var jd=(a,t,e)=>t.has(a)||o0("Cannot "+e);var Ee=(a,t,e)=>(jd(a,t,"read from private field"),e?e.call(a):t.get(a)),Si=(a,t,e)=>t.has(a)?o0("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(a):t.set(a,e),Mn=(a,t,e,n)=>(jd(a,t,"write to private field"),n?n.call(a,e):t.set(a,e),e),xi=(a,t,e)=>(jd(a,t,"access private method"),e);var l0=(a,t,e,n)=>({set _(s){Mn(a,t,s,e)},get _(){return Ee(a,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var wc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z_(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Vd={exports:{}},Ao={};var c0;function F_(){if(c0)return Ao;c0=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(n,s,o){var l=null;if(o!==void 0&&(l=""+o),s.key!==void 0&&(l=""+s.key),"key"in s){o={};for(var u in s)u!=="key"&&(o[u]=s[u])}else o=s;return s=o.ref,{$$typeof:a,type:n,key:l,ref:s!==void 0?s:null,props:o}}return Ao.Fragment=t,Ao.jsx=e,Ao.jsxs=e,Ao}var u0;function I_(){return u0||(u0=1,Vd.exports=F_()),Vd.exports}var dt=I_(),Hd={exports:{}},Vt={};var h0;function U_(){if(h0)return Vt;h0=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),b=Symbol.iterator;function y(_){return _===null||typeof _!="object"?null:(_=b&&_[b]||_["@@iterator"],typeof _=="function"?_:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,x={};function S(_,N,X){this.props=_,this.context=N,this.refs=x,this.updater=X||A}S.prototype.isReactComponent={},S.prototype.setState=function(_,N){if(typeof _!="object"&&typeof _!="function"&&_!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_,N,"setState")},S.prototype.forceUpdate=function(_){this.updater.enqueueForceUpdate(this,_,"forceUpdate")};function E(){}E.prototype=S.prototype;function T(_,N,X){this.props=_,this.context=N,this.refs=x,this.updater=X||A}var R=T.prototype=new E;R.constructor=T,w(R,S.prototype),R.isPureReactComponent=!0;var D=Array.isArray;function O(){}var L={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function I(_,N,X){var K=X.ref;return{$$typeof:a,type:_,key:N,ref:K!==void 0?K:null,props:X}}function Q(_,N){return I(_.type,N,_.props)}function at(_){return typeof _=="object"&&_!==null&&_.$$typeof===a}function U(_){var N={"=":"=0",":":"=2"};return"$"+_.replace(/[=:]/g,function(X){return N[X]})}var Z=/\/+/g;function M(_,N){return typeof _=="object"&&_!==null&&_.key!=null?U(""+_.key):N.toString(36)}function tt(_){switch(_.status){case"fulfilled":return _.value;case"rejected":throw _.reason;default:switch(typeof _.status=="string"?_.then(O,O):(_.status="pending",_.then(function(N){_.status==="pending"&&(_.status="fulfilled",_.value=N)},function(N){_.status==="pending"&&(_.status="rejected",_.reason=N)})),_.status){case"fulfilled":return _.value;case"rejected":throw _.reason}}throw _}function H(_,N,X,K,$){var ht=typeof _;(ht==="undefined"||ht==="boolean")&&(_=null);var pt=!1;if(_===null)pt=!0;else switch(ht){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(_.$$typeof){case a:case t:pt=!0;break;case p:return pt=_._init,H(pt(_._payload),N,X,K,$)}}if(pt)return $=$(_),pt=K===""?"."+M(_,0):K,D($)?(X="",pt!=null&&(X=pt.replace(Z,"$&/")+"/"),H($,N,X,"",function(Ot){return Ot})):$!=null&&(at($)&&($=Q($,X+($.key==null||_&&_.key===$.key?"":(""+$.key).replace(Z,"$&/")+"/")+pt)),N.push($)),1;pt=0;var At=K===""?".":K+":";if(D(_))for(var vt=0;vt<_.length;vt++)K=_[vt],ht=At+M(K,vt),pt+=H(K,N,X,ht,$);else if(vt=y(_),typeof vt=="function")for(_=vt.call(_),vt=0;!(K=_.next()).done;)K=K.value,ht=At+M(K,vt++),pt+=H(K,N,X,ht,$);else if(ht==="object"){if(typeof _.then=="function")return H(tt(_),N,X,K,$);throw N=String(_),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(_).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.")}return pt}function j(_,N,X){if(_==null)return _;var K=[],$=0;return H(_,K,"","",function(ht){return N.call(X,ht,$++)}),K}function lt(_){if(_._status===-1){var N=_._result;N=N(),N.then(function(X){(_._status===0||_._status===-1)&&(_._status=1,_._result=X)},function(X){(_._status===0||_._status===-1)&&(_._status=2,_._result=X)}),_._status===-1&&(_._status=0,_._result=N)}if(_._status===1)return _._result.default;throw _._result}var st=typeof reportError=="function"?reportError:function(_){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var N=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof _=="object"&&_!==null&&typeof _.message=="string"?String(_.message):String(_),error:_});if(!window.dispatchEvent(N))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",_);return}console.error(_)},B={map:j,forEach:function(_,N,X){j(_,function(){N.apply(this,arguments)},X)},count:function(_){var N=0;return j(_,function(){N++}),N},toArray:function(_){return j(_,function(N){return N})||[]},only:function(_){if(!at(_))throw Error("React.Children.only expected to receive a single React element child.");return _}};return Vt.Activity=m,Vt.Children=B,Vt.Component=S,Vt.Fragment=e,Vt.Profiler=s,Vt.PureComponent=T,Vt.StrictMode=n,Vt.Suspense=h,Vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,Vt.__COMPILER_RUNTIME={__proto__:null,c:function(_){return L.H.useMemoCache(_)}},Vt.cache=function(_){return function(){return _.apply(null,arguments)}},Vt.cacheSignal=function(){return null},Vt.cloneElement=function(_,N,X){if(_==null)throw Error("The argument must be a React element, but you passed "+_+".");var K=w({},_.props),$=_.key;if(N!=null)for(ht in N.key!==void 0&&($=""+N.key),N)!z.call(N,ht)||ht==="key"||ht==="__self"||ht==="__source"||ht==="ref"&&N.ref===void 0||(K[ht]=N[ht]);var ht=arguments.length-2;if(ht===1)K.children=X;else if(1<ht){for(var pt=Array(ht),At=0;At<ht;At++)pt[At]=arguments[At+2];K.children=pt}return I(_.type,$,K)},Vt.createContext=function(_){return _={$$typeof:l,_currentValue:_,_currentValue2:_,_threadCount:0,Provider:null,Consumer:null},_.Provider=_,_.Consumer={$$typeof:o,_context:_},_},Vt.createElement=function(_,N,X){var K,$={},ht=null;if(N!=null)for(K in N.key!==void 0&&(ht=""+N.key),N)z.call(N,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&($[K]=N[K]);var pt=arguments.length-2;if(pt===1)$.children=X;else if(1<pt){for(var At=Array(pt),vt=0;vt<pt;vt++)At[vt]=arguments[vt+2];$.children=At}if(_&&_.defaultProps)for(K in pt=_.defaultProps,pt)$[K]===void 0&&($[K]=pt[K]);return I(_,ht,$)},Vt.createRef=function(){return{current:null}},Vt.forwardRef=function(_){return{$$typeof:u,render:_}},Vt.isValidElement=at,Vt.lazy=function(_){return{$$typeof:p,_payload:{_status:-1,_result:_},_init:lt}},Vt.memo=function(_,N){return{$$typeof:f,type:_,compare:N===void 0?null:N}},Vt.startTransition=function(_){var N=L.T,X={};L.T=X;try{var K=_(),$=L.S;$!==null&&$(X,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(O,st)}catch(ht){st(ht)}finally{N!==null&&X.types!==null&&(N.types=X.types),L.T=N}},Vt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},Vt.use=function(_){return L.H.use(_)},Vt.useActionState=function(_,N,X){return L.H.useActionState(_,N,X)},Vt.useCallback=function(_,N){return L.H.useCallback(_,N)},Vt.useContext=function(_){return L.H.useContext(_)},Vt.useDebugValue=function(){},Vt.useDeferredValue=function(_,N){return L.H.useDeferredValue(_,N)},Vt.useEffect=function(_,N){return L.H.useEffect(_,N)},Vt.useEffectEvent=function(_){return L.H.useEffectEvent(_)},Vt.useId=function(){return L.H.useId()},Vt.useImperativeHandle=function(_,N,X){return L.H.useImperativeHandle(_,N,X)},Vt.useInsertionEffect=function(_,N){return L.H.useInsertionEffect(_,N)},Vt.useLayoutEffect=function(_,N){return L.H.useLayoutEffect(_,N)},Vt.useMemo=function(_,N){return L.H.useMemo(_,N)},Vt.useOptimistic=function(_,N){return L.H.useOptimistic(_,N)},Vt.useReducer=function(_,N,X){return L.H.useReducer(_,N,X)},Vt.useRef=function(_){return L.H.useRef(_)},Vt.useState=function(_){return L.H.useState(_)},Vt.useSyncExternalStore=function(_,N,X){return L.H.useSyncExternalStore(_,N,X)},Vt.useTransition=function(){return L.H.useTransition()},Vt.version="19.2.4",Vt}var d0;function dp(){return d0||(d0=1,Hd.exports=U_()),Hd.exports}var _t=dp(),Gd={exports:{}},So={},Xd={exports:{}},Yd={};var f0;function j_(){return f0||(f0=1,(function(a){function t(H,j){var lt=H.length;H.push(j);t:for(;0<lt;){var st=lt-1>>>1,B=H[st];if(0<s(B,j))H[st]=j,H[lt]=B,lt=st;else break t}}function e(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var j=H[0],lt=H.pop();if(lt!==j){H[0]=lt;t:for(var st=0,B=H.length,_=B>>>1;st<_;){var N=2*(st+1)-1,X=H[N],K=N+1,$=H[K];if(0>s(X,lt))K<B&&0>s($,X)?(H[st]=$,H[K]=lt,st=K):(H[st]=X,H[N]=lt,st=N);else if(K<B&&0>s($,lt))H[st]=$,H[K]=lt,st=K;else break t}}return j}function s(H,j){var lt=H.sortIndex-j.sortIndex;return lt!==0?lt:H.id-j.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;a.unstable_now=function(){return o.now()}}else{var l=Date,u=l.now();a.unstable_now=function(){return l.now()-u}}var h=[],f=[],p=1,m=null,b=3,y=!1,A=!1,w=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function R(H){for(var j=e(f);j!==null;){if(j.callback===null)n(f);else if(j.startTime<=H)n(f),j.sortIndex=j.expirationTime,t(h,j);else break;j=e(f)}}function D(H){if(w=!1,R(H),!A)if(e(h)!==null)A=!0,O||(O=!0,U());else{var j=e(f);j!==null&&tt(D,j.startTime-H)}}var O=!1,L=-1,z=5,I=-1;function Q(){return x?!0:!(a.unstable_now()-I<z)}function at(){if(x=!1,O){var H=a.unstable_now();I=H;var j=!0;try{t:{A=!1,w&&(w=!1,E(L),L=-1),y=!0;var lt=b;try{e:{for(R(H),m=e(h);m!==null&&!(m.expirationTime>H&&Q());){var st=m.callback;if(typeof st=="function"){m.callback=null,b=m.priorityLevel;var B=st(m.expirationTime<=H);if(H=a.unstable_now(),typeof B=="function"){m.callback=B,R(H),j=!0;break e}m===e(h)&&n(h),R(H)}else n(h);m=e(h)}if(m!==null)j=!0;else{var _=e(f);_!==null&&tt(D,_.startTime-H),j=!1}}break t}finally{m=null,b=lt,y=!1}j=void 0}}finally{j?U():O=!1}}}var U;if(typeof T=="function")U=function(){T(at)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,M=Z.port2;Z.port1.onmessage=at,U=function(){M.postMessage(null)}}else U=function(){S(at,0)};function tt(H,j){L=S(function(){H(a.unstable_now())},j)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(H){H.callback=null},a.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<H?Math.floor(1e3/H):5},a.unstable_getCurrentPriorityLevel=function(){return b},a.unstable_next=function(H){switch(b){case 1:case 2:case 3:var j=3;break;default:j=b}var lt=b;b=j;try{return H()}finally{b=lt}},a.unstable_requestPaint=function(){x=!0},a.unstable_runWithPriority=function(H,j){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var lt=b;b=H;try{return j()}finally{b=lt}},a.unstable_scheduleCallback=function(H,j,lt){var st=a.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?st+lt:st):lt=st,H){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=lt+B,H={id:p++,callback:j,priorityLevel:H,startTime:lt,expirationTime:B,sortIndex:-1},lt>st?(H.sortIndex=lt,t(f,H),e(h)===null&&H===e(f)&&(w?(E(L),L=-1):w=!0,tt(D,lt-st))):(H.sortIndex=B,t(h,H),A||y||(A=!0,O||(O=!0,U()))),H},a.unstable_shouldYield=Q,a.unstable_wrapCallback=function(H){var j=b;return function(){var lt=b;b=j;try{return H.apply(this,arguments)}finally{b=lt}}}})(Yd)),Yd}var p0;function V_(){return p0||(p0=1,Xd.exports=j_()),Xd.exports}var qd={exports:{}},mn={};var m0;function H_(){if(m0)return mn;m0=1;var a=dp();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var n={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(h,f,p){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:m==null?null:""+m,children:h,containerInfo:f,implementation:p}}var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return mn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,mn.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return o(h,f,null,p)},mn.flushSync=function(h){var f=l.T,p=n.p;try{if(l.T=null,n.p=2,h)return h()}finally{l.T=f,n.p=p,n.d.f()}},mn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,n.d.C(h,f))},mn.prefetchDNS=function(h){typeof h=="string"&&n.d.D(h)},mn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?n.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:b,fetchPriority:y}):p==="script"&&n.d.X(h,{crossOrigin:m,integrity:b,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},mn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);n.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&n.d.M(h)},mn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,m=u(p,f.crossOrigin);n.d.L(h,p,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},mn.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);n.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else n.d.m(h)},mn.requestFormReset=function(h){n.d.r(h)},mn.unstable_batchedUpdates=function(h,f){return h(f)},mn.useFormState=function(h,f,p){return l.H.useFormState(h,f,p)},mn.useFormStatus=function(){return l.H.useHostTransitionStatus()},mn.version="19.2.4",mn}var g0;function G_(){if(g0)return qd.exports;g0=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),qd.exports=H_(),qd.exports}var b0;function X_(){if(b0)return So;b0=1;var a=V_(),t=dp(),e=G_();function n(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)r+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var r=i,c=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(c=r.return),i=r.return;while(i)}return r.tag===3?c:null}function l(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function u(i){if(i.tag===31){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function h(i){if(o(i)!==i)throw Error(n(188))}function f(i){var r=i.alternate;if(!r){if(r=o(i),r===null)throw Error(n(188));return r!==i?null:i}for(var c=i,d=r;;){var g=c.return;if(g===null)break;var v=g.alternate;if(v===null){if(d=g.return,d!==null){c=d;continue}break}if(g.child===v.child){for(v=g.child;v;){if(v===c)return h(g),i;if(v===d)return h(g),r;v=v.sibling}throw Error(n(188))}if(c.return!==d.return)c=g,d=v;else{for(var C=!1,P=g.child;P;){if(P===c){C=!0,c=g,d=v;break}if(P===d){C=!0,d=g,c=v;break}P=P.sibling}if(!C){for(P=v.child;P;){if(P===c){C=!0,c=v,d=g;break}if(P===d){C=!0,d=v,c=g;break}P=P.sibling}if(!C)throw Error(n(189))}}if(c.alternate!==d)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?i:r}function p(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=p(i),r!==null)return r;i=i.sibling}return null}var m=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),T=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),Q=Symbol.for("react.memo_cache_sentinel"),at=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=at&&i[at]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Symbol.for("react.client.reference");function M(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===Z?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case I:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case A:return"Portal";case T:return i.displayName||"Context";case E:return(i._context.displayName||"Context")+".Consumer";case R:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case L:return r=i.displayName||null,r!==null?r:M(i.type)||"Memo";case z:r=i._payload,i=i._init;try{return M(i(r))}catch{}}return null}var tt=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},st=[],B=-1;function _(i){return{current:i}}function N(i){0>B||(i.current=st[B],st[B]=null,B--)}function X(i,r){B++,st[B]=i.current,i.current=r}var K=_(null),$=_(null),ht=_(null),pt=_(null);function At(i,r){switch(X(ht,r),X($,i),X(K,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?Dy(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=Dy(r),i=Ry(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}N(K),X(K,i)}function vt(){N(K),N($),N(ht)}function Ot(i){i.memoizedState!==null&&X(pt,i);var r=K.current,c=Ry(r,i.type);r!==c&&(X($,i),X(K,c))}function Mt(i){$.current===i&&(N(K),N($)),pt.current===i&&(N(pt),bo._currentValue=lt)}var It,qt;function k(i){if(It===void 0)try{throw Error()}catch(c){var r=c.stack.trim().match(/\n( *(at )?)/);It=r&&r[1]||"",qt=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+i+qt}var ft=!1;function ot(i,r){if(!i||ft)return"";ft=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(r){var yt=function(){throw Error()};if(Object.defineProperty(yt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(yt,[])}catch(ct){var rt=ct}Reflect.construct(i,[],yt)}else{try{yt.call()}catch(ct){rt=ct}i.call(yt.prototype)}}else{try{throw Error()}catch(ct){rt=ct}(yt=i())&&typeof yt.catch=="function"&&yt.catch(function(){})}}catch(ct){if(ct&&rt&&typeof ct.stack=="string")return[ct.stack,rt.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),C=v[0],P=v[1];if(C&&P){var G=C.split(`
`),nt=P.split(`
`);for(g=d=0;d<G.length&&!G[d].includes("DetermineComponentFrameRoot");)d++;for(;g<nt.length&&!nt[g].includes("DetermineComponentFrameRoot");)g++;if(d===G.length||g===nt.length)for(d=G.length-1,g=nt.length-1;1<=d&&0<=g&&G[d]!==nt[g];)g--;for(;1<=d&&0<=g;d--,g--)if(G[d]!==nt[g]){if(d!==1||g!==1)do if(d--,g--,0>g||G[d]!==nt[g]){var mt=`
`+G[d].replace(" at new "," at ");return i.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",i.displayName)),mt}while(1<=d&&0<=g);break}}}finally{ft=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?k(c):""}function V(i,r){switch(i.tag){case 26:case 27:case 5:return k(i.type);case 16:return k("Lazy");case 13:return i.child!==r&&r!==null?k("Suspense Fallback"):k("Suspense");case 19:return k("SuspenseList");case 0:case 15:return ot(i.type,!1);case 11:return ot(i.type.render,!1);case 1:return ot(i.type,!0);case 31:return k("Activity");default:return""}}function F(i){try{var r="",c=null;do r+=V(i,c),c=i,i=i.return;while(i);return r}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var W=Object.prototype.hasOwnProperty,gt=a.unstable_scheduleCallback,wt=a.unstable_cancelCallback,it=a.unstable_shouldYield,St=a.unstable_requestPaint,Et=a.unstable_now,xt=a.unstable_getCurrentPriorityLevel,Lt=a.unstable_ImmediatePriority,re=a.unstable_UserBlockingPriority,Xt=a.unstable_NormalPriority,sn=a.unstable_LowPriority,li=a.unstable_IdlePriority,pn=a.log,Ni=a.unstable_setDisableYieldValue,de=null,Qe=null;function Gn(i){if(typeof pn=="function"&&Ni(i),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(de,i)}catch{}}var Ce=Math.clz32?Math.clz32:ku,al=Math.log,Cu=Math.LN2;function ku(i){return i>>>=0,i===0?32:31-(al(i)/Cu|0)|0}var vr=256,Is=262144,bi=4194304;function Xn(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ol(i,r,c){var d=i.pendingLanes;if(d===0)return 0;var g=0,v=i.suspendedLanes,C=i.pingedLanes;i=i.warmLanes;var P=d&134217727;return P!==0?(d=P&~v,d!==0?g=Xn(d):(C&=P,C!==0?g=Xn(C):c||(c=P&~i,c!==0&&(g=Xn(c))))):(P=d&~v,P!==0?g=Xn(P):C!==0?g=Xn(C):c||(c=d&~i,c!==0&&(g=Xn(c)))),g===0?0:r!==0&&r!==g&&(r&v)===0&&(v=g&-g,c=r&-r,v>=c||v===32&&(c&4194048)!==0)?r:g}function Ma(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function _S(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hm(){var i=bi;return bi<<=1,(bi&62914560)===0&&(bi=4194304),i}function Mu(i){for(var r=[],c=0;31>c;c++)r.push(i);return r}function Da(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function ES(i,r,c,d,g,v){var C=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var P=i.entanglements,G=i.expirationTimes,nt=i.hiddenUpdates;for(c=C&~c;0<c;){var mt=31-Ce(c),yt=1<<mt;P[mt]=0,G[mt]=-1;var rt=nt[mt];if(rt!==null)for(nt[mt]=null,mt=0;mt<rt.length;mt++){var ct=rt[mt];ct!==null&&(ct.lane&=-536870913)}c&=~yt}d!==0&&dm(i,d,0),v!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=v&~(C&~r))}function dm(i,r,c){i.pendingLanes|=r,i.suspendedLanes&=~r;var d=31-Ce(r);i.entangledLanes|=r,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function fm(i,r){var c=i.entangledLanes|=r;for(i=i.entanglements;c;){var d=31-Ce(c),g=1<<d;g&r|i[d]&r&&(i[d]|=r),c&=~g}}function pm(i,r){var c=r&-r;return c=(c&42)!==0?1:Du(c),(c&(i.suspendedLanes|r))!==0?0:c}function Du(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ru(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function mm(){var i=j.p;return i!==0?i:(i=window.event,i===void 0?32:t0(i.type))}function gm(i,r){var c=j.p;try{return j.p=i,r()}finally{j.p=c}}var is=Math.random().toString(36).slice(2),rn="__reactFiber$"+is,Sn="__reactProps$"+is,wr="__reactContainer$"+is,Nu="__reactEvents$"+is,TS="__reactListeners$"+is,CS="__reactHandles$"+is,bm="__reactResources$"+is,Ra="__reactMarker$"+is;function Pu(i){delete i[rn],delete i[Sn],delete i[Nu],delete i[TS],delete i[CS]}function Ar(i){var r=i[rn];if(r)return r;for(var c=i.parentNode;c;){if(r=c[wr]||c[rn]){if(c=r.alternate,r.child!==null||c!==null&&c.child!==null)for(i=Fy(i);i!==null;){if(c=i[rn])return c;i=Fy(i)}return r}i=c,c=i.parentNode}return null}function Sr(i){if(i=i[rn]||i[wr]){var r=i.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return i}return null}function Na(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(n(33))}function xr(i){var r=i[bm];return r||(r=i[bm]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Je(i){i[Ra]=!0}var ym=new Set,vm={};function Us(i,r){_r(i,r),_r(i+"Capture",r)}function _r(i,r){for(vm[i]=r,i=0;i<r.length;i++)ym.add(r[i])}var kS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wm={},Am={};function MS(i){return W.call(Am,i)?!0:W.call(wm,i)?!1:kS.test(i)?Am[i]=!0:(wm[i]=!0,!1)}function ll(i,r,c){if(MS(r))if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var d=r.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+c)}}function cl(i,r,c){if(c===null)i.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+c)}}function Pi(i,r,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(r,c,""+d)}}function Yn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Sm(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function DS(i,r,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,r);if(!i.hasOwnProperty(r)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,v=d.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return g.call(this)},set:function(C){c=""+C,v.call(this,C)}}),Object.defineProperty(i,r,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(C){c=""+C},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ou(i){if(!i._valueTracker){var r=Sm(i)?"checked":"value";i._valueTracker=DS(i,r,""+i[r])}}function xm(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var c=r.getValue(),d="";return i&&(d=Sm(i)?i.checked?"true":"false":i.value),i=d,i!==c?(r.setValue(i),!0):!1}function ul(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var RS=/[\n"\\]/g;function qn(i){return i.replace(RS,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Lu(i,r,c,d,g,v,C,P){i.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.type=C:i.removeAttribute("type"),r!=null?C==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Yn(r)):i.value!==""+Yn(r)&&(i.value=""+Yn(r)):C!=="submit"&&C!=="reset"||i.removeAttribute("value"),r!=null?Bu(i,C,Yn(r)):c!=null?Bu(i,C,Yn(c)):d!=null&&i.removeAttribute("value"),g==null&&v!=null&&(i.defaultChecked=!!v),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?i.name=""+Yn(P):i.removeAttribute("name")}function _m(i,r,c,d,g,v,C,P){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),r!=null||c!=null){if(!(v!=="submit"&&v!=="reset"||r!=null)){Ou(i);return}c=c!=null?""+Yn(c):"",r=r!=null?""+Yn(r):c,P||r===i.value||(i.value=r),i.defaultValue=r}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=P?i.checked:!!d,i.defaultChecked=!!d,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.name=C),Ou(i)}function Bu(i,r,c){r==="number"&&ul(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Er(i,r,c,d){if(i=i.options,r){r={};for(var g=0;g<c.length;g++)r["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=r.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Yn(c),r=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,d&&(i[g].defaultSelected=!0);return}r!==null||i[g].disabled||(r=i[g])}r!==null&&(r.selected=!0)}}function Em(i,r,c){if(r!=null&&(r=""+Yn(r),r!==i.value&&(i.value=r),c==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=c!=null?""+Yn(c):""}function Tm(i,r,c,d){if(r==null){if(d!=null){if(c!=null)throw Error(n(92));if(tt(d)){if(1<d.length)throw Error(n(93));d=d[0]}c=d}c==null&&(c=""),r=c}c=Yn(r),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),Ou(i)}function Tr(i,r){if(r){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=r;return}}i.textContent=r}var NS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Cm(i,r,c){var d=r.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":d?i.setProperty(r,c):typeof c!="number"||c===0||NS.has(r)?r==="float"?i.cssFloat=c:i[r]=(""+c).trim():i[r]=c+"px"}function km(i,r,c){if(r!=null&&typeof r!="object")throw Error(n(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||r!=null&&r.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var g in r)d=r[g],r.hasOwnProperty(g)&&c[g]!==d&&Cm(i,g,d)}else for(var v in r)r.hasOwnProperty(v)&&Cm(i,v,r[v])}function zu(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),OS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hl(i){return OS.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Oi(){}var Fu=null;function Iu(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Cr=null,kr=null;function Mm(i){var r=Sr(i);if(r&&(i=r.stateNode)){var c=i[Sn]||null;t:switch(i=r.stateNode,r.type){case"input":if(Lu(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),r=c.name,c.type==="radio"&&r!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+qn(""+r)+'"][type="radio"]'),r=0;r<c.length;r++){var d=c[r];if(d!==i&&d.form===i.form){var g=d[Sn]||null;if(!g)throw Error(n(90));Lu(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<c.length;r++)d=c[r],d.form===i.form&&xm(d)}break t;case"textarea":Em(i,c.value,c.defaultValue);break t;case"select":r=c.value,r!=null&&Er(i,!!c.multiple,r,!1)}}}var Uu=!1;function Dm(i,r,c){if(Uu)return i(r,c);Uu=!0;try{var d=i(r);return d}finally{if(Uu=!1,(Cr!==null||kr!==null)&&(Ql(),Cr&&(r=Cr,i=kr,kr=Cr=null,Mm(r),i)))for(r=0;r<i.length;r++)Mm(i[r])}}function Pa(i,r){var c=i.stateNode;if(c===null)return null;var d=c[Sn]||null;if(d===null)return null;c=d[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break t;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(n(231,r,typeof c));return c}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ju=!1;if(Li)try{var Oa={};Object.defineProperty(Oa,"passive",{get:function(){ju=!0}}),window.addEventListener("test",Oa,Oa),window.removeEventListener("test",Oa,Oa)}catch{ju=!1}var ss=null,Vu=null,dl=null;function Rm(){if(dl)return dl;var i,r=Vu,c=r.length,d,g="value"in ss?ss.value:ss.textContent,v=g.length;for(i=0;i<c&&r[i]===g[i];i++);var C=c-i;for(d=1;d<=C&&r[c-d]===g[v-d];d++);return dl=g.slice(i,1<d?1-d:void 0)}function fl(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function pl(){return!0}function Nm(){return!1}function xn(i){function r(c,d,g,v,C){this._reactName=c,this._targetInst=g,this.type=d,this.nativeEvent=v,this.target=C,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(c=i[P],this[P]=c?c(v):v[P]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?pl:Nm,this.isPropagationStopped=Nm,this}return m(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=pl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=pl)},persist:function(){},isPersistent:pl}),r}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ml=xn(js),La=m({},js,{view:0,detail:0}),LS=xn(La),Hu,Gu,Ba,gl=m({},La,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ba&&(Ba&&i.type==="mousemove"?(Hu=i.screenX-Ba.screenX,Gu=i.screenY-Ba.screenY):Gu=Hu=0,Ba=i),Hu)},movementY:function(i){return"movementY"in i?i.movementY:Gu}}),Pm=xn(gl),BS=m({},gl,{dataTransfer:0}),zS=xn(BS),FS=m({},La,{relatedTarget:0}),Xu=xn(FS),IS=m({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),US=xn(IS),jS=m({},js,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),VS=xn(jS),HS=m({},js,{data:0}),Om=xn(HS),GS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qS(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=YS[i])?!!r[i]:!1}function Yu(){return qS}var $S=m({},La,{key:function(i){if(i.key){var r=GS[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=fl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?XS[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(i){return i.type==="keypress"?fl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),WS=xn($S),KS=m({},gl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lm=xn(KS),ZS=m({},La,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),QS=xn(ZS),JS=m({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),tx=xn(JS),ex=m({},gl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),nx=xn(ex),ix=m({},js,{newState:0,oldState:0}),sx=xn(ix),rx=[9,13,27,32],qu=Li&&"CompositionEvent"in window,za=null;Li&&"documentMode"in document&&(za=document.documentMode);var ax=Li&&"TextEvent"in window&&!za,Bm=Li&&(!qu||za&&8<za&&11>=za),zm=" ",Fm=!1;function Im(i,r){switch(i){case"keyup":return rx.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Um(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Mr=!1;function ox(i,r){switch(i){case"compositionend":return Um(r);case"keypress":return r.which!==32?null:(Fm=!0,zm);case"textInput":return i=r.data,i===zm&&Fm?null:i;default:return null}}function lx(i,r){if(Mr)return i==="compositionend"||!qu&&Im(i,r)?(i=Rm(),dl=Vu=ss=null,Mr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Bm&&r.locale!=="ko"?null:r.data;default:return null}}var cx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jm(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!cx[i.type]:r==="textarea"}function Vm(i,r,c,d){Cr?kr?kr.push(d):kr=[d]:Cr=d,r=rc(r,"onChange"),0<r.length&&(c=new ml("onChange","change",null,c,d),i.push({event:c,listeners:r}))}var Fa=null,Ia=null;function ux(i){_y(i,0)}function bl(i){var r=Na(i);if(xm(r))return i}function Hm(i,r){if(i==="change")return r}var Gm=!1;if(Li){var $u;if(Li){var Wu="oninput"in document;if(!Wu){var Xm=document.createElement("div");Xm.setAttribute("oninput","return;"),Wu=typeof Xm.oninput=="function"}$u=Wu}else $u=!1;Gm=$u&&(!document.documentMode||9<document.documentMode)}function Ym(){Fa&&(Fa.detachEvent("onpropertychange",qm),Ia=Fa=null)}function qm(i){if(i.propertyName==="value"&&bl(Ia)){var r=[];Vm(r,Ia,i,Iu(i)),Dm(ux,r)}}function hx(i,r,c){i==="focusin"?(Ym(),Fa=r,Ia=c,Fa.attachEvent("onpropertychange",qm)):i==="focusout"&&Ym()}function dx(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return bl(Ia)}function fx(i,r){if(i==="click")return bl(r)}function px(i,r){if(i==="input"||i==="change")return bl(r)}function mx(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Nn=typeof Object.is=="function"?Object.is:mx;function Ua(i,r){if(Nn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var c=Object.keys(i),d=Object.keys(r);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var g=c[d];if(!W.call(r,g)||!Nn(i[g],r[g]))return!1}return!0}function $m(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Wm(i,r){var c=$m(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=r&&d>=r)return{node:c,offset:r-i};i=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=$m(c)}}function Km(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Km(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Zm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=ul(i.document);r instanceof i.HTMLIFrameElement;){try{var c=typeof r.contentWindow.location.href=="string"}catch{c=!1}if(c)i=r.contentWindow;else break;r=ul(i.document)}return r}function Ku(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var gx=Li&&"documentMode"in document&&11>=document.documentMode,Dr=null,Zu=null,ja=null,Qu=!1;function Qm(i,r,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qu||Dr==null||Dr!==ul(d)||(d=Dr,"selectionStart"in d&&Ku(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ja&&Ua(ja,d)||(ja=d,d=rc(Zu,"onSelect"),0<d.length&&(r=new ml("onSelect","select",null,r,c),i.push({event:r,listeners:d}),r.target=Dr)))}function Vs(i,r){var c={};return c[i.toLowerCase()]=r.toLowerCase(),c["Webkit"+i]="webkit"+r,c["Moz"+i]="moz"+r,c}var Rr={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},Ju={},Jm={};Li&&(Jm=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function Hs(i){if(Ju[i])return Ju[i];if(!Rr[i])return i;var r=Rr[i],c;for(c in r)if(r.hasOwnProperty(c)&&c in Jm)return Ju[i]=r[c];return i}var tg=Hs("animationend"),eg=Hs("animationiteration"),ng=Hs("animationstart"),bx=Hs("transitionrun"),yx=Hs("transitionstart"),vx=Hs("transitioncancel"),ig=Hs("transitionend"),sg=new Map,th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");th.push("scrollEnd");function ci(i,r){sg.set(i,r),Us(r,[i])}var yl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},$n=[],Nr=0,eh=0;function vl(){for(var i=Nr,r=eh=Nr=0;r<i;){var c=$n[r];$n[r++]=null;var d=$n[r];$n[r++]=null;var g=$n[r];$n[r++]=null;var v=$n[r];if($n[r++]=null,d!==null&&g!==null){var C=d.pending;C===null?g.next=g:(g.next=C.next,C.next=g),d.pending=g}v!==0&&rg(c,g,v)}}function wl(i,r,c,d){$n[Nr++]=i,$n[Nr++]=r,$n[Nr++]=c,$n[Nr++]=d,eh|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function nh(i,r,c,d){return wl(i,r,c,d),Al(i)}function Gs(i,r){return wl(i,null,null,r),Al(i)}function rg(i,r,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var g=!1,v=i.return;v!==null;)v.childLanes|=c,d=v.alternate,d!==null&&(d.childLanes|=c),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(g=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,g&&r!==null&&(g=31-Ce(c),i=v.hiddenUpdates,d=i[g],d===null?i[g]=[r]:d.push(r),r.lane=c|536870912),v):null}function Al(i){if(50<co)throw co=0,hd=null,Error(n(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var Pr={};function wx(i,r,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(i,r,c,d){return new wx(i,r,c,d)}function ih(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Bi(i,r){var c=i.alternate;return c===null?(c=Pn(i.tag,r,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=r,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,r=i.dependencies,c.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function ag(i,r){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,r=c.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Sl(i,r,c,d,g,v){var C=0;if(d=i,typeof i=="function")ih(i)&&(C=1);else if(typeof i=="string")C=E_(i,c,K.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case I:return i=Pn(31,c,r,g),i.elementType=I,i.lanes=v,i;case w:return Xs(c.children,g,v,r);case x:C=8,g|=24;break;case S:return i=Pn(12,c,r,g|2),i.elementType=S,i.lanes=v,i;case D:return i=Pn(13,c,r,g),i.elementType=D,i.lanes=v,i;case O:return i=Pn(19,c,r,g),i.elementType=O,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case T:C=10;break t;case E:C=9;break t;case R:C=11;break t;case L:C=14;break t;case z:C=16,d=null;break t}C=29,c=Error(n(130,i===null?"null":typeof i,"")),d=null}return r=Pn(C,c,r,g),r.elementType=i,r.type=d,r.lanes=v,r}function Xs(i,r,c,d){return i=Pn(7,i,d,r),i.lanes=c,i}function sh(i,r,c){return i=Pn(6,i,null,r),i.lanes=c,i}function og(i){var r=Pn(18,null,null,0);return r.stateNode=i,r}function rh(i,r,c){return r=Pn(4,i.children!==null?i.children:[],i.key,r),r.lanes=c,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var lg=new WeakMap;function Wn(i,r){if(typeof i=="object"&&i!==null){var c=lg.get(i);return c!==void 0?c:(r={value:i,source:r,stack:F(r)},lg.set(i,r),r)}return{value:i,source:r,stack:F(r)}}var Or=[],Lr=0,xl=null,Va=0,Kn=[],Zn=0,rs=null,yi=1,vi="";function zi(i,r){Or[Lr++]=Va,Or[Lr++]=xl,xl=i,Va=r}function cg(i,r,c){Kn[Zn++]=yi,Kn[Zn++]=vi,Kn[Zn++]=rs,rs=i;var d=yi;i=vi;var g=32-Ce(d)-1;d&=~(1<<g),c+=1;var v=32-Ce(r)+g;if(30<v){var C=g-g%5;v=(d&(1<<C)-1).toString(32),d>>=C,g-=C,yi=1<<32-Ce(r)+g|c<<g|d,vi=v+i}else yi=1<<v|c<<g|d,vi=i}function ah(i){i.return!==null&&(zi(i,1),cg(i,1,0))}function oh(i){for(;i===xl;)xl=Or[--Lr],Or[Lr]=null,Va=Or[--Lr],Or[Lr]=null;for(;i===rs;)rs=Kn[--Zn],Kn[Zn]=null,vi=Kn[--Zn],Kn[Zn]=null,yi=Kn[--Zn],Kn[Zn]=null}function ug(i,r){Kn[Zn++]=yi,Kn[Zn++]=vi,Kn[Zn++]=rs,yi=r.id,vi=r.overflow,rs=i}var an=null,Se=null,te=!1,as=null,Qn=!1,lh=Error(n(519));function os(i){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ha(Wn(r,i)),lh}function hg(i){var r=i.stateNode,c=i.type,d=i.memoizedProps;switch(r[rn]=i,r[Sn]=d,c){case"dialog":Kt("cancel",r),Kt("close",r);break;case"iframe":case"object":case"embed":Kt("load",r);break;case"video":case"audio":for(c=0;c<ho.length;c++)Kt(ho[c],r);break;case"source":Kt("error",r);break;case"img":case"image":case"link":Kt("error",r),Kt("load",r);break;case"details":Kt("toggle",r);break;case"input":Kt("invalid",r),_m(r,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Kt("invalid",r);break;case"textarea":Kt("invalid",r),Tm(r,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||r.textContent===""+c||d.suppressHydrationWarning===!0||ky(r.textContent,c)?(d.popover!=null&&(Kt("beforetoggle",r),Kt("toggle",r)),d.onScroll!=null&&Kt("scroll",r),d.onScrollEnd!=null&&Kt("scrollend",r),d.onClick!=null&&(r.onclick=Oi),r=!0):r=!1,r||os(i,!0)}function dg(i){for(an=i.return;an;)switch(an.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:an=an.return}}function Br(i){if(i!==an)return!1;if(!te)return dg(i),te=!0,!1;var r=i.tag,c;if((c=r!==3&&r!==27)&&((c=r===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Td(i.type,i.memoizedProps)),c=!c),c&&Se&&os(i),dg(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Se=zy(i)}else if(r===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(317));Se=zy(i)}else r===27?(r=Se,As(i.type)?(i=Rd,Rd=null,Se=i):Se=r):Se=an?ti(i.stateNode.nextSibling):null;return!0}function Ys(){Se=an=null,te=!1}function ch(){var i=as;return i!==null&&(Cn===null?Cn=i:Cn.push.apply(Cn,i),as=null),i}function Ha(i){as===null?as=[i]:as.push(i)}var uh=_(null),qs=null,Fi=null;function ls(i,r,c){X(uh,r._currentValue),r._currentValue=c}function Ii(i){i._currentValue=uh.current,N(uh)}function hh(i,r,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,d!==null&&(d.childLanes|=r)):d!==null&&(d.childLanes&r)!==r&&(d.childLanes|=r),i===c)break;i=i.return}}function dh(i,r,c,d){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var v=g.dependencies;if(v!==null){var C=g.child;v=v.firstContext;t:for(;v!==null;){var P=v;v=g;for(var G=0;G<r.length;G++)if(P.context===r[G]){v.lanes|=c,P=v.alternate,P!==null&&(P.lanes|=c),hh(v.return,c,i),d||(C=null);break t}v=P.next}}else if(g.tag===18){if(C=g.return,C===null)throw Error(n(341));C.lanes|=c,v=C.alternate,v!==null&&(v.lanes|=c),hh(C,c,i),C=null}else C=g.child;if(C!==null)C.return=g;else for(C=g;C!==null;){if(C===i){C=null;break}if(g=C.sibling,g!==null){g.return=C.return,C=g;break}C=C.return}g=C}}function zr(i,r,c,d){i=null;for(var g=r,v=!1;g!==null;){if(!v){if((g.flags&524288)!==0)v=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var C=g.alternate;if(C===null)throw Error(n(387));if(C=C.memoizedProps,C!==null){var P=g.type;Nn(g.pendingProps.value,C.value)||(i!==null?i.push(P):i=[P])}}else if(g===pt.current){if(C=g.alternate,C===null)throw Error(n(387));C.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(bo):i=[bo])}g=g.return}i!==null&&dh(r,i,c,d),r.flags|=262144}function _l(i){for(i=i.firstContext;i!==null;){if(!Nn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function $s(i){qs=i,Fi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function on(i){return fg(qs,i)}function El(i,r){return qs===null&&$s(i),fg(i,r)}function fg(i,r){var c=r._currentValue;if(r={context:r,memoizedValue:c,next:null},Fi===null){if(i===null)throw Error(n(308));Fi=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else Fi=Fi.next=r;return c}var Ax=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){r.aborted=!0,i.forEach(function(c){return c()})}},Sx=a.unstable_scheduleCallback,xx=a.unstable_NormalPriority,Ie={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fh(){return{controller:new Ax,data:new Map,refCount:0}}function Ga(i){i.refCount--,i.refCount===0&&Sx(xx,function(){i.controller.abort()})}var Xa=null,ph=0,Fr=0,Ir=null;function _x(i,r){if(Xa===null){var c=Xa=[];ph=0,Fr=bd(),Ir={status:"pending",value:void 0,then:function(d){c.push(d)}}}return ph++,r.then(pg,pg),r}function pg(){if(--ph===0&&Xa!==null){Ir!==null&&(Ir.status="fulfilled");var i=Xa;Xa=null,Fr=0,Ir=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function Ex(i,r){var c=[],d={status:"pending",value:null,reason:null,then:function(g){c.push(g)}};return i.then(function(){d.status="fulfilled",d.value=r;for(var g=0;g<c.length;g++)(0,c[g])(r)},function(g){for(d.status="rejected",d.reason=g,g=0;g<c.length;g++)(0,c[g])(void 0)}),d}var mg=H.S;H.S=function(i,r){Qb=Et(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&_x(i,r),mg!==null&&mg(i,r)};var Ws=_(null);function mh(){var i=Ws.current;return i!==null?i:ve.pooledCache}function Tl(i,r){r===null?X(Ws,Ws.current):X(Ws,r.pool)}function gg(){var i=mh();return i===null?null:{parent:Ie._currentValue,pool:i}}var Ur=Error(n(460)),gh=Error(n(474)),Cl=Error(n(542)),kl={then:function(){}};function bg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function yg(i,r,c){switch(c=i[c],c===void 0?i.push(r):c!==r&&(r.then(Oi,Oi),r=c),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,wg(i),i;default:if(typeof r.status=="string")r.then(Oi,Oi);else{if(i=ve,i!==null&&100<i.shellSuspendCounter)throw Error(n(482));i=r,i.status="pending",i.then(function(d){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=d}},function(d){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=d}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,wg(i),i}throw Zs=r,Ur}}function Ks(i){try{var r=i._init;return r(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Zs=c,Ur):c}}var Zs=null;function vg(){if(Zs===null)throw Error(n(459));var i=Zs;return Zs=null,i}function wg(i){if(i===Ur||i===Cl)throw Error(n(483))}var jr=null,Ya=0;function Ml(i){var r=Ya;return Ya+=1,jr===null&&(jr=[]),yg(jr,i,r)}function qa(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Dl(i,r){throw r.$$typeof===b?Error(n(525)):(i=Object.prototype.toString.call(r),Error(n(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Ag(i){function r(J,Y){if(i){var et=J.deletions;et===null?(J.deletions=[Y],J.flags|=16):et.push(Y)}}function c(J,Y){if(!i)return null;for(;Y!==null;)r(J,Y),Y=Y.sibling;return null}function d(J){for(var Y=new Map;J!==null;)J.key!==null?Y.set(J.key,J):Y.set(J.index,J),J=J.sibling;return Y}function g(J,Y){return J=Bi(J,Y),J.index=0,J.sibling=null,J}function v(J,Y,et){return J.index=et,i?(et=J.alternate,et!==null?(et=et.index,et<Y?(J.flags|=67108866,Y):et):(J.flags|=67108866,Y)):(J.flags|=1048576,Y)}function C(J){return i&&J.alternate===null&&(J.flags|=67108866),J}function P(J,Y,et,bt){return Y===null||Y.tag!==6?(Y=sh(et,J.mode,bt),Y.return=J,Y):(Y=g(Y,et),Y.return=J,Y)}function G(J,Y,et,bt){var Bt=et.type;return Bt===w?mt(J,Y,et.props.children,bt,et.key):Y!==null&&(Y.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===z&&Ks(Bt)===Y.type)?(Y=g(Y,et.props),qa(Y,et),Y.return=J,Y):(Y=Sl(et.type,et.key,et.props,null,J.mode,bt),qa(Y,et),Y.return=J,Y)}function nt(J,Y,et,bt){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==et.containerInfo||Y.stateNode.implementation!==et.implementation?(Y=rh(et,J.mode,bt),Y.return=J,Y):(Y=g(Y,et.children||[]),Y.return=J,Y)}function mt(J,Y,et,bt,Bt){return Y===null||Y.tag!==7?(Y=Xs(et,J.mode,bt,Bt),Y.return=J,Y):(Y=g(Y,et),Y.return=J,Y)}function yt(J,Y,et){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=sh(""+Y,J.mode,et),Y.return=J,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return et=Sl(Y.type,Y.key,Y.props,null,J.mode,et),qa(et,Y),et.return=J,et;case A:return Y=rh(Y,J.mode,et),Y.return=J,Y;case z:return Y=Ks(Y),yt(J,Y,et)}if(tt(Y)||U(Y))return Y=Xs(Y,J.mode,et,null),Y.return=J,Y;if(typeof Y.then=="function")return yt(J,Ml(Y),et);if(Y.$$typeof===T)return yt(J,El(J,Y),et);Dl(J,Y)}return null}function rt(J,Y,et,bt){var Bt=Y!==null?Y.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Bt!==null?null:P(J,Y,""+et,bt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case y:return et.key===Bt?G(J,Y,et,bt):null;case A:return et.key===Bt?nt(J,Y,et,bt):null;case z:return et=Ks(et),rt(J,Y,et,bt)}if(tt(et)||U(et))return Bt!==null?null:mt(J,Y,et,bt,null);if(typeof et.then=="function")return rt(J,Y,Ml(et),bt);if(et.$$typeof===T)return rt(J,Y,El(J,et),bt);Dl(J,et)}return null}function ct(J,Y,et,bt,Bt){if(typeof bt=="string"&&bt!==""||typeof bt=="number"||typeof bt=="bigint")return J=J.get(et)||null,P(Y,J,""+bt,Bt);if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case y:return J=J.get(bt.key===null?et:bt.key)||null,G(Y,J,bt,Bt);case A:return J=J.get(bt.key===null?et:bt.key)||null,nt(Y,J,bt,Bt);case z:return bt=Ks(bt),ct(J,Y,et,bt,Bt)}if(tt(bt)||U(bt))return J=J.get(et)||null,mt(Y,J,bt,Bt,null);if(typeof bt.then=="function")return ct(J,Y,et,Ml(bt),Bt);if(bt.$$typeof===T)return ct(J,Y,et,El(Y,bt),Bt);Dl(Y,bt)}return null}function kt(J,Y,et,bt){for(var Bt=null,ie=null,Pt=Y,Yt=Y=0,Jt=null;Pt!==null&&Yt<et.length;Yt++){Pt.index>Yt?(Jt=Pt,Pt=null):Jt=Pt.sibling;var se=rt(J,Pt,et[Yt],bt);if(se===null){Pt===null&&(Pt=Jt);break}i&&Pt&&se.alternate===null&&r(J,Pt),Y=v(se,Y,Yt),ie===null?Bt=se:ie.sibling=se,ie=se,Pt=Jt}if(Yt===et.length)return c(J,Pt),te&&zi(J,Yt),Bt;if(Pt===null){for(;Yt<et.length;Yt++)Pt=yt(J,et[Yt],bt),Pt!==null&&(Y=v(Pt,Y,Yt),ie===null?Bt=Pt:ie.sibling=Pt,ie=Pt);return te&&zi(J,Yt),Bt}for(Pt=d(Pt);Yt<et.length;Yt++)Jt=ct(Pt,J,Yt,et[Yt],bt),Jt!==null&&(i&&Jt.alternate!==null&&Pt.delete(Jt.key===null?Yt:Jt.key),Y=v(Jt,Y,Yt),ie===null?Bt=Jt:ie.sibling=Jt,ie=Jt);return i&&Pt.forEach(function(Ts){return r(J,Ts)}),te&&zi(J,Yt),Bt}function Ft(J,Y,et,bt){if(et==null)throw Error(n(151));for(var Bt=null,ie=null,Pt=Y,Yt=Y=0,Jt=null,se=et.next();Pt!==null&&!se.done;Yt++,se=et.next()){Pt.index>Yt?(Jt=Pt,Pt=null):Jt=Pt.sibling;var Ts=rt(J,Pt,se.value,bt);if(Ts===null){Pt===null&&(Pt=Jt);break}i&&Pt&&Ts.alternate===null&&r(J,Pt),Y=v(Ts,Y,Yt),ie===null?Bt=Ts:ie.sibling=Ts,ie=Ts,Pt=Jt}if(se.done)return c(J,Pt),te&&zi(J,Yt),Bt;if(Pt===null){for(;!se.done;Yt++,se=et.next())se=yt(J,se.value,bt),se!==null&&(Y=v(se,Y,Yt),ie===null?Bt=se:ie.sibling=se,ie=se);return te&&zi(J,Yt),Bt}for(Pt=d(Pt);!se.done;Yt++,se=et.next())se=ct(Pt,J,Yt,se.value,bt),se!==null&&(i&&se.alternate!==null&&Pt.delete(se.key===null?Yt:se.key),Y=v(se,Y,Yt),ie===null?Bt=se:ie.sibling=se,ie=se);return i&&Pt.forEach(function(B_){return r(J,B_)}),te&&zi(J,Yt),Bt}function be(J,Y,et,bt){if(typeof et=="object"&&et!==null&&et.type===w&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case y:t:{for(var Bt=et.key;Y!==null;){if(Y.key===Bt){if(Bt=et.type,Bt===w){if(Y.tag===7){c(J,Y.sibling),bt=g(Y,et.props.children),bt.return=J,J=bt;break t}}else if(Y.elementType===Bt||typeof Bt=="object"&&Bt!==null&&Bt.$$typeof===z&&Ks(Bt)===Y.type){c(J,Y.sibling),bt=g(Y,et.props),qa(bt,et),bt.return=J,J=bt;break t}c(J,Y);break}else r(J,Y);Y=Y.sibling}et.type===w?(bt=Xs(et.props.children,J.mode,bt,et.key),bt.return=J,J=bt):(bt=Sl(et.type,et.key,et.props,null,J.mode,bt),qa(bt,et),bt.return=J,J=bt)}return C(J);case A:t:{for(Bt=et.key;Y!==null;){if(Y.key===Bt)if(Y.tag===4&&Y.stateNode.containerInfo===et.containerInfo&&Y.stateNode.implementation===et.implementation){c(J,Y.sibling),bt=g(Y,et.children||[]),bt.return=J,J=bt;break t}else{c(J,Y);break}else r(J,Y);Y=Y.sibling}bt=rh(et,J.mode,bt),bt.return=J,J=bt}return C(J);case z:return et=Ks(et),be(J,Y,et,bt)}if(tt(et))return kt(J,Y,et,bt);if(U(et)){if(Bt=U(et),typeof Bt!="function")throw Error(n(150));return et=Bt.call(et),Ft(J,Y,et,bt)}if(typeof et.then=="function")return be(J,Y,Ml(et),bt);if(et.$$typeof===T)return be(J,Y,El(J,et),bt);Dl(J,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Y!==null&&Y.tag===6?(c(J,Y.sibling),bt=g(Y,et),bt.return=J,J=bt):(c(J,Y),bt=sh(et,J.mode,bt),bt.return=J,J=bt),C(J)):c(J,Y)}return function(J,Y,et,bt){try{Ya=0;var Bt=be(J,Y,et,bt);return jr=null,Bt}catch(Pt){if(Pt===Ur||Pt===Cl)throw Pt;var ie=Pn(29,Pt,null,J.mode);return ie.lanes=bt,ie.return=J,ie}}}var Qs=Ag(!0),Sg=Ag(!1),cs=!1;function bh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yh(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function us(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function hs(i,r,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(ae&2)!==0){var g=d.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),d.pending=r,r=Al(i),rg(i,null,c),r}return wl(i,d,r,c),Al(i)}function $a(i,r,c){if(r=r.updateQueue,r!==null&&(r=r.shared,(c&4194048)!==0)){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,fm(i,c)}}function vh(i,r){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var g=null,v=null;if(c=c.firstBaseUpdate,c!==null){do{var C={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};v===null?g=v=C:v=v.next=C,c=c.next}while(c!==null);v===null?g=v=r:v=v.next=r}else g=v=r;c={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=r:i.next=r,c.lastBaseUpdate=r}var wh=!1;function Wa(){if(wh){var i=Ir;if(i!==null)throw i}}function Ka(i,r,c,d){wh=!1;var g=i.updateQueue;cs=!1;var v=g.firstBaseUpdate,C=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var G=P,nt=G.next;G.next=null,C===null?v=nt:C.next=nt,C=G;var mt=i.alternate;mt!==null&&(mt=mt.updateQueue,P=mt.lastBaseUpdate,P!==C&&(P===null?mt.firstBaseUpdate=nt:P.next=nt,mt.lastBaseUpdate=G))}if(v!==null){var yt=g.baseState;C=0,mt=nt=G=null,P=v;do{var rt=P.lane&-536870913,ct=rt!==P.lane;if(ct?(Qt&rt)===rt:(d&rt)===rt){rt!==0&&rt===Fr&&(wh=!0),mt!==null&&(mt=mt.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});t:{var kt=i,Ft=P;rt=r;var be=c;switch(Ft.tag){case 1:if(kt=Ft.payload,typeof kt=="function"){yt=kt.call(be,yt,rt);break t}yt=kt;break t;case 3:kt.flags=kt.flags&-65537|128;case 0:if(kt=Ft.payload,rt=typeof kt=="function"?kt.call(be,yt,rt):kt,rt==null)break t;yt=m({},yt,rt);break t;case 2:cs=!0}}rt=P.callback,rt!==null&&(i.flags|=64,ct&&(i.flags|=8192),ct=g.callbacks,ct===null?g.callbacks=[rt]:ct.push(rt))}else ct={lane:rt,tag:P.tag,payload:P.payload,callback:P.callback,next:null},mt===null?(nt=mt=ct,G=yt):mt=mt.next=ct,C|=rt;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;ct=P,P=ct.next,ct.next=null,g.lastBaseUpdate=ct,g.shared.pending=null}}while(!0);mt===null&&(G=yt),g.baseState=G,g.firstBaseUpdate=nt,g.lastBaseUpdate=mt,v===null&&(g.shared.lanes=0),gs|=C,i.lanes=C,i.memoizedState=yt}}function xg(i,r){if(typeof i!="function")throw Error(n(191,i));i.call(r)}function _g(i,r){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)xg(c[i],r)}var Vr=_(null),Rl=_(0);function Eg(i,r){i=$i,X(Rl,i),X(Vr,r),$i=i|r.baseLanes}function Ah(){X(Rl,$i),X(Vr,Vr.current)}function Sh(){$i=Rl.current,N(Vr),N(Rl)}var On=_(null),Jn=null;function ds(i){var r=i.alternate;X(Le,Le.current&1),X(On,i),Jn===null&&(r===null||Vr.current!==null||r.memoizedState!==null)&&(Jn=i)}function xh(i){X(Le,Le.current),X(On,i),Jn===null&&(Jn=i)}function Tg(i){i.tag===22?(X(Le,Le.current),X(On,i),Jn===null&&(Jn=i)):fs()}function fs(){X(Le,Le.current),X(On,On.current)}function Ln(i){N(On),Jn===i&&(Jn=null),N(Le)}var Le=_(0);function Nl(i){for(var r=i;r!==null;){if(r.tag===13){var c=r.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Md(c)||Dd(c)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ui=0,Gt=null,me=null,Ue=null,Pl=!1,Hr=!1,Js=!1,Ol=0,Za=0,Gr=null,Tx=0;function Re(){throw Error(n(321))}function _h(i,r){if(r===null)return!1;for(var c=0;c<r.length&&c<i.length;c++)if(!Nn(i[c],r[c]))return!1;return!0}function Eh(i,r,c,d,g,v){return Ui=v,Gt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=i===null||i.memoizedState===null?cb:Uh,Js=!1,v=c(d,g),Js=!1,Hr&&(v=kg(r,c,d,g)),Cg(i),v}function Cg(i){H.H=to;var r=me!==null&&me.next!==null;if(Ui=0,Ue=me=Gt=null,Pl=!1,Za=0,Gr=null,r)throw Error(n(300));i===null||je||(i=i.dependencies,i!==null&&_l(i)&&(je=!0))}function kg(i,r,c,d){Gt=i;var g=0;do{if(Hr&&(Gr=null),Za=0,Hr=!1,25<=g)throw Error(n(301));if(g+=1,Ue=me=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}H.H=ub,v=r(c,d)}while(Hr);return v}function Cx(){var i=H.H,r=i.useState()[0];return r=typeof r.then=="function"?Qa(r):r,i=i.useState()[0],(me!==null?me.memoizedState:null)!==i&&(Gt.flags|=1024),r}function Th(){var i=Ol!==0;return Ol=0,i}function Ch(i,r,c){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~c}function kh(i){if(Pl){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Pl=!1}Ui=0,Ue=me=Gt=null,Hr=!1,Za=Ol=0,Gr=null}function bn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Gt.memoizedState=Ue=i:Ue=Ue.next=i,Ue}function Be(){if(me===null){var i=Gt.alternate;i=i!==null?i.memoizedState:null}else i=me.next;var r=Ue===null?Gt.memoizedState:Ue.next;if(r!==null)Ue=r,me=i;else{if(i===null)throw Gt.alternate===null?Error(n(467)):Error(n(310));me=i,i={memoizedState:me.memoizedState,baseState:me.baseState,baseQueue:me.baseQueue,queue:me.queue,next:null},Ue===null?Gt.memoizedState=Ue=i:Ue=Ue.next=i}return Ue}function Ll(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qa(i){var r=Za;return Za+=1,Gr===null&&(Gr=[]),i=yg(Gr,i,r),r=Gt,(Ue===null?r.memoizedState:Ue.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?cb:Uh),i}function Bl(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Qa(i);if(i.$$typeof===T)return on(i)}throw Error(n(438,String(i)))}function Mh(i){var r=null,c=Gt.updateQueue;if(c!==null&&(r=c.memoCache),r==null){var d=Gt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(r={data:d.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),c===null&&(c=Ll(),Gt.updateQueue=c),c.memoCache=r,c=r.data[r.index],c===void 0)for(c=r.data[r.index]=Array(i),d=0;d<i;d++)c[d]=Q;return r.index++,c}function ji(i,r){return typeof r=="function"?r(i):r}function zl(i){var r=Be();return Dh(r,me,i)}function Dh(i,r,c){var d=i.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=c;var g=i.baseQueue,v=d.pending;if(v!==null){if(g!==null){var C=g.next;g.next=v.next,v.next=C}r.baseQueue=g=v,d.pending=null}if(v=i.baseState,g===null)i.memoizedState=v;else{r=g.next;var P=C=null,G=null,nt=r,mt=!1;do{var yt=nt.lane&-536870913;if(yt!==nt.lane?(Qt&yt)===yt:(Ui&yt)===yt){var rt=nt.revertLane;if(rt===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null}),yt===Fr&&(mt=!0);else if((Ui&rt)===rt){nt=nt.next,rt===Fr&&(mt=!0);continue}else yt={lane:0,revertLane:nt.revertLane,gesture:null,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},G===null?(P=G=yt,C=v):G=G.next=yt,Gt.lanes|=rt,gs|=rt;yt=nt.action,Js&&c(v,yt),v=nt.hasEagerState?nt.eagerState:c(v,yt)}else rt={lane:yt,revertLane:nt.revertLane,gesture:nt.gesture,action:nt.action,hasEagerState:nt.hasEagerState,eagerState:nt.eagerState,next:null},G===null?(P=G=rt,C=v):G=G.next=rt,Gt.lanes|=yt,gs|=yt;nt=nt.next}while(nt!==null&&nt!==r);if(G===null?C=v:G.next=P,!Nn(v,i.memoizedState)&&(je=!0,mt&&(c=Ir,c!==null)))throw c;i.memoizedState=v,i.baseState=C,i.baseQueue=G,d.lastRenderedState=v}return g===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function Rh(i){var r=Be(),c=r.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=i;var d=c.dispatch,g=c.pending,v=r.memoizedState;if(g!==null){c.pending=null;var C=g=g.next;do v=i(v,C.action),C=C.next;while(C!==g);Nn(v,r.memoizedState)||(je=!0),r.memoizedState=v,r.baseQueue===null&&(r.baseState=v),c.lastRenderedState=v}return[v,d]}function Mg(i,r,c){var d=Gt,g=Be(),v=te;if(v){if(c===void 0)throw Error(n(407));c=c()}else c=r();var C=!Nn((me||g).memoizedState,c);if(C&&(g.memoizedState=c,je=!0),g=g.queue,Oh(Ng.bind(null,d,g,i),[i]),g.getSnapshot!==r||C||Ue!==null&&Ue.memoizedState.tag&1){if(d.flags|=2048,Xr(9,{destroy:void 0},Rg.bind(null,d,g,c,r),null),ve===null)throw Error(n(349));v||(Ui&127)!==0||Dg(d,r,c)}return c}function Dg(i,r,c){i.flags|=16384,i={getSnapshot:r,value:c},r=Gt.updateQueue,r===null?(r=Ll(),Gt.updateQueue=r,r.stores=[i]):(c=r.stores,c===null?r.stores=[i]:c.push(i))}function Rg(i,r,c,d){r.value=c,r.getSnapshot=d,Pg(r)&&Og(i)}function Ng(i,r,c){return c(function(){Pg(r)&&Og(i)})}function Pg(i){var r=i.getSnapshot;i=i.value;try{var c=r();return!Nn(i,c)}catch{return!0}}function Og(i){var r=Gs(i,2);r!==null&&kn(r,i,2)}function Nh(i){var r=bn();if(typeof i=="function"){var c=i;if(i=c(),Js){Gn(!0);try{c()}finally{Gn(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:i},r}function Lg(i,r,c,d){return i.baseState=c,Dh(i,me,typeof d=="function"?d:ji)}function kx(i,r,c,d,g){if(Ul(i))throw Error(n(485));if(i=r.action,i!==null){var v={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){v.listeners.push(C)}};H.T!==null?c(!0):v.isTransition=!1,d(v),c=r.pending,c===null?(v.next=r.pending=v,Bg(r,v)):(v.next=c.next,r.pending=c.next=v)}}function Bg(i,r){var c=r.action,d=r.payload,g=i.state;if(r.isTransition){var v=H.T,C={};H.T=C;try{var P=c(g,d),G=H.S;G!==null&&G(C,P),zg(i,r,P)}catch(nt){Ph(i,r,nt)}finally{v!==null&&C.types!==null&&(v.types=C.types),H.T=v}}else try{v=c(g,d),zg(i,r,v)}catch(nt){Ph(i,r,nt)}}function zg(i,r,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Fg(i,r,d)},function(d){return Ph(i,r,d)}):Fg(i,r,c)}function Fg(i,r,c){r.status="fulfilled",r.value=c,Ig(r),i.state=c,r=i.pending,r!==null&&(c=r.next,c===r?i.pending=null:(c=c.next,r.next=c,Bg(i,c)))}function Ph(i,r,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do r.status="rejected",r.reason=c,Ig(r),r=r.next;while(r!==d)}i.action=null}function Ig(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Ug(i,r){return r}function jg(i,r){if(te){var c=ve.formState;if(c!==null){t:{var d=Gt;if(te){if(Se){e:{for(var g=Se,v=Qn;g.nodeType!==8;){if(!v){g=null;break e}if(g=ti(g.nextSibling),g===null){g=null;break e}}v=g.data,g=v==="F!"||v==="F"?g:null}if(g){Se=ti(g.nextSibling),d=g.data==="F!";break t}}os(d)}d=!1}d&&(r=c[0])}}return c=bn(),c.memoizedState=c.baseState=r,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ug,lastRenderedState:r},c.queue=d,c=ab.bind(null,Gt,d),d.dispatch=c,d=Nh(!1),v=Ih.bind(null,Gt,!1,d.queue),d=bn(),g={state:r,dispatch:null,action:i,pending:null},d.queue=g,c=kx.bind(null,Gt,g,v,c),g.dispatch=c,d.memoizedState=i,[r,c,!1]}function Vg(i){var r=Be();return Hg(r,me,i)}function Hg(i,r,c){if(r=Dh(i,r,Ug)[0],i=zl(ji)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var d=Qa(r)}catch(C){throw C===Ur?Cl:C}else d=r;r=Be();var g=r.queue,v=g.dispatch;return c!==r.memoizedState&&(Gt.flags|=2048,Xr(9,{destroy:void 0},Mx.bind(null,g,c),null)),[d,v,i]}function Mx(i,r){i.action=r}function Gg(i){var r=Be(),c=me;if(c!==null)return Hg(r,c,i);Be(),r=r.memoizedState,c=Be();var d=c.queue.dispatch;return c.memoizedState=i,[r,d,!1]}function Xr(i,r,c,d){return i={tag:i,create:c,deps:d,inst:r,next:null},r=Gt.updateQueue,r===null&&(r=Ll(),Gt.updateQueue=r),c=r.lastEffect,c===null?r.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,r.lastEffect=i),i}function Xg(){return Be().memoizedState}function Fl(i,r,c,d){var g=bn();Gt.flags|=i,g.memoizedState=Xr(1|r,{destroy:void 0},c,d===void 0?null:d)}function Il(i,r,c,d){var g=Be();d=d===void 0?null:d;var v=g.memoizedState.inst;me!==null&&d!==null&&_h(d,me.memoizedState.deps)?g.memoizedState=Xr(r,v,c,d):(Gt.flags|=i,g.memoizedState=Xr(1|r,v,c,d))}function Yg(i,r){Fl(8390656,8,i,r)}function Oh(i,r){Il(2048,8,i,r)}function Dx(i){Gt.flags|=4;var r=Gt.updateQueue;if(r===null)r=Ll(),Gt.updateQueue=r,r.events=[i];else{var c=r.events;c===null?r.events=[i]:c.push(i)}}function qg(i){var r=Be().memoizedState;return Dx({ref:r,nextImpl:i}),function(){if((ae&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function $g(i,r){return Il(4,2,i,r)}function Wg(i,r){return Il(4,4,i,r)}function Kg(i,r){if(typeof r=="function"){i=i();var c=r(i);return function(){typeof c=="function"?c():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Zg(i,r,c){c=c!=null?c.concat([i]):null,Il(4,4,Kg.bind(null,r,i),c)}function Lh(){}function Qg(i,r){var c=Be();r=r===void 0?null:r;var d=c.memoizedState;return r!==null&&_h(r,d[1])?d[0]:(c.memoizedState=[i,r],i)}function Jg(i,r){var c=Be();r=r===void 0?null:r;var d=c.memoizedState;if(r!==null&&_h(r,d[1]))return d[0];if(d=i(),Js){Gn(!0);try{i()}finally{Gn(!1)}}return c.memoizedState=[d,r],d}function Bh(i,r,c){return c===void 0||(Ui&1073741824)!==0&&(Qt&261930)===0?i.memoizedState=r:(i.memoizedState=c,i=ty(),Gt.lanes|=i,gs|=i,c)}function tb(i,r,c,d){return Nn(c,r)?c:Vr.current!==null?(i=Bh(i,c,d),Nn(i,r)||(je=!0),i):(Ui&42)===0||(Ui&1073741824)!==0&&(Qt&261930)===0?(je=!0,i.memoizedState=c):(i=ty(),Gt.lanes|=i,gs|=i,r)}function eb(i,r,c,d,g){var v=j.p;j.p=v!==0&&8>v?v:8;var C=H.T,P={};H.T=P,Ih(i,!1,r,c);try{var G=g(),nt=H.S;if(nt!==null&&nt(P,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var mt=Ex(G,d);Ja(i,r,mt,Fn(i))}else Ja(i,r,d,Fn(i))}catch(yt){Ja(i,r,{then:function(){},status:"rejected",reason:yt},Fn())}finally{j.p=v,C!==null&&P.types!==null&&(C.types=P.types),H.T=C}}function Rx(){}function zh(i,r,c,d){if(i.tag!==5)throw Error(n(476));var g=nb(i).queue;eb(i,g,r,lt,c===null?Rx:function(){return ib(i),c(d)})}function nb(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:lt},next:null};var c={};return r.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:c},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function ib(i){var r=nb(i);r.next===null&&(r=i.alternate.memoizedState),Ja(i,r.next.queue,{},Fn())}function Fh(){return on(bo)}function sb(){return Be().memoizedState}function rb(){return Be().memoizedState}function Nx(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var c=Fn();i=us(c);var d=hs(r,i,c);d!==null&&(kn(d,r,c),$a(d,r,c)),r={cache:fh()},i.payload=r;return}r=r.return}}function Px(i,r,c){var d=Fn();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ul(i)?ob(r,c):(c=nh(i,r,c,d),c!==null&&(kn(c,i,d),lb(c,r,d)))}function ab(i,r,c){var d=Fn();Ja(i,r,c,d)}function Ja(i,r,c,d){var g={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ul(i))ob(r,g);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=r.lastRenderedReducer,v!==null))try{var C=r.lastRenderedState,P=v(C,c);if(g.hasEagerState=!0,g.eagerState=P,Nn(P,C))return wl(i,r,g,0),ve===null&&vl(),!1}catch{}if(c=nh(i,r,g,d),c!==null)return kn(c,i,d),lb(c,r,d),!0}return!1}function Ih(i,r,c,d){if(d={lane:2,revertLane:bd(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ul(i)){if(r)throw Error(n(479))}else r=nh(i,c,d,2),r!==null&&kn(r,i,2)}function Ul(i){var r=i.alternate;return i===Gt||r!==null&&r===Gt}function ob(i,r){Hr=Pl=!0;var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}function lb(i,r,c){if((c&4194048)!==0){var d=r.lanes;d&=i.pendingLanes,c|=d,r.lanes=c,fm(i,c)}}var to={readContext:on,use:Bl,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useLayoutEffect:Re,useInsertionEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useSyncExternalStore:Re,useId:Re,useHostTransitionStatus:Re,useFormState:Re,useActionState:Re,useOptimistic:Re,useMemoCache:Re,useCacheRefresh:Re};to.useEffectEvent=Re;var cb={readContext:on,use:Bl,useCallback:function(i,r){return bn().memoizedState=[i,r===void 0?null:r],i},useContext:on,useEffect:Yg,useImperativeHandle:function(i,r,c){c=c!=null?c.concat([i]):null,Fl(4194308,4,Kg.bind(null,r,i),c)},useLayoutEffect:function(i,r){return Fl(4194308,4,i,r)},useInsertionEffect:function(i,r){Fl(4,2,i,r)},useMemo:function(i,r){var c=bn();r=r===void 0?null:r;var d=i();if(Js){Gn(!0);try{i()}finally{Gn(!1)}}return c.memoizedState=[d,r],d},useReducer:function(i,r,c){var d=bn();if(c!==void 0){var g=c(r);if(Js){Gn(!0);try{c(r)}finally{Gn(!1)}}}else g=r;return d.memoizedState=d.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},d.queue=i,i=i.dispatch=Px.bind(null,Gt,i),[d.memoizedState,i]},useRef:function(i){var r=bn();return i={current:i},r.memoizedState=i},useState:function(i){i=Nh(i);var r=i.queue,c=ab.bind(null,Gt,r);return r.dispatch=c,[i.memoizedState,c]},useDebugValue:Lh,useDeferredValue:function(i,r){var c=bn();return Bh(c,i,r)},useTransition:function(){var i=Nh(!1);return i=eb.bind(null,Gt,i.queue,!0,!1),bn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,c){var d=Gt,g=bn();if(te){if(c===void 0)throw Error(n(407));c=c()}else{if(c=r(),ve===null)throw Error(n(349));(Qt&127)!==0||Dg(d,r,c)}g.memoizedState=c;var v={value:c,getSnapshot:r};return g.queue=v,Yg(Ng.bind(null,d,v,i),[i]),d.flags|=2048,Xr(9,{destroy:void 0},Rg.bind(null,d,v,c,r),null),c},useId:function(){var i=bn(),r=ve.identifierPrefix;if(te){var c=vi,d=yi;c=(d&~(1<<32-Ce(d)-1)).toString(32)+c,r="_"+r+"R_"+c,c=Ol++,0<c&&(r+="H"+c.toString(32)),r+="_"}else c=Tx++,r="_"+r+"r_"+c.toString(32)+"_";return i.memoizedState=r},useHostTransitionStatus:Fh,useFormState:jg,useActionState:jg,useOptimistic:function(i){var r=bn();r.memoizedState=r.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=c,r=Ih.bind(null,Gt,!0,c),c.dispatch=r,[i,r]},useMemoCache:Mh,useCacheRefresh:function(){return bn().memoizedState=Nx.bind(null,Gt)},useEffectEvent:function(i){var r=bn(),c={impl:i};return r.memoizedState=c,function(){if((ae&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},Uh={readContext:on,use:Bl,useCallback:Qg,useContext:on,useEffect:Oh,useImperativeHandle:Zg,useInsertionEffect:$g,useLayoutEffect:Wg,useMemo:Jg,useReducer:zl,useRef:Xg,useState:function(){return zl(ji)},useDebugValue:Lh,useDeferredValue:function(i,r){var c=Be();return tb(c,me.memoizedState,i,r)},useTransition:function(){var i=zl(ji)[0],r=Be().memoizedState;return[typeof i=="boolean"?i:Qa(i),r]},useSyncExternalStore:Mg,useId:sb,useHostTransitionStatus:Fh,useFormState:Vg,useActionState:Vg,useOptimistic:function(i,r){var c=Be();return Lg(c,me,i,r)},useMemoCache:Mh,useCacheRefresh:rb};Uh.useEffectEvent=qg;var ub={readContext:on,use:Bl,useCallback:Qg,useContext:on,useEffect:Oh,useImperativeHandle:Zg,useInsertionEffect:$g,useLayoutEffect:Wg,useMemo:Jg,useReducer:Rh,useRef:Xg,useState:function(){return Rh(ji)},useDebugValue:Lh,useDeferredValue:function(i,r){var c=Be();return me===null?Bh(c,i,r):tb(c,me.memoizedState,i,r)},useTransition:function(){var i=Rh(ji)[0],r=Be().memoizedState;return[typeof i=="boolean"?i:Qa(i),r]},useSyncExternalStore:Mg,useId:sb,useHostTransitionStatus:Fh,useFormState:Gg,useActionState:Gg,useOptimistic:function(i,r){var c=Be();return me!==null?Lg(c,me,i,r):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Mh,useCacheRefresh:rb};ub.useEffectEvent=qg;function jh(i,r,c,d){r=i.memoizedState,c=c(d,r),c=c==null?r:m({},r,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var Vh={enqueueSetState:function(i,r,c){i=i._reactInternals;var d=Fn(),g=us(d);g.payload=r,c!=null&&(g.callback=c),r=hs(i,g,d),r!==null&&(kn(r,i,d),$a(r,i,d))},enqueueReplaceState:function(i,r,c){i=i._reactInternals;var d=Fn(),g=us(d);g.tag=1,g.payload=r,c!=null&&(g.callback=c),r=hs(i,g,d),r!==null&&(kn(r,i,d),$a(r,i,d))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var c=Fn(),d=us(c);d.tag=2,r!=null&&(d.callback=r),r=hs(i,d,c),r!==null&&(kn(r,i,c),$a(r,i,c))}};function hb(i,r,c,d,g,v,C){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,v,C):r.prototype&&r.prototype.isPureReactComponent?!Ua(c,d)||!Ua(g,v):!0}function db(i,r,c,d){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(c,d),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(c,d),r.state!==i&&Vh.enqueueReplaceState(r,r.state,null)}function tr(i,r){var c=r;if("ref"in r){c={};for(var d in r)d!=="ref"&&(c[d]=r[d])}if(i=i.defaultProps){c===r&&(c=m({},c));for(var g in i)c[g]===void 0&&(c[g]=i[g])}return c}function fb(i){yl(i)}function pb(i){console.error(i)}function mb(i){yl(i)}function jl(i,r){try{var c=i.onUncaughtError;c(r.value,{componentStack:r.stack})}catch(d){setTimeout(function(){throw d})}}function gb(i,r,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Hh(i,r,c){return c=us(c),c.tag=3,c.payload={element:null},c.callback=function(){jl(i,r)},c}function bb(i){return i=us(i),i.tag=3,i}function yb(i,r,c,d){var g=c.type.getDerivedStateFromError;if(typeof g=="function"){var v=d.value;i.payload=function(){return g(v)},i.callback=function(){gb(r,c,d)}}var C=c.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(i.callback=function(){gb(r,c,d),typeof g!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var P=d.stack;this.componentDidCatch(d.value,{componentStack:P!==null?P:""})})}function Ox(i,r,c,d,g){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(r=c.alternate,r!==null&&zr(r,c,g,!0),c=On.current,c!==null){switch(c.tag){case 31:case 13:return Jn===null?Jl():c.alternate===null&&Ne===0&&(Ne=3),c.flags&=-257,c.flags|=65536,c.lanes=g,d===kl?c.flags|=16384:(r=c.updateQueue,r===null?c.updateQueue=new Set([d]):r.add(d),pd(i,d,g)),!1;case 22:return c.flags|=65536,d===kl?c.flags|=16384:(r=c.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=r):(c=r.retryQueue,c===null?r.retryQueue=new Set([d]):c.add(d)),pd(i,d,g)),!1}throw Error(n(435,c.tag))}return pd(i,d,g),Jl(),!1}if(te)return r=On.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,d!==lh&&(i=Error(n(422),{cause:d}),Ha(Wn(i,c)))):(d!==lh&&(r=Error(n(423),{cause:d}),Ha(Wn(r,c))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,d=Wn(d,c),g=Hh(i.stateNode,d,g),vh(i,g),Ne!==4&&(Ne=2)),!1;var v=Error(n(520),{cause:d});if(v=Wn(v,c),lo===null?lo=[v]:lo.push(v),Ne!==4&&(Ne=2),r===null)return!0;d=Wn(d,c),c=r;do{switch(c.tag){case 3:return c.flags|=65536,i=g&-g,c.lanes|=i,i=Hh(c.stateNode,d,i),vh(c,i),!1;case 1:if(r=c.type,v=c.stateNode,(c.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(bs===null||!bs.has(v))))return c.flags|=65536,g&=-g,c.lanes|=g,g=bb(g),yb(g,i,c,d),vh(c,g),!1}c=c.return}while(c!==null);return!1}var Gh=Error(n(461)),je=!1;function ln(i,r,c,d){r.child=i===null?Sg(r,null,c,d):Qs(r,i.child,c,d)}function vb(i,r,c,d,g){c=c.render;var v=r.ref;if("ref"in d){var C={};for(var P in d)P!=="ref"&&(C[P]=d[P])}else C=d;return $s(r),d=Eh(i,r,c,C,v,g),P=Th(),i!==null&&!je?(Ch(i,r,g),Vi(i,r,g)):(te&&P&&ah(r),r.flags|=1,ln(i,r,d,g),r.child)}function wb(i,r,c,d,g){if(i===null){var v=c.type;return typeof v=="function"&&!ih(v)&&v.defaultProps===void 0&&c.compare===null?(r.tag=15,r.type=v,Ab(i,r,v,d,g)):(i=Sl(c.type,null,d,r,r.mode,g),i.ref=r.ref,i.return=r,r.child=i)}if(v=i.child,!Qh(i,g)){var C=v.memoizedProps;if(c=c.compare,c=c!==null?c:Ua,c(C,d)&&i.ref===r.ref)return Vi(i,r,g)}return r.flags|=1,i=Bi(v,d),i.ref=r.ref,i.return=r,r.child=i}function Ab(i,r,c,d,g){if(i!==null){var v=i.memoizedProps;if(Ua(v,d)&&i.ref===r.ref)if(je=!1,r.pendingProps=d=v,Qh(i,g))(i.flags&131072)!==0&&(je=!0);else return r.lanes=i.lanes,Vi(i,r,g)}return Xh(i,r,c,d,g)}function Sb(i,r,c,d){var g=d.children,v=i!==null?i.memoizedState:null;if(i===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((r.flags&128)!==0){if(v=v!==null?v.baseLanes|c:c,i!==null){for(d=r.child=i.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~v}else d=0,r.child=null;return xb(i,r,v,c,d)}if((c&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Tl(r,v!==null?v.cachePool:null),v!==null?Eg(r,v):Ah(),Tg(r);else return d=r.lanes=536870912,xb(i,r,v!==null?v.baseLanes|c:c,c,d)}else v!==null?(Tl(r,v.cachePool),Eg(r,v),fs(),r.memoizedState=null):(i!==null&&Tl(r,null),Ah(),fs());return ln(i,r,g,c),r.child}function eo(i,r){return i!==null&&i.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function xb(i,r,c,d,g){var v=mh();return v=v===null?null:{parent:Ie._currentValue,pool:v},r.memoizedState={baseLanes:c,cachePool:v},i!==null&&Tl(r,null),Ah(),Tg(r),i!==null&&zr(i,r,d,!0),r.childLanes=g,null}function Vl(i,r){return r=Gl({mode:r.mode,children:r.children},i.mode),r.ref=i.ref,i.child=r,r.return=i,r}function _b(i,r,c){return Qs(r,i.child,null,c),i=Vl(r,r.pendingProps),i.flags|=2,Ln(r),r.memoizedState=null,i}function Lx(i,r,c){var d=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,i===null){if(te){if(d.mode==="hidden")return i=Vl(r,d),r.lanes=536870912,eo(null,i);if(xh(r),(i=Se)?(i=By(i,Qn),i=i!==null&&i.data==="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:rs!==null?{id:yi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},c=og(i),c.return=r,r.child=c,an=r,Se=null)):i=null,i===null)throw os(r);return r.lanes=536870912,null}return Vl(r,d)}var v=i.memoizedState;if(v!==null){var C=v.dehydrated;if(xh(r),g)if(r.flags&256)r.flags&=-257,r=_b(i,r,c);else if(r.memoizedState!==null)r.child=i.child,r.flags|=128,r=null;else throw Error(n(558));else if(je||zr(i,r,c,!1),g=(c&i.childLanes)!==0,je||g){if(d=ve,d!==null&&(C=pm(d,c),C!==0&&C!==v.retryLane))throw v.retryLane=C,Gs(i,C),kn(d,i,C),Gh;Jl(),r=_b(i,r,c)}else i=v.treeContext,Se=ti(C.nextSibling),an=r,te=!0,as=null,Qn=!1,i!==null&&ug(r,i),r=Vl(r,d),r.flags|=4096;return r}return i=Bi(i.child,{mode:d.mode,children:d.children}),i.ref=r.ref,r.child=i,i.return=r,i}function Hl(i,r){var c=r.ref;if(c===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(i===null||i.ref!==c)&&(r.flags|=4194816)}}function Xh(i,r,c,d,g){return $s(r),c=Eh(i,r,c,d,void 0,g),d=Th(),i!==null&&!je?(Ch(i,r,g),Vi(i,r,g)):(te&&d&&ah(r),r.flags|=1,ln(i,r,c,g),r.child)}function Eb(i,r,c,d,g,v){return $s(r),r.updateQueue=null,c=kg(r,d,c,g),Cg(i),d=Th(),i!==null&&!je?(Ch(i,r,v),Vi(i,r,v)):(te&&d&&ah(r),r.flags|=1,ln(i,r,c,v),r.child)}function Tb(i,r,c,d,g){if($s(r),r.stateNode===null){var v=Pr,C=c.contextType;typeof C=="object"&&C!==null&&(v=on(C)),v=new c(d,v),r.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Vh,r.stateNode=v,v._reactInternals=r,v=r.stateNode,v.props=d,v.state=r.memoizedState,v.refs={},bh(r),C=c.contextType,v.context=typeof C=="object"&&C!==null?on(C):Pr,v.state=r.memoizedState,C=c.getDerivedStateFromProps,typeof C=="function"&&(jh(r,c,C,d),v.state=r.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(C=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),C!==v.state&&Vh.enqueueReplaceState(v,v.state,null),Ka(r,d,v,g),Wa(),v.state=r.memoizedState),typeof v.componentDidMount=="function"&&(r.flags|=4194308),d=!0}else if(i===null){v=r.stateNode;var P=r.memoizedProps,G=tr(c,P);v.props=G;var nt=v.context,mt=c.contextType;C=Pr,typeof mt=="object"&&mt!==null&&(C=on(mt));var yt=c.getDerivedStateFromProps;mt=typeof yt=="function"||typeof v.getSnapshotBeforeUpdate=="function",P=r.pendingProps!==P,mt||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(P||nt!==C)&&db(r,v,d,C),cs=!1;var rt=r.memoizedState;v.state=rt,Ka(r,d,v,g),Wa(),nt=r.memoizedState,P||rt!==nt||cs?(typeof yt=="function"&&(jh(r,c,yt,d),nt=r.memoizedState),(G=cs||hb(r,c,G,d,rt,nt,C))?(mt||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(r.flags|=4194308)):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=d,r.memoizedState=nt),v.props=d,v.state=nt,v.context=C,d=G):(typeof v.componentDidMount=="function"&&(r.flags|=4194308),d=!1)}else{v=r.stateNode,yh(i,r),C=r.memoizedProps,mt=tr(c,C),v.props=mt,yt=r.pendingProps,rt=v.context,nt=c.contextType,G=Pr,typeof nt=="object"&&nt!==null&&(G=on(nt)),P=c.getDerivedStateFromProps,(nt=typeof P=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C!==yt||rt!==G)&&db(r,v,d,G),cs=!1,rt=r.memoizedState,v.state=rt,Ka(r,d,v,g),Wa();var ct=r.memoizedState;C!==yt||rt!==ct||cs||i!==null&&i.dependencies!==null&&_l(i.dependencies)?(typeof P=="function"&&(jh(r,c,P,d),ct=r.memoizedState),(mt=cs||hb(r,c,mt,d,rt,ct,G)||i!==null&&i.dependencies!==null&&_l(i.dependencies))?(nt||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,ct,G),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,ct,G)),typeof v.componentDidUpdate=="function"&&(r.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof v.componentDidUpdate!="function"||C===i.memoizedProps&&rt===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&rt===i.memoizedState||(r.flags|=1024),r.memoizedProps=d,r.memoizedState=ct),v.props=d,v.state=ct,v.context=G,d=mt):(typeof v.componentDidUpdate!="function"||C===i.memoizedProps&&rt===i.memoizedState||(r.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||C===i.memoizedProps&&rt===i.memoizedState||(r.flags|=1024),d=!1)}return v=d,Hl(i,r),d=(r.flags&128)!==0,v||d?(v=r.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:v.render(),r.flags|=1,i!==null&&d?(r.child=Qs(r,i.child,null,g),r.child=Qs(r,null,c,g)):ln(i,r,c,g),r.memoizedState=v.state,i=r.child):i=Vi(i,r,g),i}function Cb(i,r,c,d){return Ys(),r.flags|=256,ln(i,r,c,d),r.child}var Yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qh(i){return{baseLanes:i,cachePool:gg()}}function $h(i,r,c){return i=i!==null?i.childLanes&~c:0,r&&(i|=zn),i}function kb(i,r,c){var d=r.pendingProps,g=!1,v=(r.flags&128)!==0,C;if((C=v)||(C=i!==null&&i.memoizedState===null?!1:(Le.current&2)!==0),C&&(g=!0,r.flags&=-129),C=(r.flags&32)!==0,r.flags&=-33,i===null){if(te){if(g?ds(r):fs(),(i=Se)?(i=By(i,Qn),i=i!==null&&i.data!=="&"?i:null,i!==null&&(r.memoizedState={dehydrated:i,treeContext:rs!==null?{id:yi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},c=og(i),c.return=r,r.child=c,an=r,Se=null)):i=null,i===null)throw os(r);return Dd(i)?r.lanes=32:r.lanes=536870912,null}var P=d.children;return d=d.fallback,g?(fs(),g=r.mode,P=Gl({mode:"hidden",children:P},g),d=Xs(d,g,c,null),P.return=r,d.return=r,P.sibling=d,r.child=P,d=r.child,d.memoizedState=qh(c),d.childLanes=$h(i,C,c),r.memoizedState=Yh,eo(null,d)):(ds(r),Wh(r,P))}var G=i.memoizedState;if(G!==null&&(P=G.dehydrated,P!==null)){if(v)r.flags&256?(ds(r),r.flags&=-257,r=Kh(i,r,c)):r.memoizedState!==null?(fs(),r.child=i.child,r.flags|=128,r=null):(fs(),P=d.fallback,g=r.mode,d=Gl({mode:"visible",children:d.children},g),P=Xs(P,g,c,null),P.flags|=2,d.return=r,P.return=r,d.sibling=P,r.child=d,Qs(r,i.child,null,c),d=r.child,d.memoizedState=qh(c),d.childLanes=$h(i,C,c),r.memoizedState=Yh,r=eo(null,d));else if(ds(r),Dd(P)){if(C=P.nextSibling&&P.nextSibling.dataset,C)var nt=C.dgst;C=nt,d=Error(n(419)),d.stack="",d.digest=C,Ha({value:d,source:null,stack:null}),r=Kh(i,r,c)}else if(je||zr(i,r,c,!1),C=(c&i.childLanes)!==0,je||C){if(C=ve,C!==null&&(d=pm(C,c),d!==0&&d!==G.retryLane))throw G.retryLane=d,Gs(i,d),kn(C,i,d),Gh;Md(P)||Jl(),r=Kh(i,r,c)}else Md(P)?(r.flags|=192,r.child=i.child,r=null):(i=G.treeContext,Se=ti(P.nextSibling),an=r,te=!0,as=null,Qn=!1,i!==null&&ug(r,i),r=Wh(r,d.children),r.flags|=4096);return r}return g?(fs(),P=d.fallback,g=r.mode,G=i.child,nt=G.sibling,d=Bi(G,{mode:"hidden",children:d.children}),d.subtreeFlags=G.subtreeFlags&65011712,nt!==null?P=Bi(nt,P):(P=Xs(P,g,c,null),P.flags|=2),P.return=r,d.return=r,d.sibling=P,r.child=d,eo(null,d),d=r.child,P=i.child.memoizedState,P===null?P=qh(c):(g=P.cachePool,g!==null?(G=Ie._currentValue,g=g.parent!==G?{parent:G,pool:G}:g):g=gg(),P={baseLanes:P.baseLanes|c,cachePool:g}),d.memoizedState=P,d.childLanes=$h(i,C,c),r.memoizedState=Yh,eo(i.child,d)):(ds(r),c=i.child,i=c.sibling,c=Bi(c,{mode:"visible",children:d.children}),c.return=r,c.sibling=null,i!==null&&(C=r.deletions,C===null?(r.deletions=[i],r.flags|=16):C.push(i)),r.child=c,r.memoizedState=null,c)}function Wh(i,r){return r=Gl({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Gl(i,r){return i=Pn(22,i,null,r),i.lanes=0,i}function Kh(i,r,c){return Qs(r,i.child,null,c),i=Wh(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function Mb(i,r,c){i.lanes|=r;var d=i.alternate;d!==null&&(d.lanes|=r),hh(i.return,r,c)}function Zh(i,r,c,d,g,v){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:g,treeForkCount:v}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=d,C.tail=c,C.tailMode=g,C.treeForkCount=v)}function Db(i,r,c){var d=r.pendingProps,g=d.revealOrder,v=d.tail;d=d.children;var C=Le.current,P=(C&2)!==0;if(P?(C=C&1|2,r.flags|=128):C&=1,X(Le,C),ln(i,r,d,c),d=te?Va:0,!P&&i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Mb(i,c,r);else if(i.tag===19)Mb(i,c,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(c=r.child,g=null;c!==null;)i=c.alternate,i!==null&&Nl(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=r.child,r.child=null):(g=c.sibling,c.sibling=null),Zh(r,!1,g,c,v,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,g=r.child,r.child=null;g!==null;){if(i=g.alternate,i!==null&&Nl(i)===null){r.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}Zh(r,!0,c,null,v,d);break;case"together":Zh(r,!1,null,null,void 0,d);break;default:r.memoizedState=null}return r.child}function Vi(i,r,c){if(i!==null&&(r.dependencies=i.dependencies),gs|=r.lanes,(c&r.childLanes)===0)if(i!==null){if(zr(i,r,c,!1),(c&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(n(153));if(r.child!==null){for(i=r.child,c=Bi(i,i.pendingProps),r.child=c,c.return=r;i.sibling!==null;)i=i.sibling,c=c.sibling=Bi(i,i.pendingProps),c.return=r;c.sibling=null}return r.child}function Qh(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&_l(i)))}function Bx(i,r,c){switch(r.tag){case 3:At(r,r.stateNode.containerInfo),ls(r,Ie,i.memoizedState.cache),Ys();break;case 27:case 5:Ot(r);break;case 4:At(r,r.stateNode.containerInfo);break;case 10:ls(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,xh(r),null;break;case 13:var d=r.memoizedState;if(d!==null)return d.dehydrated!==null?(ds(r),r.flags|=128,null):(c&r.child.childLanes)!==0?kb(i,r,c):(ds(r),i=Vi(i,r,c),i!==null?i.sibling:null);ds(r);break;case 19:var g=(i.flags&128)!==0;if(d=(c&r.childLanes)!==0,d||(zr(i,r,c,!1),d=(c&r.childLanes)!==0),g){if(d)return Db(i,r,c);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),X(Le,Le.current),d)break;return null;case 22:return r.lanes=0,Sb(i,r,c,r.pendingProps);case 24:ls(r,Ie,i.memoizedState.cache)}return Vi(i,r,c)}function Rb(i,r,c){if(i!==null)if(i.memoizedProps!==r.pendingProps)je=!0;else{if(!Qh(i,c)&&(r.flags&128)===0)return je=!1,Bx(i,r,c);je=(i.flags&131072)!==0}else je=!1,te&&(r.flags&1048576)!==0&&cg(r,Va,r.index);switch(r.lanes=0,r.tag){case 16:t:{var d=r.pendingProps;if(i=Ks(r.elementType),r.type=i,typeof i=="function")ih(i)?(d=tr(i,d),r.tag=1,r=Tb(null,r,i,d,c)):(r.tag=0,r=Xh(null,r,i,d,c));else{if(i!=null){var g=i.$$typeof;if(g===R){r.tag=11,r=vb(null,r,i,d,c);break t}else if(g===L){r.tag=14,r=wb(null,r,i,d,c);break t}}throw r=M(i)||i,Error(n(306,r,""))}}return r;case 0:return Xh(i,r,r.type,r.pendingProps,c);case 1:return d=r.type,g=tr(d,r.pendingProps),Tb(i,r,d,g,c);case 3:t:{if(At(r,r.stateNode.containerInfo),i===null)throw Error(n(387));d=r.pendingProps;var v=r.memoizedState;g=v.element,yh(i,r),Ka(r,d,null,c);var C=r.memoizedState;if(d=C.cache,ls(r,Ie,d),d!==v.cache&&dh(r,[Ie],c,!0),Wa(),d=C.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:C.cache},r.updateQueue.baseState=v,r.memoizedState=v,r.flags&256){r=Cb(i,r,d,c);break t}else if(d!==g){g=Wn(Error(n(424)),r),Ha(g),r=Cb(i,r,d,c);break t}else for(i=r.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,Se=ti(i.firstChild),an=r,te=!0,as=null,Qn=!0,c=Sg(r,null,d,c),r.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ys(),d===g){r=Vi(i,r,c);break t}ln(i,r,d,c)}r=r.child}return r;case 26:return Hl(i,r),i===null?(c=Vy(r.type,null,r.pendingProps,null))?r.memoizedState=c:te||(c=r.type,i=r.pendingProps,d=ac(ht.current).createElement(c),d[rn]=r,d[Sn]=i,cn(d,c,i),Je(d),r.stateNode=d):r.memoizedState=Vy(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return Ot(r),i===null&&te&&(d=r.stateNode=Iy(r.type,r.pendingProps,ht.current),an=r,Qn=!0,g=Se,As(r.type)?(Rd=g,Se=ti(d.firstChild)):Se=g),ln(i,r,r.pendingProps.children,c),Hl(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&te&&((g=d=Se)&&(d=d_(d,r.type,r.pendingProps,Qn),d!==null?(r.stateNode=d,an=r,Se=ti(d.firstChild),Qn=!1,g=!0):g=!1),g||os(r)),Ot(r),g=r.type,v=r.pendingProps,C=i!==null?i.memoizedProps:null,d=v.children,Td(g,v)?d=null:C!==null&&Td(g,C)&&(r.flags|=32),r.memoizedState!==null&&(g=Eh(i,r,Cx,null,null,c),bo._currentValue=g),Hl(i,r),ln(i,r,d,c),r.child;case 6:return i===null&&te&&((i=c=Se)&&(c=f_(c,r.pendingProps,Qn),c!==null?(r.stateNode=c,an=r,Se=null,i=!0):i=!1),i||os(r)),null;case 13:return kb(i,r,c);case 4:return At(r,r.stateNode.containerInfo),d=r.pendingProps,i===null?r.child=Qs(r,null,d,c):ln(i,r,d,c),r.child;case 11:return vb(i,r,r.type,r.pendingProps,c);case 7:return ln(i,r,r.pendingProps,c),r.child;case 8:return ln(i,r,r.pendingProps.children,c),r.child;case 12:return ln(i,r,r.pendingProps.children,c),r.child;case 10:return d=r.pendingProps,ls(r,r.type,d.value),ln(i,r,d.children,c),r.child;case 9:return g=r.type._context,d=r.pendingProps.children,$s(r),g=on(g),d=d(g),r.flags|=1,ln(i,r,d,c),r.child;case 14:return wb(i,r,r.type,r.pendingProps,c);case 15:return Ab(i,r,r.type,r.pendingProps,c);case 19:return Db(i,r,c);case 31:return Lx(i,r,c);case 22:return Sb(i,r,c,r.pendingProps);case 24:return $s(r),d=on(Ie),i===null?(g=mh(),g===null&&(g=ve,v=fh(),g.pooledCache=v,v.refCount++,v!==null&&(g.pooledCacheLanes|=c),g=v),r.memoizedState={parent:d,cache:g},bh(r),ls(r,Ie,g)):((i.lanes&c)!==0&&(yh(i,r),Ka(r,null,null,c),Wa()),g=i.memoizedState,v=r.memoizedState,g.parent!==d?(g={parent:d,cache:d},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),ls(r,Ie,d)):(d=v.cache,ls(r,Ie,d),d!==g.cache&&dh(r,[Ie],c,!0))),ln(i,r,r.pendingProps.children,c),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function Hi(i){i.flags|=4}function Jh(i,r,c,d,g){if((r=(i.mode&32)!==0)&&(r=!1),r){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(sy())i.flags|=8192;else throw Zs=kl,gh}else i.flags&=-16777217}function Nb(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!qy(r))if(sy())i.flags|=8192;else throw Zs=kl,gh}function Xl(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?hm():536870912,i.lanes|=r,Wr|=r)}function no(i,r){if(!te)switch(i.tailMode){case"hidden":r=i.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function xe(i){var r=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(r)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=d,i.childLanes=c,r}function zx(i,r,c){var d=r.pendingProps;switch(oh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xe(r),null;case 1:return xe(r),null;case 3:return c=r.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),r.memoizedState.cache!==d&&(r.flags|=2048),Ii(Ie),vt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Br(r)?Hi(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,ch())),xe(r),null;case 26:var g=r.type,v=r.memoizedState;return i===null?(Hi(r),v!==null?(xe(r),Nb(r,v)):(xe(r),Jh(r,g,null,d,c))):v?v!==i.memoizedState?(Hi(r),xe(r),Nb(r,v)):(xe(r),r.flags&=-16777217):(i=i.memoizedProps,i!==d&&Hi(r),xe(r),Jh(r,g,i,d,c)),null;case 27:if(Mt(r),c=ht.current,g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Hi(r);else{if(!d){if(r.stateNode===null)throw Error(n(166));return xe(r),null}i=K.current,Br(r)?hg(r):(i=Iy(g,d,c),r.stateNode=i,Hi(r))}return xe(r),null;case 5:if(Mt(r),g=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==d&&Hi(r);else{if(!d){if(r.stateNode===null)throw Error(n(166));return xe(r),null}if(v=K.current,Br(r))hg(r);else{var C=ac(ht.current);switch(v){case 1:v=C.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:v=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":v=C.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":v=C.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":v=C.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof d.is=="string"?C.createElement("select",{is:d.is}):C.createElement("select"),d.multiple?v.multiple=!0:d.size&&(v.size=d.size);break;default:v=typeof d.is=="string"?C.createElement(g,{is:d.is}):C.createElement(g)}}v[rn]=r,v[Sn]=d;t:for(C=r.child;C!==null;){if(C.tag===5||C.tag===6)v.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===r)break t;for(;C.sibling===null;){if(C.return===null||C.return===r)break t;C=C.return}C.sibling.return=C.return,C=C.sibling}r.stateNode=v;t:switch(cn(v,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&Hi(r)}}return xe(r),Jh(r,r.type,i===null?null:i.memoizedProps,r.pendingProps,c),null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==d&&Hi(r);else{if(typeof d!="string"&&r.stateNode===null)throw Error(n(166));if(i=ht.current,Br(r)){if(i=r.stateNode,c=r.memoizedProps,d=null,g=an,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}i[rn]=r,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||ky(i.nodeValue,c)),i||os(r,!0)}else i=ac(i).createTextNode(d),i[rn]=r,r.stateNode=i}return xe(r),null;case 31:if(c=r.memoizedState,i===null||i.memoizedState!==null){if(d=Br(r),c!==null){if(i===null){if(!d)throw Error(n(318));if(i=r.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(n(557));i[rn]=r}else Ys(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;xe(r),i=!1}else c=ch(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return r.flags&256?(Ln(r),r):(Ln(r),null);if((r.flags&128)!==0)throw Error(n(558))}return xe(r),null;case 13:if(d=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=Br(r),d!==null&&d.dehydrated!==null){if(i===null){if(!g)throw Error(n(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[rn]=r}else Ys(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;xe(r),g=!1}else g=ch(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Ln(r),r):(Ln(r),null)}return Ln(r),(r.flags&128)!==0?(r.lanes=c,r):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=r.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),v=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==g&&(d.flags|=2048)),c!==i&&c&&(r.child.flags|=8192),Xl(r,r.updateQueue),xe(r),null);case 4:return vt(),i===null&&Ad(r.stateNode.containerInfo),xe(r),null;case 10:return Ii(r.type),xe(r),null;case 19:if(N(Le),d=r.memoizedState,d===null)return xe(r),null;if(g=(r.flags&128)!==0,v=d.rendering,v===null)if(g)no(d,!1);else{if(Ne!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(v=Nl(i),v!==null){for(r.flags|=128,no(d,!1),i=v.updateQueue,r.updateQueue=i,Xl(r,i),r.subtreeFlags=0,i=c,c=r.child;c!==null;)ag(c,i),c=c.sibling;return X(Le,Le.current&1|2),te&&zi(r,d.treeForkCount),r.child}i=i.sibling}d.tail!==null&&Et()>Kl&&(r.flags|=128,g=!0,no(d,!1),r.lanes=4194304)}else{if(!g)if(i=Nl(v),i!==null){if(r.flags|=128,g=!0,i=i.updateQueue,r.updateQueue=i,Xl(r,i),no(d,!0),d.tail===null&&d.tailMode==="hidden"&&!v.alternate&&!te)return xe(r),null}else 2*Et()-d.renderingStartTime>Kl&&c!==536870912&&(r.flags|=128,g=!0,no(d,!1),r.lanes=4194304);d.isBackwards?(v.sibling=r.child,r.child=v):(i=d.last,i!==null?i.sibling=v:r.child=v,d.last=v)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=Et(),i.sibling=null,c=Le.current,X(Le,g?c&1|2:c&1),te&&zi(r,d.treeForkCount),i):(xe(r),null);case 22:case 23:return Ln(r),Sh(),d=r.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(r.flags|=8192):d&&(r.flags|=8192),d?(c&536870912)!==0&&(r.flags&128)===0&&(xe(r),r.subtreeFlags&6&&(r.flags|=8192)):xe(r),c=r.updateQueue,c!==null&&Xl(r,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(d=r.memoizedState.cachePool.pool),d!==c&&(r.flags|=2048),i!==null&&N(Ws),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Ii(Ie),xe(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function Fx(i,r){switch(oh(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ii(Ie),vt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Mt(r),null;case 31:if(r.memoizedState!==null){if(Ln(r),r.alternate===null)throw Error(n(340));Ys()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 13:if(Ln(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Ys()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return N(Le),null;case 4:return vt(),null;case 10:return Ii(r.type),null;case 22:case 23:return Ln(r),Sh(),i!==null&&N(Ws),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ii(Ie),null;case 25:return null;default:return null}}function Pb(i,r){switch(oh(r),r.tag){case 3:Ii(Ie),vt();break;case 26:case 27:case 5:Mt(r);break;case 4:vt();break;case 31:r.memoizedState!==null&&Ln(r);break;case 13:Ln(r);break;case 19:N(Le);break;case 10:Ii(r.type);break;case 22:case 23:Ln(r),Sh(),i!==null&&N(Ws);break;case 24:Ii(Ie)}}function io(i,r){try{var c=r.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var g=d.next;c=g;do{if((c.tag&i)===i){d=void 0;var v=c.create,C=c.inst;d=v(),C.destroy=d}c=c.next}while(c!==g)}}catch(P){pe(r,r.return,P)}}function ps(i,r,c){try{var d=r.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var v=g.next;d=v;do{if((d.tag&i)===i){var C=d.inst,P=C.destroy;if(P!==void 0){C.destroy=void 0,g=r;var G=c,nt=P;try{nt()}catch(mt){pe(g,G,mt)}}}d=d.next}while(d!==v)}}catch(mt){pe(r,r.return,mt)}}function Ob(i){var r=i.updateQueue;if(r!==null){var c=i.stateNode;try{_g(r,c)}catch(d){pe(i,i.return,d)}}}function Lb(i,r,c){c.props=tr(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){pe(i,r,d)}}function so(i,r){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(g){pe(i,r,g)}}function wi(i,r){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(g){pe(i,r,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(g){pe(i,r,g)}else c.current=null}function Bb(i){var r=i.type,c=i.memoizedProps,d=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(g){pe(i,i.return,g)}}function td(i,r,c){try{var d=i.stateNode;a_(d,i.type,c,r),d[Sn]=r}catch(g){pe(i,i.return,g)}}function zb(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&As(i.type)||i.tag===4}function ed(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||zb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&As(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function nd(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,r):(r=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,r.appendChild(i),c=c._reactRootContainer,c!=null||r.onclick!==null||(r.onclick=Oi));else if(d!==4&&(d===27&&As(i.type)&&(c=i.stateNode,r=null),i=i.child,i!==null))for(nd(i,r,c),i=i.sibling;i!==null;)nd(i,r,c),i=i.sibling}function Yl(i,r,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,r?c.insertBefore(i,r):c.appendChild(i);else if(d!==4&&(d===27&&As(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(Yl(i,r,c),i=i.sibling;i!==null;)Yl(i,r,c),i=i.sibling}function Fb(i){var r=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);cn(r,d,c),r[rn]=i,r[Sn]=c}catch(v){pe(i,i.return,v)}}var Gi=!1,Ve=!1,id=!1,Ib=typeof WeakSet=="function"?WeakSet:Set,tn=null;function Ix(i,r){if(i=i.containerInfo,_d=fc,i=Zm(i),Ku(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else t:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var g=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{c.nodeType,v.nodeType}catch{c=null;break t}var C=0,P=-1,G=-1,nt=0,mt=0,yt=i,rt=null;e:for(;;){for(var ct;yt!==c||g!==0&&yt.nodeType!==3||(P=C+g),yt!==v||d!==0&&yt.nodeType!==3||(G=C+d),yt.nodeType===3&&(C+=yt.nodeValue.length),(ct=yt.firstChild)!==null;)rt=yt,yt=ct;for(;;){if(yt===i)break e;if(rt===c&&++nt===g&&(P=C),rt===v&&++mt===d&&(G=C),(ct=yt.nextSibling)!==null)break;yt=rt,rt=yt.parentNode}yt=ct}c=P===-1||G===-1?null:{start:P,end:G}}else c=null}c=c||{start:0,end:0}}else c=null;for(Ed={focusedElem:i,selectionRange:c},fc=!1,tn=r;tn!==null;)if(r=tn,i=r.child,(r.subtreeFlags&1028)!==0&&i!==null)i.return=r,tn=i;else for(;tn!==null;){switch(r=tn,v=r.alternate,i=r.flags,r.tag){case 0:if((i&4)!==0&&(i=r.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)g=i[c],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,c=r,g=v.memoizedProps,v=v.memoizedState,d=c.stateNode;try{var kt=tr(c.type,g);i=d.getSnapshotBeforeUpdate(kt,v),d.__reactInternalSnapshotBeforeUpdate=i}catch(Ft){pe(c,c.return,Ft)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,c=i.nodeType,c===9)kd(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":kd(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(n(163))}if(i=r.sibling,i!==null){i.return=r.return,tn=i;break}tn=r.return}}function Ub(i,r,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Yi(i,c),d&4&&io(5,c);break;case 1:if(Yi(i,c),d&4)if(i=c.stateNode,r===null)try{i.componentDidMount()}catch(C){pe(c,c.return,C)}else{var g=tr(c.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(g,r,i.__reactInternalSnapshotBeforeUpdate)}catch(C){pe(c,c.return,C)}}d&64&&Ob(c),d&512&&so(c,c.return);break;case 3:if(Yi(i,c),d&64&&(i=c.updateQueue,i!==null)){if(r=null,c.child!==null)switch(c.child.tag){case 27:case 5:r=c.child.stateNode;break;case 1:r=c.child.stateNode}try{_g(i,r)}catch(C){pe(c,c.return,C)}}break;case 27:r===null&&d&4&&Fb(c);case 26:case 5:Yi(i,c),r===null&&d&4&&Bb(c),d&512&&so(c,c.return);break;case 12:Yi(i,c);break;case 31:Yi(i,c),d&4&&Hb(i,c);break;case 13:Yi(i,c),d&4&&Gb(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=$x.bind(null,c),p_(i,c))));break;case 22:if(d=c.memoizedState!==null||Gi,!d){r=r!==null&&r.memoizedState!==null||Ve,g=Gi;var v=Ve;Gi=d,(Ve=r)&&!v?qi(i,c,(c.subtreeFlags&8772)!==0):Yi(i,c),Gi=g,Ve=v}break;case 30:break;default:Yi(i,c)}}function jb(i){var r=i.alternate;r!==null&&(i.alternate=null,jb(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&Pu(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var _e=null,_n=!1;function Xi(i,r,c){for(c=c.child;c!==null;)Vb(i,r,c),c=c.sibling}function Vb(i,r,c){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(de,c)}catch{}switch(c.tag){case 26:Ve||wi(c,r),Xi(i,r,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ve||wi(c,r);var d=_e,g=_n;As(c.type)&&(_e=c.stateNode,_n=!1),Xi(i,r,c),po(c.stateNode),_e=d,_n=g;break;case 5:Ve||wi(c,r);case 6:if(d=_e,g=_n,_e=null,Xi(i,r,c),_e=d,_n=g,_e!==null)if(_n)try{(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e).removeChild(c.stateNode)}catch(v){pe(c,r,v)}else try{_e.removeChild(c.stateNode)}catch(v){pe(c,r,v)}break;case 18:_e!==null&&(_n?(i=_e,Oy(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),ia(i)):Oy(_e,c.stateNode));break;case 4:d=_e,g=_n,_e=c.stateNode.containerInfo,_n=!0,Xi(i,r,c),_e=d,_n=g;break;case 0:case 11:case 14:case 15:ps(2,c,r),Ve||ps(4,c,r),Xi(i,r,c);break;case 1:Ve||(wi(c,r),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Lb(c,r,d)),Xi(i,r,c);break;case 21:Xi(i,r,c);break;case 22:Ve=(d=Ve)||c.memoizedState!==null,Xi(i,r,c),Ve=d;break;default:Xi(i,r,c)}}function Hb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ia(i)}catch(c){pe(r,r.return,c)}}}function Gb(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ia(i)}catch(c){pe(r,r.return,c)}}function Ux(i){switch(i.tag){case 31:case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new Ib),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new Ib),r;default:throw Error(n(435,i.tag))}}function ql(i,r){var c=Ux(i);r.forEach(function(d){if(!c.has(d)){c.add(d);var g=Wx.bind(null,i,d);d.then(g,g)}})}function En(i,r){var c=r.deletions;if(c!==null)for(var d=0;d<c.length;d++){var g=c[d],v=i,C=r,P=C;t:for(;P!==null;){switch(P.tag){case 27:if(As(P.type)){_e=P.stateNode,_n=!1;break t}break;case 5:_e=P.stateNode,_n=!1;break t;case 3:case 4:_e=P.stateNode.containerInfo,_n=!0;break t}P=P.return}if(_e===null)throw Error(n(160));Vb(v,C,g),_e=null,_n=!1,v=g.alternate,v!==null&&(v.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Xb(r,i),r=r.sibling}var ui=null;function Xb(i,r){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:En(r,i),Tn(i),d&4&&(ps(3,i,i.return),io(3,i),ps(5,i,i.return));break;case 1:En(r,i),Tn(i),d&512&&(Ve||c===null||wi(c,c.return)),d&64&&Gi&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var g=ui;if(En(r,i),Tn(i),d&512&&(Ve||c===null||wi(c,c.return)),d&4){var v=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){t:{d=i.type,c=i.memoizedProps,g=g.ownerDocument||g;e:switch(d){case"title":v=g.getElementsByTagName("title")[0],(!v||v[Ra]||v[rn]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=g.createElement(d),g.head.insertBefore(v,g.querySelector("head > title"))),cn(v,d,c),v[rn]=i,Je(v),d=v;break t;case"link":var C=Xy("link","href",g).get(d+(c.href||""));if(C){for(var P=0;P<C.length;P++)if(v=C[P],v.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&v.getAttribute("rel")===(c.rel==null?null:c.rel)&&v.getAttribute("title")===(c.title==null?null:c.title)&&v.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){C.splice(P,1);break e}}v=g.createElement(d),cn(v,d,c),g.head.appendChild(v);break;case"meta":if(C=Xy("meta","content",g).get(d+(c.content||""))){for(P=0;P<C.length;P++)if(v=C[P],v.getAttribute("content")===(c.content==null?null:""+c.content)&&v.getAttribute("name")===(c.name==null?null:c.name)&&v.getAttribute("property")===(c.property==null?null:c.property)&&v.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&v.getAttribute("charset")===(c.charSet==null?null:c.charSet)){C.splice(P,1);break e}}v=g.createElement(d),cn(v,d,c),g.head.appendChild(v);break;default:throw Error(n(468,d))}v[rn]=i,Je(v),d=v}i.stateNode=d}else Yy(g,i.type,i.stateNode);else i.stateNode=Gy(g,d,i.memoizedProps);else v!==d?(v===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):v.count--,d===null?Yy(g,i.type,i.stateNode):Gy(g,d,i.memoizedProps)):d===null&&i.stateNode!==null&&td(i,i.memoizedProps,c.memoizedProps)}break;case 27:En(r,i),Tn(i),d&512&&(Ve||c===null||wi(c,c.return)),c!==null&&d&4&&td(i,i.memoizedProps,c.memoizedProps);break;case 5:if(En(r,i),Tn(i),d&512&&(Ve||c===null||wi(c,c.return)),i.flags&32){g=i.stateNode;try{Tr(g,"")}catch(kt){pe(i,i.return,kt)}}d&4&&i.stateNode!=null&&(g=i.memoizedProps,td(i,g,c!==null?c.memoizedProps:g)),d&1024&&(id=!0);break;case 6:if(En(r,i),Tn(i),d&4){if(i.stateNode===null)throw Error(n(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(kt){pe(i,i.return,kt)}}break;case 3:if(cc=null,g=ui,ui=oc(r.containerInfo),En(r,i),ui=g,Tn(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{ia(r.containerInfo)}catch(kt){pe(i,i.return,kt)}id&&(id=!1,Yb(i));break;case 4:d=ui,ui=oc(i.stateNode.containerInfo),En(r,i),Tn(i),ui=d;break;case 12:En(r,i),Tn(i);break;case 31:En(r,i),Tn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ql(i,d)));break;case 13:En(r,i),Tn(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Wl=Et()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ql(i,d)));break;case 22:g=i.memoizedState!==null;var G=c!==null&&c.memoizedState!==null,nt=Gi,mt=Ve;if(Gi=nt||g,Ve=mt||G,En(r,i),Ve=mt,Gi=nt,Tn(i),d&8192)t:for(r=i.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(c===null||G||Gi||Ve||er(i)),c=null,r=i;;){if(r.tag===5||r.tag===26){if(c===null){G=c=r;try{if(v=G.stateNode,g)C=v.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{P=G.stateNode;var yt=G.memoizedProps.style,rt=yt!=null&&yt.hasOwnProperty("display")?yt.display:null;P.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(kt){pe(G,G.return,kt)}}}else if(r.tag===6){if(c===null){G=r;try{G.stateNode.nodeValue=g?"":G.memoizedProps}catch(kt){pe(G,G.return,kt)}}}else if(r.tag===18){if(c===null){G=r;try{var ct=G.stateNode;g?Ly(ct,!0):Ly(G.stateNode,!1)}catch(kt){pe(G,G.return,kt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;c===r&&(c=null),r=r.return}c===r&&(c=null),r.sibling.return=r.return,r=r.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,ql(i,c))));break;case 19:En(r,i),Tn(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,ql(i,d)));break;case 30:break;case 21:break;default:En(r,i),Tn(i)}}function Tn(i){var r=i.flags;if(r&2){try{for(var c,d=i.return;d!==null;){if(zb(d)){c=d;break}d=d.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var g=c.stateNode,v=ed(i);Yl(i,v,g);break;case 5:var C=c.stateNode;c.flags&32&&(Tr(C,""),c.flags&=-33);var P=ed(i);Yl(i,P,C);break;case 3:case 4:var G=c.stateNode.containerInfo,nt=ed(i);nd(i,nt,G);break;default:throw Error(n(161))}}catch(mt){pe(i,i.return,mt)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function Yb(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;Yb(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Yi(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Ub(i,r.alternate,r),r=r.sibling}function er(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ps(4,r,r.return),er(r);break;case 1:wi(r,r.return);var c=r.stateNode;typeof c.componentWillUnmount=="function"&&Lb(r,r.return,c),er(r);break;case 27:po(r.stateNode);case 26:case 5:wi(r,r.return),er(r);break;case 22:r.memoizedState===null&&er(r);break;case 30:er(r);break;default:er(r)}i=i.sibling}}function qi(i,r,c){for(c=c&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var d=r.alternate,g=i,v=r,C=v.flags;switch(v.tag){case 0:case 11:case 15:qi(g,v,c),io(4,v);break;case 1:if(qi(g,v,c),d=v,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(nt){pe(d,d.return,nt)}if(d=v,g=d.updateQueue,g!==null){var P=d.stateNode;try{var G=g.shared.hiddenCallbacks;if(G!==null)for(g.shared.hiddenCallbacks=null,g=0;g<G.length;g++)xg(G[g],P)}catch(nt){pe(d,d.return,nt)}}c&&C&64&&Ob(v),so(v,v.return);break;case 27:Fb(v);case 26:case 5:qi(g,v,c),c&&d===null&&C&4&&Bb(v),so(v,v.return);break;case 12:qi(g,v,c);break;case 31:qi(g,v,c),c&&C&4&&Hb(g,v);break;case 13:qi(g,v,c),c&&C&4&&Gb(g,v);break;case 22:v.memoizedState===null&&qi(g,v,c),so(v,v.return);break;case 30:break;default:qi(g,v,c)}r=r.sibling}}function sd(i,r){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Ga(c))}function rd(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ga(i))}function hi(i,r,c,d){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qb(i,r,c,d),r=r.sibling}function qb(i,r,c,d){var g=r.flags;switch(r.tag){case 0:case 11:case 15:hi(i,r,c,d),g&2048&&io(9,r);break;case 1:hi(i,r,c,d);break;case 3:hi(i,r,c,d),g&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ga(i)));break;case 12:if(g&2048){hi(i,r,c,d),i=r.stateNode;try{var v=r.memoizedProps,C=v.id,P=v.onPostCommit;typeof P=="function"&&P(C,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(G){pe(r,r.return,G)}}else hi(i,r,c,d);break;case 31:hi(i,r,c,d);break;case 13:hi(i,r,c,d);break;case 23:break;case 22:v=r.stateNode,C=r.alternate,r.memoizedState!==null?v._visibility&2?hi(i,r,c,d):ro(i,r):v._visibility&2?hi(i,r,c,d):(v._visibility|=2,Yr(i,r,c,d,(r.subtreeFlags&10256)!==0||!1)),g&2048&&sd(C,r);break;case 24:hi(i,r,c,d),g&2048&&rd(r.alternate,r);break;default:hi(i,r,c,d)}}function Yr(i,r,c,d,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var v=i,C=r,P=c,G=d,nt=C.flags;switch(C.tag){case 0:case 11:case 15:Yr(v,C,P,G,g),io(8,C);break;case 23:break;case 22:var mt=C.stateNode;C.memoizedState!==null?mt._visibility&2?Yr(v,C,P,G,g):ro(v,C):(mt._visibility|=2,Yr(v,C,P,G,g)),g&&nt&2048&&sd(C.alternate,C);break;case 24:Yr(v,C,P,G,g),g&&nt&2048&&rd(C.alternate,C);break;default:Yr(v,C,P,G,g)}r=r.sibling}}function ro(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var c=i,d=r,g=d.flags;switch(d.tag){case 22:ro(c,d),g&2048&&sd(d.alternate,d);break;case 24:ro(c,d),g&2048&&rd(d.alternate,d);break;default:ro(c,d)}r=r.sibling}}var ao=8192;function qr(i,r,c){if(i.subtreeFlags&ao)for(i=i.child;i!==null;)$b(i,r,c),i=i.sibling}function $b(i,r,c){switch(i.tag){case 26:qr(i,r,c),i.flags&ao&&i.memoizedState!==null&&T_(c,ui,i.memoizedState,i.memoizedProps);break;case 5:qr(i,r,c);break;case 3:case 4:var d=ui;ui=oc(i.stateNode.containerInfo),qr(i,r,c),ui=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=ao,ao=16777216,qr(i,r,c),ao=d):qr(i,r,c));break;default:qr(i,r,c)}}function Wb(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function oo(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];tn=d,Zb(d,i)}Wb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Kb(i),i=i.sibling}function Kb(i){switch(i.tag){case 0:case 11:case 15:oo(i),i.flags&2048&&ps(9,i,i.return);break;case 3:oo(i);break;case 12:oo(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,$l(i)):oo(i);break;default:oo(i)}}function $l(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var c=0;c<r.length;c++){var d=r[c];tn=d,Zb(d,i)}Wb(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ps(8,r,r.return),$l(r);break;case 22:c=r.stateNode,c._visibility&2&&(c._visibility&=-3,$l(r));break;default:$l(r)}i=i.sibling}}function Zb(i,r){for(;tn!==null;){var c=tn;switch(c.tag){case 0:case 11:case 15:ps(8,c,r);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ga(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,tn=d;else t:for(c=i;tn!==null;){d=tn;var g=d.sibling,v=d.return;if(jb(d),d===c){tn=null;break t}if(g!==null){g.return=v,tn=g;break t}tn=v}}}var jx={getCacheForType:function(i){var r=on(Ie),c=r.data.get(i);return c===void 0&&(c=i(),r.data.set(i,c)),c},cacheSignal:function(){return on(Ie).controller.signal}},Vx=typeof WeakMap=="function"?WeakMap:Map,ae=0,ve=null,Wt=null,Qt=0,fe=0,Bn=null,ms=!1,$r=!1,ad=!1,$i=0,Ne=0,gs=0,nr=0,od=0,zn=0,Wr=0,lo=null,Cn=null,ld=!1,Wl=0,Qb=0,Kl=1/0,Zl=null,bs=null,qe=0,ys=null,Kr=null,Wi=0,cd=0,ud=null,Jb=null,co=0,hd=null;function Fn(){return(ae&2)!==0&&Qt!==0?Qt&-Qt:H.T!==null?bd():mm()}function ty(){if(zn===0)if((Qt&536870912)===0||te){var i=Is;Is<<=1,(Is&3932160)===0&&(Is=262144),zn=i}else zn=536870912;return i=On.current,i!==null&&(i.flags|=32),zn}function kn(i,r,c){(i===ve&&(fe===2||fe===9)||i.cancelPendingCommit!==null)&&(Zr(i,0),vs(i,Qt,zn,!1)),Da(i,c),((ae&2)===0||i!==ve)&&(i===ve&&((ae&2)===0&&(nr|=c),Ne===4&&vs(i,Qt,zn,!1)),Ai(i))}function ey(i,r,c){if((ae&6)!==0)throw Error(n(327));var d=!c&&(r&127)===0&&(r&i.expiredLanes)===0||Ma(i,r),g=d?Xx(i,r):fd(i,r,!0),v=d;do{if(g===0){$r&&!d&&vs(i,r,0,!1);break}else{if(c=i.current.alternate,v&&!Hx(c)){g=fd(i,r,!1),v=!1;continue}if(g===2){if(v=r,i.errorRecoveryDisabledLanes&v)var C=0;else C=i.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){r=C;t:{var P=i;g=lo;var G=P.current.memoizedState.isDehydrated;if(G&&(Zr(P,C).flags|=256),C=fd(P,C,!1),C!==2){if(ad&&!G){P.errorRecoveryDisabledLanes|=v,nr|=v,g=4;break t}v=Cn,Cn=g,v!==null&&(Cn===null?Cn=v:Cn.push.apply(Cn,v))}g=C}if(v=!1,g!==2)continue}}if(g===1){Zr(i,0),vs(i,r,0,!0);break}t:{switch(d=i,v=g,v){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:vs(d,r,zn,!ms);break t;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(g=Wl+300-Et(),10<g)){if(vs(d,r,zn,!ms),ol(d,0,!0)!==0)break t;Wi=r,d.timeoutHandle=Ny(ny.bind(null,d,c,Cn,Zl,ld,r,zn,nr,Wr,ms,v,"Throttled",-0,0),g);break t}ny(d,c,Cn,Zl,ld,r,zn,nr,Wr,ms,v,null,-0,0)}}break}while(!0);Ai(i)}function ny(i,r,c,d,g,v,C,P,G,nt,mt,yt,rt,ct){if(i.timeoutHandle=-1,yt=r.subtreeFlags,yt&8192||(yt&16785408)===16785408){yt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Oi},$b(r,v,yt);var kt=(v&62914560)===v?Wl-Et():(v&4194048)===v?Qb-Et():0;if(kt=C_(yt,kt),kt!==null){Wi=v,i.cancelPendingCommit=kt(uy.bind(null,i,r,v,c,d,g,C,P,G,mt,yt,null,rt,ct)),vs(i,v,C,!nt);return}}uy(i,r,v,c,d,g,C,P,G)}function Hx(i){for(var r=i;;){var c=r.tag;if((c===0||c===11||c===15)&&r.flags&16384&&(c=r.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var g=c[d],v=g.getSnapshot;g=g.value;try{if(!Nn(v(),g))return!1}catch{return!1}}if(c=r.child,r.subtreeFlags&16384&&c!==null)c.return=r,r=c;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function vs(i,r,c,d){r&=~od,r&=~nr,i.suspendedLanes|=r,i.pingedLanes&=~r,d&&(i.warmLanes|=r),d=i.expirationTimes;for(var g=r;0<g;){var v=31-Ce(g),C=1<<v;d[v]=-1,g&=~C}c!==0&&dm(i,c,r)}function Ql(){return(ae&6)===0?(uo(0),!1):!0}function dd(){if(Wt!==null){if(fe===0)var i=Wt.return;else i=Wt,Fi=qs=null,kh(i),jr=null,Ya=0,i=Wt;for(;i!==null;)Pb(i.alternate,i),i=i.return;Wt=null}}function Zr(i,r){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,c_(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Wi=0,dd(),ve=i,Wt=c=Bi(i.current,null),Qt=r,fe=0,Bn=null,ms=!1,$r=Ma(i,r),ad=!1,Wr=zn=od=nr=gs=Ne=0,Cn=lo=null,ld=!1,(r&8)!==0&&(r|=r&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=r;0<d;){var g=31-Ce(d),v=1<<g;r|=i[g],d&=~v}return $i=r,vl(),c}function iy(i,r){Gt=null,H.H=to,r===Ur||r===Cl?(r=vg(),fe=3):r===gh?(r=vg(),fe=4):fe=r===Gh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Bn=r,Wt===null&&(Ne=1,jl(i,Wn(r,i.current)))}function sy(){var i=On.current;return i===null?!0:(Qt&4194048)===Qt?Jn===null:(Qt&62914560)===Qt||(Qt&536870912)!==0?i===Jn:!1}function ry(){var i=H.H;return H.H=to,i===null?to:i}function ay(){var i=H.A;return H.A=jx,i}function Jl(){Ne=4,ms||(Qt&4194048)!==Qt&&On.current!==null||($r=!0),(gs&134217727)===0&&(nr&134217727)===0||ve===null||vs(ve,Qt,zn,!1)}function fd(i,r,c){var d=ae;ae|=2;var g=ry(),v=ay();(ve!==i||Qt!==r)&&(Zl=null,Zr(i,r)),r=!1;var C=Ne;t:do try{if(fe!==0&&Wt!==null){var P=Wt,G=Bn;switch(fe){case 8:dd(),C=6;break t;case 3:case 2:case 9:case 6:On.current===null&&(r=!0);var nt=fe;if(fe=0,Bn=null,Qr(i,P,G,nt),c&&$r){C=0;break t}break;default:nt=fe,fe=0,Bn=null,Qr(i,P,G,nt)}}Gx(),C=Ne;break}catch(mt){iy(i,mt)}while(!0);return r&&i.shellSuspendCounter++,Fi=qs=null,ae=d,H.H=g,H.A=v,Wt===null&&(ve=null,Qt=0,vl()),C}function Gx(){for(;Wt!==null;)oy(Wt)}function Xx(i,r){var c=ae;ae|=2;var d=ry(),g=ay();ve!==i||Qt!==r?(Zl=null,Kl=Et()+500,Zr(i,r)):$r=Ma(i,r);t:do try{if(fe!==0&&Wt!==null){r=Wt;var v=Bn;e:switch(fe){case 1:fe=0,Bn=null,Qr(i,r,v,1);break;case 2:case 9:if(bg(v)){fe=0,Bn=null,ly(r);break}r=function(){fe!==2&&fe!==9||ve!==i||(fe=7),Ai(i)},v.then(r,r);break t;case 3:fe=7;break t;case 4:fe=5;break t;case 7:bg(v)?(fe=0,Bn=null,ly(r)):(fe=0,Bn=null,Qr(i,r,v,7));break;case 5:var C=null;switch(Wt.tag){case 26:C=Wt.memoizedState;case 5:case 27:var P=Wt;if(C?qy(C):P.stateNode.complete){fe=0,Bn=null;var G=P.sibling;if(G!==null)Wt=G;else{var nt=P.return;nt!==null?(Wt=nt,tc(nt)):Wt=null}break e}}fe=0,Bn=null,Qr(i,r,v,5);break;case 6:fe=0,Bn=null,Qr(i,r,v,6);break;case 8:dd(),Ne=6;break t;default:throw Error(n(462))}}Yx();break}catch(mt){iy(i,mt)}while(!0);return Fi=qs=null,H.H=d,H.A=g,ae=c,Wt!==null?0:(ve=null,Qt=0,vl(),Ne)}function Yx(){for(;Wt!==null&&!it();)oy(Wt)}function oy(i){var r=Rb(i.alternate,i,$i);i.memoizedProps=i.pendingProps,r===null?tc(i):Wt=r}function ly(i){var r=i,c=r.alternate;switch(r.tag){case 15:case 0:r=Eb(c,r,r.pendingProps,r.type,void 0,Qt);break;case 11:r=Eb(c,r,r.pendingProps,r.type.render,r.ref,Qt);break;case 5:kh(r);default:Pb(c,r),r=Wt=ag(r,$i),r=Rb(c,r,$i)}i.memoizedProps=i.pendingProps,r===null?tc(i):Wt=r}function Qr(i,r,c,d){Fi=qs=null,kh(r),jr=null,Ya=0;var g=r.return;try{if(Ox(i,g,r,c,Qt)){Ne=1,jl(i,Wn(c,i.current)),Wt=null;return}}catch(v){if(g!==null)throw Wt=g,v;Ne=1,jl(i,Wn(c,i.current)),Wt=null;return}r.flags&32768?(te||d===1?i=!0:$r||(Qt&536870912)!==0?i=!1:(ms=i=!0,(d===2||d===9||d===3||d===6)&&(d=On.current,d!==null&&d.tag===13&&(d.flags|=16384))),cy(r,i)):tc(r)}function tc(i){var r=i;do{if((r.flags&32768)!==0){cy(r,ms);return}i=r.return;var c=zx(r.alternate,r,$i);if(c!==null){Wt=c;return}if(r=r.sibling,r!==null){Wt=r;return}Wt=r=i}while(r!==null);Ne===0&&(Ne=5)}function cy(i,r){do{var c=Fx(i.alternate,i);if(c!==null){c.flags&=32767,Wt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!r&&(i=i.sibling,i!==null)){Wt=i;return}Wt=i=c}while(i!==null);Ne=6,Wt=null}function uy(i,r,c,d,g,v,C,P,G){i.cancelPendingCommit=null;do ec();while(qe!==0);if((ae&6)!==0)throw Error(n(327));if(r!==null){if(r===i.current)throw Error(n(177));if(v=r.lanes|r.childLanes,v|=eh,ES(i,c,v,C,P,G),i===ve&&(Wt=ve=null,Qt=0),Kr=r,ys=i,Wi=c,cd=v,ud=g,Jb=d,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,Kx(Xt,function(){return my(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||d){d=H.T,H.T=null,g=j.p,j.p=2,C=ae,ae|=4;try{Ix(i,r,c)}finally{ae=C,j.p=g,H.T=d}}qe=1,hy(),dy(),fy()}}function hy(){if(qe===1){qe=0;var i=ys,r=Kr,c=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var d=j.p;j.p=2;var g=ae;ae|=4;try{Xb(r,i);var v=Ed,C=Zm(i.containerInfo),P=v.focusedElem,G=v.selectionRange;if(C!==P&&P&&P.ownerDocument&&Km(P.ownerDocument.documentElement,P)){if(G!==null&&Ku(P)){var nt=G.start,mt=G.end;if(mt===void 0&&(mt=nt),"selectionStart"in P)P.selectionStart=nt,P.selectionEnd=Math.min(mt,P.value.length);else{var yt=P.ownerDocument||document,rt=yt&&yt.defaultView||window;if(rt.getSelection){var ct=rt.getSelection(),kt=P.textContent.length,Ft=Math.min(G.start,kt),be=G.end===void 0?Ft:Math.min(G.end,kt);!ct.extend&&Ft>be&&(C=be,be=Ft,Ft=C);var J=Wm(P,Ft),Y=Wm(P,be);if(J&&Y&&(ct.rangeCount!==1||ct.anchorNode!==J.node||ct.anchorOffset!==J.offset||ct.focusNode!==Y.node||ct.focusOffset!==Y.offset)){var et=yt.createRange();et.setStart(J.node,J.offset),ct.removeAllRanges(),Ft>be?(ct.addRange(et),ct.extend(Y.node,Y.offset)):(et.setEnd(Y.node,Y.offset),ct.addRange(et))}}}}for(yt=[],ct=P;ct=ct.parentNode;)ct.nodeType===1&&yt.push({element:ct,left:ct.scrollLeft,top:ct.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<yt.length;P++){var bt=yt[P];bt.element.scrollLeft=bt.left,bt.element.scrollTop=bt.top}}fc=!!_d,Ed=_d=null}finally{ae=g,j.p=d,H.T=c}}i.current=r,qe=2}}function dy(){if(qe===2){qe=0;var i=ys,r=Kr,c=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var d=j.p;j.p=2;var g=ae;ae|=4;try{Ub(i,r.alternate,r)}finally{ae=g,j.p=d,H.T=c}}qe=3}}function fy(){if(qe===4||qe===3){qe=0,St();var i=ys,r=Kr,c=Wi,d=Jb;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?qe=5:(qe=0,Kr=ys=null,py(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(bs=null),Ru(c),r=r.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(de,r,void 0,(r.current.flags&128)===128)}catch{}if(d!==null){r=H.T,g=j.p,j.p=2,H.T=null;try{for(var v=i.onRecoverableError,C=0;C<d.length;C++){var P=d[C];v(P.value,{componentStack:P.stack})}}finally{H.T=r,j.p=g}}(Wi&3)!==0&&ec(),Ai(i),g=i.pendingLanes,(c&261930)!==0&&(g&42)!==0?i===hd?co++:(co=0,hd=i):co=0,uo(0)}}function py(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Ga(r)))}function ec(){return hy(),dy(),fy(),my()}function my(){if(qe!==5)return!1;var i=ys,r=cd;cd=0;var c=Ru(Wi),d=H.T,g=j.p;try{j.p=32>c?32:c,H.T=null,c=ud,ud=null;var v=ys,C=Wi;if(qe=0,Kr=ys=null,Wi=0,(ae&6)!==0)throw Error(n(331));var P=ae;if(ae|=4,Kb(v.current),qb(v,v.current,C,c),ae=P,uo(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(de,v)}catch{}return!0}finally{j.p=g,H.T=d,py(i,r)}}function gy(i,r,c){r=Wn(c,r),r=Hh(i.stateNode,r,2),i=hs(i,r,2),i!==null&&(Da(i,2),Ai(i))}function pe(i,r,c){if(i.tag===3)gy(i,i,c);else for(;r!==null;){if(r.tag===3){gy(r,i,c);break}else if(r.tag===1){var d=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(bs===null||!bs.has(d))){i=Wn(c,i),c=bb(2),d=hs(r,c,2),d!==null&&(yb(c,d,r,i),Da(d,2),Ai(d));break}}r=r.return}}function pd(i,r,c){var d=i.pingCache;if(d===null){d=i.pingCache=new Vx;var g=new Set;d.set(r,g)}else g=d.get(r),g===void 0&&(g=new Set,d.set(r,g));g.has(c)||(ad=!0,g.add(c),i=qx.bind(null,i,r,c),r.then(i,i))}function qx(i,r,c){var d=i.pingCache;d!==null&&d.delete(r),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,ve===i&&(Qt&c)===c&&(Ne===4||Ne===3&&(Qt&62914560)===Qt&&300>Et()-Wl?(ae&2)===0&&Zr(i,0):od|=c,Wr===Qt&&(Wr=0)),Ai(i)}function by(i,r){r===0&&(r=hm()),i=Gs(i,r),i!==null&&(Da(i,r),Ai(i))}function $x(i){var r=i.memoizedState,c=0;r!==null&&(c=r.retryLane),by(i,c)}function Wx(i,r){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(r),by(i,c)}function Kx(i,r){return gt(i,r)}var nc=null,Jr=null,md=!1,ic=!1,gd=!1,ws=0;function Ai(i){i!==Jr&&i.next===null&&(Jr===null?nc=Jr=i:Jr=Jr.next=i),ic=!0,md||(md=!0,Qx())}function uo(i,r){if(!gd&&ic){gd=!0;do for(var c=!1,d=nc;d!==null;){if(i!==0){var g=d.pendingLanes;if(g===0)var v=0;else{var C=d.suspendedLanes,P=d.pingedLanes;v=(1<<31-Ce(42|i)+1)-1,v&=g&~(C&~P),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(c=!0,Ay(d,v))}else v=Qt,v=ol(d,d===ve?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Ma(d,v)||(c=!0,Ay(d,v));d=d.next}while(c);gd=!1}}function Zx(){yy()}function yy(){ic=md=!1;var i=0;ws!==0&&l_()&&(i=ws);for(var r=Et(),c=null,d=nc;d!==null;){var g=d.next,v=vy(d,r);v===0?(d.next=null,c===null?nc=g:c.next=g,g===null&&(Jr=c)):(c=d,(i!==0||(v&3)!==0)&&(ic=!0)),d=g}qe!==0&&qe!==5||uo(i),ws!==0&&(ws=0)}function vy(i,r){for(var c=i.suspendedLanes,d=i.pingedLanes,g=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var C=31-Ce(v),P=1<<C,G=g[C];G===-1?((P&c)===0||(P&d)!==0)&&(g[C]=_S(P,r)):G<=r&&(i.expiredLanes|=P),v&=~P}if(r=ve,c=Qt,c=ol(i,i===r?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===r&&(fe===2||fe===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&wt(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Ma(i,c)){if(r=c&-c,r===i.callbackPriority)return r;switch(d!==null&&wt(d),Ru(c)){case 2:case 8:c=re;break;case 32:c=Xt;break;case 268435456:c=li;break;default:c=Xt}return d=wy.bind(null,i),c=gt(c,d),i.callbackPriority=r,i.callbackNode=c,r}return d!==null&&d!==null&&wt(d),i.callbackPriority=2,i.callbackNode=null,2}function wy(i,r){if(qe!==0&&qe!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(ec()&&i.callbackNode!==c)return null;var d=Qt;return d=ol(i,i===ve?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(ey(i,d,r),vy(i,Et()),i.callbackNode!=null&&i.callbackNode===c?wy.bind(null,i):null)}function Ay(i,r){if(ec())return null;ey(i,r,!0)}function Qx(){u_(function(){(ae&6)!==0?gt(Lt,Zx):yy()})}function bd(){if(ws===0){var i=Fr;i===0&&(i=vr,vr<<=1,(vr&261888)===0&&(vr=256)),ws=i}return ws}function Sy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:hl(""+i)}function xy(i,r){var c=r.ownerDocument.createElement("input");return c.name=r.name,c.value=r.value,i.id&&c.setAttribute("form",i.id),r.parentNode.insertBefore(c,r),i=new FormData(i),c.parentNode.removeChild(c),i}function Jx(i,r,c,d,g){if(r==="submit"&&c&&c.stateNode===g){var v=Sy((g[Sn]||null).action),C=d.submitter;C&&(r=(r=C[Sn]||null)?Sy(r.formAction):C.getAttribute("formAction"),r!==null&&(v=r,C=null));var P=new ml("action","action",null,d,g);i.push({event:P,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ws!==0){var G=C?xy(g,C):new FormData(g);zh(c,{pending:!0,data:G,method:g.method,action:v},null,G)}}else typeof v=="function"&&(P.preventDefault(),G=C?xy(g,C):new FormData(g),zh(c,{pending:!0,data:G,method:g.method,action:v},v,G))},currentTarget:g}]})}}for(var yd=0;yd<th.length;yd++){var vd=th[yd],t_=vd.toLowerCase(),e_=vd[0].toUpperCase()+vd.slice(1);ci(t_,"on"+e_)}ci(tg,"onAnimationEnd"),ci(eg,"onAnimationIteration"),ci(ng,"onAnimationStart"),ci("dblclick","onDoubleClick"),ci("focusin","onFocus"),ci("focusout","onBlur"),ci(bx,"onTransitionRun"),ci(yx,"onTransitionStart"),ci(vx,"onTransitionCancel"),ci(ig,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),Us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Us("onBeforeInput",["compositionend","keypress","textInput","paste"]),Us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ho));function _y(i,r){r=(r&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],g=d.event;d=d.listeners;t:{var v=void 0;if(r)for(var C=d.length-1;0<=C;C--){var P=d[C],G=P.instance,nt=P.currentTarget;if(P=P.listener,G!==v&&g.isPropagationStopped())break t;v=P,g.currentTarget=nt;try{v(g)}catch(mt){yl(mt)}g.currentTarget=null,v=G}else for(C=0;C<d.length;C++){if(P=d[C],G=P.instance,nt=P.currentTarget,P=P.listener,G!==v&&g.isPropagationStopped())break t;v=P,g.currentTarget=nt;try{v(g)}catch(mt){yl(mt)}g.currentTarget=null,v=G}}}}function Kt(i,r){var c=r[Nu];c===void 0&&(c=r[Nu]=new Set);var d=i+"__bubble";c.has(d)||(Ey(r,i,2,!1),c.add(d))}function wd(i,r,c){var d=0;r&&(d|=4),Ey(c,i,d,r)}var sc="_reactListening"+Math.random().toString(36).slice(2);function Ad(i){if(!i[sc]){i[sc]=!0,ym.forEach(function(c){c!=="selectionchange"&&(n_.has(c)||wd(c,!1,i),wd(c,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[sc]||(r[sc]=!0,wd("selectionchange",!1,r))}}function Ey(i,r,c,d){switch(t0(r)){case 2:var g=D_;break;case 8:g=R_;break;default:g=Bd}c=g.bind(null,r,c,i),g=void 0,!ju||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),d?g!==void 0?i.addEventListener(r,c,{capture:!0,passive:g}):i.addEventListener(r,c,!0):g!==void 0?i.addEventListener(r,c,{passive:g}):i.addEventListener(r,c,!1)}function Sd(i,r,c,d,g){var v=d;if((r&1)===0&&(r&2)===0&&d!==null)t:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var P=d.stateNode.containerInfo;if(P===g)break;if(C===4)for(C=d.return;C!==null;){var G=C.tag;if((G===3||G===4)&&C.stateNode.containerInfo===g)return;C=C.return}for(;P!==null;){if(C=Ar(P),C===null)return;if(G=C.tag,G===5||G===6||G===26||G===27){d=v=C;continue t}P=P.parentNode}}d=d.return}Dm(function(){var nt=v,mt=Iu(c),yt=[];t:{var rt=sg.get(i);if(rt!==void 0){var ct=ml,kt=i;switch(i){case"keypress":if(fl(c)===0)break t;case"keydown":case"keyup":ct=WS;break;case"focusin":kt="focus",ct=Xu;break;case"focusout":kt="blur",ct=Xu;break;case"beforeblur":case"afterblur":ct=Xu;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Pm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=zS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=QS;break;case tg:case eg:case ng:ct=US;break;case ig:ct=tx;break;case"scroll":case"scrollend":ct=LS;break;case"wheel":ct=nx;break;case"copy":case"cut":case"paste":ct=VS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=Lm;break;case"toggle":case"beforetoggle":ct=sx}var Ft=(r&4)!==0,be=!Ft&&(i==="scroll"||i==="scrollend"),J=Ft?rt!==null?rt+"Capture":null:rt;Ft=[];for(var Y=nt,et;Y!==null;){var bt=Y;if(et=bt.stateNode,bt=bt.tag,bt!==5&&bt!==26&&bt!==27||et===null||J===null||(bt=Pa(Y,J),bt!=null&&Ft.push(fo(Y,bt,et))),be)break;Y=Y.return}0<Ft.length&&(rt=new ct(rt,kt,null,c,mt),yt.push({event:rt,listeners:Ft}))}}if((r&7)===0){t:{if(rt=i==="mouseover"||i==="pointerover",ct=i==="mouseout"||i==="pointerout",rt&&c!==Fu&&(kt=c.relatedTarget||c.fromElement)&&(Ar(kt)||kt[wr]))break t;if((ct||rt)&&(rt=mt.window===mt?mt:(rt=mt.ownerDocument)?rt.defaultView||rt.parentWindow:window,ct?(kt=c.relatedTarget||c.toElement,ct=nt,kt=kt?Ar(kt):null,kt!==null&&(be=o(kt),Ft=kt.tag,kt!==be||Ft!==5&&Ft!==27&&Ft!==6)&&(kt=null)):(ct=null,kt=nt),ct!==kt)){if(Ft=Pm,bt="onMouseLeave",J="onMouseEnter",Y="mouse",(i==="pointerout"||i==="pointerover")&&(Ft=Lm,bt="onPointerLeave",J="onPointerEnter",Y="pointer"),be=ct==null?rt:Na(ct),et=kt==null?rt:Na(kt),rt=new Ft(bt,Y+"leave",ct,c,mt),rt.target=be,rt.relatedTarget=et,bt=null,Ar(mt)===nt&&(Ft=new Ft(J,Y+"enter",kt,c,mt),Ft.target=et,Ft.relatedTarget=be,bt=Ft),be=bt,ct&&kt)e:{for(Ft=i_,J=ct,Y=kt,et=0,bt=J;bt;bt=Ft(bt))et++;bt=0;for(var Bt=Y;Bt;Bt=Ft(Bt))bt++;for(;0<et-bt;)J=Ft(J),et--;for(;0<bt-et;)Y=Ft(Y),bt--;for(;et--;){if(J===Y||Y!==null&&J===Y.alternate){Ft=J;break e}J=Ft(J),Y=Ft(Y)}Ft=null}else Ft=null;ct!==null&&Ty(yt,rt,ct,Ft,!1),kt!==null&&be!==null&&Ty(yt,be,kt,Ft,!0)}}t:{if(rt=nt?Na(nt):window,ct=rt.nodeName&&rt.nodeName.toLowerCase(),ct==="select"||ct==="input"&&rt.type==="file")var ie=Hm;else if(jm(rt))if(Gm)ie=px;else{ie=dx;var Pt=hx}else ct=rt.nodeName,!ct||ct.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?nt&&zu(nt.elementType)&&(ie=Hm):ie=fx;if(ie&&(ie=ie(i,nt))){Vm(yt,ie,c,mt);break t}Pt&&Pt(i,rt,nt),i==="focusout"&&nt&&rt.type==="number"&&nt.memoizedProps.value!=null&&Bu(rt,"number",rt.value)}switch(Pt=nt?Na(nt):window,i){case"focusin":(jm(Pt)||Pt.contentEditable==="true")&&(Dr=Pt,Zu=nt,ja=null);break;case"focusout":ja=Zu=Dr=null;break;case"mousedown":Qu=!0;break;case"contextmenu":case"mouseup":case"dragend":Qu=!1,Qm(yt,c,mt);break;case"selectionchange":if(gx)break;case"keydown":case"keyup":Qm(yt,c,mt)}var Yt;if(qu)t:{switch(i){case"compositionstart":var Jt="onCompositionStart";break t;case"compositionend":Jt="onCompositionEnd";break t;case"compositionupdate":Jt="onCompositionUpdate";break t}Jt=void 0}else Mr?Im(i,c)&&(Jt="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Jt="onCompositionStart");Jt&&(Bm&&c.locale!=="ko"&&(Mr||Jt!=="onCompositionStart"?Jt==="onCompositionEnd"&&Mr&&(Yt=Rm()):(ss=mt,Vu="value"in ss?ss.value:ss.textContent,Mr=!0)),Pt=rc(nt,Jt),0<Pt.length&&(Jt=new Om(Jt,i,null,c,mt),yt.push({event:Jt,listeners:Pt}),Yt?Jt.data=Yt:(Yt=Um(c),Yt!==null&&(Jt.data=Yt)))),(Yt=ax?ox(i,c):lx(i,c))&&(Jt=rc(nt,"onBeforeInput"),0<Jt.length&&(Pt=new Om("onBeforeInput","beforeinput",null,c,mt),yt.push({event:Pt,listeners:Jt}),Pt.data=Yt)),Jx(yt,i,nt,c,mt)}_y(yt,r)})}function fo(i,r,c){return{instance:i,listener:r,currentTarget:c}}function rc(i,r){for(var c=r+"Capture",d=[];i!==null;){var g=i,v=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||v===null||(g=Pa(i,c),g!=null&&d.unshift(fo(i,g,v)),g=Pa(i,r),g!=null&&d.push(fo(i,g,v))),i.tag===3)return d;i=i.return}return[]}function i_(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Ty(i,r,c,d,g){for(var v=r._reactName,C=[];c!==null&&c!==d;){var P=c,G=P.alternate,nt=P.stateNode;if(P=P.tag,G!==null&&G===d)break;P!==5&&P!==26&&P!==27||nt===null||(G=nt,g?(nt=Pa(c,v),nt!=null&&C.unshift(fo(c,nt,G))):g||(nt=Pa(c,v),nt!=null&&C.push(fo(c,nt,G)))),c=c.return}C.length!==0&&i.push({event:r,listeners:C})}var s_=/\r\n?/g,r_=/\u0000|\uFFFD/g;function Cy(i){return(typeof i=="string"?i:""+i).replace(s_,`
`).replace(r_,"")}function ky(i,r){return r=Cy(r),Cy(i)===r}function ge(i,r,c,d,g,v){switch(c){case"children":typeof d=="string"?r==="body"||r==="textarea"&&d===""||Tr(i,d):(typeof d=="number"||typeof d=="bigint")&&r!=="body"&&Tr(i,""+d);break;case"className":cl(i,"class",d);break;case"tabIndex":cl(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":cl(i,c,d);break;case"style":km(i,d,v);break;case"data":if(r!=="object"){cl(i,"data",d);break}case"src":case"href":if(d===""&&(r!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=hl(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(c==="formAction"?(r!=="input"&&ge(i,r,"name",g.name,g,null),ge(i,r,"formEncType",g.formEncType,g,null),ge(i,r,"formMethod",g.formMethod,g,null),ge(i,r,"formTarget",g.formTarget,g,null)):(ge(i,r,"encType",g.encType,g,null),ge(i,r,"method",g.method,g,null),ge(i,r,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=hl(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Oi);break;case"onScroll":d!=null&&Kt("scroll",i);break;case"onScrollEnd":d!=null&&Kt("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=hl(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":Kt("beforetoggle",i),Kt("toggle",i),ll(i,"popover",d);break;case"xlinkActuate":Pi(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Pi(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Pi(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Pi(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Pi(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Pi(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Pi(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Pi(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Pi(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ll(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=PS.get(c)||c,ll(i,c,d))}}function xd(i,r,c,d,g,v){switch(c){case"style":km(i,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(c=d.__html,c!=null){if(g.children!=null)throw Error(n(60));i.innerHTML=c}}break;case"children":typeof d=="string"?Tr(i,d):(typeof d=="number"||typeof d=="bigint")&&Tr(i,""+d);break;case"onScroll":d!=null&&Kt("scroll",i);break;case"onScrollEnd":d!=null&&Kt("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vm.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(g=c.endsWith("Capture"),r=c.slice(2,g?c.length-7:void 0),v=i[Sn]||null,v=v!=null?v[c]:null,typeof v=="function"&&i.removeEventListener(r,v,g),typeof d=="function")){typeof v!="function"&&v!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(r,d,g);break t}c in i?i[c]=d:d===!0?i.setAttribute(c,""):ll(i,c,d)}}}function cn(i,r,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kt("error",i),Kt("load",i);var d=!1,g=!1,v;for(v in c)if(c.hasOwnProperty(v)){var C=c[v];if(C!=null)switch(v){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ge(i,r,v,C,c,null)}}g&&ge(i,r,"srcSet",c.srcSet,c,null),d&&ge(i,r,"src",c.src,c,null);return;case"input":Kt("invalid",i);var P=v=C=g=null,G=null,nt=null;for(d in c)if(c.hasOwnProperty(d)){var mt=c[d];if(mt!=null)switch(d){case"name":g=mt;break;case"type":C=mt;break;case"checked":G=mt;break;case"defaultChecked":nt=mt;break;case"value":v=mt;break;case"defaultValue":P=mt;break;case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(n(137,r));break;default:ge(i,r,d,mt,c,null)}}_m(i,v,P,G,nt,C,g,!1);return;case"select":Kt("invalid",i),d=C=v=null;for(g in c)if(c.hasOwnProperty(g)&&(P=c[g],P!=null))switch(g){case"value":v=P;break;case"defaultValue":C=P;break;case"multiple":d=P;default:ge(i,r,g,P,c,null)}r=v,c=C,i.multiple=!!d,r!=null?Er(i,!!d,r,!1):c!=null&&Er(i,!!d,c,!0);return;case"textarea":Kt("invalid",i),v=g=d=null;for(C in c)if(c.hasOwnProperty(C)&&(P=c[C],P!=null))switch(C){case"value":d=P;break;case"defaultValue":g=P;break;case"children":v=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(n(91));break;default:ge(i,r,C,P,c,null)}Tm(i,d,g,v);return;case"option":for(G in c)c.hasOwnProperty(G)&&(d=c[G],d!=null)&&(G==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":ge(i,r,G,d,c,null));return;case"dialog":Kt("beforetoggle",i),Kt("toggle",i),Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":Kt("load",i);break;case"video":case"audio":for(d=0;d<ho.length;d++)Kt(ho[d],i);break;case"image":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"embed":case"source":case"link":Kt("error",i),Kt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(nt in c)if(c.hasOwnProperty(nt)&&(d=c[nt],d!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:ge(i,r,nt,d,c,null)}return;default:if(zu(r)){for(mt in c)c.hasOwnProperty(mt)&&(d=c[mt],d!==void 0&&xd(i,r,mt,d,c,void 0));return}}for(P in c)c.hasOwnProperty(P)&&(d=c[P],d!=null&&ge(i,r,P,d,c,null))}function a_(i,r,c,d){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,v=null,C=null,P=null,G=null,nt=null,mt=null;for(ct in c){var yt=c[ct];if(c.hasOwnProperty(ct)&&yt!=null)switch(ct){case"checked":break;case"value":break;case"defaultValue":G=yt;default:d.hasOwnProperty(ct)||ge(i,r,ct,null,d,yt)}}for(var rt in d){var ct=d[rt];if(yt=c[rt],d.hasOwnProperty(rt)&&(ct!=null||yt!=null))switch(rt){case"type":v=ct;break;case"name":g=ct;break;case"checked":nt=ct;break;case"defaultChecked":mt=ct;break;case"value":C=ct;break;case"defaultValue":P=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(n(137,r));break;default:ct!==yt&&ge(i,r,rt,ct,d,yt)}}Lu(i,C,P,G,nt,mt,v,g);return;case"select":ct=C=P=rt=null;for(v in c)if(G=c[v],c.hasOwnProperty(v)&&G!=null)switch(v){case"value":break;case"multiple":ct=G;default:d.hasOwnProperty(v)||ge(i,r,v,null,d,G)}for(g in d)if(v=d[g],G=c[g],d.hasOwnProperty(g)&&(v!=null||G!=null))switch(g){case"value":rt=v;break;case"defaultValue":P=v;break;case"multiple":C=v;default:v!==G&&ge(i,r,g,v,d,G)}r=P,c=C,d=ct,rt!=null?Er(i,!!c,rt,!1):!!d!=!!c&&(r!=null?Er(i,!!c,r,!0):Er(i,!!c,c?[]:"",!1));return;case"textarea":ct=rt=null;for(P in c)if(g=c[P],c.hasOwnProperty(P)&&g!=null&&!d.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:ge(i,r,P,null,d,g)}for(C in d)if(g=d[C],v=c[C],d.hasOwnProperty(C)&&(g!=null||v!=null))switch(C){case"value":rt=g;break;case"defaultValue":ct=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==v&&ge(i,r,C,g,d,v)}Em(i,rt,ct);return;case"option":for(var kt in c)rt=c[kt],c.hasOwnProperty(kt)&&rt!=null&&!d.hasOwnProperty(kt)&&(kt==="selected"?i.selected=!1:ge(i,r,kt,null,d,rt));for(G in d)rt=d[G],ct=c[G],d.hasOwnProperty(G)&&rt!==ct&&(rt!=null||ct!=null)&&(G==="selected"?i.selected=rt&&typeof rt!="function"&&typeof rt!="symbol":ge(i,r,G,rt,d,ct));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ft in c)rt=c[Ft],c.hasOwnProperty(Ft)&&rt!=null&&!d.hasOwnProperty(Ft)&&ge(i,r,Ft,null,d,rt);for(nt in d)if(rt=d[nt],ct=c[nt],d.hasOwnProperty(nt)&&rt!==ct&&(rt!=null||ct!=null))switch(nt){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,r));break;default:ge(i,r,nt,rt,d,ct)}return;default:if(zu(r)){for(var be in c)rt=c[be],c.hasOwnProperty(be)&&rt!==void 0&&!d.hasOwnProperty(be)&&xd(i,r,be,void 0,d,rt);for(mt in d)rt=d[mt],ct=c[mt],!d.hasOwnProperty(mt)||rt===ct||rt===void 0&&ct===void 0||xd(i,r,mt,rt,d,ct);return}}for(var J in c)rt=c[J],c.hasOwnProperty(J)&&rt!=null&&!d.hasOwnProperty(J)&&ge(i,r,J,null,d,rt);for(yt in d)rt=d[yt],ct=c[yt],!d.hasOwnProperty(yt)||rt===ct||rt==null&&ct==null||ge(i,r,yt,rt,d,ct)}function My(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function o_(){if(typeof performance.getEntriesByType=="function"){for(var i=0,r=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var g=c[d],v=g.transferSize,C=g.initiatorType,P=g.duration;if(v&&P&&My(C)){for(C=0,P=g.responseEnd,d+=1;d<c.length;d++){var G=c[d],nt=G.startTime;if(nt>P)break;var mt=G.transferSize,yt=G.initiatorType;mt&&My(yt)&&(G=G.responseEnd,C+=mt*(G<P?1:(P-nt)/(G-nt)))}if(--d,r+=8*(v+C)/(g.duration/1e3),i++,10<i)break}}if(0<i)return r/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var _d=null,Ed=null;function ac(i){return i.nodeType===9?i:i.ownerDocument}function Dy(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ry(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Td(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Cd=null;function l_(){var i=window.event;return i&&i.type==="popstate"?i===Cd?!1:(Cd=i,!0):(Cd=null,!1)}var Ny=typeof setTimeout=="function"?setTimeout:void 0,c_=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,u_=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(i){return Py.resolve(null).then(i).catch(h_)}:Ny;function h_(i){setTimeout(function(){throw i})}function As(i){return i==="head"}function Oy(i,r){var c=r,d=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(g),ia(r);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")po(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,po(c);for(var v=c.firstChild;v;){var C=v.nextSibling,P=v.nodeName;v[Ra]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&v.rel.toLowerCase()==="stylesheet"||c.removeChild(v),v=C}}else c==="body"&&po(i.ownerDocument.body);c=g}while(c);ia(r)}function Ly(i,r){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?r?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(r?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function kd(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var c=r;switch(r=r.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":kd(c),Pu(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function d_(i,r,c,d){for(;i.nodeType===1;){var g=c;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[Ra])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var v=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=ti(i.nextSibling),i===null)break}return null}function f_(i,r,c){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=ti(i.nextSibling),i===null))return null;return i}function By(i,r){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!r||(i=ti(i.nextSibling),i===null))return null;return i}function Md(i){return i.data==="$?"||i.data==="$~"}function Dd(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function p_(i,r){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=r;else if(i.data!=="$?"||c.readyState!=="loading")r();else{var d=function(){r(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function ti(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return i}var Rd=null;function zy(i){i=i.nextSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(r===0)return ti(i.nextSibling);r--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||r++}i=i.nextSibling}return null}function Fy(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(r===0)return i;r--}else c!=="/$"&&c!=="/&"||r++}i=i.previousSibling}return null}function Iy(i,r,c){switch(r=ac(c),i){case"html":if(i=r.documentElement,!i)throw Error(n(452));return i;case"head":if(i=r.head,!i)throw Error(n(453));return i;case"body":if(i=r.body,!i)throw Error(n(454));return i;default:throw Error(n(451))}}function po(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);Pu(i)}var ei=new Map,Uy=new Set;function oc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Ki=j.d;j.d={f:m_,r:g_,D:b_,C:y_,L:v_,m:w_,X:S_,S:A_,M:x_};function m_(){var i=Ki.f(),r=Ql();return i||r}function g_(i){var r=Sr(i);r!==null&&r.tag===5&&r.type==="form"?ib(r):Ki.r(i)}var ta=typeof document>"u"?null:document;function jy(i,r,c){var d=ta;if(d&&typeof r=="string"&&r){var g=qn(r);g='link[rel="'+i+'"][href="'+g+'"]',typeof c=="string"&&(g+='[crossorigin="'+c+'"]'),Uy.has(g)||(Uy.add(g),i={rel:i,crossOrigin:c,href:r},d.querySelector(g)===null&&(r=d.createElement("link"),cn(r,"link",i),Je(r),d.head.appendChild(r)))}}function b_(i){Ki.D(i),jy("dns-prefetch",i,null)}function y_(i,r){Ki.C(i,r),jy("preconnect",i,r)}function v_(i,r,c){Ki.L(i,r,c);var d=ta;if(d&&i&&r){var g='link[rel="preload"][as="'+qn(r)+'"]';r==="image"&&c&&c.imageSrcSet?(g+='[imagesrcset="'+qn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(g+='[imagesizes="'+qn(c.imageSizes)+'"]')):g+='[href="'+qn(i)+'"]';var v=g;switch(r){case"style":v=ea(i);break;case"script":v=na(i)}ei.has(v)||(i=m({rel:"preload",href:r==="image"&&c&&c.imageSrcSet?void 0:i,as:r},c),ei.set(v,i),d.querySelector(g)!==null||r==="style"&&d.querySelector(mo(v))||r==="script"&&d.querySelector(go(v))||(r=d.createElement("link"),cn(r,"link",i),Je(r),d.head.appendChild(r)))}}function w_(i,r){Ki.m(i,r);var c=ta;if(c&&i){var d=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+qn(d)+'"][href="'+qn(i)+'"]',v=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=na(i)}if(!ei.has(v)&&(i=m({rel:"modulepreload",href:i},r),ei.set(v,i),c.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(go(v)))return}d=c.createElement("link"),cn(d,"link",i),Je(d),c.head.appendChild(d)}}}function A_(i,r,c){Ki.S(i,r,c);var d=ta;if(d&&i){var g=xr(d).hoistableStyles,v=ea(i);r=r||"default";var C=g.get(v);if(!C){var P={loading:0,preload:null};if(C=d.querySelector(mo(v)))P.loading=5;else{i=m({rel:"stylesheet",href:i,"data-precedence":r},c),(c=ei.get(v))&&Nd(i,c);var G=C=d.createElement("link");Je(G),cn(G,"link",i),G._p=new Promise(function(nt,mt){G.onload=nt,G.onerror=mt}),G.addEventListener("load",function(){P.loading|=1}),G.addEventListener("error",function(){P.loading|=2}),P.loading|=4,lc(C,r,d)}C={type:"stylesheet",instance:C,count:1,state:P},g.set(v,C)}}}function S_(i,r){Ki.X(i,r);var c=ta;if(c&&i){var d=xr(c).hoistableScripts,g=na(i),v=d.get(g);v||(v=c.querySelector(go(g)),v||(i=m({src:i,async:!0},r),(r=ei.get(g))&&Pd(i,r),v=c.createElement("script"),Je(v),cn(v,"link",i),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function x_(i,r){Ki.M(i,r);var c=ta;if(c&&i){var d=xr(c).hoistableScripts,g=na(i),v=d.get(g);v||(v=c.querySelector(go(g)),v||(i=m({src:i,async:!0,type:"module"},r),(r=ei.get(g))&&Pd(i,r),v=c.createElement("script"),Je(v),cn(v,"link",i),c.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(g,v))}}function Vy(i,r,c,d){var g=(g=ht.current)?oc(g):null;if(!g)throw Error(n(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(r=ea(c.href),c=xr(g).hoistableStyles,d=c.get(r),d||(d={type:"style",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=ea(c.href);var v=xr(g).hoistableStyles,C=v.get(i);if(C||(g=g.ownerDocument||g,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,C),(v=g.querySelector(mo(i)))&&!v._p&&(C.instance=v,C.state.loading=5),ei.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ei.set(i,c),v||__(g,i,c,C.state))),r&&d===null)throw Error(n(528,""));return C}if(r&&d!==null)throw Error(n(529,""));return null;case"script":return r=c.async,c=c.src,typeof c=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=na(c),c=xr(g).hoistableScripts,d=c.get(r),d||(d={type:"script",instance:null,count:0,state:null},c.set(r,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,i))}}function ea(i){return'href="'+qn(i)+'"'}function mo(i){return'link[rel="stylesheet"]['+i+"]"}function Hy(i){return m({},i,{"data-precedence":i.precedence,precedence:null})}function __(i,r,c,d){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?d.loading=1:(r=i.createElement("link"),d.preload=r,r.addEventListener("load",function(){return d.loading|=1}),r.addEventListener("error",function(){return d.loading|=2}),cn(r,"link",c),Je(r),i.head.appendChild(r))}function na(i){return'[src="'+qn(i)+'"]'}function go(i){return"script[async]"+i}function Gy(i,r,c){if(r.count++,r.instance===null)switch(r.type){case"style":var d=i.querySelector('style[data-href~="'+qn(c.href)+'"]');if(d)return r.instance=d,Je(d),d;var g=m({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Je(d),cn(d,"style",g),lc(d,c.precedence,i),r.instance=d;case"stylesheet":g=ea(c.href);var v=i.querySelector(mo(g));if(v)return r.state.loading|=4,r.instance=v,Je(v),v;d=Hy(c),(g=ei.get(g))&&Nd(d,g),v=(i.ownerDocument||i).createElement("link"),Je(v);var C=v;return C._p=new Promise(function(P,G){C.onload=P,C.onerror=G}),cn(v,"link",d),r.state.loading|=4,lc(v,c.precedence,i),r.instance=v;case"script":return v=na(c.src),(g=i.querySelector(go(v)))?(r.instance=g,Je(g),g):(d=c,(g=ei.get(v))&&(d=m({},c),Pd(d,g)),i=i.ownerDocument||i,g=i.createElement("script"),Je(g),cn(g,"link",d),i.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(d=r.instance,r.state.loading|=4,lc(d,c.precedence,i));return r.instance}function lc(i,r,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,v=g,C=0;C<d.length;C++){var P=d[C];if(P.dataset.precedence===r)v=P;else if(v!==g)break}v?v.parentNode.insertBefore(i,v.nextSibling):(r=c.nodeType===9?c.head:c,r.insertBefore(i,r.firstChild))}function Nd(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Pd(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var cc=null;function Xy(i,r,c){if(cc===null){var d=new Map,g=cc=new Map;g.set(c,d)}else g=cc,d=g.get(c),d||(d=new Map,g.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),g=0;g<c.length;g++){var v=c[g];if(!(v[Ra]||v[rn]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var C=v.getAttribute(r)||"";C=i+C;var P=d.get(C);P?P.push(v):d.set(C,[v])}}return d}function Yy(i,r,c){i=i.ownerDocument||i,i.head.insertBefore(c,r==="title"?i.querySelector("head > title"):null)}function E_(i,r,c){if(c===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(i=r.disabled,typeof r.precedence=="string"&&i==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function qy(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function T_(i,r,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var g=ea(d.href),v=r.querySelector(mo(g));if(v){r=v._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(i.count++,i=uc.bind(i),r.then(i,i)),c.state.loading|=4,c.instance=v,Je(v);return}v=r.ownerDocument||r,d=Hy(d),(g=ei.get(g))&&Nd(d,g),v=v.createElement("link"),Je(v);var C=v;C._p=new Promise(function(P,G){C.onload=P,C.onerror=G}),cn(v,"link",d),c.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,r),(r=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=uc.bind(i),r.addEventListener("load",c),r.addEventListener("error",c))}}var Od=0;function C_(i,r){return i.stylesheets&&i.count===0&&dc(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&dc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+r);0<i.imgBytes&&Od===0&&(Od=62500*o_());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&dc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>Od?50:800)+r);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function uc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var hc=null;function dc(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,hc=new Map,r.forEach(k_,i),hc=null,uc.call(i))}function k_(i,r){if(!(r.state.loading&4)){var c=hc.get(i);if(c)var d=c.get(null);else{c=new Map,hc.set(i,c);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<g.length;v++){var C=g[v];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(c.set(C.dataset.precedence,C),d=C)}d&&c.set(null,d)}g=r.instance,C=g.getAttribute("data-precedence"),v=c.get(C)||d,v===d&&c.set(null,g),c.set(C,g),this.count++,d=uc.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),v?v.parentNode.insertBefore(g,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),r.state.loading|=4}}var bo={$$typeof:T,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function M_(i,r,c,d,g,v,C,P,G){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mu(0),this.hiddenUpdates=Mu(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=v,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function $y(i,r,c,d,g,v,C,P,G,nt,mt,yt){return i=new M_(i,r,c,C,G,nt,mt,yt,P),r=1,v===!0&&(r|=24),v=Pn(3,null,null,r),i.current=v,v.stateNode=i,r=fh(),r.refCount++,i.pooledCache=r,r.refCount++,v.memoizedState={element:d,isDehydrated:c,cache:r},bh(v),i}function Wy(i){return i?(i=Pr,i):Pr}function Ky(i,r,c,d,g,v){g=Wy(g),d.context===null?d.context=g:d.pendingContext=g,d=us(r),d.payload={element:c},v=v===void 0?null:v,v!==null&&(d.callback=v),c=hs(i,d,r),c!==null&&(kn(c,i,r),$a(c,i,r))}function Zy(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<r?c:r}}function Ld(i,r){Zy(i,r),(i=i.alternate)&&Zy(i,r)}function Qy(i){if(i.tag===13||i.tag===31){var r=Gs(i,67108864);r!==null&&kn(r,i,67108864),Ld(i,67108864)}}function Jy(i){if(i.tag===13||i.tag===31){var r=Fn();r=Du(r);var c=Gs(i,r);c!==null&&kn(c,i,r),Ld(i,r)}}var fc=!0;function D_(i,r,c,d){var g=H.T;H.T=null;var v=j.p;try{j.p=2,Bd(i,r,c,d)}finally{j.p=v,H.T=g}}function R_(i,r,c,d){var g=H.T;H.T=null;var v=j.p;try{j.p=8,Bd(i,r,c,d)}finally{j.p=v,H.T=g}}function Bd(i,r,c,d){if(fc){var g=zd(d);if(g===null)Sd(i,r,d,pc,c),e0(i,d);else if(P_(g,i,r,c,d))d.stopPropagation();else if(e0(i,d),r&4&&-1<N_.indexOf(i)){for(;g!==null;){var v=Sr(g);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var C=Xn(v.pendingLanes);if(C!==0){var P=v;for(P.pendingLanes|=2,P.entangledLanes|=2;C;){var G=1<<31-Ce(C);P.entanglements[1]|=G,C&=~G}Ai(v),(ae&6)===0&&(Kl=Et()+500,uo(0))}}break;case 31:case 13:P=Gs(v,2),P!==null&&kn(P,v,2),Ql(),Ld(v,2)}if(v=zd(d),v===null&&Sd(i,r,d,pc,c),v===g)break;g=v}g!==null&&d.stopPropagation()}else Sd(i,r,d,null,c)}}function zd(i){return i=Iu(i),Fd(i)}var pc=null;function Fd(i){if(pc=null,i=Ar(i),i!==null){var r=o(i);if(r===null)i=null;else{var c=r.tag;if(c===13){if(i=l(r),i!==null)return i;i=null}else if(c===31){if(i=u(r),i!==null)return i;i=null}else if(c===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return pc=i,null}function t0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(xt()){case Lt:return 2;case re:return 8;case Xt:case sn:return 32;case li:return 268435456;default:return 32}default:return 32}}var Id=!1,Ss=null,xs=null,_s=null,yo=new Map,vo=new Map,Es=[],N_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function e0(i,r){switch(i){case"focusin":case"focusout":Ss=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":yo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(r.pointerId)}}function wo(i,r,c,d,g,v){return i===null||i.nativeEvent!==v?(i={blockedOn:r,domEventName:c,eventSystemFlags:d,nativeEvent:v,targetContainers:[g]},r!==null&&(r=Sr(r),r!==null&&Qy(r)),i):(i.eventSystemFlags|=d,r=i.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),i)}function P_(i,r,c,d,g){switch(r){case"focusin":return Ss=wo(Ss,i,r,c,d,g),!0;case"dragenter":return xs=wo(xs,i,r,c,d,g),!0;case"mouseover":return _s=wo(_s,i,r,c,d,g),!0;case"pointerover":var v=g.pointerId;return yo.set(v,wo(yo.get(v)||null,i,r,c,d,g)),!0;case"gotpointercapture":return v=g.pointerId,vo.set(v,wo(vo.get(v)||null,i,r,c,d,g)),!0}return!1}function n0(i){var r=Ar(i.target);if(r!==null){var c=o(r);if(c!==null){if(r=c.tag,r===13){if(r=l(c),r!==null){i.blockedOn=r,gm(i.priority,function(){Jy(c)});return}}else if(r===31){if(r=u(c),r!==null){i.blockedOn=r,gm(i.priority,function(){Jy(c)});return}}else if(r===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function mc(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var c=zd(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);Fu=d,c.target.dispatchEvent(d),Fu=null}else return r=Sr(c),r!==null&&Qy(r),i.blockedOn=c,!1;r.shift()}return!0}function i0(i,r,c){mc(i)&&c.delete(r)}function O_(){Id=!1,Ss!==null&&mc(Ss)&&(Ss=null),xs!==null&&mc(xs)&&(xs=null),_s!==null&&mc(_s)&&(_s=null),yo.forEach(i0),vo.forEach(i0)}function gc(i,r){i.blockedOn===r&&(i.blockedOn=null,Id||(Id=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,O_)))}var bc=null;function s0(i){bc!==i&&(bc=i,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){bc===i&&(bc=null);for(var r=0;r<i.length;r+=3){var c=i[r],d=i[r+1],g=i[r+2];if(typeof d!="function"){if(Fd(d||c)===null)continue;break}var v=Sr(c);v!==null&&(i.splice(r,3),r-=3,zh(v,{pending:!0,data:g,method:c.method,action:d},d,g))}}))}function ia(i){function r(G){return gc(G,i)}Ss!==null&&gc(Ss,i),xs!==null&&gc(xs,i),_s!==null&&gc(_s,i),yo.forEach(r),vo.forEach(r);for(var c=0;c<Es.length;c++){var d=Es[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<Es.length&&(c=Es[0],c.blockedOn===null);)n0(c),c.blockedOn===null&&Es.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var g=c[d],v=c[d+1],C=g[Sn]||null;if(typeof v=="function")C||s0(c);else if(C){var P=null;if(v&&v.hasAttribute("formAction")){if(g=v,C=v[Sn]||null)P=C.formAction;else if(Fd(g)!==null)continue}else P=C.action;typeof P=="function"?c[d+1]=P:(c.splice(d,3),d-=3),s0(c)}}}function r0(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(C){return g=C})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function Ud(i){this._internalRoot=i}yc.prototype.render=Ud.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(n(409));var c=r.current,d=Fn();Ky(c,d,i,r,null,null)},yc.prototype.unmount=Ud.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;Ky(i.current,2,null,i,null,null),Ql(),r[wr]=null}};function yc(i){this._internalRoot=i}yc.prototype.unstable_scheduleHydration=function(i){if(i){var r=mm();i={blockedOn:null,target:i,priority:r};for(var c=0;c<Es.length&&r!==0&&r<Es[c].priority;c++);Es.splice(c,0,i),c===0&&n0(i)}};var a0=t.version;if(a0!=="19.2.4")throw Error(n(527,a0,"19.2.4"));j.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(n(188)):(i=Object.keys(i).join(","),Error(n(268,i)));return i=f(r),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var L_={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{de=vc.inject(L_),Qe=vc}catch{}}return So.createRoot=function(i,r){if(!s(i))throw Error(n(299));var c=!1,d="",g=fb,v=pb,C=mb;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(d=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),r=$y(i,1,!1,null,null,c,d,null,g,v,C,r0),i[wr]=r.current,Ad(i),new Ud(r)},So.hydrateRoot=function(i,r,c){if(!s(i))throw Error(n(299));var d=!1,g="",v=fb,C=pb,P=mb,G=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(P=c.onRecoverableError),c.formState!==void 0&&(G=c.formState)),r=$y(i,1,!0,r,c??null,d,g,G,v,C,P,r0),r.context=Wy(null),c=r.current,d=Fn(),d=Du(d),g=us(d),g.callback=null,hs(c,g,d),c=d,r.current.lanes=c,Da(r,c),Ai(r),i[wr]=r.current,Ad(i),new yc(r)},So.version="19.2.4",So}var y0;function Y_(){if(y0)return Gd.exports;y0=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),Gd.exports=X_(),Gd.exports}var q_=Y_();const C1=(...a)=>a.filter((t,e,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===e).join(" ").trim();const $_=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const W_=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase());const v0=a=>{const t=W_(a);return t.charAt(0).toUpperCase()+t.slice(1)};var K_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Z_=a=>{for(const t in a)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};const Q_=_t.forwardRef(({color:a="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:l,...u},h)=>_t.createElement("svg",{ref:h,...K_,width:t,height:t,stroke:a,strokeWidth:n?Number(e)*24/Number(t):e,className:C1("lucide",s),...!o&&!Z_(u)&&{"aria-hidden":"true"},...u},[...l.map(([f,p])=>_t.createElement(f,p)),...Array.isArray(o)?o:[o]]));const Vn=(a,t)=>{const e=_t.forwardRef(({className:n,...s},o)=>_t.createElement(Q_,{ref:o,iconNode:t,className:C1(`lucide-${$_(v0(a))}`,`lucide-${a}`,n),...s}));return e.displayName=v0(a),e};const J_=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],tE=Vn("chevron-right",J_);const eE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nE=Vn("circle-check",eE);const iE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sE=Vn("eye",iE);const rE=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],aE=Vn("loader-circle",rE);const oE=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],lE=Vn("moon",oE);const cE=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]],uE=Vn("scan-eye",cE);const hE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],dE=Vn("search",hE);const fE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],pE=Vn("shield-alert",fE);const mE=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],gE=Vn("sun",mE);const bE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yE=Vn("trash-2",bE);const vE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],wE=Vn("triangle-alert",vE);const AE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],w0=Vn("upload",AE);const SE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xE=Vn("x",SE),fp=_t.createContext({});function pp(a){const t=_t.useRef(null);return t.current===null&&(t.current=a()),t.current}const k1=typeof window<"u",M1=k1?_t.useLayoutEffect:_t.useEffect,hu=_t.createContext(null);function mp(a,t){a.indexOf(t)===-1&&a.push(t)}function Zc(a,t){const e=a.indexOf(t);e>-1&&a.splice(e,1)}const Di=(a,t,e)=>e>t?t:e<a?a:e;let gp=()=>{};const ns={},D1=a=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(a);function R1(a){return typeof a=="object"&&a!==null}const N1=a=>/^0[^.\s]+$/u.test(a);function P1(a){let t;return()=>(t===void 0&&(t=a()),t)}const ai=a=>a,_E=(a,t)=>e=>t(a(e)),Zo=(...a)=>a.reduce(_E),jo=(a,t,e)=>{const n=t-a;return n===0?1:(e-a)/n};class bp{constructor(){this.subscriptions=[]}add(t){return mp(this.subscriptions,t),()=>Zc(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let o=0;o<s;o++){const l=this.subscriptions[o];l&&l(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mi=a=>a*1e3,ri=a=>a/1e3;function O1(a,t){return t?a*(1e3/t):0}const L1=(a,t,e)=>(((1-3*e+3*t)*a+(3*e-6*t))*a+3*t)*a,EE=1e-7,TE=12;function CE(a,t,e,n,s){let o,l,u=0;do l=t+(e-t)/2,o=L1(l,n,s)-a,o>0?e=l:t=l;while(Math.abs(o)>EE&&++u<TE);return l}function Qo(a,t,e,n){if(a===t&&e===n)return ai;const s=o=>CE(o,0,1,a,e);return o=>o===0||o===1?o:L1(s(o),t,n)}const B1=a=>t=>t<=.5?a(2*t)/2:(2-a(2*(1-t)))/2,z1=a=>t=>1-a(1-t),F1=Qo(.33,1.53,.69,.99),yp=z1(F1),I1=B1(yp),U1=a=>(a*=2)<1?.5*yp(a):.5*(2-Math.pow(2,-10*(a-1))),vp=a=>1-Math.sin(Math.acos(a)),j1=z1(vp),V1=B1(vp),kE=Qo(.42,0,1,1),ME=Qo(0,0,.58,1),H1=Qo(.42,0,.58,1),DE=a=>Array.isArray(a)&&typeof a[0]!="number",G1=a=>Array.isArray(a)&&typeof a[0]=="number",RE={linear:ai,easeIn:kE,easeInOut:H1,easeOut:ME,circIn:vp,circInOut:V1,circOut:j1,backIn:yp,backInOut:I1,backOut:F1,anticipate:U1},NE=a=>typeof a=="string",A0=a=>{if(G1(a)){gp(a.length===4);const[t,e,n,s]=a;return Qo(t,e,n,s)}else if(NE(a))return RE[a];return a},Ac=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function PE(a,t){let e=new Set,n=new Set,s=!1,o=!1;const l=new WeakSet;let u={delta:0,timestamp:0,isProcessing:!1};function h(p){l.has(p)&&(f.schedule(p),a()),p(u)}const f={schedule:(p,m=!1,b=!1)=>{const A=b&&s?e:n;return m&&l.add(p),A.has(p)||A.add(p),p},cancel:p=>{n.delete(p),l.delete(p)},process:p=>{if(u=p,s){o=!0;return}s=!0,[e,n]=[n,e],e.forEach(h),e.clear(),s=!1,o&&(o=!1,f.process(p))}};return f}const OE=40;function X1(a,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>e=!0,l=Ac.reduce((T,R)=>(T[R]=PE(o),T),{}),{setup:u,read:h,resolveKeyframes:f,preUpdate:p,update:m,preRender:b,render:y,postRender:A}=l,w=()=>{const T=ns.useManualTiming?s.timestamp:performance.now();e=!1,ns.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(T-s.timestamp,OE),1)),s.timestamp=T,s.isProcessing=!0,u.process(s),h.process(s),f.process(s),p.process(s),m.process(s),b.process(s),y.process(s),A.process(s),s.isProcessing=!1,e&&t&&(n=!1,a(w))},x=()=>{e=!0,n=!0,s.isProcessing||a(w)};return{schedule:Ac.reduce((T,R)=>{const D=l[R];return T[R]=(O,L=!1,z=!1)=>(e||x(),D.schedule(O,L,z)),T},{}),cancel:T=>{for(let R=0;R<Ac.length;R++)l[Ac[R]].cancel(T)},state:s,steps:l}}const{schedule:Ae,cancel:Os,state:hn,steps:$d}=X1(typeof requestAnimationFrame<"u"?requestAnimationFrame:ai,!0);let Ic;function LE(){Ic=void 0}const vn={now:()=>(Ic===void 0&&vn.set(hn.isProcessing||ns.useManualTiming?hn.timestamp:performance.now()),Ic),set:a=>{Ic=a,queueMicrotask(LE)}},Y1=a=>t=>typeof t=="string"&&t.startsWith(a),q1=Y1("--"),BE=Y1("var(--"),wp=a=>BE(a)?zE.test(a.split("/*")[0].trim()):!1,zE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function S0(a){return typeof a!="string"?!1:a.split("/*")[0].includes("var(--")}const Ta={test:a=>typeof a=="number",parse:parseFloat,transform:a=>a},Vo={...Ta,transform:a=>Di(0,1,a)},Sc={...Ta,default:1},Bo=a=>Math.round(a*1e5)/1e5,Ap=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function FE(a){return a==null}const IE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sp=(a,t)=>e=>!!(typeof e=="string"&&IE.test(e)&&e.startsWith(a)||t&&!FE(e)&&Object.prototype.hasOwnProperty.call(e,t)),$1=(a,t,e)=>n=>{if(typeof n!="string")return n;const[s,o,l,u]=n.match(Ap);return{[a]:parseFloat(s),[t]:parseFloat(o),[e]:parseFloat(l),alpha:u!==void 0?parseFloat(u):1}},UE=a=>Di(0,255,a),Wd={...Ta,transform:a=>Math.round(UE(a))},ar={test:Sp("rgb","red"),parse:$1("red","green","blue"),transform:({red:a,green:t,blue:e,alpha:n=1})=>"rgba("+Wd.transform(a)+", "+Wd.transform(t)+", "+Wd.transform(e)+", "+Bo(Vo.transform(n))+")"};function jE(a){let t="",e="",n="",s="";return a.length>5?(t=a.substring(1,3),e=a.substring(3,5),n=a.substring(5,7),s=a.substring(7,9)):(t=a.substring(1,2),e=a.substring(2,3),n=a.substring(3,4),s=a.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Tf={test:Sp("#"),parse:jE,transform:ar.transform},Jo=a=>({test:t=>typeof t=="string"&&t.endsWith(a)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${a}`}),Ms=Jo("deg"),Mi=Jo("%"),Rt=Jo("px"),VE=Jo("vh"),HE=Jo("vw"),x0={...Mi,parse:a=>Mi.parse(a)/100,transform:a=>Mi.transform(a*100)},ua={test:Sp("hsl","hue"),parse:$1("hue","saturation","lightness"),transform:({hue:a,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(a)+", "+Mi.transform(Bo(t))+", "+Mi.transform(Bo(e))+", "+Bo(Vo.transform(n))+")"},Ye={test:a=>ar.test(a)||Tf.test(a)||ua.test(a),parse:a=>ar.test(a)?ar.parse(a):ua.test(a)?ua.parse(a):Tf.parse(a),transform:a=>typeof a=="string"?a:a.hasOwnProperty("red")?ar.transform(a):ua.transform(a),getAnimatableNone:a=>{const t=Ye.parse(a);return t.alpha=0,Ye.transform(t)}},GE=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function XE(a){return isNaN(a)&&typeof a=="string"&&(a.match(Ap)?.length||0)+(a.match(GE)?.length||0)>0}const W1="number",K1="color",YE="var",qE="var(",_0="${}",$E=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ho(a){const t=a.toString(),e=[],n={color:[],number:[],var:[]},s=[];let o=0;const u=t.replace($E,h=>(Ye.test(h)?(n.color.push(o),s.push(K1),e.push(Ye.parse(h))):h.startsWith(qE)?(n.var.push(o),s.push(YE),e.push(h)):(n.number.push(o),s.push(W1),e.push(parseFloat(h))),++o,_0)).split(_0);return{values:e,split:u,indexes:n,types:s}}function Z1(a){return Ho(a).values}function Q1(a){const{split:t,types:e}=Ho(a),n=t.length;return s=>{let o="";for(let l=0;l<n;l++)if(o+=t[l],s[l]!==void 0){const u=e[l];u===W1?o+=Bo(s[l]):u===K1?o+=Ye.transform(s[l]):o+=s[l]}return o}}const WE=a=>typeof a=="number"?0:Ye.test(a)?Ye.getAnimatableNone(a):a;function KE(a){const t=Z1(a);return Q1(a)(t.map(WE))}const gi={test:XE,parse:Z1,createTransformer:Q1,getAnimatableNone:KE};function Kd(a,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?a+(t-a)*6*e:e<1/2?t:e<2/3?a+(t-a)*(2/3-e)*6:a}function ZE({hue:a,saturation:t,lightness:e,alpha:n}){a/=360,t/=100,e/=100;let s=0,o=0,l=0;if(!t)s=o=l=e;else{const u=e<.5?e*(1+t):e+t-e*t,h=2*e-u;s=Kd(h,u,a+1/3),o=Kd(h,u,a),l=Kd(h,u,a-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:n}}function Qc(a,t){return e=>e>0?t:a}const Me=(a,t,e)=>a+(t-a)*e,Zd=(a,t,e)=>{const n=a*a,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},QE=[Tf,ar,ua],JE=a=>QE.find(t=>t.test(a));function E0(a){const t=JE(a);if(!t)return!1;let e=t.parse(a);return t===ua&&(e=ZE(e)),e}const T0=(a,t)=>{const e=E0(a),n=E0(t);if(!e||!n)return Qc(a,t);const s={...e};return o=>(s.red=Zd(e.red,n.red,o),s.green=Zd(e.green,n.green,o),s.blue=Zd(e.blue,n.blue,o),s.alpha=Me(e.alpha,n.alpha,o),ar.transform(s))},Cf=new Set(["none","hidden"]);function tT(a,t){return Cf.has(a)?e=>e<=0?a:t:e=>e>=1?t:a}function eT(a,t){return e=>Me(a,t,e)}function xp(a){return typeof a=="number"?eT:typeof a=="string"?wp(a)?Qc:Ye.test(a)?T0:sT:Array.isArray(a)?J1:typeof a=="object"?Ye.test(a)?T0:nT:Qc}function J1(a,t){const e=[...a],n=e.length,s=a.map((o,l)=>xp(o)(o,t[l]));return o=>{for(let l=0;l<n;l++)e[l]=s[l](o);return e}}function nT(a,t){const e={...a,...t},n={};for(const s in e)a[s]!==void 0&&t[s]!==void 0&&(n[s]=xp(a[s])(a[s],t[s]));return s=>{for(const o in n)e[o]=n[o](s);return e}}function iT(a,t){const e=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const o=t.types[s],l=a.indexes[o][n[o]],u=a.values[l]??0;e[s]=u,n[o]++}return e}const sT=(a,t)=>{const e=gi.createTransformer(t),n=Ho(a),s=Ho(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Cf.has(a)&&!s.values.length||Cf.has(t)&&!n.values.length?tT(a,t):Zo(J1(iT(n,s),s.values),e):Qc(a,t)};function tw(a,t,e){return typeof a=="number"&&typeof t=="number"&&typeof e=="number"?Me(a,t,e):xp(a)(a,t)}const rT=a=>{const t=({timestamp:e})=>a(e);return{start:(e=!0)=>Ae.update(t,e),stop:()=>Os(t),now:()=>hn.isProcessing?hn.timestamp:vn.now()}},ew=(a,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let o=0;o<s;o++)n+=Math.round(a(o/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},Jc=2e4;function _p(a){let t=0;const e=50;let n=a.next(t);for(;!n.done&&t<Jc;)t+=e,n=a.next(t);return t>=Jc?1/0:t}function aT(a,t=100,e){const n=e({...a,keyframes:[0,t]}),s=Math.min(_p(n),Jc);return{type:"keyframes",ease:o=>n.next(s*o).value/t,duration:ri(s)}}const oT=5;function nw(a,t,e){const n=Math.max(t-oT,0);return O1(e-a(n),t-n)}const Pe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qd=.001;function lT({duration:a=Pe.duration,bounce:t=Pe.bounce,velocity:e=Pe.velocity,mass:n=Pe.mass}){let s,o,l=1-t;l=Di(Pe.minDamping,Pe.maxDamping,l),a=Di(Pe.minDuration,Pe.maxDuration,ri(a)),l<1?(s=f=>{const p=f*l,m=p*a,b=p-e,y=kf(f,l),A=Math.exp(-m);return Qd-b/y*A},o=f=>{const m=f*l*a,b=m*e+e,y=Math.pow(l,2)*Math.pow(f,2)*a,A=Math.exp(-m),w=kf(Math.pow(f,2),l);return(-s(f)+Qd>0?-1:1)*((b-y)*A)/w}):(s=f=>{const p=Math.exp(-f*a),m=(f-e)*a+1;return-Qd+p*m},o=f=>{const p=Math.exp(-f*a),m=(e-f)*(a*a);return p*m});const u=5/a,h=uT(s,o,u);if(a=mi(a),isNaN(h))return{stiffness:Pe.stiffness,damping:Pe.damping,duration:a};{const f=Math.pow(h,2)*n;return{stiffness:f,damping:l*2*Math.sqrt(n*f),duration:a}}}const cT=12;function uT(a,t,e){let n=e;for(let s=1;s<cT;s++)n=n-a(n)/t(n);return n}function kf(a,t){return a*Math.sqrt(1-t*t)}const hT=["duration","bounce"],dT=["stiffness","damping","mass"];function C0(a,t){return t.some(e=>a[e]!==void 0)}function fT(a){let t={velocity:Pe.velocity,stiffness:Pe.stiffness,damping:Pe.damping,mass:Pe.mass,isResolvedFromDuration:!1,...a};if(!C0(a,dT)&&C0(a,hT))if(a.visualDuration){const e=a.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,o=2*Di(.05,1,1-(a.bounce||0))*Math.sqrt(s);t={...t,mass:Pe.mass,stiffness:s,damping:o}}else{const e=lT(a);t={...t,...e,mass:Pe.mass},t.isResolvedFromDuration=!0}return t}function tu(a=Pe.visualDuration,t=Pe.bounce){const e=typeof a!="object"?{visualDuration:a,keyframes:[0,1],bounce:t}:a;let{restSpeed:n,restDelta:s}=e;const o=e.keyframes[0],l=e.keyframes[e.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:p,duration:m,velocity:b,isResolvedFromDuration:y}=fT({...e,velocity:-ri(e.velocity||0)}),A=b||0,w=f/(2*Math.sqrt(h*p)),x=l-o,S=ri(Math.sqrt(h/p)),E=Math.abs(x)<5;n||(n=E?Pe.restSpeed.granular:Pe.restSpeed.default),s||(s=E?Pe.restDelta.granular:Pe.restDelta.default);let T;if(w<1){const D=kf(S,w);T=O=>{const L=Math.exp(-w*S*O);return l-L*((A+w*S*x)/D*Math.sin(D*O)+x*Math.cos(D*O))}}else if(w===1)T=D=>l-Math.exp(-S*D)*(x+(A+S*x)*D);else{const D=S*Math.sqrt(w*w-1);T=O=>{const L=Math.exp(-w*S*O),z=Math.min(D*O,300);return l-L*((A+w*S*x)*Math.sinh(z)+D*x*Math.cosh(z))/D}}const R={calculatedDuration:y&&m||null,next:D=>{const O=T(D);if(y)u.done=D>=m;else{let L=D===0?A:0;w<1&&(L=D===0?mi(A):nw(T,D,O));const z=Math.abs(L)<=n,I=Math.abs(l-O)<=s;u.done=z&&I}return u.value=u.done?l:O,u},toString:()=>{const D=Math.min(_p(R),Jc),O=ew(L=>R.next(D*L).value,D,30);return D+"ms "+O},toTransition:()=>{}};return R}tu.applyToOptions=a=>{const t=aT(a,100,tu);return a.ease=t.ease,a.duration=mi(t.duration),a.type="keyframes",a};function Mf({keyframes:a,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:l,min:u,max:h,restDelta:f=.5,restSpeed:p}){const m=a[0],b={done:!1,value:m},y=z=>u!==void 0&&z<u||h!==void 0&&z>h,A=z=>u===void 0?h:h===void 0||Math.abs(u-z)<Math.abs(h-z)?u:h;let w=e*t;const x=m+w,S=l===void 0?x:l(x);S!==x&&(w=S-m);const E=z=>-w*Math.exp(-z/n),T=z=>S+E(z),R=z=>{const I=E(z),Q=T(z);b.done=Math.abs(I)<=f,b.value=b.done?S:Q};let D,O;const L=z=>{y(b.value)&&(D=z,O=tu({keyframes:[b.value,A(b.value)],velocity:nw(T,z,b.value),damping:s,stiffness:o,restDelta:f,restSpeed:p}))};return L(0),{calculatedDuration:null,next:z=>{let I=!1;return!O&&D===void 0&&(I=!0,R(z),L(z)),D!==void 0&&z>=D?O.next(z-D):(!I&&R(z),b)}}}function pT(a,t,e){const n=[],s=e||ns.mix||tw,o=a.length-1;for(let l=0;l<o;l++){let u=s(a[l],a[l+1]);if(t){const h=Array.isArray(t)?t[l]||ai:t;u=Zo(h,u)}n.push(u)}return n}function mT(a,t,{clamp:e=!0,ease:n,mixer:s}={}){const o=a.length;if(gp(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const l=a[0]===a[1];a[0]>a[o-1]&&(a=[...a].reverse(),t=[...t].reverse());const u=pT(t,n,s),h=u.length,f=p=>{if(l&&p<a[0])return t[0];let m=0;if(h>1)for(;m<a.length-2&&!(p<a[m+1]);m++);const b=jo(a[m],a[m+1],p);return u[m](b)};return e?p=>f(Di(a[0],a[o-1],p)):f}function gT(a,t){const e=a[a.length-1];for(let n=1;n<=t;n++){const s=jo(0,t,n);a.push(Me(e,1,s))}}function bT(a){const t=[0];return gT(t,a.length-1),t}function yT(a,t){return a.map(e=>e*t)}function vT(a,t){return a.map(()=>t||H1).splice(0,a.length-1)}function zo({duration:a=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=DE(n)?n.map(A0):A0(n),o={done:!1,value:t[0]},l=yT(e&&e.length===t.length?e:bT(t),a),u=mT(l,t,{ease:Array.isArray(s)?s:vT(t,s)});return{calculatedDuration:a,next:h=>(o.value=u(h),o.done=h>=a,o)}}const wT=a=>a!==null;function Ep(a,{repeat:t,repeatType:e="loop"},n,s=1){const o=a.filter(wT),u=s<0||t&&e!=="loop"&&t%2===1?0:o.length-1;return!u||n===void 0?o[u]:n}const AT={decay:Mf,inertia:Mf,tween:zo,keyframes:zo,spring:tu};function iw(a){typeof a.type=="string"&&(a.type=AT[a.type])}class Tp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,e){return this.finished.then(t,e)}}const ST=a=>a/100;class Cp extends Tp{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==vn.now()&&this.tick(vn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;iw(t);const{type:e=zo,repeat:n=0,repeatDelay:s=0,repeatType:o,velocity:l=0}=t;let{keyframes:u}=t;const h=e||zo;h!==zo&&typeof u[0]!="number"&&(this.mixKeyframes=Zo(ST,tw(u[0],u[1])),u=[0,100]);const f=h({...t,keyframes:u});o==="mirror"&&(this.mirroredGenerator=h({...t,keyframes:[...u].reverse(),velocity:-l})),f.calculatedDuration===null&&(f.calculatedDuration=_p(f));const{calculatedDuration:p}=f;this.calculatedDuration=p,this.resolvedDuration=p+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=f}updateTime(t){const e=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=e}tick(t,e=!1){const{generator:n,totalDuration:s,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:u,calculatedDuration:h}=this;if(this.startTime===null)return n.next(0);const{delay:f=0,keyframes:p,repeat:m,repeatType:b,repeatDelay:y,type:A,onUpdate:w,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),e?this.currentTime=t:this.updateTime(t);const S=this.currentTime-f*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?S<0:S>s;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let T=this.currentTime,R=n;if(m){const z=Math.min(this.currentTime,s)/u;let I=Math.floor(z),Q=z%1;!Q&&z>=1&&(Q=1),Q===1&&I--,I=Math.min(I,m+1),I%2&&(b==="reverse"?(Q=1-Q,y&&(Q-=y/u)):b==="mirror"&&(R=l)),T=Di(0,1,Q)*u}const D=E?{done:!1,value:p[0]}:R.next(T);o&&(D.value=o(D.value));let{done:O}=D;!E&&h!==null&&(O=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return L&&A!==Mf&&(D.value=Ep(p,this.options,x,this.speed)),w&&w(D.value),L&&this.finish(),D}then(t,e){return this.finished.then(t,e)}get duration(){return ri(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ri(t)}get time(){return ri(this.currentTime)}set time(t){t=mi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(vn.now());const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=ri(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=rT,startTime:e}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=e??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function xT(a){for(let t=1;t<a.length;t++)a[t]??(a[t]=a[t-1])}const or=a=>a*180/Math.PI,Df=a=>{const t=or(Math.atan2(a[1],a[0]));return Rf(t)},_T={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:a=>(Math.abs(a[0])+Math.abs(a[3]))/2,rotate:Df,rotateZ:Df,skewX:a=>or(Math.atan(a[1])),skewY:a=>or(Math.atan(a[2])),skew:a=>(Math.abs(a[1])+Math.abs(a[2]))/2},Rf=a=>(a=a%360,a<0&&(a+=360),a),k0=Df,M0=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]),D0=a=>Math.sqrt(a[4]*a[4]+a[5]*a[5]),ET={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:M0,scaleY:D0,scale:a=>(M0(a)+D0(a))/2,rotateX:a=>Rf(or(Math.atan2(a[6],a[5]))),rotateY:a=>Rf(or(Math.atan2(-a[2],a[0]))),rotateZ:k0,rotate:k0,skewX:a=>or(Math.atan(a[4])),skewY:a=>or(Math.atan(a[1])),skew:a=>(Math.abs(a[1])+Math.abs(a[4]))/2};function Nf(a){return a.includes("scale")?1:0}function Pf(a,t){if(!a||a==="none")return Nf(t);const e=a.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(e)n=ET,s=e;else{const u=a.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=_T,s=u}if(!s)return Nf(t);const o=n[t],l=s[1].split(",").map(CT);return typeof o=="function"?o(l):l[o]}const TT=(a,t)=>{const{transform:e="none"}=getComputedStyle(a);return Pf(e,t)};function CT(a){return parseFloat(a.trim())}const Ca=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ka=new Set(Ca),R0=a=>a===Ta||a===Rt,kT=new Set(["x","y","z"]),MT=Ca.filter(a=>!kT.has(a));function DT(a){const t=[];return MT.forEach(e=>{const n=a.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Ps={width:({x:a},{paddingLeft:t="0",paddingRight:e="0"})=>a.max-a.min-parseFloat(t)-parseFloat(e),height:({y:a},{paddingTop:t="0",paddingBottom:e="0"})=>a.max-a.min-parseFloat(t)-parseFloat(e),top:(a,{top:t})=>parseFloat(t),left:(a,{left:t})=>parseFloat(t),bottom:({y:a},{top:t})=>parseFloat(t)+(a.max-a.min),right:({x:a},{left:t})=>parseFloat(t)+(a.max-a.min),x:(a,{transform:t})=>Pf(t,"x"),y:(a,{transform:t})=>Pf(t,"y")};Ps.translateX=Ps.x;Ps.translateY=Ps.y;const dr=new Set;let Of=!1,Lf=!1,Bf=!1;function sw(){if(Lf){const a=Array.from(dr).filter(n=>n.needsMeasurement),t=new Set(a.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=DT(n);s.length&&(e.set(n,s),n.render())}),a.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([o,l])=>{n.getValue(o)?.set(l)})}),a.forEach(n=>n.measureEndState()),a.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Lf=!1,Of=!1,dr.forEach(a=>a.complete(Bf)),dr.clear()}function rw(){dr.forEach(a=>{a.readKeyframes(),a.needsMeasurement&&(Lf=!0)})}function RT(){Bf=!0,rw(),sw(),Bf=!1}class kp{constructor(t,e,n,s,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(dr.add(this),Of||(Of=!0,Ae.read(rw),Ae.resolveKeyframes(sw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;if(t[0]===null){const o=s?.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(n&&e){const u=n.readValue(e,l);u!=null&&(t[0]=u)}t[0]===void 0&&(t[0]=l),s&&o===void 0&&s.set(t[0])}xT(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),dr.delete(this)}cancel(){this.state==="scheduled"&&(dr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const NT=a=>a.startsWith("--");function PT(a,t,e){NT(t)?a.style.setProperty(t,e):a.style[t]=e}const OT={};function aw(a,t){const e=P1(a);return()=>OT[t]??e()}const LT=aw(()=>window.ScrollTimeline!==void 0,"scrollTimeline"),ow=aw(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),No=([a,t,e,n])=>`cubic-bezier(${a}, ${t}, ${e}, ${n})`,N0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:No([0,.65,.55,1]),circOut:No([.55,0,1,.45]),backIn:No([.31,.01,.66,-.59]),backOut:No([.33,1.53,.69,.99])};function lw(a,t){if(a)return typeof a=="function"?ow()?ew(a,t):"ease-out":G1(a)?No(a):Array.isArray(a)?a.map(e=>lw(e,t)||N0.easeOut):N0[a]}function BT(a,t,e,{delay:n=0,duration:s=300,repeat:o=0,repeatType:l="loop",ease:u="easeOut",times:h}={},f=void 0){const p={[t]:e};h&&(p.offset=h);const m=lw(u,s);Array.isArray(m)&&(p.easing=m);const b={delay:n,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return f&&(b.pseudoElement=f),a.animate(p,b)}function cw(a){return typeof a=="function"&&"applyToOptions"in a}function zT({type:a,...t}){return cw(a)&&ow()?a.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class uw extends Tp{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:e,name:n,keyframes:s,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:u,onComplete:h}=t;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=t,gp(typeof t.type!="string");const f=zT(t);this.animation=BT(e,n,s,f,o),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const p=Ep(s,this.options,u,this.speed);this.updateMotionValue?this.updateMotionValue(p):PT(e,n,p),this.animation.cancel()}h?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const t=this.options?.element;!this.isPseudoElement&&t?.isConnected&&this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ri(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ri(t)}get time(){return ri(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=mi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:e}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&LT()?(this.animation.timeline=t,ai):e(this)}}const hw={anticipate:U1,backInOut:I1,circInOut:V1};function FT(a){return a in hw}function IT(a){typeof a.ease=="string"&&FT(a.ease)&&(a.ease=hw[a.ease])}const Jd=10;class UT extends uw{constructor(t){IT(t),iw(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:e,onUpdate:n,onComplete:s,element:o,...l}=this.options;if(!e)return;if(t!==void 0){e.set(t);return}const u=new Cp({...l,autoplay:!1}),h=Math.max(Jd,vn.now()-this.startTime),f=Di(0,Jd,h-Jd);e.setWithVelocity(u.sample(Math.max(0,h-f)).value,u.sample(h).value,f),u.stop()}}const P0=(a,t)=>t==="zIndex"?!1:!!(typeof a=="number"||Array.isArray(a)||typeof a=="string"&&(gi.test(a)||a==="0")&&!a.startsWith("url("));function jT(a){const t=a[0];if(a.length===1)return!0;for(let e=0;e<a.length;e++)if(a[e]!==t)return!0}function VT(a,t,e,n){const s=a[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const o=a[a.length-1],l=P0(s,t),u=P0(o,t);return!l||!u?!1:jT(a)||(e==="spring"||cw(e))&&n}function zf(a){a.duration=0,a.type="keyframes"}const HT=new Set(["opacity","clipPath","filter","transform"]),GT=P1(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function XT(a){const{motionValue:t,name:e,repeatDelay:n,repeatType:s,damping:o,type:l}=a;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=t.owner.getProps();return GT()&&e&&HT.has(e)&&(e!=="transform"||!f)&&!h&&!n&&s!=="mirror"&&o!==0&&l!=="inertia"}const YT=40;class qT extends Tp{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:l="loop",keyframes:u,name:h,motionValue:f,element:p,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=vn.now();const b={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:o,repeatType:l,name:h,motionValue:f,element:p,...m},y=p?.KeyframeResolver||kp;this.keyframeResolver=new y(u,(A,w,x)=>this.onKeyframesResolved(A,w,b,!x),h,f,p),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,e,n,s){this.keyframeResolver=void 0;const{name:o,type:l,velocity:u,delay:h,isHandoff:f,onUpdate:p}=n;this.resolvedAt=vn.now(),VT(t,o,l,u)||((ns.instantAnimations||!h)&&p?.(Ep(t,n,e)),t[0]=t[t.length-1],zf(n),n.repeat=0);const b={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>YT?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:e,...n,keyframes:t},y=!f&&XT(b),A=b.motionValue?.owner?.current,w=y?new UT({...b,element:A}):new Cp(b);w.finished.then(()=>{this.notifyFinished()}).catch(ai),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(t,e){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),RT()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function dw(a,t,e,n=0,s=1){const o=Array.from(a).sort((f,p)=>f.sortNodePosition(p)).indexOf(t),l=a.size,u=(l-1)*n;return typeof e=="function"?e(o,l):s===1?o*n:u-o*n}const $T=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WT(a){const t=$T.exec(a);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function fw(a,t,e=1){const[n,s]=WT(a);if(!n)return;const o=window.getComputedStyle(t).getPropertyValue(n);if(o){const l=o.trim();return D1(l)?parseFloat(l):l}return wp(s)?fw(s,t,e+1):s}const KT={type:"spring",stiffness:500,damping:25,restSpeed:10},ZT=a=>({type:"spring",stiffness:550,damping:a===0?2*Math.sqrt(550):30,restSpeed:10}),QT={type:"keyframes",duration:.8},JT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tC=(a,{keyframes:t})=>t.length>2?QT:ka.has(a)?a.startsWith("scale")?ZT(t[1]):KT:JT,eC=a=>a!==null;function nC(a,{repeat:t,repeatType:e="loop"},n){const s=a.filter(eC),o=t&&e!=="loop"&&t%2===1?0:s.length-1;return s[o]}function pw(a,t){if(a?.inherit&&t){const{inherit:e,...n}=a;return{...t,...n}}return a}function Mp(a,t){const e=a?.[t]??a?.default??a;return e!==a?pw(e,a):e}function iC({when:a,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:o,repeatType:l,repeatDelay:u,from:h,elapsed:f,...p}){return!!Object.keys(p).length}const Dp=(a,t,e,n={},s,o)=>l=>{const u=Mp(n,a)||{},h=u.delay||n.delay||0;let{elapsed:f=0}=n;f=f-mi(h);const p={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...u,delay:-f,onUpdate:b=>{t.set(b),u.onUpdate&&u.onUpdate(b)},onComplete:()=>{l(),u.onComplete&&u.onComplete()},name:a,motionValue:t,element:o?void 0:s};iC(u)||Object.assign(p,tC(a,p)),p.duration&&(p.duration=mi(p.duration)),p.repeatDelay&&(p.repeatDelay=mi(p.repeatDelay)),p.from!==void 0&&(p.keyframes[0]=p.from);let m=!1;if((p.type===!1||p.duration===0&&!p.repeatDelay)&&(zf(p),p.delay===0&&(m=!0)),(ns.instantAnimations||ns.skipAnimations||s?.shouldSkipAnimations)&&(m=!0,zf(p),p.delay=0),p.allowFlatten=!u.type&&!u.ease,m&&!o&&t.get()!==void 0){const b=nC(p.keyframes,u);if(b!==void 0){Ae.update(()=>{p.onUpdate(b),p.onComplete()});return}}return u.isSync?new Cp(p):new qT(p)};function O0(a){const t=[{},{}];return a?.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function Rp(a,t,e,n){if(typeof t=="function"){const[s,o]=O0(n);t=t(e!==void 0?e:a.custom,s,o)}if(typeof t=="string"&&(t=a.variants&&a.variants[t]),typeof t=="function"){const[s,o]=O0(n);t=t(e!==void 0?e:a.custom,s,o)}return t}function ya(a,t,e){const n=a.getProps();return Rp(n,t,e!==void 0?e:n.custom,a)}const mw=new Set(["width","height","top","left","right","bottom",...Ca]),L0=30,sC=a=>!isNaN(parseFloat(a));class rC{constructor(t,e={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=vn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=vn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=sC(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new bp);const n=this.events[t].add(e);return t==="change"?()=>{n(),Ae.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=vn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>L0)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,L0);return O1(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _a(a,t){return new rC(a,t)}const Ff=a=>Array.isArray(a);function aC(a,t,e){a.hasValue(t)?a.getValue(t).set(e):a.addValue(t,_a(e))}function oC(a){return Ff(a)?a[a.length-1]||0:a}function lC(a,t){const e=ya(a,t);let{transitionEnd:n={},transition:s={},...o}=e||{};o={...o,...n};for(const l in o){const u=oC(o[l]);aC(a,l,u)}}const gn=a=>!!(a&&a.getVelocity);function cC(a){return!!(gn(a)&&a.add)}function If(a,t){const e=a.getValue("willChange");if(cC(e))return e.add(t);if(!e&&ns.WillChange){const n=new ns.WillChange("auto");a.addValue("willChange",n),n.add(t)}}function Np(a){return a.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const uC="framerAppearId",gw="data-"+Np(uC);function bw(a){return a.props[gw]}function hC({protectedKeys:a,needsAnimating:t},e){const n=a.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function yw(a,t,{delay:e=0,transitionOverride:n,type:s}={}){let{transition:o,transitionEnd:l,...u}=t;const h=a.getDefaultTransition();o=o?pw(o,h):h;const f=o?.reduceMotion;n&&(o=n);const p=[],m=s&&a.animationState&&a.animationState.getState()[s];for(const b in u){const y=a.getValue(b,a.latestValues[b]??null),A=u[b];if(A===void 0||m&&hC(m,b))continue;const w={delay:e,...Mp(o||{},b)},x=y.get();if(x!==void 0&&!y.isAnimating&&!Array.isArray(A)&&A===x&&!w.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const R=bw(a);if(R){const D=window.MotionHandoffAnimation(R,b,Ae);D!==null&&(w.startTime=D,S=!0)}}If(a,b);const E=f??a.shouldReduceMotion;y.start(Dp(b,y,A,E&&mw.has(b)?{type:!1}:w,a,S));const T=y.animation;T&&p.push(T)}if(l){const b=()=>Ae.update(()=>{l&&lC(a,l)});p.length?Promise.all(p).then(b):b()}return p}function Uf(a,t,e={}){const n=ya(a,t,e.type==="exit"?a.presenceContext?.custom:void 0);let{transition:s=a.getDefaultTransition()||{}}=n||{};e.transitionOverride&&(s=e.transitionOverride);const o=n?()=>Promise.all(yw(a,n,e)):()=>Promise.resolve(),l=a.variantChildren&&a.variantChildren.size?(h=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:m}=s;return dC(a,t,h,f,p,m,e)}:()=>Promise.resolve(),{when:u}=s;if(u){const[h,f]=u==="beforeChildren"?[o,l]:[l,o];return h().then(()=>f())}else return Promise.all([o(),l(e.delay)])}function dC(a,t,e=0,n=0,s=0,o=1,l){const u=[];for(const h of a.variantChildren)h.notify("AnimationStart",t),u.push(Uf(h,t,{...l,delay:e+(typeof n=="function"?0:n)+dw(a.variantChildren,h,n,s,o)}).then(()=>h.notify("AnimationComplete",t)));return Promise.all(u)}function fC(a,t,e={}){a.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(o=>Uf(a,o,e));n=Promise.all(s)}else if(typeof t=="string")n=Uf(a,t,e);else{const s=typeof t=="function"?ya(a,t,e.custom):t;n=Promise.all(yw(a,s,e))}return n.then(()=>{a.notify("AnimationComplete",t)})}const pC={test:a=>a==="auto",parse:a=>a},vw=a=>t=>t.test(a),ww=[Ta,Rt,Mi,Ms,HE,VE,pC],B0=a=>ww.find(vw(a));function mC(a){return typeof a=="number"?a===0:a!==null?a==="none"||a==="0"||N1(a):!0}const gC=new Set(["brightness","contrast","saturate","opacity"]);function bC(a){const[t,e]=a.slice(0,-1).split("(");if(t==="drop-shadow")return a;const[n]=e.match(Ap)||[];if(!n)return a;const s=e.replace(n,"");let o=gC.has(t)?1:0;return n!==e&&(o*=100),t+"("+o+s+")"}const yC=/\b([a-z-]*)\(.*?\)/gu,jf={...gi,getAnimatableNone:a=>{const t=a.match(yC);return t?t.map(bC).join(" "):a}},Vf={...gi,getAnimatableNone:a=>{const t=gi.parse(a);return gi.createTransformer(a)(t.map(n=>typeof n=="number"?0:typeof n=="object"?{...n,alpha:1}:n))}},z0={...Ta,transform:Math.round},vC={rotate:Ms,rotateX:Ms,rotateY:Ms,rotateZ:Ms,scale:Sc,scaleX:Sc,scaleY:Sc,scaleZ:Sc,skew:Ms,skewX:Ms,skewY:Ms,distance:Rt,translateX:Rt,translateY:Rt,translateZ:Rt,x:Rt,y:Rt,z:Rt,perspective:Rt,transformPerspective:Rt,opacity:Vo,originX:x0,originY:x0,originZ:Rt},Pp={borderWidth:Rt,borderTopWidth:Rt,borderRightWidth:Rt,borderBottomWidth:Rt,borderLeftWidth:Rt,borderRadius:Rt,borderTopLeftRadius:Rt,borderTopRightRadius:Rt,borderBottomRightRadius:Rt,borderBottomLeftRadius:Rt,width:Rt,maxWidth:Rt,height:Rt,maxHeight:Rt,top:Rt,right:Rt,bottom:Rt,left:Rt,inset:Rt,insetBlock:Rt,insetBlockStart:Rt,insetBlockEnd:Rt,insetInline:Rt,insetInlineStart:Rt,insetInlineEnd:Rt,padding:Rt,paddingTop:Rt,paddingRight:Rt,paddingBottom:Rt,paddingLeft:Rt,paddingBlock:Rt,paddingBlockStart:Rt,paddingBlockEnd:Rt,paddingInline:Rt,paddingInlineStart:Rt,paddingInlineEnd:Rt,margin:Rt,marginTop:Rt,marginRight:Rt,marginBottom:Rt,marginLeft:Rt,marginBlock:Rt,marginBlockStart:Rt,marginBlockEnd:Rt,marginInline:Rt,marginInlineStart:Rt,marginInlineEnd:Rt,fontSize:Rt,backgroundPositionX:Rt,backgroundPositionY:Rt,...vC,zIndex:z0,fillOpacity:Vo,strokeOpacity:Vo,numOctaves:z0},wC={...Pp,color:Ye,backgroundColor:Ye,outlineColor:Ye,fill:Ye,stroke:Ye,borderColor:Ye,borderTopColor:Ye,borderRightColor:Ye,borderBottomColor:Ye,borderLeftColor:Ye,filter:jf,WebkitFilter:jf,mask:Vf,WebkitMask:Vf},Aw=a=>wC[a],AC=new Set([jf,Vf]);function Sw(a,t){let e=Aw(a);return AC.has(e)||(e=gi),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const SC=new Set(["auto","none","0"]);function xC(a,t,e){let n=0,s;for(;n<a.length&&!s;){const o=a[n];typeof o=="string"&&!SC.has(o)&&Ho(o).values.length&&(s=a[n]),n++}if(s&&e)for(const o of t)a[o]=Sw(e,s)}class _C extends kp{constructor(t,e,n,s,o){super(t,e,n,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let p=0;p<t.length;p++){let m=t[p];if(typeof m=="string"&&(m=m.trim(),wp(m))){const b=fw(m,e.current);b!==void 0&&(t[p]=b),p===t.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!mw.has(n)||t.length!==2)return;const[s,o]=t,l=B0(s),u=B0(o),h=S0(s),f=S0(o);if(h!==f&&Ps[n]){this.needsMeasurement=!0;return}if(l!==u)if(R0(l)&&R0(u))for(let p=0;p<t.length;p++){const m=t[p];typeof m=="string"&&(t[p]=parseFloat(m))}else Ps[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||mC(t[s]))&&n.push(s);n.length&&xC(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ps[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:e,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(e);s&&s.jump(this.measuredOrigin,!1);const o=n.length-1,l=n[o];n[o]=Ps[e](t.measureViewportBox(),window.getComputedStyle(t.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([u,h])=>{t.getValue(u).set(h)}),this.resolveNoneKeyframes()}}const EC=new Set(["opacity","clipPath","filter","transform"]);function xw(a,t,e){if(a==null)return[];if(a instanceof EventTarget)return[a];if(typeof a=="string"){let n=document;const s=e?.[a]??n.querySelectorAll(a);return s?Array.from(s):[]}return Array.from(a).filter(n=>n!=null)}const _w=(a,t)=>t&&typeof a=="number"?t.transform(a):a;function Hf(a){return R1(a)&&"offsetHeight"in a}const{schedule:Op}=X1(queueMicrotask,!1),fi={x:!1,y:!1};function Ew(){return fi.x||fi.y}function TC(a){return a==="x"||a==="y"?fi[a]?null:(fi[a]=!0,()=>{fi[a]=!1}):fi.x||fi.y?null:(fi.x=fi.y=!0,()=>{fi.x=fi.y=!1})}function Tw(a,t){const e=xw(a),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function CC(a){return!(a.pointerType==="touch"||Ew())}function kC(a,t,e={}){const[n,s,o]=Tw(a,e);return n.forEach(l=>{let u=!1,h=!1,f;const p=()=>{l.removeEventListener("pointerleave",A)},m=x=>{f&&(f(x),f=void 0),p()},b=x=>{u=!1,window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",b),h&&(h=!1,m(x))},y=()=>{u=!0,window.addEventListener("pointerup",b,s),window.addEventListener("pointercancel",b,s)},A=x=>{if(x.pointerType!=="touch"){if(u){h=!0;return}m(x)}},w=x=>{if(!CC(x))return;h=!1;const S=t(l,x);typeof S=="function"&&(f=S,l.addEventListener("pointerleave",A,s))};l.addEventListener("pointerenter",w,s),l.addEventListener("pointerdown",y,s)}),o}const Cw=(a,t)=>t?a===t?!0:Cw(a,t.parentElement):!1,Lp=a=>a.pointerType==="mouse"?typeof a.button!="number"||a.button<=0:a.isPrimary!==!1,MC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function DC(a){return MC.has(a.tagName)||a.isContentEditable===!0}const RC=new Set(["INPUT","SELECT","TEXTAREA"]);function NC(a){return RC.has(a.tagName)||a.isContentEditable===!0}const Uc=new WeakSet;function F0(a){return t=>{t.key==="Enter"&&a(t)}}function tf(a,t){a.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const PC=(a,t)=>{const e=a.currentTarget;if(!e)return;const n=F0(()=>{if(Uc.has(e))return;tf(e,"down");const s=F0(()=>{tf(e,"up")}),o=()=>tf(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",o,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function I0(a){return Lp(a)&&!Ew()}const U0=new WeakSet;function OC(a,t,e={}){const[n,s,o]=Tw(a,e),l=u=>{const h=u.currentTarget;if(!I0(u)||U0.has(u))return;Uc.add(h),e.stopPropagation&&U0.add(u);const f=t(h,u),p=(y,A)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",b),Uc.has(h)&&Uc.delete(h),I0(y)&&typeof f=="function"&&f(y,{success:A})},m=y=>{p(y,h===window||h===document||e.useGlobalTarget||Cw(h,y.target))},b=y=>{p(y,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",b,s)};return n.forEach(u=>{(e.useGlobalTarget?window:u).addEventListener("pointerdown",l,s),Hf(u)&&(u.addEventListener("focus",f=>PC(f,s)),!DC(u)&&!u.hasAttribute("tabindex")&&(u.tabIndex=0))}),o}function Bp(a){return R1(a)&&"ownerSVGElement"in a}const jc=new WeakMap;let Vc;const kw=(a,t,e)=>(n,s)=>s&&s[0]?s[0][a+"Size"]:Bp(n)&&"getBBox"in n?n.getBBox()[t]:n[e],LC=kw("inline","width","offsetWidth"),BC=kw("block","height","offsetHeight");function zC({target:a,borderBoxSize:t}){jc.get(a)?.forEach(e=>{e(a,{get width(){return LC(a,t)},get height(){return BC(a,t)}})})}function FC(a){a.forEach(zC)}function IC(){typeof ResizeObserver>"u"||(Vc=new ResizeObserver(FC))}function UC(a,t){Vc||IC();const e=xw(a);return e.forEach(n=>{let s=jc.get(n);s||(s=new Set,jc.set(n,s)),s.add(t),Vc?.observe(n)}),()=>{e.forEach(n=>{const s=jc.get(n);s?.delete(t),s?.size||Vc?.unobserve(n)})}}const Hc=new Set;let ha;function jC(){ha=()=>{const a={get width(){return window.innerWidth},get height(){return window.innerHeight}};Hc.forEach(t=>t(a))},window.addEventListener("resize",ha)}function VC(a){return Hc.add(a),ha||jC(),()=>{Hc.delete(a),!Hc.size&&typeof ha=="function"&&(window.removeEventListener("resize",ha),ha=void 0)}}function j0(a,t){return typeof a=="function"?VC(a):UC(a,t)}function HC(a){return Bp(a)&&a.tagName==="svg"}const GC=[...ww,Ye,gi],XC=a=>GC.find(vw(a)),V0=()=>({translate:0,scale:1,origin:0,originPoint:0}),da=()=>({x:V0(),y:V0()}),H0=()=>({min:0,max:0}),Ke=()=>({x:H0(),y:H0()}),YC=new WeakMap;function du(a){return a!==null&&typeof a=="object"&&typeof a.start=="function"}function Go(a){return typeof a=="string"||Array.isArray(a)}const zp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fp=["initial",...zp];function fu(a){return du(a.animate)||Fp.some(t=>Go(a[t]))}function Mw(a){return!!(fu(a)||a.variants)}function qC(a,t,e){for(const n in t){const s=t[n],o=e[n];if(gn(s))a.addValue(n,s);else if(gn(o))a.addValue(n,_a(s,{owner:a}));else if(o!==s)if(a.hasValue(n)){const l=a.getValue(n);l.liveStyle===!0?l.jump(s):l.hasAnimated||l.set(s)}else{const l=a.getStaticValue(n);a.addValue(n,_a(l!==void 0?l:s,{owner:a}))}}for(const n in e)t[n]===void 0&&a.removeValue(n);return t}const Gf={current:null},Dw={current:!1},$C=typeof window<"u";function WC(){if(Dw.current=!0,!!$C)if(window.matchMedia){const a=window.matchMedia("(prefers-reduced-motion)"),t=()=>Gf.current=a.matches;a.addEventListener("change",t),t()}else Gf.current=!1}const G0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let eu={};function Rw(a){eu=a}function KC(){return eu}class ZC{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,skipAnimations:o,blockInitialAnimation:l,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=kp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const y=vn.now();this.renderScheduledAt<y&&(this.renderScheduledAt=y,Ae.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=u;this.latestValues=f,this.baseTarget={...f},this.initialValues=e.initial?{...f}:{},this.renderState=p,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=o,this.options=h,this.blockInitialAnimation=!!l,this.isControllingVariants=fu(e),this.isVariantNode=Mw(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:m,...b}=this.scrapeMotionValuesFromProps(e,{},this);for(const y in b){const A=b[y];f[y]!==void 0&&gn(A)&&A.set(f[y])}}mount(t){if(this.hasBeenMounted)for(const e in this.initialValues)this.values.get(e)?.jump(this.initialValues[e]),this.latestValues[e]=this.initialValues[e];this.current=t,YC.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(Dw.current||WC(),this.shouldReduceMotion=Gf.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),Os(this.notifyUpdate),Os(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,e){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),e.accelerate&&EC.has(t)&&this.current instanceof HTMLElement){const{factory:l,keyframes:u,times:h,ease:f,duration:p}=e.accelerate,m=new uw({element:this.current,name:t,keyframes:u,times:h,ease:f,duration:mi(p)}),b=l(m);this.valueSubscriptions.set(t,()=>{b(),m.cancel()});return}const n=ka.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=e.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Ae.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;typeof window<"u"&&window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),o&&o(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in eu){const e=eu[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ke()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<G0.length;n++){const s=G0[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,l=t[o];l&&(this.propEventSubscriptions[s]=this.on(s,l))}this.prevMotionValues=qC(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=_a(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(D1(n)||N1(n))?n=parseFloat(n):!XC(n)&&gi.test(e)&&(n=Sw(t,e)),this.setBaseTarget(t,gn(n)?n.get():n)),gn(n)?n.get():n}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){const{initial:e}=this.props;let n;if(typeof e=="string"||typeof e=="object"){const o=Rp(this.props,e,this.presenceContext?.custom);o&&(n=o[t])}if(e&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!gn(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new bp),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}scheduleRenderMicrotask(){Op.render(this.render)}}class Nw extends ZC{constructor(){super(...arguments),this.KeyframeResolver=_C}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){const n=t.style;return n?n[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;gn(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}class zs{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Pw({top:a,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:a,max:n}}}function QC({x:a,y:t}){return{top:t.min,right:a.max,bottom:t.max,left:a.min}}function JC(a,t){if(!t)return a;const e=t({x:a.left,y:a.top}),n=t({x:a.right,y:a.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function ef(a){return a===void 0||a===1}function Xf({scale:a,scaleX:t,scaleY:e}){return!ef(a)||!ef(t)||!ef(e)}function rr(a){return Xf(a)||Ow(a)||a.z||a.rotate||a.rotateX||a.rotateY||a.skewX||a.skewY}function Ow(a){return X0(a.x)||X0(a.y)}function X0(a){return a&&a!=="0%"}function nu(a,t,e){const n=a-e,s=t*n;return e+s}function Y0(a,t,e,n,s){return s!==void 0&&(a=nu(a,s,n)),nu(a,e,n)+t}function Yf(a,t=0,e=1,n,s){a.min=Y0(a.min,t,e,n,s),a.max=Y0(a.max,t,e,n,s)}function Lw(a,{x:t,y:e}){Yf(a.x,t.translate,t.scale,t.originPoint),Yf(a.y,e.translate,e.scale,e.originPoint)}const q0=.999999999999,$0=1.0000000000001;function t2(a,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let o,l;for(let u=0;u<s;u++){o=e[u],l=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(n&&o.options.layoutScroll&&o.scroll&&o!==o.root&&pa(a,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(t.x*=l.x.scale,t.y*=l.y.scale,Lw(a,l)),n&&rr(o.latestValues)&&pa(a,o.latestValues))}t.x<$0&&t.x>q0&&(t.x=1),t.y<$0&&t.y>q0&&(t.y=1)}function fa(a,t){a.min=a.min+t,a.max=a.max+t}function W0(a,t,e,n,s=.5){const o=Me(a.min,a.max,s);Yf(a,t,e,o,n)}function pa(a,t){W0(a.x,t.x,t.scaleX,t.scale,t.originX),W0(a.y,t.y,t.scaleY,t.scale,t.originY)}function Bw(a,t){return Pw(JC(a.getBoundingClientRect(),t))}function e2(a,t,e){const n=Bw(a,e),{scroll:s}=t;return s&&(fa(n.x,s.offset.x),fa(n.y,s.offset.y)),n}const n2={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},i2=Ca.length;function s2(a,t,e){let n="",s=!0;for(let o=0;o<i2;o++){const l=Ca[o],u=a[l];if(u===void 0)continue;let h=!0;if(typeof u=="number")h=u===(l.startsWith("scale")?1:0);else{const f=parseFloat(u);h=l.startsWith("scale")?f===1:f===0}if(!h||e){const f=_w(u,Pp[l]);if(!h){s=!1;const p=n2[l]||l;n+=`${p}(${f}) `}e&&(t[l]=f)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function Ip(a,t,e){const{style:n,vars:s,transformOrigin:o}=a;let l=!1,u=!1;for(const h in t){const f=t[h];if(ka.has(h)){l=!0;continue}else if(q1(h)){s[h]=f;continue}else{const p=_w(f,Pp[h]);h.startsWith("origin")?(u=!0,o[h]=p):n[h]=p}}if(t.transform||(l||e?n.transform=s2(t,a.transform,e):n.transform&&(n.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:p=0}=o;n.transformOrigin=`${h} ${f} ${p}`}}function zw(a,{style:t,vars:e},n,s){const o=a.style;let l;for(l in t)o[l]=t[l];s?.applyProjectionStyles(o,n);for(l in e)o.setProperty(l,e[l])}function K0(a,t){return t.max===t.min?0:a/(t.max-t.min)*100}const xo={correct:(a,t)=>{if(!t.target)return a;if(typeof a=="string")if(Rt.test(a))a=parseFloat(a);else return a;const e=K0(a,t.target.x),n=K0(a,t.target.y);return`${e}% ${n}%`}},r2={correct:(a,{treeScale:t,projectionDelta:e})=>{const n=a,s=gi.parse(a);if(s.length>5)return n;const o=gi.createTransformer(a),l=typeof s[0]!="number"?1:0,u=e.x.scale*t.x,h=e.y.scale*t.y;s[0+l]/=u,s[1+l]/=h;const f=Me(u,h,.5);return typeof s[2+l]=="number"&&(s[2+l]/=f),typeof s[3+l]=="number"&&(s[3+l]/=f),o(s)}},qf={borderRadius:{...xo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xo,borderTopRightRadius:xo,borderBottomLeftRadius:xo,borderBottomRightRadius:xo,boxShadow:r2};function Fw(a,{layout:t,layoutId:e}){return ka.has(a)||a.startsWith("origin")||(t||e!==void 0)&&(!!qf[a]||a==="opacity")}function Up(a,t,e){const n=a.style,s=t?.style,o={};if(!n)return o;for(const l in n)(gn(n[l])||s&&gn(s[l])||Fw(l,a)||e?.getValue(l)?.liveStyle!==void 0)&&(o[l]=n[l]);return o}function a2(a){return window.getComputedStyle(a)}class o2 extends Nw{constructor(){super(...arguments),this.type="html",this.renderInstance=zw}readValueFromInstance(t,e){if(ka.has(e))return this.projection?.isProjecting?Nf(e):TT(t,e);{const n=a2(t),s=(q1(e)?n.getPropertyValue(e):n[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return Bw(t,e)}build(t,e,n){Ip(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return Up(t,e,n)}}const l2={offset:"stroke-dashoffset",array:"stroke-dasharray"},c2={offset:"strokeDashoffset",array:"strokeDasharray"};function u2(a,t,e=1,n=0,s=!0){a.pathLength=1;const o=s?l2:c2;a[o.offset]=`${-n}`,a[o.array]=`${t} ${e}`}const h2=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function Iw(a,{attrX:t,attrY:e,attrScale:n,pathLength:s,pathSpacing:o=1,pathOffset:l=0,...u},h,f,p){if(Ip(a,u,f),h){a.style.viewBox&&(a.attrs.viewBox=a.style.viewBox);return}a.attrs=a.style,a.style={};const{attrs:m,style:b}=a;m.transform&&(b.transform=m.transform,delete m.transform),(b.transform||m.transformOrigin)&&(b.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),b.transform&&(b.transformBox=p?.transformBox??"fill-box",delete m.transformBox);for(const y of h2)m[y]!==void 0&&(b[y]=m[y],delete m[y]);t!==void 0&&(m.x=t),e!==void 0&&(m.y=e),n!==void 0&&(m.scale=n),s!==void 0&&u2(m,s,o,l,!1)}const Uw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),jw=a=>typeof a=="string"&&a.toLowerCase()==="svg";function d2(a,t,e,n){zw(a,t,void 0,n);for(const s in t.attrs)a.setAttribute(Uw.has(s)?s:Np(s),t.attrs[s])}function Vw(a,t,e){const n=Up(a,t,e);for(const s in a)if(gn(a[s])||gn(t[s])){const o=Ca.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[o]=a[s]}return n}class f2 extends Nw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ke}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ka.has(e)){const n=Aw(e);return n&&n.default||0}return e=Uw.has(e)?e:Np(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return Vw(t,e,n)}build(t,e,n){Iw(t,e,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,e,n,s){d2(t,e,n,s)}mount(t){this.isSVGTag=jw(t.tagName),super.mount(t)}}const p2=Fp.length;function Hw(a){if(!a)return;if(!a.isControllingVariants){const e=a.parent?Hw(a.parent)||{}:{};return a.props.initial!==void 0&&(e.initial=a.props.initial),e}const t={};for(let e=0;e<p2;e++){const n=Fp[e],s=a.props[n];(Go(s)||s===!1)&&(t[n]=s)}return t}function Gw(a,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==a.length)return!1;for(let n=0;n<e;n++)if(t[n]!==a[n])return!1;return!0}const m2=[...zp].reverse(),g2=zp.length;function b2(a){return t=>Promise.all(t.map(({animation:e,options:n})=>fC(a,e,n)))}function y2(a){let t=b2(a),e=Z0(),n=!0;const s=h=>(f,p)=>{const m=ya(a,p,h==="exit"?a.presenceContext?.custom:void 0);if(m){const{transition:b,transitionEnd:y,...A}=m;f={...f,...A,...y}}return f};function o(h){t=h(a)}function l(h){const{props:f}=a,p=Hw(a.parent)||{},m=[],b=new Set;let y={},A=1/0;for(let x=0;x<g2;x++){const S=m2[x],E=e[S],T=f[S]!==void 0?f[S]:p[S],R=Go(T),D=S===h?E.isActive:null;D===!1&&(A=x);let O=T===p[S]&&T!==f[S]&&R;if(O&&n&&a.manuallyAnimateOnMount&&(O=!1),E.protectedKeys={...y},!E.isActive&&D===null||!T&&!E.prevProp||du(T)||typeof T=="boolean")continue;if(S==="exit"&&E.isActive&&D!==!0){E.prevResolvedValues&&(y={...y,...E.prevResolvedValues});continue}const L=v2(E.prevProp,T);let z=L||S===h&&E.isActive&&!O&&R||x>A&&R,I=!1;const Q=Array.isArray(T)?T:[T];let at=Q.reduce(s(S),{});D===!1&&(at={});const{prevResolvedValues:U={}}=E,Z={...U,...at},M=j=>{z=!0,b.has(j)&&(I=!0,b.delete(j)),E.needsAnimating[j]=!0;const lt=a.getValue(j);lt&&(lt.liveStyle=!1)};for(const j in Z){const lt=at[j],st=U[j];if(y.hasOwnProperty(j))continue;let B=!1;Ff(lt)&&Ff(st)?B=!Gw(lt,st):B=lt!==st,B?lt!=null?M(j):b.add(j):lt!==void 0&&b.has(j)?M(j):E.protectedKeys[j]=!0}E.prevProp=T,E.prevResolvedValues=at,E.isActive&&(y={...y,...at}),n&&a.blockInitialAnimation&&(z=!1);const tt=O&&L;z&&(!tt||I)&&m.push(...Q.map(j=>{const lt={type:S};if(typeof j=="string"&&n&&!tt&&a.manuallyAnimateOnMount&&a.parent){const{parent:st}=a,B=ya(st,j);if(st.enteringChildren&&B){const{delayChildren:_}=B.transition||{};lt.delay=dw(st.enteringChildren,a,_)}}return{animation:j,options:lt}}))}if(b.size){const x={};if(typeof f.initial!="boolean"){const S=ya(a,Array.isArray(f.initial)?f.initial[0]:f.initial);S&&S.transition&&(x.transition=S.transition)}b.forEach(S=>{const E=a.getBaseTarget(S),T=a.getValue(S);T&&(T.liveStyle=!0),x[S]=E??null}),m.push({animation:x})}let w=!!m.length;return n&&(f.initial===!1||f.initial===f.animate)&&!a.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(m):Promise.resolve()}function u(h,f){if(e[h].isActive===f)return Promise.resolve();a.variantChildren?.forEach(m=>m.animationState?.setActive(h,f)),e[h].isActive=f;const p=l(h);for(const m in e)e[m].protectedKeys={};return p}return{animateChanges:l,setActive:u,setAnimateFunction:o,getState:()=>e,reset:()=>{e=Z0()}}}function v2(a,t){return typeof t=="string"?t!==a:Array.isArray(t)?!Gw(t,a):!1}function ir(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Z0(){return{animate:ir(!0),whileInView:ir(),whileHover:ir(),whileTap:ir(),whileDrag:ir(),whileFocus:ir(),exit:ir()}}function Q0(a,t){a.min=t.min,a.max=t.max}function di(a,t){Q0(a.x,t.x),Q0(a.y,t.y)}function J0(a,t){a.translate=t.translate,a.scale=t.scale,a.originPoint=t.originPoint,a.origin=t.origin}const Xw=1e-4,w2=1-Xw,A2=1+Xw,Yw=.01,S2=0-Yw,x2=0+Yw;function wn(a){return a.max-a.min}function _2(a,t,e){return Math.abs(a-t)<=e}function tv(a,t,e,n=.5){a.origin=n,a.originPoint=Me(t.min,t.max,a.origin),a.scale=wn(e)/wn(t),a.translate=Me(e.min,e.max,a.origin)-a.originPoint,(a.scale>=w2&&a.scale<=A2||isNaN(a.scale))&&(a.scale=1),(a.translate>=S2&&a.translate<=x2||isNaN(a.translate))&&(a.translate=0)}function Fo(a,t,e,n){tv(a.x,t.x,e.x,n?n.originX:void 0),tv(a.y,t.y,e.y,n?n.originY:void 0)}function ev(a,t,e){a.min=e.min+t.min,a.max=a.min+wn(t)}function E2(a,t,e){ev(a.x,t.x,e.x),ev(a.y,t.y,e.y)}function nv(a,t,e){a.min=t.min-e.min,a.max=a.min+wn(t)}function iu(a,t,e){nv(a.x,t.x,e.x),nv(a.y,t.y,e.y)}function iv(a,t,e,n,s){return a-=t,a=nu(a,1/e,n),s!==void 0&&(a=nu(a,1/s,n)),a}function T2(a,t=0,e=1,n=.5,s,o=a,l=a){if(Mi.test(t)&&(t=parseFloat(t),t=Me(l.min,l.max,t/100)-l.min),typeof t!="number")return;let u=Me(o.min,o.max,n);a===o&&(u-=t),a.min=iv(a.min,t,e,u,s),a.max=iv(a.max,t,e,u,s)}function sv(a,t,[e,n,s],o,l){T2(a,t[e],t[n],t[s],t.scale,o,l)}const C2=["x","scaleX","originX"],k2=["y","scaleY","originY"];function rv(a,t,e,n){sv(a.x,t,C2,e?e.x:void 0,n?n.x:void 0),sv(a.y,t,k2,e?e.y:void 0,n?n.y:void 0)}function av(a){return a.translate===0&&a.scale===1}function qw(a){return av(a.x)&&av(a.y)}function ov(a,t){return a.min===t.min&&a.max===t.max}function M2(a,t){return ov(a.x,t.x)&&ov(a.y,t.y)}function lv(a,t){return Math.round(a.min)===Math.round(t.min)&&Math.round(a.max)===Math.round(t.max)}function $w(a,t){return lv(a.x,t.x)&&lv(a.y,t.y)}function cv(a){return wn(a.x)/wn(a.y)}function uv(a,t){return a.translate===t.translate&&a.scale===t.scale&&a.originPoint===t.originPoint}function Ti(a){return[a("x"),a("y")]}function D2(a,t,e){let n="";const s=a.x.translate/t.x,o=a.y.translate/t.y,l=e?.z||0;if((s||o||l)&&(n=`translate3d(${s}px, ${o}px, ${l}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:f,rotate:p,rotateX:m,rotateY:b,skewX:y,skewY:A}=e;f&&(n=`perspective(${f}px) ${n}`),p&&(n+=`rotate(${p}deg) `),m&&(n+=`rotateX(${m}deg) `),b&&(n+=`rotateY(${b}deg) `),y&&(n+=`skewX(${y}deg) `),A&&(n+=`skewY(${A}deg) `)}const u=a.x.scale*t.x,h=a.y.scale*t.y;return(u!==1||h!==1)&&(n+=`scale(${u}, ${h})`),n||"none"}const Ww=["TopLeft","TopRight","BottomLeft","BottomRight"],R2=Ww.length,hv=a=>typeof a=="string"?parseFloat(a):a,dv=a=>typeof a=="number"||Rt.test(a);function N2(a,t,e,n,s,o){s?(a.opacity=Me(0,e.opacity??1,P2(n)),a.opacityExit=Me(t.opacity??1,0,O2(n))):o&&(a.opacity=Me(t.opacity??1,e.opacity??1,n));for(let l=0;l<R2;l++){const u=`border${Ww[l]}Radius`;let h=fv(t,u),f=fv(e,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||dv(h)===dv(f)?(a[u]=Math.max(Me(hv(h),hv(f),n),0),(Mi.test(f)||Mi.test(h))&&(a[u]+="%")):a[u]=f}(t.rotate||e.rotate)&&(a.rotate=Me(t.rotate||0,e.rotate||0,n))}function fv(a,t){return a[t]!==void 0?a[t]:a.borderRadius}const P2=Kw(0,.5,j1),O2=Kw(.5,.95,ai);function Kw(a,t,e){return n=>n<a?0:n>t?1:e(jo(a,t,n))}function L2(a,t,e){const n=gn(a)?a:_a(a);return n.start(Dp("",n,t,e)),n.animation}function Xo(a,t,e,n={passive:!0}){return a.addEventListener(t,e,n),()=>a.removeEventListener(t,e)}const B2=(a,t)=>a.depth-t.depth;class z2{constructor(){this.children=[],this.isDirty=!1}add(t){mp(this.children,t),this.isDirty=!0}remove(t){Zc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(B2),this.isDirty=!1,this.children.forEach(t)}}function F2(a,t){const e=vn.now(),n=({timestamp:s})=>{const o=s-e;o>=t&&(Os(n),a(o-t))};return Ae.setup(n,!0),()=>Os(n)}function Gc(a){return gn(a)?a.get():a}class I2{constructor(){this.members=[]}add(t){mp(this.members,t);for(let e=this.members.length-1;e>=0;e--){const n=this.members[e];if(n===t||n===this.lead||n===this.prevLead)continue;const s=n.instance;s&&s.isConnected===!1&&n.isPresent!==!1&&!n.snapshot&&Zc(this.members,n)}t.scheduleRender()}remove(t){if(Zc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const o=this.members[s],l=o.instance;if(o.isPresent!==!1&&(!l||l.isConnected!==!1)){n=o;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const s=n.options.layoutDependency,o=t.options.layoutDependency;if(!(s!==void 0&&o!==void 0&&s===o)){const h=n.instance;h&&h.isConnected===!1&&!n.snapshot||(t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:u}=t.options;u===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Xc={hasAnimatedSinceResize:!0,hasEverUpdated:!1},nf=["","X","Y","Z"],U2=1e3;let j2=0;function sf(a,t,e,n){const{latestValues:s}=t;s[a]&&(e[a]=s[a],t.setStaticValue(a,0),n&&(n[a]=0))}function Zw(a){if(a.hasCheckedOptimisedAppear=!0,a.root===a)return;const{visualElement:t}=a.options;if(!t)return;const e=bw(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:o}=a.options;window.MotionCancelOptimisedAnimation(e,"transform",Ae,!(s||o))}const{parent:n}=a;n&&!n.hasCheckedOptimisedAppear&&Zw(n)}function Qw({attachResizeListener:a,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(l={},u=t?.()){this.id=j2++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(G2),this.nodes.forEach($2),this.nodes.forEach(W2),this.nodes.forEach(X2)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new z2)}addEventListener(l,u){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new bp),this.eventHandlers.get(l).add(u)}notifyListeners(l,...u){const h=this.eventHandlers.get(l);h&&h.notify(...u)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=Bp(l)&&!HC(l),this.instance=l;const{layoutId:u,layout:h,visualElement:f}=this.options;if(f&&!f.current&&f.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(h||u)&&(this.isLayoutDirty=!0),a){let p,m=0;const b=()=>this.root.updateBlockedByResize=!1;Ae.read(()=>{m=window.innerWidth}),a(l,()=>{const y=window.innerWidth;y!==m&&(m=y,this.root.updateBlockedByResize=!0,p&&p(),p=F2(b,250),Xc.hasAnimatedSinceResize&&(Xc.hasAnimatedSinceResize=!1,this.nodes.forEach(gv)))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&f&&(u||h)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeLayoutChanged:b,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||f.getDefaultTransition()||tk,{onLayoutAnimationStart:w,onLayoutAnimationComplete:x}=f.getProps(),S=!this.targetLayout||!$w(this.targetLayout,y),E=!m&&b;if(this.options.layoutRoot||this.resumeFrom||E||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const T={...Mp(A,"layout"),onPlay:w,onComplete:x};(f.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T),this.setAnimationOrigin(p,E)}else m||gv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Os(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(K2),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Zw(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let p=0;p<this.path.length;p++){const m=this.path[p];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(q2),this.nodes.forEach(V2),this.nodes.forEach(H2)):this.nodes.forEach(mv),this.clearAllSnapshots();const u=vn.now();hn.delta=Di(0,1e3/60,u-hn.timestamp),hn.timestamp=u,hn.isProcessing=!0,$d.update.process(hn),$d.preRender.process(hn),$d.render.process(hn),hn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Op.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Y2),this.sharedNodes.forEach(Z2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wn(this.snapshot.measuredBox.x)&&!wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Ke(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(u=!1),u&&this.instance){const h=n(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:h,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!s)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!qw(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,p=f!==this.prevTransformTemplateValue;l&&this.instance&&(u||rr(this.latestValues)||p)&&(s(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return l&&(h=this.removeTransform(h)),ek(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return Ke();const u=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nk))){const{scroll:f}=this.root;f&&(fa(u.x,f.offset.x),fa(u.y,f.offset.y))}return u}removeElementScroll(l){const u=Ke();if(di(u,l),this.scroll?.wasRoot)return u;for(let h=0;h<this.path.length;h++){const f=this.path[h],{scroll:p,options:m}=f;f!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&di(u,l),fa(u.x,p.offset.x),fa(u.y,p.offset.y))}return u}applyTransform(l,u=!1){const h=Ke();di(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];!u&&p.options.layoutScroll&&p.scroll&&p!==p.root&&pa(h,{x:-p.scroll.offset.x,y:-p.scroll.offset.y}),rr(p.latestValues)&&pa(h,p.latestValues)}return rr(this.latestValues)&&pa(h,this.latestValues),h}removeTransform(l){const u=Ke();di(u,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!rr(f.latestValues))continue;Xf(f.latestValues)&&f.updateSnapshot();const p=Ke(),m=f.measurePageBox();di(p,m),rv(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,p)}return rr(this.latestValues)&&rv(u,this.latestValues),u}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==hn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==u;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!this.layout||!(p||m))return;this.resolvedRelativeTargetAt=hn.timestamp;const b=this.getClosestProjectingParent();b&&this.linkedParentVersion!==b.layoutVersion&&!b.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(b&&b.layout?this.createRelativeTarget(b,this.layout.layoutBox,b.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ke(),this.targetWithTransforms=Ke()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),E2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):di(this.target,this.layout.layoutBox),Lw(this.target,this.targetDelta)):di(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,b&&!!b.resumingFrom==!!this.resumingFrom&&!b.options.layoutScroll&&b.target&&this.animationProgress!==1?this.createRelativeTarget(b,this.target,b.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Xf(this.parent.latestValues)||Ow(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(l,u,h){this.relativeParent=l,this.linkedParentVersion=l.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ke(),this.relativeTargetOrigin=Ke(),iu(this.relativeTargetOrigin,u,h),di(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const l=this.getLead(),u=!!this.resumingFrom||this!==l;let h=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(h=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===hn.timestamp&&(h=!1),h)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;di(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,b=this.treeScale.y;t2(this.layoutCorrected,this.treeScale,this.path,u),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=Ke());const{target:y}=l;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(J0(this.prevProjectionDelta.x,this.projectionDelta.x),J0(this.prevProjectionDelta.y,this.projectionDelta.y)),Fo(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==b||!uv(this.projectionDelta.x,this.prevProjectionDelta.x)||!uv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=da(),this.projectionDelta=da(),this.projectionDeltaWithTransform=da()}setAnimationOrigin(l,u=!1){const h=this.snapshot,f=h?h.latestValues:{},p={...this.latestValues},m=da();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const b=Ke(),y=h?h.source:void 0,A=this.layout?this.layout.source:void 0,w=y!==A,x=this.getStack(),S=!x||x.members.length<=1,E=!!(w&&!S&&this.options.crossfade===!0&&!this.path.some(J2));this.animationProgress=0;let T;this.mixTargetDelta=R=>{const D=R/1e3;bv(m.x,l.x,D),bv(m.y,l.y,D),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(iu(b,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Q2(this.relativeTarget,this.relativeTargetOrigin,b,D),T&&M2(this.relativeTarget,T)&&(this.isProjectionDirty=!1),T||(T=Ke()),di(T,this.relativeTarget)),w&&(this.animationValues=p,N2(p,f,this.latestValues,D,E,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Os(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ae.update(()=>{Xc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_a(0)),this.motionValue.jump(0,!1),this.currentAnimation=L2(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),l.onUpdate&&l.onUpdate(u)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(U2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:p}=l;if(!(!u||!h||!f)){if(this!==l&&this.layout&&f&&Jw(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||Ke();const m=wn(this.layout.layoutBox.x);h.x.min=l.target.x.min,h.x.max=h.x.min+m;const b=wn(this.layout.layoutBox.y);h.y.min=l.target.y.min,h.y.max=h.y.min+b}di(u,h),pa(u,p),Fo(this.projectionDeltaWithTransform,this.layoutCorrected,u,p)}}registerSharedNode(l,u){this.sharedNodes.has(l)||this.sharedNodes.set(l,new I2),this.sharedNodes.get(l).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),l&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let u=!1;const{latestValues:h}=l;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&sf("z",l,f,this.animationValues);for(let p=0;p<nf.length;p++)sf(`rotate${nf[p]}`,l,f,this.animationValues),sf(`skew${nf[p]}`,l,f,this.animationValues);l.render();for(const p in f)l.setStaticValue(p,f[p]),this.animationValues&&(this.animationValues[p]=f[p]);l.scheduleRender()}applyProjectionStyles(l,u){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const h=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Gc(u?.pointerEvents)||"",l.transform=h?h(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Gc(u?.pointerEvents)||""),this.hasProjected&&!rr(this.latestValues)&&(l.transform=h?h({},""):"none",this.hasProjected=!1);return}l.visibility="";const p=f.animationValues||f.latestValues;this.applyTransformsToTarget();let m=D2(this.projectionDeltaWithTransform,this.treeScale,p);h&&(m=h(p,m)),l.transform=m;const{x:b,y}=this.projectionDelta;l.transformOrigin=`${b.origin*100}% ${y.origin*100}% 0`,f.animationValues?l.opacity=f===this?p.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:l.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const A in qf){if(p[A]===void 0)continue;const{correct:w,applyTo:x,isCSSVariable:S}=qf[A],E=m==="none"?p[A]:w(p[A],f);if(x){const T=x.length;for(let R=0;R<T;R++)l[x[R]]=E}else S?this.options.visualElement.renderState.vars[A]=E:l[A]=E}this.options.layoutId&&(l.pointerEvents=f===this?Gc(u?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(pv),this.root.sharedNodes.clear()}}}function V2(a){a.updateLayout()}function H2(a){const t=a.resumeFrom?.snapshot||a.snapshot;if(a.isLead()&&a.layout&&t&&a.hasListeners("didUpdate")){const{layoutBox:e,measuredBox:n}=a.layout,{animationType:s}=a.options,o=t.source!==a.layout.source;s==="size"?Ti(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],b=wn(m);m.min=e[p].min,m.max=m.min+b}):Jw(s,t.layoutBox,e)&&Ti(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],b=wn(e[p]);m.max=m.min+b,a.relativeTarget&&!a.currentAnimation&&(a.isProjectionDirty=!0,a.relativeTarget[p].max=a.relativeTarget[p].min+b)});const l=da();Fo(l,e,t.layoutBox);const u=da();o?Fo(u,a.applyTransform(n,!0),t.measuredBox):Fo(u,e,t.layoutBox);const h=!qw(l);let f=!1;if(!a.resumeFrom){const p=a.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:b}=p;if(m&&b){const y=Ke();iu(y,t.layoutBox,m.layoutBox);const A=Ke();iu(A,e,b.layoutBox),$w(y,A)||(f=!0),p.options.layoutRoot&&(a.relativeTarget=A,a.relativeTargetOrigin=y,a.relativeParent=p)}}}a.notifyListeners("didUpdate",{layout:e,snapshot:t,delta:u,layoutDelta:l,hasLayoutChanged:h,hasRelativeLayoutChanged:f})}else if(a.isLead()){const{onExitComplete:e}=a.options;e&&e()}a.options.transition=void 0}function G2(a){a.parent&&(a.isProjecting()||(a.isProjectionDirty=a.parent.isProjectionDirty),a.isSharedProjectionDirty||(a.isSharedProjectionDirty=!!(a.isProjectionDirty||a.parent.isProjectionDirty||a.parent.isSharedProjectionDirty)),a.isTransformDirty||(a.isTransformDirty=a.parent.isTransformDirty))}function X2(a){a.isProjectionDirty=a.isSharedProjectionDirty=a.isTransformDirty=!1}function Y2(a){a.clearSnapshot()}function pv(a){a.clearMeasurements()}function mv(a){a.isLayoutDirty=!1}function q2(a){const{visualElement:t}=a.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),a.resetTransform()}function gv(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0,a.isProjectionDirty=!0}function $2(a){a.resolveTargetDelta()}function W2(a){a.calcProjection()}function K2(a){a.resetSkewAndRotation()}function Z2(a){a.removeLeadSnapshot()}function bv(a,t,e){a.translate=Me(t.translate,0,e),a.scale=Me(t.scale,1,e),a.origin=t.origin,a.originPoint=t.originPoint}function yv(a,t,e,n){a.min=Me(t.min,e.min,n),a.max=Me(t.max,e.max,n)}function Q2(a,t,e,n){yv(a.x,t.x,e.x,n),yv(a.y,t.y,e.y,n)}function J2(a){return a.animationValues&&a.animationValues.opacityExit!==void 0}const tk={duration:.45,ease:[.4,0,.1,1]},vv=a=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(a),wv=vv("applewebkit/")&&!vv("chrome/")?Math.round:ai;function Av(a){a.min=wv(a.min),a.max=wv(a.max)}function ek(a){Av(a.x),Av(a.y)}function Jw(a,t,e){return a==="position"||a==="preserve-aspect"&&!_2(cv(t),cv(e),.2)}function nk(a){return a!==a.root&&a.scroll?.wasRoot}const ik=Qw({attachResizeListener:(a,t)=>Xo(a,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),rf={current:void 0},tA=Qw({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent:()=>{if(!rf.current){const a=new ik({});a.mount(window),a.setOptions({layoutScroll:!0}),rf.current=a}return rf.current},resetTransform:(a,t)=>{a.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:a=>window.getComputedStyle(a).position==="fixed"}),jp=_t.createContext({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"});function Sv(a,t){if(typeof a=="function")return a(t);a!=null&&(a.current=t)}function sk(...a){return t=>{let e=!1;const n=a.map(s=>{const o=Sv(s,t);return!e&&typeof o=="function"&&(e=!0),o});if(e)return()=>{for(let s=0;s<n.length;s++){const o=n[s];typeof o=="function"?o():Sv(a[s],null)}}}}function rk(...a){return _t.useCallback(sk(...a),a)}class ak extends _t.Component{getSnapshotBeforeUpdate(t){const e=this.props.childRef.current;if(e&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const n=e.offsetParent,s=Hf(n)&&n.offsetWidth||0,o=Hf(n)&&n.offsetHeight||0,l=this.props.sizeRef.current;l.height=e.offsetHeight||0,l.width=e.offsetWidth||0,l.top=e.offsetTop,l.left=e.offsetLeft,l.right=s-l.width-l.left,l.bottom=o-l.height-l.top}return null}componentDidUpdate(){}render(){return this.props.children}}function ok({children:a,isPresent:t,anchorX:e,anchorY:n,root:s,pop:o}){const l=_t.useId(),u=_t.useRef(null),h=_t.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:f}=_t.useContext(jp),p=a.props?.ref??a?.ref,m=rk(u,p);return _t.useInsertionEffect(()=>{const{width:b,height:y,top:A,left:w,right:x,bottom:S}=h.current;if(t||o===!1||!u.current||!b||!y)return;const E=e==="left"?`left: ${w}`:`right: ${x}`,T=n==="bottom"?`bottom: ${S}`:`top: ${A}`;u.current.dataset.motionPopId=l;const R=document.createElement("style");f&&(R.nonce=f);const D=s??document.head;return D.appendChild(R),R.sheet&&R.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${b}px !important;
            height: ${y}px !important;
            ${E}px !important;
            ${T}px !important;
          }
        `),()=>{D.contains(R)&&D.removeChild(R)}},[t]),dt.jsx(ak,{isPresent:t,childRef:u,sizeRef:h,pop:o,children:o===!1?a:_t.cloneElement(a,{ref:m})})}const lk=({children:a,initial:t,isPresent:e,onExitComplete:n,custom:s,presenceAffectsLayout:o,mode:l,anchorX:u,anchorY:h,root:f})=>{const p=pp(ck),m=_t.useId();let b=!0,y=_t.useMemo(()=>(b=!1,{id:m,initial:t,isPresent:e,custom:s,onExitComplete:A=>{p.set(A,!0);for(const w of p.values())if(!w)return;n&&n()},register:A=>(p.set(A,!1),()=>p.delete(A))}),[e,p,n]);return o&&b&&(y={...y}),_t.useMemo(()=>{p.forEach((A,w)=>p.set(w,!1))},[e]),_t.useEffect(()=>{!e&&!p.size&&n&&n()},[e]),a=dt.jsx(ok,{pop:l==="popLayout",isPresent:e,anchorX:u,anchorY:h,root:f,children:a}),dt.jsx(hu.Provider,{value:y,children:a})};function ck(){return new Map}function eA(a=!0){const t=_t.useContext(hu);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,o=_t.useId();_t.useEffect(()=>{if(a)return s(o)},[a]);const l=_t.useCallback(()=>a&&n&&n(o),[o,n,a]);return!e&&n?[!1,l]:[!0]}const xc=a=>a.key||"";function xv(a){const t=[];return _t.Children.forEach(a,e=>{_t.isValidElement(e)&&t.push(e)}),t}const af=({children:a,custom:t,initial:e=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:o="sync",propagate:l=!1,anchorX:u="left",anchorY:h="top",root:f})=>{const[p,m]=eA(l),b=_t.useMemo(()=>xv(a),[a]),y=l&&!p?[]:b.map(xc),A=_t.useRef(!0),w=_t.useRef(b),x=pp(()=>new Map),S=_t.useRef(new Set),[E,T]=_t.useState(b),[R,D]=_t.useState(b);M1(()=>{A.current=!1,w.current=b;for(let z=0;z<R.length;z++){const I=xc(R[z]);y.includes(I)?(x.delete(I),S.current.delete(I)):x.get(I)!==!0&&x.set(I,!1)}},[R,y.length,y.join("-")]);const O=[];if(b!==E){let z=[...b];for(let I=0;I<R.length;I++){const Q=R[I],at=xc(Q);y.includes(at)||(z.splice(I,0,Q),O.push(Q))}return o==="wait"&&O.length&&(z=O),D(xv(z)),T(b),null}const{forceRender:L}=_t.useContext(fp);return dt.jsx(dt.Fragment,{children:R.map(z=>{const I=xc(z),Q=l&&!p?!1:b===R||y.includes(I),at=()=>{if(S.current.has(I))return;if(S.current.add(I),x.has(I))x.set(I,!0);else return;let U=!0;x.forEach(Z=>{Z||(U=!1)}),U&&(L?.(),D(w.current),l&&m?.(),n&&n())};return dt.jsx(lk,{isPresent:Q,initial:!A.current||e?void 0:!1,custom:t,presenceAffectsLayout:s,mode:o,root:f,onExitComplete:Q?void 0:at,anchorX:u,anchorY:h,children:z},I)})})},nA=_t.createContext({strict:!1}),_v={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let Ev=!1;function uk(){if(Ev)return;const a={};for(const t in _v)a[t]={isEnabled:e=>_v[t].some(n=>!!e[n])};Rw(a),Ev=!0}function iA(){return uk(),KC()}function hk(a){const t=iA();for(const e in a)t[e]={...t[e],...a[e]};Rw(t)}const dk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function su(a){return a.startsWith("while")||a.startsWith("drag")&&a!=="draggable"||a.startsWith("layout")||a.startsWith("onTap")||a.startsWith("onPan")||a.startsWith("onLayout")||dk.has(a)}let sA=a=>!su(a);function fk(a){typeof a=="function"&&(sA=t=>t.startsWith("on")?!su(t):a(t))}try{fk(require("@emotion/is-prop-valid").default)}catch{}function pk(a,t,e){const n={};for(const s in a)s==="values"&&typeof a.values=="object"||(sA(s)||e===!0&&su(s)||!t&&!su(s)||a.draggable&&s.startsWith("onDrag"))&&(n[s]=a[s]);return n}const pu=_t.createContext({});function mk(a,t){if(fu(a)){const{initial:e,animate:n}=a;return{initial:e===!1||Go(e)?e:void 0,animate:Go(n)?n:void 0}}return a.inherit!==!1?t:{}}function gk(a){const{initial:t,animate:e}=mk(a,_t.useContext(pu));return _t.useMemo(()=>({initial:t,animate:e}),[Tv(t),Tv(e)])}function Tv(a){return Array.isArray(a)?a.join(" "):a}const Vp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rA(a,t,e){for(const n in t)!gn(t[n])&&!Fw(n,e)&&(a[n]=t[n])}function bk({transformTemplate:a},t){return _t.useMemo(()=>{const e=Vp();return Ip(e,t,a),Object.assign({},e.vars,e.style)},[t])}function yk(a,t){const e=a.style||{},n={};return rA(n,e,a),Object.assign(n,bk(a,t)),n}function vk(a,t){const e={},n=yk(a,t);return a.drag&&a.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=a.drag===!0?"none":`pan-${a.drag==="x"?"y":"x"}`),a.tabIndex===void 0&&(a.onTap||a.onTapStart||a.whileTap)&&(e.tabIndex=0),e.style=n,e}const aA=()=>({...Vp(),attrs:{}});function wk(a,t,e,n){const s=_t.useMemo(()=>{const o=aA();return Iw(o,t,jw(n),a.transformTemplate,a.style),{...o.attrs,style:{...o.style}}},[t]);if(a.style){const o={};rA(o,a.style,a),s.style={...o,...s.style}}return s}const Ak=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hp(a){return typeof a!="string"||a.includes("-")?!1:!!(Ak.indexOf(a)>-1||/[A-Z]/u.test(a))}function Sk(a,t,e,{latestValues:n},s,o=!1,l){const h=(l??Hp(a)?wk:vk)(t,n,s,a),f=pk(t,typeof a=="string",o),p=a!==_t.Fragment?{...f,...h,ref:e}:{},{children:m}=t,b=_t.useMemo(()=>gn(m)?m.get():m,[m]);return _t.createElement(a,{...p,children:b})}function xk({scrapeMotionValuesFromProps:a,createRenderState:t},e,n,s){return{latestValues:_k(e,n,s,a),renderState:t()}}function _k(a,t,e,n){const s={},o=n(a,{});for(const b in o)s[b]=Gc(o[b]);let{initial:l,animate:u}=a;const h=fu(a),f=Mw(a);t&&f&&!h&&a.inherit!==!1&&(l===void 0&&(l=t.initial),u===void 0&&(u=t.animate));let p=e?e.initial===!1:!1;p=p||l===!1;const m=p?u:l;if(m&&typeof m!="boolean"&&!du(m)){const b=Array.isArray(m)?m:[m];for(let y=0;y<b.length;y++){const A=Rp(a,b[y]);if(A){const{transitionEnd:w,transition:x,...S}=A;for(const E in S){let T=S[E];if(Array.isArray(T)){const R=p?T.length-1:0;T=T[R]}T!==null&&(s[E]=T)}for(const E in w)s[E]=w[E]}}}return s}const oA=a=>(t,e)=>{const n=_t.useContext(pu),s=_t.useContext(hu),o=()=>xk(a,t,n,s);return e?o():pp(o)},Ek=oA({scrapeMotionValuesFromProps:Up,createRenderState:Vp}),Tk=oA({scrapeMotionValuesFromProps:Vw,createRenderState:aA}),Ck=Symbol.for("motionComponentSymbol");function kk(a,t,e){const n=_t.useRef(e);_t.useInsertionEffect(()=>{n.current=e});const s=_t.useRef(null);return _t.useCallback(o=>{o&&a.onMount?.(o),t&&(o?t.mount(o):t.unmount());const l=n.current;if(typeof l=="function")if(o){const u=l(o);typeof u=="function"&&(s.current=u)}else s.current?(s.current(),s.current=null):l(o);else l&&(l.current=o)},[t])}const lA=_t.createContext({});function ra(a){return a&&typeof a=="object"&&Object.prototype.hasOwnProperty.call(a,"current")}function Mk(a,t,e,n,s,o){const{visualElement:l}=_t.useContext(pu),u=_t.useContext(nA),h=_t.useContext(hu),f=_t.useContext(jp),p=f.reducedMotion,m=f.skipAnimations,b=_t.useRef(null),y=_t.useRef(!1);n=n||u.renderer,!b.current&&n&&(b.current=n(a,{visualState:t,parent:l,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:p,skipAnimations:m,isSVG:o}),y.current&&b.current&&(b.current.manuallyAnimateOnMount=!0));const A=b.current,w=_t.useContext(lA);A&&!A.projection&&s&&(A.type==="html"||A.type==="svg")&&Dk(b.current,e,s,w);const x=_t.useRef(!1);_t.useInsertionEffect(()=>{A&&x.current&&A.update(e,h)});const S=e[gw],E=_t.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return M1(()=>{y.current=!0,A&&(x.current=!0,window.MotionIsMounted=!0,A.updateFeatures(),A.scheduleRenderMicrotask(),E.current&&A.animationState&&A.animationState.animateChanges())}),_t.useEffect(()=>{A&&(!E.current&&A.animationState&&A.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),E.current=!1),A.enteringChildren=void 0)}),A}function Dk(a,t,e,n){const{layoutId:s,layout:o,drag:l,dragConstraints:u,layoutScroll:h,layoutRoot:f,layoutCrossfade:p}=t;a.projection=new e(a.latestValues,t["data-framer-portal-id"]?void 0:cA(a.parent)),a.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!l||u&&ra(u),visualElement:a,animationType:typeof o=="string"?o:"both",initialPromotionConfig:n,crossfade:p,layoutScroll:h,layoutRoot:f})}function cA(a){if(a)return a.options.allowProjection!==!1?a.projection:cA(a.parent)}function of(a,{forwardMotionProps:t=!1,type:e}={},n,s){n&&hk(n);const o=e?e==="svg":Hp(a),l=o?Tk:Ek;function u(f,p){let m;const b={..._t.useContext(jp),...f,layoutId:Rk(f)},{isStatic:y}=b,A=gk(f),w=l(f,y);if(!y&&k1){Nk();const x=Pk(b);m=x.MeasureLayout,A.visualElement=Mk(a,w,b,s,x.ProjectionNode,o)}return dt.jsxs(pu.Provider,{value:A,children:[m&&A.visualElement?dt.jsx(m,{visualElement:A.visualElement,...b}):null,Sk(a,f,kk(w,A.visualElement,p),w,y,t,o)]})}u.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const h=_t.forwardRef(u);return h[Ck]=a,h}function Rk({layoutId:a}){const t=_t.useContext(fp).id;return t&&a!==void 0?t+"-"+a:a}function Nk(a,t){_t.useContext(nA).strict}function Pk(a){const t=iA(),{drag:e,layout:n}=t;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e?.isEnabled(a)||n?.isEnabled(a)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function Ok(a,t){if(typeof Proxy>"u")return of;const e=new Map,n=(o,l)=>of(o,l,a,t),s=(o,l)=>n(o,l);return new Proxy(s,{get:(o,l)=>l==="create"?n:(e.has(l)||e.set(l,of(l,void 0,a,t)),e.get(l))})}const Lk=(a,t)=>t.isSVG??Hp(a)?new f2(t):new o2(t,{allowProjection:a!==_t.Fragment});class Bk extends zs{constructor(t){super(t),t.animationState||(t.animationState=y2(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();du(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let zk=0;class Fk extends zs{constructor(){super(...arguments),this.id=zk++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>{e(this.id)})}mount(){const{register:t,onExitComplete:e}=this.node.presenceContext||{};e&&e(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Ik={animation:{Feature:Bk},exit:{Feature:Fk}};function tl(a){return{point:{x:a.pageX,y:a.pageY}}}const Uk=a=>t=>Lp(t)&&a(t,tl(t));function Io(a,t,e,n){return Xo(a,t,Uk(e),n)}const uA=({current:a})=>a?a.ownerDocument.defaultView:null,Cv=(a,t)=>Math.abs(a-t);function jk(a,t){const e=Cv(a.x,t.x),n=Cv(a.y,t.y);return Math.sqrt(e**2+n**2)}const kv=new Set(["auto","scroll"]);class hA{constructor(t,e,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3,element:u}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=y=>{this.handleScroll(y.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=cf(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,w=jk(y.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!w)return;const{point:x}=y,{timestamp:S}=hn;this.history.push({...x,timestamp:S});const{onStart:E,onMove:T}=this.handlers;A||(E&&E(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,y)},this.handlePointerMove=(y,A)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=lf(A,this.transformPagePoint),Ae.update(this.updatePoint,!0)},this.handlePointerUp=(y,A)=>{this.end();const{onEnd:w,onSessionEnd:x,resumeAnimation:S}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=cf(y.type==="pointercancel"?this.lastMoveEventInfo:lf(A,this.transformPagePoint),this.history);this.startEvent&&w&&w(y,E),x&&x(y,E)},!Lp(t))return;this.dragSnapToOrigin=o,this.handlers=e,this.transformPagePoint=n,this.distanceThreshold=l,this.contextWindow=s||window;const h=tl(t),f=lf(h,this.transformPagePoint),{point:p}=f,{timestamp:m}=hn;this.history=[{...p,timestamp:m}];const{onSessionStart:b}=e;b&&b(t,cf(f,this.history)),this.removeListeners=Zo(Io(this.contextWindow,"pointermove",this.handlePointerMove),Io(this.contextWindow,"pointerup",this.handlePointerUp),Io(this.contextWindow,"pointercancel",this.handlePointerUp)),u&&this.startScrollTracking(u)}startScrollTracking(t){let e=t.parentElement;for(;e;){const n=getComputedStyle(e);(kv.has(n.overflowX)||kv.has(n.overflowY))&&this.scrollPositions.set(e,{x:e.scrollLeft,y:e.scrollTop}),e=e.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const e=this.scrollPositions.get(t);if(!e)return;const n=t===window,s=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},o={x:s.x-e.x,y:s.y-e.y};o.x===0&&o.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=o.x,this.lastMoveEventInfo.point.y+=o.y):this.history.length>0&&(this.history[0].x-=o.x,this.history[0].y-=o.y),this.scrollPositions.set(t,s),Ae.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),Os(this.updatePoint)}}function lf(a,t){return t?{point:t(a.point)}:a}function Mv(a,t){return{x:a.x-t.x,y:a.y-t.y}}function cf({point:a},t){return{point:a,delta:Mv(a,dA(t)),offset:Mv(a,Vk(t)),velocity:Hk(t,.1)}}function Vk(a){return a[0]}function dA(a){return a[a.length-1]}function Hk(a,t){if(a.length<2)return{x:0,y:0};let e=a.length-1,n=null;const s=dA(a);for(;e>=0&&(n=a[e],!(s.timestamp-n.timestamp>mi(t)));)e--;if(!n)return{x:0,y:0};n===a[0]&&a.length>2&&s.timestamp-n.timestamp>mi(t)*2&&(n=a[1]);const o=ri(s.timestamp-n.timestamp);if(o===0)return{x:0,y:0};const l={x:(s.x-n.x)/o,y:(s.y-n.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function Gk(a,{min:t,max:e},n){return t!==void 0&&a<t?a=n?Me(t,a,n.min):Math.max(a,t):e!==void 0&&a>e&&(a=n?Me(e,a,n.max):Math.min(a,e)),a}function Dv(a,t,e){return{min:t!==void 0?a.min+t:void 0,max:e!==void 0?a.max+e-(a.max-a.min):void 0}}function Xk(a,{top:t,left:e,bottom:n,right:s}){return{x:Dv(a.x,e,s),y:Dv(a.y,t,n)}}function Rv(a,t){let e=t.min-a.min,n=t.max-a.max;return t.max-t.min<a.max-a.min&&([e,n]=[n,e]),{min:e,max:n}}function Yk(a,t){return{x:Rv(a.x,t.x),y:Rv(a.y,t.y)}}function qk(a,t){let e=.5;const n=wn(a),s=wn(t);return s>n?e=jo(t.min,t.max-n,a.min):n>s&&(e=jo(a.min,a.max-s,t.min)),Di(0,1,e)}function $k(a,t){const e={};return t.min!==void 0&&(e.min=t.min-a.min),t.max!==void 0&&(e.max=t.max-a.min),e}const $f=.35;function Wk(a=$f){return a===!1?a=0:a===!0&&(a=$f),{x:Nv(a,"left","right"),y:Nv(a,"top","bottom")}}function Nv(a,t,e){return{min:Pv(a,t),max:Pv(a,e)}}function Pv(a,t){return typeof a=="number"?a:a[t]||0}const Kk=new WeakMap;class Zk{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ke(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:e=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const o=m=>{e&&this.snapToCursor(tl(m).point),this.stopAnimation()},l=(m,b)=>{const{drag:y,dragPropagation:A,onDragStart:w}=this.getProps();if(y&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TC(y),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=b,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ti(S=>{let E=this.getAxisMotionValue(S).get()||0;if(Mi.test(E)){const{projection:T}=this.visualElement;if(T&&T.layout){const R=T.layout.layoutBox[S];R&&(E=wn(R)*(parseFloat(E)/100))}}this.originPoint[S]=E}),w&&Ae.update(()=>w(m,b),!1,!0),If(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},u=(m,b)=>{this.latestPointerEvent=m,this.latestPanInfo=b;const{dragPropagation:y,dragDirectionLock:A,onDirectionLock:w,onDrag:x}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:S}=b;if(A&&this.currentDirection===null){this.currentDirection=Jk(S),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",b.point,S),this.updateAxis("y",b.point,S),this.visualElement.render(),x&&Ae.update(()=>x(m,b),!1,!0)},h=(m,b)=>{this.latestPointerEvent=m,this.latestPanInfo=b,this.stop(m,b),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>{const{dragSnapToOrigin:m}=this.getProps();(m||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:p}=this.getProps();this.panSession=new hA(t,{onSessionStart:o,onStart:l,onMove:u,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,distanceThreshold:n,contextWindow:uA(this.visualElement),element:this.visualElement.current})}stop(t,e){const n=t||this.latestPointerEvent,s=e||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!s||!n)return;const{velocity:l}=s;this.startAnimation(l);const{onDragEnd:u}=this.getProps();u&&Ae.postRender(()=>u(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!_c(t,s,this.currentDirection))return;const o=this.getAxisMotionValue(t);let l=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(l=Gk(l,this.constraints[t],this.elastic[t])),o.set(l)}resolveConstraints(){const{dragConstraints:t,dragElastic:e}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&ra(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=Xk(n.layoutBox,t):this.constraints=!1,this.elastic=Wk(e),s!==this.constraints&&!ra(t)&&n&&this.constraints&&!this.hasMutatedConstraints&&Ti(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=$k(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!ra(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=e2(n,s.root,this.visualElement.getTransformPagePoint());let l=Yk(s.layout.layoutBox,o);if(e){const u=e(QC(l));this.hasMutatedConstraints=!!u,u&&(l=Pw(u))}return l}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Ti(p=>{if(!_c(p,e,this.currentDirection))return;let m=h&&h[p]||{};l&&(m={min:0,max:0});const b=s?200:1e6,y=s?40:1e7,A={type:"inertia",velocity:n?t[p]:0,bounceStiffness:b,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(p,A)});return Promise.all(f).then(u)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return If(this.visualElement,t),n.start(Dp(t,n,0,e,this.visualElement,!1))}stopAnimation(){Ti(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Ti(e=>{const{drag:n}=this.getProps();if(!_c(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(e);if(s&&s.layout){const{min:l,max:u}=s.layout.layoutBox[e],h=o.get()||0;o.set(t[e]-Me(l,u,.5)+h)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!ra(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ti(l=>{const u=this.getAxisMotionValue(l);if(u&&this.constraints!==!1){const h=u.get();s[l]=qk({min:h,max:h},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.constraints=!1,this.resolveConstraints(),Ti(l=>{if(!_c(l,t,null))return;const u=this.getAxisMotionValue(l),{min:h,max:f}=this.constraints[l];u.set(Me(h,f,s[l]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;Kk.set(this.visualElement,this);const t=this.visualElement.current,e=Io(t,"pointerdown",f=>{const{drag:p,dragListener:m=!0}=this.getProps(),b=f.target,y=b!==t&&NC(b);p&&m&&!y&&this.start(f)});let n;const s=()=>{const{dragConstraints:f}=this.getProps();ra(f)&&f.current&&(this.constraints=this.resolveRefConstraints(),n||(n=Qk(t,f.current,()=>this.scalePositionWithinConstraints())))},{projection:o}=this.visualElement,l=o.addEventListener("measure",s);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Ae.read(s);const u=Xo(window,"resize",()=>this.scalePositionWithinConstraints()),h=o.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Ti(m=>{const b=this.getAxisMotionValue(m);b&&(this.originPoint[m]+=f[m].translate,b.set(b.get()+f[m].translate))}),this.visualElement.render())}));return()=>{u(),e(),l(),h&&h(),n&&n()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:l=$f,dragMomentum:u=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:o,dragElastic:l,dragMomentum:u}}}function Ov(a){let t=!0;return()=>{if(t){t=!1;return}a()}}function Qk(a,t,e){const n=j0(a,Ov(e)),s=j0(t,Ov(e));return()=>{n(),s()}}function _c(a,t,e){return(t===!0||t===a)&&(e===null||e===a)}function Jk(a,t=10){let e=null;return Math.abs(a.y)>t?e="y":Math.abs(a.x)>t&&(e="x"),e}class tM extends zs{constructor(t){super(t),this.removeGroupControls=ai,this.removeListeners=ai,this.controls=new Zk(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ai}update(){const{dragControls:t}=this.node.getProps(),{dragControls:e}=this.node.prevProps||{};t!==e&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const uf=a=>(t,e)=>{a&&Ae.update(()=>a(t,e),!1,!0)};class eM extends zs{constructor(){super(...arguments),this.removePointerDownListener=ai}onPointerDown(t){this.session=new hA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uA(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:uf(t),onStart:uf(e),onMove:uf(n),onEnd:(o,l)=>{delete this.session,s&&Ae.postRender(()=>s(o,l))}}}mount(){this.removePointerDownListener=Io(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let hf=!1;class nM extends _t.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:o}=t;o&&(e.group&&e.group.add(o),n&&n.register&&s&&n.register(o),hf&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Xc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:o}=this.props,{projection:l}=n;return l&&(l.isPresent=o,t.layoutDependency!==e&&l.setOptions({...l.options,layoutDependency:e}),hf=!0,s||t.layoutDependency!==e||e===void 0||t.isPresent!==o?l.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?l.promote():l.relegate()||Ae.postRender(()=>{const u=l.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Op.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;hf=!0,s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function fA(a){const[t,e]=eA(),n=_t.useContext(fp);return dt.jsx(nM,{...a,layoutGroup:n,switchLayoutGroup:_t.useContext(lA),isPresent:t,safeToRemove:e})}const iM={pan:{Feature:eM},drag:{Feature:tM,ProjectionNode:tA,MeasureLayout:fA}};function Lv(a,t,e){const{props:n}=a;a.animationState&&n.whileHover&&a.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,o=n[s];o&&Ae.postRender(()=>o(t,tl(t)))}class sM extends zs{mount(){const{current:t}=this.node;t&&(this.unmount=kC(t,(e,n)=>(Lv(this.node,n,"Start"),s=>Lv(this.node,s,"End"))))}unmount(){}}class rM extends zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zo(Xo(this.node.current,"focus",()=>this.onFocus()),Xo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bv(a,t,e){const{props:n}=a;if(a.current instanceof HTMLButtonElement&&a.current.disabled)return;a.animationState&&n.whileTap&&a.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),o=n[s];o&&Ae.postRender(()=>o(t,tl(t)))}class aM extends zs{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:e,propagate:n}=this.node.props;this.unmount=OC(t,(s,o)=>(Bv(this.node,o,"Start"),(l,{success:u})=>Bv(this.node,l,u?"End":"Cancel")),{useGlobalTarget:e,stopPropagation:n?.tap===!1})}unmount(){}}const Wf=new WeakMap,df=new WeakMap,oM=a=>{const t=Wf.get(a.target);t&&t(a)},lM=a=>{a.forEach(oM)};function cM({root:a,...t}){const e=a||document;df.has(e)||df.set(e,{});const n=df.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(lM,{root:a,...t})),n[s]}function uM(a,t,e){const n=cM(t);return Wf.set(a,e),n.observe(a),()=>{Wf.delete(a),n.unobserve(a)}}const hM={some:0,all:1};class dM extends zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:o}=t,l={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:hM[s]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:p,onViewportLeave:m}=this.node.getProps(),b=f?p:m;b&&b(h)};return uM(this.node.current,l,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(fM(t,e))&&this.startObserver()}unmount(){}}function fM({viewport:a={}},{viewport:t={}}={}){return e=>a[e]!==t[e]}const pM={inView:{Feature:dM},tap:{Feature:aM},focus:{Feature:rM},hover:{Feature:sM}},mM={layout:{ProjectionNode:tA,MeasureLayout:fA}},gM={...Ik,...pM,...iM,...mM},Zi=Ok(gM,Lk),yn=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Kf=[.001,0,0,.001,0,0],ff=1.35,In={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Rs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Yo="pdfjs_internal_editor_",Ht={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ne={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},bM={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Zf={TRIANGLES:1,LATTICE:2},We={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Yc={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},aa={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},mu={ERRORS:0,WARNINGS:1,INFOS:5},qo={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},_o={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},yM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let gu=mu.WARNINGS;function vM(a){Number.isInteger(a)&&(gu=a)}function wM(){return gu}function bu(a){gu>=mu.INFOS&&console.info(`Info: ${a}`)}function Ut(a){gu>=mu.WARNINGS&&console.warn(`Warning: ${a}`)}function he(a){throw new Error(a)}function ue(a,t){a||he(t)}function AM(a){switch(a?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pA(a,t=null,e=null){if(!a)return null;if(e&&typeof a=="string"&&(e.addDefaultProtocol&&a.startsWith("www.")&&a.match(/\./g)?.length>=2&&(a=`http://${a}`),e.tryConvertEncoding))try{a=CM(a)}catch{}const n=t?URL.parse(a,t):URL.parse(a);return AM(n)?n:null}function mA(a,t,e=!1){const n=URL.parse(a);return n?(n.hash=t,n.href):e&&pA(a,"http://example.com")?a.split("#",1)[0]+`${t?`#${t}`:""}`:""}function jt(a,t,e,n=!1){return Object.defineProperty(a,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const mr=(function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t})();class zv extends mr{constructor(t,e){super(t,"PasswordException"),this.code=e}}class pf extends mr{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Qf extends mr{constructor(t){super(t,"InvalidPDFException")}}class ru extends mr{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class SM extends mr{constructor(t){super(t,"FormatError")}}class Ls extends mr{constructor(t){super(t,"AbortException")}}function xM(a){(typeof a!="object"||a?.length===void 0)&&he("Invalid argument for bytesToString");const t=a.length,e=8192;if(t<e)return String.fromCharCode.apply(null,a);const n=[];for(let s=0;s<t;s+=e){const o=Math.min(s+e,t),l=a.subarray(s,o);n.push(String.fromCharCode.apply(null,l))}return n.join("")}function yu(a){typeof a!="string"&&he("Invalid argument for stringToBytes");const t=a.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=a.charCodeAt(n)&255;return e}function _M(a){return String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255)}function EM(){const a=new Uint8Array(4);return a[0]=1,new Uint32Array(a.buffer,0,1)[0]===1}function TM(){try{return new Function(""),!0}catch{return!1}}class Ze{static get isLittleEndian(){return jt(this,"isLittleEndian",EM())}static get isEvalSupported(){return jt(this,"isEvalSupported",TM())}static get isOffscreenCanvasSupported(){return jt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return jt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return jt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return jt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return jt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return jt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const mf=Array.from(Array(256).keys(),a=>a.toString(16).padStart(2,"0"));class Tt{static makeHexColor(t,e,n){return`#${mf[t]}${mf[e]}${mf[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const s=t[n],o=t[n+1];t[n]=s*e[0]+o*e[2]+e[4],t[n+1]=s*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5];for(let p=0;p<6;p+=2){const m=t[n+p],b=t[n+p+1];t[n+p]=m*s+b*l+h,t[n+p+1]=m*o+b*u+f}}static applyInverseTransform(t,e){const n=t[0],s=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,n){const s=e[0],o=e[1],l=e[2],u=e[3],h=e[4],f=e[5],p=t[0],m=t[1],b=t[2],y=t[3];let A=s*p+h,w=A,x=s*b+h,S=x,E=u*m+f,T=E,R=u*y+f,D=R;if(o!==0||l!==0){const O=o*p,L=o*b,z=l*m,I=l*y;A+=z,S+=z,x+=I,w+=I,E+=O,D+=O,R+=L,T+=L}n[0]=Math.min(n[0],A,x,w,S),n[1]=Math.min(n[1],E,R,T,D),n[2]=Math.max(n[2],A,x,w,S),n[3]=Math.max(n[3],E,R,T,D)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],o=t[2],l=t[3],u=n**2+s**2,h=n*o+s*l,f=o**2+l**2,p=(u+f)/2,m=Math.sqrt(p**2-(u*f-h**2));e[0]=Math.sqrt(p+m||1),e[1]=Math.sqrt(p-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),l=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>l?null:[n,o,s,l]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,o){o[0]=Math.min(o[0],t,n),o[1]=Math.min(o[1],e,s),o[2]=Math.max(o[2],t,n),o[3]=Math.max(o[3],e,s)}static#t(t,e,n,s,o,l,u,h,f,p){if(f<=0||f>=1)return;const m=1-f,b=f*f,y=b*f,A=m*(m*(m*t+3*f*e)+3*b*n)+y*s,w=m*(m*(m*o+3*f*l)+3*b*u)+y*h;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],w)}static#e(t,e,n,s,o,l,u,h,f,p,m,b){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,e,n,s,o,l,u,h,-m/p,b);return}const y=p**2-4*m*f;if(y<0)return;const A=Math.sqrt(y),w=2*f;this.#t(t,e,n,s,o,l,u,h,(-p+A)/w,b),this.#t(t,e,n,s,o,l,u,h,(-p-A)/w,b)}static bezierBoundingBox(t,e,n,s,o,l,u,h,f){f[0]=Math.min(f[0],t,u),f[1]=Math.min(f[1],e,h),f[2]=Math.max(f[2],t,u),f[3]=Math.max(f[3],e,h),this.#e(t,n,o,u,e,s,l,h,3*(-t+3*(n-o)+u),6*(t-2*n+o),3*(n-t),f),this.#e(t,n,o,u,e,s,l,h,3*(-e+3*(s-l)+h),6*(e-2*s+l),3*(s-e),f)}}function CM(a){return decodeURIComponent(escape(a))}let gf=null,Fv=null;function kM(a){return gf||(gf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Fv=new Map([["","t"]])),a.replaceAll(gf,(t,e,n)=>e?e.normalize("NFKC"):Fv.get(n))}function gA(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const a=new Uint8Array(32);return crypto.getRandomValues(a),xM(a)}const ma="pdfjs_internal_id_";function MM(a,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...o]=e;if(!a(n)&&!Number.isInteger(n)||!t(s))return!1;const l=o.length;let u=!0;switch(s.name){case"XYZ":if(l<2||l>3)return!1;break;case"Fit":case"FitB":return l===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(l>1)return!1;break;case"FitR":if(l!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function dn(a,t,e){return Math.min(Math.max(a,t),e)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(a){return a.reduce((t,e)=>t+e,0)});class $o{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(o){if(!o)return;let l=null;const u=o.name;if(u==="#text")l=o.value;else if($o.shouldBuildText(u))o?.attributes?.textContent?l=o.attributes.textContent:o.value&&(l=o.value);else return;if(l!==null&&e.push({str:l}),!!o.children)for(const h of o.children)s(h)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class bA{static setupStorage(t,e,n,s,o){const l=s.getValue(e,{value:null});switch(n.name){case"textarea":if(l.value!==null&&(t.textContent=l.value),o==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(l.value===n.attributes.xfaOn?t.setAttribute("checked",!0):l.value===n.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",u=>{s.setValue(e,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(l.value!==null&&t.setAttribute("value",l.value),o==="print")break;t.addEventListener("input",u=>{s.setValue(e,{value:u.target.value})})}break;case"select":if(l.value!==null){t.setAttribute("value",l.value);for(const u of n.children)u.attributes.value===l.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;s.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:o}){const{attributes:l}=e,u=t instanceof HTMLAnchorElement;l.type==="radio"&&(l.name=`${l.name}-${s}`);for(const[h,f]of Object.entries(l))if(f!=null)switch(h){case"class":f.length&&t.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,f)}u&&o.addLinkAttributes(t,l.href,l.newWindow),n&&l.dataId&&this.setupStorage(t,l.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,o=t.intent||"display",l=document.createElement(s.name);s.attributes&&this.setAttributes({html:l,element:s,intent:o,linkService:n});const u=o!=="richText",h=t.div;if(h.append(l),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=m}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);l.append(m),u&&$o.shouldBuildText(s.name)&&f.push(m)}return{textDivs:f}}const p=[[s,-1,l]];for(;p.length>0;){const[m,b,y]=p.at(-1);if(b+1===m.children.length){p.pop();continue}const A=m.children[++p.at(-1)[1]];if(A===null)continue;const{name:w}=A;if(w==="#text"){const S=document.createTextNode(A.value);f.push(S),y.append(S);continue}const x=A?.attributes?.xmlns?document.createElementNS(A.attributes.xmlns,w):document.createElement(w);if(y.append(x),A.attributes&&this.setAttributes({html:x,element:A,storage:e,intent:o,linkService:n}),A.children?.length>0)p.push([A,-1,x]);else if(A.value){const S=document.createTextNode(A.value);u&&$o.shouldBuildText(w)&&f.push(S),x.append(S)}}for(const m of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Ji="http://www.w3.org/2000/svg";class Ea{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function el(a,t="text"){if(Po(a,document.baseURI)){const e=await fetch(a);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",a,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class nl{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:o=0,offsetY:l=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=o,this.offsetY=l,n*=e;const h=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let p,m,b,y;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,m=0,b=0,y=1;break;case 90:p=0,m=1,b=1,y=0;break;case 270:p=0,m=-1,b=-1,y=0;break;case 0:p=1,m=0,b=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(b=-b,y=-y);let A,w,x,S;p===0?(A=Math.abs(f-t[1])*n+o,w=Math.abs(h-t[0])*n+l,x=(t[3]-t[1])*n,S=(t[2]-t[0])*n):(A=Math.abs(h-t[0])*n+o,w=Math.abs(f-t[1])*n+l,x=(t[2]-t[0])*n,S=(t[3]-t[1])*n),this.transform=[p*n,m*n,b*n,y*n,A-p*n*h-b*n*f,w-m*n*h-y*n*f],this.width=x,this.height=S}get rawDims(){const t=this.viewBox;return jt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:o=!1}={}){return new nl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:o})}convertToViewportPoint(t,e){const n=[t,e];return Tt.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];Tt.applyTransform(e,this.transform);const n=[t[2],t[3]];return Tt.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return Tt.applyInverseTransform(n,this.transform),n}}class Gp extends mr{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function vu(a){const t=a.length;let e=0;for(;e<t&&a[e].trim()==="";)e++;return a.substring(e,e+5).toLowerCase()==="data:"}function Xp(a){return typeof a=="string"&&/\.pdf$/i.test(a)}function DM(a){return[a]=a.split(/[#?]/,1),a.substring(a.lastIndexOf("/")+1)}function RM(a,t="document.pdf"){if(typeof a!="string")return t;if(vu(a))return Ut('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(a);if(!n)return t;const s=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,l=n.pathname.split("/").at(-1);if(o.test(l))return s(l);if(n.searchParams.size>0){const u=Array.from(n.searchParams.values()).reverse();for(const f of u)if(o.test(f))return s(f);const h=Array.from(n.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return s(f)}if(n.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(h)return s(h[0])}return t}class Iv{started=Object.create(null);times=[];time(t){t in this.started&&Ut(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ut(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:o}of this.times)t.push(`${n.padEnd(e)} ${o-s}ms
`);return t.join("")}}function Po(a,t){const e=t?URL.parse(a,t):URL.parse(a);return e?.protocol==="http:"||e?.protocol==="https:"}function oi(a){a.preventDefault()}function Oe(a){a.preventDefault(),a.stopPropagation()}function NM(a){console.log("Deprecated API usage: "+a)}class Jf{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let l=parseInt(e[4],10);l=l>=0&&l<=23?l:0;let u=parseInt(e[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;const f=e[7]||"Z";let p=parseInt(e[8],10);p=p>=0&&p<=23?p:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(l+=p,u+=m):f==="+"&&(l-=p,u-=m),new Date(Date.UTC(n,s,o,l,u,h))}}function PM(a,{scale:t=1,rotation:e=0}){const{width:n,height:s}=a.attributes.style,o=[0,0,parseInt(n),parseInt(s)];return new nl({viewBox:o,userUnit:1,scale:t,rotation:e})}function il(a){if(a.startsWith("#")){const t=parseInt(a.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return a.startsWith("rgb(")?a.slice(4,-1).split(",").map(t=>parseInt(t)):a.startsWith("rgba(")?a.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ut(`Not a valid color format: "${a}"`),[0,0,0])}function OM(a){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of a.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;a.set(e,il(n))}t.remove()}function ke(a){const{a:t,b:e,c:n,d:s,e:o,f:l}=a.getTransform();return[t,e,n,s,o,l]}function _i(a){const{a:t,b:e,c:n,d:s,e:o,f:l}=a.getTransform().invertSelf();return[t,e,n,s,o,l]}function fr(a,t,e=!1,n=!0){if(t instanceof nl){const{pageWidth:s,pageHeight:o}=t.rawDims,{style:l}=a,u=Ze.isCSSRoundSupported,h=`var(--total-scale-factor) * ${s}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,m=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(l.width=p,l.height=m):(l.width=m,l.height=p)}n&&a.setAttribute("data-main-rotation",t.rotation)}class Ri{constructor(){const{pixelRatio:t}=Ri;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,o=-1){let l=1/0,u=1/0,h=1/0;n=Ri.capPixels(n,o),n>0&&(l=Math.sqrt(n/(t*e))),s!==-1&&(u=s/t,h=s/e);const f=Math.min(l,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const tp=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class LM{static get isDarkMode(){return jt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class BM{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:n}=window.getComputedStyle(t);return t.remove(),jt(this,"commentForegroundColor",il(n))}}function zM(a,t,e,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return a=Math.round(a*n+s),t=Math.round(t*n+s),e=Math.round(e*n+s),[a,t,e]}function Uv(a,t){const e=a[0]/255,n=a[1]/255,s=a[2]/255,o=Math.max(e,n,s),l=Math.min(e,n,s),u=(o+l)/2;if(o===l)t[0]=t[1]=0;else{const h=o-l;switch(t[1]=u<.5?h/(o+l):h/(2-o-l),o){case e:t[0]=((n-s)/h+(n<s?6:0))*60;break;case n:t[0]=((s-e)/h+2)*60;break;case s:t[0]=((e-n)/h+4)*60;break}}t[2]=u}function ep(a,t){const e=a[0],n=a[1],s=a[2],o=(1-Math.abs(2*s-1))*n,l=o*(1-Math.abs(e/60%2-1)),u=s-o/2;switch(Math.floor(e/60)){case 0:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 1:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 2:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 3:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 4:t[0]=l+u,t[1]=u,t[2]=o+u;break;case 5:case 6:t[0]=o+u,t[1]=u,t[2]=l+u;break}}function jv(a){return a<=.03928?a/12.92:((a+.055)/1.055)**2.4}function Vv(a,t,e){ep(a,e),e.map(jv);const n=.2126*e[0]+.7152*e[1]+.0722*e[2];ep(t,e),e.map(jv);const s=.2126*e[0]+.7152*e[1]+.0722*e[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const Hv=new Map;function FM(a,t){const e=a[0]+a[1]*256+a[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let n=Hv.get(e);if(n)return n;const s=new Float32Array(9),o=s.subarray(0,3),l=s.subarray(3,6);Uv(a,l);const u=s.subarray(6,9);Uv(t,u);const h=u[2]<.5,f=h?12:4.5;if(l[2]=h?Math.sqrt(l[2]):1-Math.sqrt(1-l[2]),Vv(l,u,o)<f){let p,m;h?(p=l[2],m=1):(p=0,m=l[2]);const b=.005;for(;m-p>b;){const y=l[2]=(p+m)/2;h===Vv(l,u,o)<f?p=y:m=y}l[2]=h?m:p}return ep(l,o),n=Tt.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),Hv.set(e,n),n}function yA({html:a,dir:t,className:e},n){const s=document.createDocumentFragment();if(typeof a=="string"){const o=document.createElement("p");o.dir=t||"auto";const l=a.split(/(?:\r\n?|\n)/);for(let u=0,h=l.length;u<h;++u){const f=l[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}s.append(o)}else bA.render({xfaHtml:a,div:s,intent:"richText"});s.firstElementChild.classList.add("richText",e),n.append(s)}function vA(a){const t=new Path2D;if(!a)return t;for(let e=0,n=a.length;e<n;)switch(a[e++]){case _o.moveTo:t.moveTo(a[e++],a[e++]);break;case _o.lineTo:t.lineTo(a[e++],a[e++]);break;case _o.curveTo:t.bezierCurveTo(a[e++],a[e++],a[e++],a[e++],a[e++],a[e++]);break;case _o.quadraticCurveTo:t.quadraticCurveTo(a[e++],a[e++],a[e++],a[e++]);break;case _o.closePath:t.closePath();break;default:Ut(`Unrecognized drawing path operator: ${a[e-1]}`);break}return t}class le{static#t=null;static#e=null;static#i=null;static#n=0;static#r=[];get pagesNumber(){return le.#n}set pagesNumber(t){le.#n!==t&&(le.#n=t,t===0&&(le.#e=null,le.#t=null))}addListener(t){le.#r.push(t)}removeListener(t){const e=le.#r.indexOf(t);e>=0&&le.#r.splice(e,1)}#a(){for(const t of le.#r)t()}#s(t){if(le.#e)return;const e=le.#n,n=new Uint32Array(3*e),s=le.#e=n.subarray(0,e),o=le.#t=n.subarray(e,2*e);if(t)for(let l=0;l<e;l++)s[l]=o[l]=l+1;le.#i=n.subarray(2*e)}movePages(t,e,n){this.#s(!0);const s=le.#e,o=le.#t;le.#i.set(o);const l=e.length,u=new Uint32Array(l);let h=0;for(let y=0;y<l;y++){const A=e[y]-1;u[y]=s[A],A<n&&(h+=1)}const f=le.#n;let p=n-h;const m=f-l;p=dn(p,0,m);for(let y=0,A=0;y<f;y++)t.has(y+1)||(s[A++]=s[y]);s.copyWithin(p+l,p,m),s.set(u,p);let b=!1;for(let y=0,A=f;y<A;y++){const w=s[y];b||=w!==y+1,o[w-1]=y+1}this.#a(),b||(this.pagesNumber=0)}hasBeenAltered(){return le.#e!==null}getPageMappingForSaving(){return{pageIndices:le.#t?le.#t.map(t=>t-1):null}}getPrevPageNumber(t){return le.#i[le.#e[t-1]-1]}getPageNumber(t){return le.#t?.[t-1]??t}getPageId(t){return le.#e?.[t-1]??t}static get instance(){return jt(this,"instance",new le)}getMapping(){return le.#e.subarray(0,this.pagesNumber)}}class Uo{#t=null;#e=null;#i;#n=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#i=t,Uo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",oi,{signal:e}),t.addEventListener("pointerdown",Uo.#l,{signal:e}));const n=this.#n=document.createElement("div");n.className="buttons",t.append(n);const s=this.#i.toolbarPosition;if(s){const{style:o}=t,l=this.#i._uiManager.direction==="ltr"?1-s[0]:s[0];o.insetInlineEnd=`${100*l}%`,o.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,Oe(t)}#h(t){this.#i._focusEventsAllowed=!0,Oe(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",oi,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",Uo.#c[t]),this.#f(n)&&n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),this.#n.append(n)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#r=t}addComment(t,e=null){if(this.#a)return;const n=t.renderForToolbar();if(!n)return;this.#f(n);const s=this.#s=this.#g;e?(this.#n.insertBefore(n,e),this.#n.insertBefore(s,e)):this.#n.append(n,s),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,n){if(!e&&t==="comment")return;const s=this.#n.querySelector(n);s&&t==="comment"&&this.addComment(e,s)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class IM{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",oi,{signal:e});const n=this.#t=document.createElement("div");return n.className="buttons",t.append(n),this.#i.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let n=0,s=0;for(const o of t){const l=o.y+o.height;if(l<n)continue;const u=o.x+(e?o.width:0);if(l>n){s=u,n=l;continue}e?u>s&&(s=u):u<s&&(s=u)}return[e?1-s:s,n]}show(t,e,n){const[s,o]=this.#r(e,n),{style:l}=this.#e||=this.#n();t.append(this.#e),l.insetInlineEnd=`${100*s}%`,l.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,n,s){const o=document.createElement("button");o.classList.add("basic",t),o.tabIndex=0,o.setAttribute("data-l10n-id",e);const l=document.createElement("span");o.append(l),l.className="visuallyHidden",l.setAttribute("data-l10n-id",n);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",oi,{signal:u}),o.addEventListener("click",s,{signal:u})),this.#t.append(o)}}function wA(a,t,e){for(const n of e)t.addEventListener(n,a[n].bind(a))}class ce{static#t=NaN;static#e=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(t){(ce.#e||=new Set).add(t)}static setPointer(t,e){ce.#t||=e,ce.#n??=t}static setTimeStamp(t){ce.#i=t}static isSamePointerId(t){return ce.#t===t}static isSamePointerIdOrRemove(t){return ce.#t===t?!0:(ce.#e?.delete(t),!1)}static isSamePointerType(t){return ce.#n===t}static isInitializedAndDifferentPointerType(t){return ce.#n!==null&&!ce.isSamePointerType(t)}static isSameTimeStamp(t){return ce.#i===t}static isUsingMultiplePointers(){return ce.#e?.size>=1}static clearPointerType(){ce.#n=null}static clearPointerIds(){ce.#t=NaN,ce.#e=null}static clearTimeStamp(){ce.#i=NaN}}class UM{#t=0;get id(){return`${Yo}${this.#t++}`}}class Yp{#t=gA();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const o=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return jt(this,"_isSVGFittingCanvas",o)}async#n(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n===null)return null;if(n?.bitmap)return n.refCounter+=1,n;try{n||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let s;if(typeof e=="string"?(n.url=e,s=await el(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const o=Yp._isSVGFittingCanvas,l=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{n.bitmap=u,n.isSvg=!0,f()},l.onload=async()=>{const m=n.svgUrl=l.result;u.src=await o?`${m}#svgView(preserveAspectRatio(none))`:m},u.onerror=l.onerror=p});l.readAsDataURL(s),await h}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Ut(s),n=null}return this.#i.set(t,n),n&&this.#i.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:s,type:o}=t;return this.#n(`${e}_${n}_${s}_${o}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const n=await e;return this.#n(t,n)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let n=this.#i.get(t);if(n?.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,n),this.#i.set(n.id,n),n}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=s.convertToBlob()}n.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class jM{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:n,mustExec:s,type:o=NaN,overwriteIfSameType:l=!1,keepUndo:u=!1}){if(s&&t(),this.#e)return;const h={cmd:t,undo:e,post:n,type:o};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(h);return}if(l&&this.#t[this.#n].type===o){u&&(h.undo=this.#t[this.#n].undo),this.#t[this.#n]=h;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(h)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class sl{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ze.platform;for(const[n,s,o={}]of t)for(const l of n){const u=l.startsWith("mac+");e&&u?(this.callbacks.set(l.slice(4),{callback:s,options:o}),this.allKeys.add(l.split("+").at(-1))):!e&&!u&&(this.callbacks.set(l,{callback:s,options:o}),this.allKeys.add(l.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#t(e));if(!n)return;const{callback:s,options:{bubbles:o=!1,args:l=[],checker:u=null}}=n;u&&!u(t,e)||(s.bind(t,...l,e)(),o||Oe(e))}}class qp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return OM(t),jt(this,"_colors",t)}convert(t){const e=il(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((o,l)=>o===e[l]))return qp._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?Tt.makeHexColor(...e):t}}class Bs{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new jM;#l=null;#d=null;#h=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#v=!1;#y=!1;#E=null;#x=null;#A=null;#C=null;#w=!1;#_=null;#D=new UM;#k=!1;#M=!1;#z=!1;#N=null;#O=null;#F=null;#L=null;#G=null;#T=Ht.NONE;#S=new Set;#P=null;#I=null;#j=null;#q=null;#Y=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#B=null;#X=null;#Q=null;#J=null;#U=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Bs.prototype,e=l=>l.#X.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&l.hasSomethingToControl(),n=(l,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return jt(this,"_keyboardManager",new sl([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#X.contains(u)&&!l.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(l,{target:u})=>!(u instanceof HTMLButtonElement)&&l.#X.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}constructor(t,e,n,s,o,l,u,h,f,p,m,b,y,A,w,x){const S=this._signal=this.#t.signal;this.#X=t,this.#Q=e,this.#J=n,this.#a=s,this.#l=o,this.#I=l,this.#Y=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:S}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:S}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:S}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:S}),u._on("setpreference",this.onSetPreference.bind(this),{signal:S}),u._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:S}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:S}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:S}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:S}),this.#at(),this.#dt(),this.#et(),this.#s=h.annotationStorage,this.#E=h.filterFactory,this.#j=f,this.#C=p||null,this.#b=m,this.#v=b,this.#y=y,this.#G=A||null,this.viewParameters={realScale:Ea.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=x!==!1,o?.setSidebarUiManager(this)}destroy(){this.#U?.resolve(),this.#U=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#L?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#I?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#i=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return jt(this,"hcmFilter",this.#j?this.#E.addHCMFilter(this.#j.foreground,this.#j.background):"none")}get direction(){return jt(this,"direction",getComputedStyle(this.#X).direction)}get _highlightColors(){return jt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return jt(this,"highlightColors",null);const e=new Map,n=!!this.#j;for(const[s,o]of t){const l=s.endsWith("_HCM");if(n&&l){e.set(s.replace("_HCM",""),o);continue}!n&&!l&&e.set(s,o)}return jt(this,"highlightColors",e)}get highlightColorNames(){return jt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,n,s){this.#l?.showDialog(this,t,e,n,s)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}deleteComment(t,e){const n=()=>{t.comment=e},s=()=>{this._editorUndoBar?.show(n,"comment"),this.toggleComment(null),t.comment=null};this.addCommands({cmd:s,undo:n,mustExec:!0})}toggleComment(t,e,n=void 0){this.#l?.toggleCommentPopup(t,e,n)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:n}=Promise.withResolvers(),s=o=>{o.pageNumber===t&&(this._eventBus._off("editorsrendered",s),e())};this._eventBus.on("editorsrendered",s),await n}getSignature(t){this.#I?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#I}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#y=e)}onPagesEdited({pagesMapper:t}){for(const s of this.#n.values())s.updatePageIndex(t.getPrevPageNumber(s.pageIndex+1)-1);const e=this.#r,n=this.#r=new Map;for(const[s,o]of e){const l=t.getPrevPageNumber(s+1)-1;if(l===-1){o.destroy();continue}n.set(l,o),o.updatePageIndex(l)}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#X.focus()}findParent(t,e){for(const n of this.#r.values()){const{x:s,y:o,width:l,height:u}=n.div.getBoundingClientRect();if(t>=s&&t<=s+l&&e>=o&&e<=o+u)return n}return null}disableUserSelect(t=!1){this.#Q.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Ea.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Z({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of this.#r.values())if(n.hasTextLayer(t))return n;return null}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:o,focusNode:l,focusOffset:u}=n,h=n.toString(),p=this.#Z(n).closest(".textLayer"),m=this.getSelectionBoxes(p);if(!m)return;n.empty();const b=this.#tt(p),y=this.#T===Ht.NONE,A=()=>{const w=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:s,anchorOffset:o,focusNode:l,focusOffset:u,text:h});y&&this.showAllEditors("highlight",!0,!0),e&&w?.editComment()};if(y){this.switchToMode(Ht.HIGHLIGHT,A);return}A()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=this.#Z(t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(this.#_||=new IM(this),this.#_.show(n,s,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${Yo}${t}`,n=this.#s.getRawValue(e);return n&&this.#s.remove(e),n}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const n=this.#J;n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}#rt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#P&&(this.#_?.hide(),this.#P=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#P)return;const s=this.#Z(t).closest(".textLayer");if(!s){this.#P&&(this.#_?.hide(),this.#P=null,this.#R({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#P=e,this.#R({hasSelectedText:!0}),!(this.#T!==Ht.HIGHLIGHT&&this.#T!==Ht.NONE)&&(this.#T===Ht.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===Ht.HIGHLIGHT?this.#tt(s):null;if(o?.toggleDrawing(),this.#M){const l=new AbortController,u=this.combinedSignal(l),h=f=>{f.type==="pointerup"&&f.button!==0||(l.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#T===Ht.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#st()}#at(){document.addEventListener("selectionchange",this.#rt.bind(this),{signal:this._signal})}#ot(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#O=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,e]=this.#O;this.#O=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#N)return;this.#N=new AbortController;const t=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#N?.abort(),this.#N=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of this.#u)if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of this.#S){const s=n.serialize(!0);s&&e.push(s)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const l of this.#u)if(l.isHandlingMimeForPasting(o.type)){l.paste(o,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(o){Ut(`paste: "${o.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const o=[];for(const h of n){const f=await s.deserialize(h);if(!f)return;o.push(f)}const l=()=>{for(const h of o)this.#nt(h);this.#it(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:l,undo:u,mustExec:!0})}catch(o){Ut(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==Ht.NONE&&!this.isEditorHandlingKeyboard&&Bs._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(t){Object.entries(t).some(([n,s])=>this.#$[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#T===Ht.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#H([[ne.HIGHLIGHT_FREE,!0]]))}#H(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#R({isEditing:this.#T!==Ht.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#H(e.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#k?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,n=!1,s=!1,o=!1,l=!1){if(this.#T!==t&&!(this.#U&&(await this.#U.promise,!this.#U))){if(this.#U=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===Ht.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===Ht.NONE){this.setEditingState(!1),this.#pt();for(const u of this.#n.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#U.resolve();return}for(const u of this.#n.values())u.addStandaloneCommentButton();t===Ht.SIGNATURE&&await this.#I?.loadSignatures(),n&&ce.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const u of this.#r.values())u.updateMode(t);if(t===Ht.POPUP){this.#i||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,h=[];for(const f of this.#n.values()){const{annotationElementId:p,hasComment:m,deleted:b}=f;p&&u.add(p),m&&!b&&h.push(f.getData())}for(const f of this.#i){const{id:p,popupRef:m,contentsObj:b}=f;m&&b?.str&&!u.has(p)&&!this.#g.has(p)&&h.push(f)}this.#l?.showSidebar(h)}if(!e){s&&this.addNewEditorFromKeyboard(),this.#U.resolve();return}for(const u of this.#n.values())u.uid===e?(this.setSelected(u),l?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#U.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case ne.CREATE:this.currentLayer.addNewEditor(e);return;case ne.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of this.#S)n.updateParams(t,e);else for(const n of this.#u)n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){for(const o of this.#n.values())o.editorType===t&&o.show(e);(this.#q?.get(ne.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#H([[ne.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#z!==t){this.#z=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#k){this.#k=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#k){this.#k=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#L?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#H(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#mt===t&&this.#H(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#H(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#H(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],n=()=>{this._editorUndoBar?.show(s,e.length===1?e[0].editorType:e.length);for(const o of e)o.remove()},s=()=>{for(const o of e)this.#nt(o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#it(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==Ht.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=t,this.#V[1]+=e;const[s,o]=this.#V,l=[...this.#S],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(s,o),h.translationDone())},undo:()=>{for(const h of l)this.#n.has(h.id)&&(h.translateInPage(-s,-o),h.translationDone())},mustExec:!1})},u);for(const h of l)h.translateInPage(t,e),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#S)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:s,y:o,pageIndex:l},u]of t)u.newX=s,u.newY=o,u.newPageIndex=l,e||=s!==u.savedX||o!==u.savedY||l!==u.savedPageIndex;if(!e)return!1;const n=(s,o,l,u)=>{if(this.#n.has(s.id)){const h=this.#r.get(u);h?s._setParentAndPosition(h,o,l):(s.pageIndex=u,s.x=o,s.y=l)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:l,newPageIndex:u}]of t)n(s,o,l,u)},undo:()=>{for(const[s,{savedX:o,savedY:l,savedPageIndex:u}]of t)n(s,o,l,u)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const n of this.#m.keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==Ht.NONE}get imageManager(){return jt(this,"imageManager",new Yp)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,p=e.rangeCount;f<p;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:n,y:s,width:o,height:l}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(f,p,m,b)=>({x:(p-s)/l,y:1-(f+m-n)/o,width:b/l,height:m/o});break;case"180":u=(f,p,m,b)=>({x:1-(f+m-n)/o,y:1-(p+b-s)/l,width:m/o,height:b/l});break;case"270":u=(f,p,m,b)=>({x:1-(p+b-s)/l,y:(f-n)/o,width:b/l,height:m/o});break;default:u=(f,p,m,b)=>({x:(f-n)/o,y:(p-s)/l,width:m/o,height:b/l});break}const h=[];for(let f=0,p=e.rangeCount;f<p;f++){const m=e.getRangeAt(f);if(!m.collapsed)for(const{x:b,y,width:A,height:w}of m.getClientRects())A===0||w===0||h.push(u(b,y,A,w))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const n=this.#s.getRawValue(e);n&&(this.#T===Ht.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){const s=this.#L?.get(t);s&&(s.setCanvas(e,n),this.#L.delete(t))}addMissingCanvas(t,e){(this.#L||=new Map).set(t,e)}}class ki{#t=null;#e=!1;#i=null;#n=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,ki.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ki._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",ki.#f.missing),e.setAttribute("data-l10n-id",ki.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=this.#c._uiManager._signal;t.addEventListener("contextmenu",oi,{signal:n}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const s=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#s=!0,s(o))},{signal:n}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await ki._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:o=!1}){n&&(this.#l=n,this.#d=s),!(this.#t===t&&this.#e===e)&&(o||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#i&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",ki.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ki.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const s=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:o}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:o})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ec{#t=null;#e=null;#i=!1;#n=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:n}=t;n.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const s=this.#n.commentButtonColor;s&&(n.backgroundColor=s)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:n}=this.#t.getBoundingClientRect(),{x:s,y:o,width:l,height:u}=this.#n.parent.boundingClientRect;return[(t-s)/l,(e+n-o)/u]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const n=this.#n._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return t;t.addEventListener("contextmenu",oi,{signal:n}),e&&(t.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,Oe(o)},{capture:!0,signal:n}),t.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,Oe(o)},{capture:!0,signal:n})),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:n});const s=o=>{o.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(this.#i=!0,s(o))},{signal:n}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:n}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:n}),t}edit(t){const e=this.commentPopupPositionInLayer;let n,s;if(e)[n,s]=e;else{[n,s]=this.#n.commentButtonPosition;const{width:p,height:m,x:b,y}=this.#n;n=b+n*p,s=y+s*m}const o=this.#n.parent.boundingClientRect,{x:l,y:u,width:h,height:f}=o;this.#n._uiManager.editComment(this.#n,l+n*h,u+s*f,{...t,parentDimensions:o})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}restoreData({text:t,richText:e,date:n}){this.#s=t,this.#a=e,this.#o=n,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class wu{#t;#e=!1;#i=null;#n;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:o=null,onPinchEnd:l=null,signal:u}){this.#t=t,this.#i=n,this.#n=e,this.#r=s,this.#a=o,this.#s=l,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ri.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const s=this.#o=new AbortController,o=AbortSignal.any([this.#c,s.signal]),l=this.#t,u={capture:!0,signal:o,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};l.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Oe(f),h(f))},u),l.addEventListener("pointerup",h,u),l.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const s=AbortSignal.any([this.#c,this.#h.signal]),o=this.#t,l={signal:s,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),l);const u=this.#m.bind(this);o.addEventListener("touchend",u,l),o.addEventListener("touchcancel",u,l),l.capture=!0,o.addEventListener("pointerdown",Oe,l),o.addEventListener("pointermove",Oe,l),o.addEventListener("pointercancel",Oe,l),o.addEventListener("pointerup",Oe,l),this.#r?.()}if(Oe(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;Oe(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:o}=e,{screenX:l,screenY:u}=n,h=this.#l,{touch0X:f,touch0Y:p,touch1X:m,touch1Y:b}=h,y=m-f,A=b-p,w=l-s,x=u-o,S=Math.hypot(w,x)||1,E=Math.hypot(y,A)||1;if(!this.#e&&Math.abs(E-S)<=wu.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=s,h.touch0Y=o,h.touch1X=l,h.touch1Y=u,!this.#e){this.#e=!0;return}const T=[(s+l)/2,(o+u)/2];this.#a?.(T,E,S)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(Oe(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class zt{#t=null;#e=null;#i=null;#n=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#b=!1;#v=!1;#y=null;#E=0;#x=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#_=zt._zIndex++;static _borderLineWidth=-1;static _colorManager=new qp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=zt.prototype._resizeWithKeyboard,e=Bs.TRANSLATE_SMALL,n=Bs.TRANSLATE_BIG;return jt(this,"_resizerKeyboardManager",new sl([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],zt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:o,pageY:l}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[o,l];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(t){this.pageIndex=t}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return jt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new VM({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(zt._l10n??=t,zt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),zt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);zt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){he("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[o,l]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/o,this.y=(e+s)/l,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}#D([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#D(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:n,parentDimensions:[s,o]}=this;if(this.x+=t/s,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:l,y:u}=this;const[h,f]=this.getBaseTranslation();l+=h,u+=f;const{style:p}=n;p.left=`${(100*l).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(l,u),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=zt,s=n/t,o=n/e;switch(this.rotation){case 90:return[-s,o];case 180:return[s,o];case 270:return[s,-o];default:return[-s,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:o,y:l,width:u,height:h}=this;if(u*=n,h*=s,o*=n,l*=s,this._mustFixPosition)switch(t){case 0:o=dn(o,0,n-u),l=dn(l,0,s-h);break;case 90:o=dn(o,0,n-h),l=dn(l,u,s);break;case 180:o=dn(o,u,n),l=dn(l,h,s);break;case 270:o=dn(o,h,n),l=dn(l,0,s-u);break}this.x=o/=n,this.y=l/=s;const[f,p]=this.getBaseTranslation();o+=f,l+=p,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*l).toFixed(2)}%`,this.moveInDOM()}static#k(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return zt.#k(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return zt.#k(t,e,360-this.parentRotation)}#M(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(){const{div:{style:t},width:e,height:n}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#z(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");this.#c.append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",this.#N.bind(this,n),{signal:e}),s.addEventListener("contextmenu",oi,{signal:e}),s.tabIndex=-1}this.div.prepend(this.#c)}#N(t,e){e.preventDefault();const{isMac:n}=Ze.platform;if(e.button!==0||e.ctrlKey&&n)return;this.#i?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const o=new AbortController,l=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,t),{passive:!0,capture:!0,signal:l}),window.addEventListener("touchmove",Oe,{passive:!1,signal:l}),window.addEventListener("contextmenu",oi,{signal:l}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",f,{signal:l}),window.addEventListener("blur",f,{signal:l})}#O(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=this.#d;this.#d=null;const o=this.x,l=this.y,u=this.width,h=this.height;o===t&&l===e&&u===n&&h===s||this.addCommands({cmd:this.#O.bind(this,o,l,u,h),undo:this.#O.bind(this,t,e,n,s),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#L(t,e){const[n,s]=this.parentDimensions,o=this.x,l=this.y,u=this.width,h=this.height,f=zt.MIN_SIZE/n,p=zt.MIN_SIZE/s,m=this.#M(this.rotation),b=(H,j)=>[m[0]*H+m[2]*j,m[1]*H+m[3]*j],y=this.#M(360-this.rotation),A=(H,j)=>[y[0]*H+y[2]*j,y[1]*H+y[3]*j];let w,x,S=!1,E=!1;switch(t){case"topLeft":S=!0,w=(H,j)=>[0,0],x=(H,j)=>[H,j];break;case"topMiddle":w=(H,j)=>[H/2,0],x=(H,j)=>[H/2,j];break;case"topRight":S=!0,w=(H,j)=>[H,0],x=(H,j)=>[0,j];break;case"middleRight":E=!0,w=(H,j)=>[H,j/2],x=(H,j)=>[0,j/2];break;case"bottomRight":S=!0,w=(H,j)=>[H,j],x=(H,j)=>[0,0];break;case"bottomMiddle":w=(H,j)=>[H/2,j],x=(H,j)=>[H/2,0];break;case"bottomLeft":S=!0,w=(H,j)=>[0,j],x=(H,j)=>[H,0];break;case"middleLeft":E=!0,w=(H,j)=>[0,j/2],x=(H,j)=>[H,j/2];break}const T=w(u,h),R=x(u,h);let D=b(...R);const O=zt._round(o+D[0]),L=zt._round(l+D[1]);let z=1,I=1,Q,at;if(e.fromKeyboard)({deltaX:Q,deltaY:at}=e);else{const{screenX:H,screenY:j}=e,[lt,st]=this.#l;[Q,at]=this.screenToPageTranslation(H-lt,j-st),this.#l[0]=H,this.#l[1]=j}if([Q,at]=A(Q/n,at/s),S){const H=Math.hypot(u,h);z=I=Math.max(Math.min(Math.hypot(R[0]-T[0]-Q,R[1]-T[1]-at)/H,1/u,1/h),f/u,p/h)}else E?z=dn(Math.abs(R[0]-T[0]-Q),f,1)/u:I=dn(Math.abs(R[1]-T[1]-at),p,1)/h;const U=zt._round(u*z),Z=zt._round(h*I);D=b(...x(U,Z));const M=O-D[0],tt=L-D[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=U,this.height=Z,this.x=M,this.y=tt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new Uo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(ki.initialize(zt._l10n),this.#i=new ki(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Ec(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:t,text:e,date:n,deleted:s}}=this.#n;return{text:e,richText:t,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Ec(this),typeof t=="object"&&t!==null?this.#n.restoreData(t):this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:n}){if(!e||(this.#n||=new Ec(this),this.#n.setInitialText(t,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Ec(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[o]=this.pageDimensions,[l]=this.pageTranslation,u=l+o+1,h=s-100,f=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,s]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#j();const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,o]=this.getInitialTranslation();return this.translate(s,o),wA(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new wu({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,n){let o=.7*(n/e)+1-.7;if(o===1)return;const l=this.#M(this.rotation),u=(O,L)=>[l[0]*O+l[2]*L,l[1]*O+l[3]*L],[h,f]=this.parentDimensions,p=this.x,m=this.y,b=this.width,y=this.height,A=zt.MIN_SIZE/h,w=zt.MIN_SIZE/f;o=Math.max(Math.min(o,1/b,1/y),A/b,w/y);const x=zt._round(b*o),S=zt._round(y*o);if(x===b&&S===y)return;this.#u||=[p,m,b,y];const E=u(b/2,y/2),T=zt._round(p+E[0]),R=zt._round(m+E[1]),D=u(x/2,S/2);this.x=T-D[0],this.y=R-D[1],this.width=x,this.height=S,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:e}=Ze.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#I(t);return}this.#P(t)}#P(t){const{isMac:e}=Ze.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#I(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s),l={capture:!0,passive:!1,signal:o},u=f=>{s.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#P(f),n&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#x=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:m,pointerId:b}=f;if(b!==this.#s){Oe(f);return}const[y,A]=this.screenToPageTranslation(p-this.#E,m-this.#x);this.#E=p,this.#x=m,this._uiManager.dragSelectedEditors(y,A)},l),window.addEventListener("touchmove",Oe,l),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),Oe(f)},l));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}Oe(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[o,l]=this.pageDimensions,[u,h]=this.pageTranslation,f=t/s,p=e/s,m=this.x*o,b=this.y*l,y=this.width*o,A=this.height*l;switch(n){case 0:return[m+f+u,l-b-p-A+h,m+f+y+u,l-b-p+h];case 90:return[m+p+u,l-b+f+h,m+p+A+u,l-b+f+y+h];case 180:return[m-f-y+u,l-b+p+h,m-f+u,l-b+p+A+h];case 270:return[m-p-A+u,l-b-f-y+h,m-p+u,l-b-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,o,l]=t,u=o-n,h=l-s;switch(this.rotation){case 0:return[n,e-l,u,h];case 90:return[n,e-s,h,u];case 180:return[o,e-s,u,h];case 270:return[o,e-l,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&zt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:n,opacity:s,deleted:o,richText:l},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:l,contentsObj:{str:t},creationDate:f,modificationDate:n||p,popupRef:!o,color:e,opacity:s}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:o,innerWidth:l}=window;return e<l&&s>0&&t<o&&n>0}#j(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#j()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});s.rotation=t.rotation,s.#t=t.accessibilityData,s._isCopy=t.isCopy||!1;const[o,l]=s.pageDimensions,[u,h,f,p]=s.getRectInCurrentCoords(t.rect,l);return s.x=u/o,s.y=h/l,s.width=f/o,s.height=p/l,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#B(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[n,s,o,l]=this.getPDFRect();return[zt._round(n+(o-n)*t),zt._round(s+(l-s)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const l=this.#q.bind(this),u=this.#Y.bind(this),h=this._uiManager._signal;for(const f of this.#e){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",l,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#$.bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",zt._l10nResizer[p])}}const n=this.#e[0];let s=0;for(const l of e){if(l===n)break;s++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(o!==s){if(o<s)for(let u=0;u<s-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>s)for(let u=0;u<o-s;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let l=0;for(const u of e){const f=this.#e[l++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",zt._l10nResizer[f])}}this.#V(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#q(t){zt._resizerKeyboardManager.exec(this,t)}#Y(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#$(t){this.#g=this.#v?t:""}#V(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#L(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#B(){this.#v=!1,this.#V(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:n}=t;let s=this.#A.get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(n),this.#A.size===0&&(this.#A=null)},zt._telemetryTimeout),this.#A.set(n,s);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class VM extends zt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Gv=3285377520,ni=4294901760,Ei=65535;class AA{constructor(t){this.h1=t?t&4294967295:Gv,this.h2=t?t&4294967295:Gv}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let w=0,x=t.length;w<x;w++){const S=t.charCodeAt(w);S<=255?e[n++]=S:(e[n++]=S>>>8,e[n++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,o=n-s*4,l=new Uint32Array(e.buffer,0,s);let u=0,h=0,f=this.h1,p=this.h2;const m=3432918353,b=461845907,y=m&Ei,A=b&Ei;for(let w=0;w<s;w++)w&1?(u=l[w],u=u*m&ni|u*y&Ei,u=u<<15|u>>>17,u=u*b&ni|u*A&Ei,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=l[w],h=h*m&ni|h*y&Ei,h=h<<15|h>>>17,h=h*b&ni|h*A&Ei,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=e[s*4+2]<<16;case 2:u^=e[s*4+1]<<8;case 1:u^=e[s*4],u=u*m&ni|u*y&Ei,u=u<<15|u>>>17,u=u*b&ni|u*A&Ei,s&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&ni|t*36045&Ei,e=e*4283543511&ni|((e<<16|t>>>16)*2950163797&ni)>>>16,t^=e>>>1,t=t*444984403&ni|t*60499&Ei,e=e*3301882366&ni|((e<<16|t>>>16)*3120437893&ni)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const np=Object.freeze({map:null,hash:"",transfer:void 0});class $p{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#n.get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof zt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of this.#n.values())if(n instanceof zt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#n.get(t);let s=!1;if(n!==void 0)for(const[o,l]of Object.entries(e))n[o]!==l&&(s=!0,n[o]=l);else s=!0,this.#n.set(t,e);s&&this.#r(),e instanceof zt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new SA(this)}get serializable(){if(this.#n.size===0)return np;const t=new Map,e=new AA,n=[],s=Object.create(null);let o=!1;for(const[l,u]of this.#n){const h=u instanceof zt?u.serialize(!1,s):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),h&&(t.set(l,h),e.update(`${l}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const l of t.values())l.bitmap&&n.push(l.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:np}get editorStats(){let t=null;const e=new Map;let n=0,s=0;for(const o of this.#n.values()){if(!(o instanceof zt)){o.popup&&(o.popup.deleted?s+=1:n+=1);continue}o.isCommentDeleted?s+=1:o.hasEditedComment&&(n+=1);const l=o.telemetryFinalData;if(!l)continue;const{type:u}=l;e.has(u)||e.set(u,Object.getPrototypeOf(o).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[f,p]of Object.entries(l)){if(f==="type")continue;let m=h.get(f);m||(m=new Map,h.set(f,m));const b=m.get(p)??0;m.set(p,b+1)}}if((s>0||n>0)&&(t||=Object.create(null),t.comments={deleted:s,edited:n}),!t)return null;for(const[o,l]of e)t[o]=l.computeTelemetryFinalData(t[o]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const n=this.#i?.get(t);return n?(n.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class SA extends $p{#t;constructor(t){super();const{map:e,hash:n,transfer:s}=t.serializable,o=structuredClone(e,s?{transfer:s}:null);this.#t={map:o,hash:n,transfer:s}}get print(){he("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return jt(this,"modifiedIds",{ids:new Set,hash:""})}}class HM{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||this.#t.has(t.loadedName))){if(ue(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:o,style:l}=t,u=new FontFace(s,o,l);this.addNativeFontFace(u);try{await u.load(),this.#t.add(s),n?.(t)}catch{Ut(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}he("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Ut(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return jt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return jt(this,"isSyncFontLoadingSupported",yn||Ze.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ue(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const o=n.shift();setTimeout(o.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return jt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(R,D){return R.charCodeAt(D)<<24|R.charCodeAt(D+1)<<16|R.charCodeAt(D+2)<<8|R.charCodeAt(D+3)&255}function s(R,D,O,L){const z=R.substring(0,D),I=R.substring(D+O);return z+L+I}let o,l;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(R,D){if(++f>30){Ut("Load test font never loaded."),D();return}if(h.font="30px "+R,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,R,D))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=s(b,976,m.length,m);const A=16,w=1482184792;let x=n(b,A);for(o=0,l=m.length-3;o<l;o+=4)x=x-w+n(m,o)|0;o<m.length&&(x=x-w+n(m+"XXX",o)|0),b=s(b,A,4,_M(x));const S=`url(data:font/opentype;base64,${btoa(b)});`,E=`@font-face {font-family:"${m}";src:${S}}`;this.insertRule(E);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const R of[t.loadedName,m]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=R,T.append(D)}this._document.body.append(T),p(m,()=>{T.remove(),e.complete()})}}class GM{#t;constructor(t,e=null,n,s){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(l){Ut(`getPathGenerator - ignoring character: "${l}".`)}const o=vA(s?.path);return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=o}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){jt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){jt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class va{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,n={};let s=0;for(const f of va.strings){const p=e.encode(t[f]);n[f]=p,s+=4+p.length}const o=new ArrayBuffer(s),l=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of va.strings){const p=n[f],m=p.length;u.setUint32(h,m),l.set(p,h+4),h+=4+m}return ue(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){ue(t<va.strings.length,"Invalid string index");let e=0;for(let s=0;s<t;s++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class wa{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,n={};let s=0;for(const b of wa.strings){const y=e.encode(t[b]);n[b]=y,s+=4+y.length}s+=4;let o,l,u=1+s;t.style&&(o=e.encode(t.style.style),l=e.encode(t.style.weight),u+=4+o.length+4+l.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let m=0;p.setUint8(m++,t.guessFallback?1:0),p.setUint32(m,0),m+=4,s=0;for(const b of wa.strings){const y=n[b],A=y.length;s+=4+A,p.setUint32(m,A),f.set(y,m+4),m+=4+A}return p.setUint32(m-s-4,s),t.style&&(p.setUint32(m,o.length),f.set(o,m+4),m+=4+o.length,p.setUint32(m,l.length),f.set(l,m+4),m+=4+l.length),ue(m<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(m)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){ue(t<wa.strings.length,"Invalid string index");let e=5;for(let s=0;s<t;s++)e+=this.#e.getUint32(e)+4;const n=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,n))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),n=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const s=this.#e.getUint32(t),o=this.#i.decode(new Uint8Array(this.#t,t+4,s));return{style:n,weight:o}}}class ye{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#c(t){ue(t<ye.bools.length,"Invalid boolean index");const e=Math.floor(t/4),n=t*2%8,s=this.#o.getUint8(e)>>n&3;return s===0?void 0:s===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return ue(t<ye.numbers.length,"Invalid number index"),this.#o.getFloat64(ye.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=ye.#e;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<4;s++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}get fontMatrix(){let t=ye.#i;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<6;s++)n.push(this.#o.getFloat64(t,!0)),t+=8;return n}get defaultVMetrics(){let t=ye.#n;if(this.#o.getUint8(t)===0)return;t+=1;const n=[];for(let s=0;s<3;s++)n.push(this.#o.getInt16(t,!0)),t+=2;return n}#d(t){ue(t<ye.strings.length,"Invalid string index");let e=ye.#r+4;for(let o=0;o<t;o++)e+=this.#o.getUint32(e)+4;const n=this.#o.getUint32(e),s=new Uint8Array(n);return s.set(new Uint8Array(this.#a,e+4,n)),this.#s.decode(s)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=ye.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const o=this.#o.getUint32(t);if(o!==0)return new Uint8Array(this.#a,t+4,o)}clearData(){let t=ye.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);t+=4+s;const o=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,o).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=ye.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);t+=4+n;const s=this.#o.getUint32(t);if(s===0)return null;const o=new Uint8Array(s);return o.set(new Uint8Array(this.#a,t+4,s)),new va(o.buffer)}get systemFontInfo(){let t=ye.#r;const e=this.#o.getUint32(t);t+=4+e;const n=this.#o.getUint32(t);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(this.#a,t+4,n)),new wa(s.buffer)}static write(t){const e=t.systemFontInfo?wa.write(t.systemFontInfo):null,n=t.cssFontInfo?va.write(t.cssFontInfo):null,s=new TextEncoder,o={};let l=0;for(const w of ye.strings)o[w]=s.encode(t[w]),l+=4+o[w].length;const u=ye.#r+4+l+4+(e?e.byteLength:0)+4+(n?n.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let m=0;const b=ye.bools.length;let y=0,A=0;for(let w=0;w<b;w++){const x=t[ye.bools[w]];y|=(x===void 0?0:x?2:1)<<A,A+=2,(A===8||w===b-1)&&(p.setUint8(m++,y),y=0,A=0)}ue(m===ye.#t,"FontInfo.write: Boolean properties offset mismatch");for(const w of ye.numbers)p.setFloat64(m,t[w]),m+=8;if(ue(m===ye.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(m++,4);for(const w of t.bbox)p.setInt16(m,w,!0),m+=2}else p.setUint8(m++,0),m+=8;if(ue(m===ye.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(m++,6);for(const w of t.fontMatrix)p.setFloat64(m,w,!0),m+=8}else p.setUint8(m++,0),m+=48;if(ue(m===ye.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(m++,1);for(const w of t.defaultVMetrics)p.setInt16(m,w,!0),m+=2}else p.setUint8(m++,0),m+=6;ue(m===ye.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(ye.#r,0),m+=4;for(const w of ye.strings){const x=o[w],S=x.length;p.setUint32(m,S),f.set(x,m+4),m+=4+S}if(p.setUint32(ye.#r,m-ye.#r-4),!e)p.setUint32(m,0),m+=4;else{const w=e.byteLength;p.setUint32(m,w),ue(m+4+w<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),m+4),m+=4+w}if(!n)p.setUint32(m,0),m+=4;else{const w=n.byteLength;p.setUint32(m,w),ue(m+4+w<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(n),m+4),m+=4+w}return t.data===void 0?(p.setUint32(m,0),m+=4):(p.setUint32(m,t.data.length),f.set(t.data,m+4),m+=4+t.data.length),ue(m<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(m)}}class en{static#t=0;static#e=1;static#i=2;static#n=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,n=null,s=[],o=[],l=[],u=[],h=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,n=t[2],l=t[3],e===1?s.push(...t[4],...t[5]):s.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,h=t[1],s=t[2],o=t[3],u=t[4]||[],n=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const p=Math.floor(s.length/2),m=Math.floor(o.length/3),b=l.length,y=u.length;let A=0;for(const D of u)A+=1,A=Math.ceil(A/4)*4,A+=4+D.coords.length*4,A+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(A+=4);const w=20+p*8+m*3+b*8+(n?16:0)+(f?3:0)+A,x=new ArrayBuffer(w),S=new DataView(x),E=new Uint8Array(x);S.setUint8(en.#t,e),S.setUint8(en.#e,n?1:0),S.setUint8(en.#i,f?1:0),S.setUint8(en.#n,h),S.setUint32(en.#r,p,!0),S.setUint32(en.#a,m,!0),S.setUint32(en.#s,b,!0),S.setUint32(en.#o,y,!0);let T=20;new Float32Array(x,T,p*2).set(s),T+=p*8,E.set(o,T),T+=m*3;for(const[D,O]of l)S.setFloat32(T,D,!0),T+=4,S.setUint32(T,parseInt(O.slice(1),16),!0),T+=4;if(n)for(const D of n)S.setFloat32(T,D,!0),T+=4;f&&(E.set(f,T),T+=3);for(let D=0;D<u.length;D++){const O=u[D];S.setUint8(T,O.type),T+=1,T=Math.ceil(T/4)*4,S.setUint32(T,O.coords.length,!0),T+=4,new Int32Array(x,T,O.coords.length).set(O.coords),T+=O.coords.length*4,S.setUint32(T,O.colors.length,!0),T+=4,new Int32Array(x,T,O.colors.length).set(O.colors),T+=O.colors.length*4,O.verticesPerRow!==void 0&&(S.setUint32(T,O.verticesPerRow,!0),T+=4)}return x}getIR(){const t=this.view,e=this.data[en.#t],n=!!this.data[en.#e],s=!!this.data[en.#i],o=t.getUint32(en.#r,!0),l=t.getUint32(en.#a,!0),u=t.getUint32(en.#s,!0),h=t.getUint32(en.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const m=new Uint8Array(this.buffer,f,l*3);f+=l*3;const b=[];for(let x=0;x<u;++x){const S=t.getFloat32(f,!0);f+=4;const E=t.getUint32(f,!0);f+=4,b.push([S,`#${E.toString(16).padStart(6,"0")}`])}let y=null;if(n){y=[];for(let x=0;x<4;++x)y.push(t.getFloat32(f,!0)),f+=4}let A=null;s&&(A=new Uint8Array(this.buffer,f,3),f+=3);const w=[];for(let x=0;x<h;++x){const S=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const E=t.getUint32(f,!0);f+=4;const T=new Int32Array(this.buffer,f,E);f+=E*4;const R=t.getUint32(f,!0);f+=4;const D=new Int32Array(this.buffer,f,R);f+=R*4;const O={type:S,coords:T,colors:D};S===Zf.LATTICE&&(O.verticesPerRow=t.getUint32(f,!0),f+=4),w.push(O)}if(e===1)return["RadialAxial","axial",y,b,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",y,b,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(e===3){const x=this.data[en.#n];let S=null;if(p.length>0){let E=p[0],T=p[0],R=p[1],D=p[1];for(let O=0;O<p.length;O+=2){const L=p[O],z=p[O+1];E=E>L?L:E,R=R>z?z:R,T=T<L?L:T,D=D<z?z:D}S=[E,R,T,D]}return["Mesh",x,p,m,w,S,y,A]}throw new Error(`Unsupported pattern kind: ${e}`)}}class XM{static write(t){let e,n;return Ze.isFloat16ArraySupported?(n=new ArrayBuffer(t.length*2),e=new Float16Array(n)):(n=new ArrayBuffer(t.length*4),e=new Float32Array(n)),e.set(t),n}#t;constructor(t){this.#t=t}get path(){return Ze.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function YM(a){if(a instanceof URL)return a.href;if(typeof a=="string"){if(yn)return a;const t=URL.parse(a,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function qM(a){if(yn&&typeof Buffer<"u"&&a instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength)return a;if(typeof a=="string")return yu(a);if(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="object"&&!isNaN(a?.length))return new Uint8Array(a);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Tc(a){if(typeof a!="string")return null;if(a.endsWith("/"))return a;throw new Error(`Invalid factory url: "${a}" must include trailing slash.`)}const ip=a=>typeof a=="object"&&Number.isInteger(a?.num)&&a.num>=0&&Number.isInteger(a?.gen)&&a.gen>=0,$M=a=>typeof a=="object"&&typeof a?.name=="string",WM=MM.bind(null,ip,$M);class KM{#t=new Map;#e=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[s]of this.#t)s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if(n?.signal instanceof AbortSignal){const{signal:o}=n;if(o.aborted){Ut("LoopbackPort - cannot use an `aborted` signal.");return}const l=()=>this.removeEventListener(t,e);s=()=>o.removeEventListener("abort",l),o.addEventListener("abort",l)}this.#t.set(e,s)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Cc={DATA:1,ERROR:2},He={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Xv(){}function Dn(a){if(a instanceof Ls||a instanceof Qf||a instanceof zv||a instanceof ru||a instanceof pf)return a;switch(a instanceof Error||typeof a=="object"&&a!==null||he('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),a.name){case"AbortException":return new Ls(a.message);case"InvalidPDFException":return new Qf(a.message);case"PasswordException":return new zv(a.message,a.code);case"ResponseException":return new ru(a.message,a.status,a.missing);case"UnknownErrorException":return new pf(a.message,a.details)}return new pf(a.message,a.toString())}class Oo{#t=new AbortController;constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Cc.DATA)s.resolve(t.data);else if(t.callback===Cc.ERROR)s.reject(Dn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(l){o.postMessage({sourceName:n,targetName:s,callback:Cc.DATA,callbackId:t.callbackId,data:l})},function(l){o.postMessage({sourceName:n,targetName:s,callback:Cc.ERROR,callbackId:t.callbackId,reason:Dn(l)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[s]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(l){o.reject(l)}return o.promise}sendWithStream(t,e,n,s){const o=this.streamId++,l=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:l,targetName:u,action:t,streamId:o,data:e,desiredSize:f.desiredSize},s),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:l,targetName:u,stream:He.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{ue(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:l,targetName:u,stream:He.CANCEL,streamId:o,reason:Dn(f)}),p.promise}},n)}#i(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,o=this.comObj,l=this,u=this.actionHandler[t.action],h={enqueue(f,p=1,m){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=p,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:s,stream:He.ENQUEUE,streamId:e,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:s,stream:He.CLOSE,streamId:e}),delete l.streamSinks[e])},error(f){ue(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:s,stream:He.ERROR,streamId:e,reason:Dn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[e]=h,Promise.try(u,t.data,h).then(function(){o.postMessage({sourceName:n,targetName:s,stream:He.START_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:He.START_COMPLETE,streamId:e,reason:Dn(f)})})}#n(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,o=this.comObj,l=this.streamControllers[e],u=this.streamSinks[e];switch(t.stream){case He.START_COMPLETE:t.success?l.startCall.resolve():l.startCall.reject(Dn(t.reason));break;case He.PULL_COMPLETE:t.success?l.pullCall.resolve():l.pullCall.reject(Dn(t.reason));break;case He.PULL:if(!u){o.postMessage({sourceName:n,targetName:s,stream:He.PULL_COMPLETE,streamId:e,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Xv).then(function(){o.postMessage({sourceName:n,targetName:s,stream:He.PULL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:He.PULL_COMPLETE,streamId:e,reason:Dn(f)})});break;case He.ENQUEUE:if(ue(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(t.chunk);break;case He.CLOSE:if(ue(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this.#r(l,e);break;case He.ERROR:ue(l,"error should have stream controller"),l.controller.error(Dn(t.reason)),this.#r(l,e);break;case He.CANCEL_COMPLETE:t.success?l.cancelCall.resolve():l.cancelCall.reject(Dn(t.reason)),this.#r(l,e);break;case He.CANCEL:if(!u)break;const h=Dn(t.reason);Promise.try(u.onCancel||Xv,h).then(function(){o.postMessage({sourceName:n,targetName:s,stream:He.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){o.postMessage({sourceName:n,targetName:s,stream:He.CANCEL_COMPLETE,streamId:e,reason:Dn(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class xA{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){he("Abstract method `_createCanvas` called.")}}class ZM extends xA{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class _A{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){he("Abstract method `_fetch` called.")}}class Yv extends _A{async _fetch(t){const e=await el(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):yu(e)}}class EA{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,o){return"none"}destroy(t=!1){}}class QM extends EA{#t;#e;#i;#n;#r;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#r.createElementNS(Ji,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#i=this.#r.createElementNS(Ji,"defs"),t.append(n),n.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const h=t[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=h[m]/255;const p=f.join(",");return[p,p,p]}const[e,n,s]=t,o=new Array(256),l=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=e[h]/255,l[h]=n[h]/255,u[h]=s[h]/255;return[o.join(","),l.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(vu(e)?Ut('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=mA(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[n,s,o]=this.#d(t),l=t.length===1?n:`${n}${s}${o}`;if(e=this.#o.get(l),e)return this.#o.set(t,e),e;const u=`g_${this.#n}_transfer_map_${this.#s++}`,h=this.#h(u);this.#o.set(t,h),this.#o.set(l,h);const f=this.#m(u);return this.#p(n,s,o,f),h}addHCMFilter(t,e){const n=`${t}-${e}`,s="base";let o=this.#c.get(s);if(o?.key===n||(o?(o.filter?.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},this.#c.set(s,o)),!t||!e))return o.url;const l=this.#v(t);t=Tt.makeHexColor(...l);const u=this.#v(e);if(e=Tt.makeHexColor(...u),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return o.url;const h=new Array(256);for(let y=0;y<=255;y++){const A=y/255;h[y]=A<=.03928?A/12.92:((A+.055)/1.055)**2.4}const f=h.join(","),p=`g_${this.#n}_hcm_filter`,m=o.filter=this.#m(p);this.#p(f,f,f,m),this.#g(m);const b=(y,A)=>{const w=l[y]/255,x=u[y]/255,S=new Array(A+1);for(let E=0;E<=A;E++)S[E]=w+E/A*(x-w);return S.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),m),o.url=this.#h(p),o.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[n]=this.#d([t]),s=`alpha_${n}`;if(e=this.#o.get(s),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_alpha_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(s,l);const u=this.#m(o);return this.#b(n,u),l}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let n,s;if(t?([n]=this.#d([t]),s=`luminosity_${n}`):s="luminosity",e=this.#o.get(s),e)return this.#o.set(t,e),e;const o=`g_${this.#n}_luminosity_map_${this.#s++}`,l=this.#h(o);this.#o.set(t,l),this.#o.set(s,l);const u=this.#m(o);return this.#f(u),t&&this.#b(n,u),l}addHighlightHCMFilter(t,e,n,s,o){const l=`${e}-${n}-${s}-${o}`;let u=this.#c.get(t);if(u?.key===l||(u?(u.filter?.remove(),u.key=l,u.url="none",u.filter=null):(u={key:l,url:"none",filter:null},this.#c.set(t,u)),!e||!n))return u.url;const[h,f]=[e,n].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,y]=[s,o].map(this.#v.bind(this));m<p&&([p,m,b,y]=[m,p,y,b]),this.#l.style.color="";const A=(S,E,T)=>{const R=new Array(256),D=(m-p)/T,O=S/255,L=(E-S)/(255*T);let z=0;for(let I=0;I<=T;I++){const Q=Math.round(p+I*D),at=O+I*L;for(let U=z;U<=Q;U++)R[U]=at;z=Q+1}for(let I=z;I<256;I++)R[I]=R[z-1];return R.join(",")},w=`g_${this.#n}_hcm_${t}_filter`,x=u.filter=this.#m(w);return this.#g(x),this.#p(A(b[0],y[0],5),A(b[1],y[1],5),A(b[2],y[2],5),x),u.url=this.#h(w),u.url}destroy(t=!1){t&&this.#a?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const e=this.#r.createElementNS(Ji,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(Ji,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(Ji,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,n){const s=this.#r.createElementNS(Ji,e);s.setAttribute("type","discrete"),s.setAttribute("tableValues",n),t.append(s)}#p(t,e,n,s){const o=this.#r.createElementNS(Ji,"feComponentTransfer");s.append(o),this.#u(o,"feFuncR",t),this.#u(o,"feFuncG",e),this.#u(o,"feFuncB",n)}#b(t,e){const n=this.#r.createElementNS(Ji,"feComponentTransfer");e.append(n),this.#u(n,"feFuncA",t)}#v(t){return this.#l.style.color=t,il(getComputedStyle(this.#l).getPropertyValue("color"))}}class TA{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){he("Abstract method `_fetch` called.")}}class qv extends TA{async _fetch(t){const e=await el(t,"arraybuffer");return new Uint8Array(e)}}class CA{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){he("Abstract method `_fetch` called.")}}class $v extends CA{async _fetch(t){const e=await el(t,"arraybuffer");return new Uint8Array(e)}}yn&&Ut("Please use the `legacy` build in Node.js environments.");async function Wp(a){const e=await process.getBuiltinModule("fs").promises.readFile(a);return new Uint8Array(e)}class JM extends EA{}class tD extends xA{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class eD extends _A{async _fetch(t){return Wp(t)}}class nD extends TA{async _fetch(t){return Wp(t)}}class iD extends CA{async _fetch(t){return Wp(t)}}const sa="__forcedDependency",{floor:Wv,ceil:Kv}=Math;function kc(a,t,e,n,s,o){a[t*4+0]=Math.min(a[t*4+0],e),a[t*4+1]=Math.min(a[t*4+1],n),a[t*4+2]=Math.max(a[t*4+2],s),a[t*4+3]=Math.max(a[t*4+3],o)}const sp=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class sD{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===sp}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Mc=(a,t)=>{if(!a)return;let e=a.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},a.set(t,e)),e};class rD{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[sa]:[]};#i=new Map;#n=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#m;#u;#p;constructor(t,e,n=!1){this.#f=t.width,this.#g=t.height,this.#b(e),n&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,e){const n=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(n),this.#u=new Uint32Array(n),e&&e.length>0?(this.#u.set(e),this.#u.fill(sp,e.length)):this.#u.fill(sp)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[sa]:{__proto__:this.#e[sa]}},this.#s={__proto__:this.#s},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const n=this.#n.pop();return n!==void 0&&(Mc(this.#p,t)?.dependencies.add(n),this.#u[t]=this.#u[n]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Mc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Mc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#a.push(Tt.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,n){this.#t[t]=this.#i.get(e)??n}recordFutureForcedDependency(t,e){return this.recordIncrementalData(sa,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(sa,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,n,s,o,l){const u=Tt.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),h=[1/0,1/0,-1/0,-1/0];Tt.axialAlignedBoundingBox([n,o,s,l],u,h);const f=Tt.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,n,s,o,l){const u=this.#s;if(u[0]===1/0)return this;const h=Tt.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(u[0]===-1/0)return Tt.axialAlignedBoundingBox([n,o,s,l],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return Tt.axialAlignedBoundingBox([n,o,s,l],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(t,e,n,s=1,o=0,l=0,u){const h=n.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(n),f!==!1&&(p=[0,0,0,0],Tt.axialAlignedBoundingBox(h,n.fontMatrix,p),(s!==1||o!==0||l!==0)&&Tt.scaleMinMax([s,0,0,-s,o,l],p),f)))return this.recordBBox(t,e,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const m=u();return h&&p&&f===void 0&&(f=p[0]<=o-m.actualBoundingBoxLeft&&p[2]>=o+m.actualBoundingBoxRight&&p[1]<=l-m.actualBoundingBoxAscent&&p[3]>=l+m.actualBoundingBoxDescent,this.#h.set(n,f),f)?this.recordBBox(t,e,p[0],p[2],p[1],p[3]):this.recordBBox(t,e,o-m.actualBoundingBoxLeft,o+m.actualBoundingBoxRight,l-m.actualBoundingBoxAscent,l+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const n=this.#l,s=this.#t,o=this.#e;for(const l of e)l in this.#t?n.add(s[l]):l in o&&o[l].forEach(n.add,n);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[sa]),this.#p){const n=Mc(this.#p,t),{dependencies:s}=n;this.#l.forEach(s.add,s),this.#n.forEach(s.add,s),this.#r.forEach(s.add,s),s.delete(t),n.isRenderingOperation=!0}if(this.#c===t){const n=Wv(this.#o[0]*256/this.#f),s=Wv(this.#o[1]*256/this.#g),o=Kv(this.#o[2]*256/this.#f),l=Kv(this.#o[3]*256/this.#g);kc(this.#m,t,n,s,o,l);for(const u of this.#l)u!==t&&kc(this.#m,u,n,s,o,l);for(const u of this.#n)u!==t&&kc(this.#m,u,n,s,o,l);for(const u of this.#r)u!==t&&kc(this.#m,u,n,s,o,l);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const n=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new sD(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class au{#t;#e;#i;#n=0;#r=0;constructor(t,e,n){if(t instanceof au&&t.#i===!!n)return t;this.#t=t,this.#e=e,this.#i=!!n}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,n){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,n,s,o,l){return this.#i||this.#t.recordClipBox(this.#e,e,n,s,o,l),this}recordBBox(t,e,n,s,o,l){return this.#i||this.#t.recordBBox(this.#e,e,n,s,o,l),this}recordCharacterBBox(t,e,n,s,o,l,u){return this.#i||this.#t.recordCharacterBBox(this.#e,e,n,s,o,l,u),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const ii={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},fn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function rp(a,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),a.clip(s)}class Kp{isModifyingCurrentTransform(){return!1}getPattern(){he("Abstract method `getPattern` called.")}}class aD extends Kp{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let n,s=this._p0,o=this._p1;if(e&&(s=s.slice(),o=o.slice(),Tt.applyTransform(s,e),Tt.applyTransform(o,e)),this._type==="axial")n=t.createLinearGradient(s[0],s[1],o[0],o[1]);else if(this._type==="radial"){let l=this._r0,u=this._r1;if(e){const h=new Float32Array(2);Tt.singularValueDecompose2dScale(e,h),l*=h[0],u*=h[0]}n=t.createRadialGradient(s[0],s[1],l,o[0],o[1],u)}for(const l of this._colorStops)n.addColorStop(l[0],l[1]);return n}getPattern(t,e,n,s){let o;if(s===fn.STROKE||s===fn.FILL){if(this.isOriginBased()){let b=Tt.transform(n,e.baseTransform);this.matrix&&(b=Tt.transform(b,this.matrix));const y=.001,A=Math.hypot(b[0],b[1]),w=Math.hypot(b[2],b[3]),x=(b[0]*b[2]+b[1]*b[3])/(A*w);if(Math.abs(x)<y)if(this.isRadial()){if(Math.abs(A-w)<y)return this._createGradient(t,b)}else return this._createGradient(t,b)}const l=e.current.getClippedPathBoundingBox(s,ke(t))||[0,0,0,0],u=Math.ceil(l[2]-l[0])||1,h=Math.ceil(l[3]-l[1])||1,f=e.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-l[0],-l[1]),n=Tt.transform(n,[1,0,0,1,l[0],l[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),rp(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(n);o.setTransform(m)}else rp(t,this._bbox),o=this._createGradient(t);return o}}function bf(a,t,e,n,s,o,l,u){const h=t.coords,f=t.colors,p=a.data,m=a.width*4;let b;h[e+1]>h[n+1]&&(b=e,e=n,n=b,b=o,o=l,l=b),h[n+1]>h[s+1]&&(b=n,n=s,s=b,b=l,l=u,u=b),h[e+1]>h[n+1]&&(b=e,e=n,n=b,b=o,o=l,l=b);const y=(h[e]+t.offsetX)*t.scaleX,A=(h[e+1]+t.offsetY)*t.scaleY,w=(h[n]+t.offsetX)*t.scaleX,x=(h[n+1]+t.offsetY)*t.scaleY,S=(h[s]+t.offsetX)*t.scaleX,E=(h[s+1]+t.offsetY)*t.scaleY;if(A>=E)return;const T=f[o],R=f[o+1],D=f[o+2],O=f[l],L=f[l+1],z=f[l+2],I=f[u],Q=f[u+1],at=f[u+2],U=Math.round(A),Z=Math.round(E);let M,tt,H,j,lt,st,B,_;for(let N=U;N<=Z;N++){if(N<x){const pt=N<A?0:(A-N)/(A-x);M=y-(y-w)*pt,tt=T-(T-O)*pt,H=R-(R-L)*pt,j=D-(D-z)*pt}else{let pt;N>E?pt=1:x===E?pt=0:pt=(x-N)/(x-E),M=w-(w-S)*pt,tt=O-(O-I)*pt,H=L-(L-Q)*pt,j=z-(z-at)*pt}let X;N<A?X=0:N>E?X=1:X=(A-N)/(A-E),lt=y-(y-S)*X,st=T-(T-I)*X,B=R-(R-Q)*X,_=D-(D-at)*X;const K=Math.round(Math.min(M,lt)),$=Math.round(Math.max(M,lt));let ht=m*N+K*4;for(let pt=K;pt<=$;pt++)X=(M-pt)/(M-lt),X<0?X=0:X>1&&(X=1),p[ht++]=tt-(tt-st)*X|0,p[ht++]=H-(H-B)*X|0,p[ht++]=j-(j-_)*X|0,p[ht++]=255}}function oD(a,t,e){const n=t.coords,s=t.colors;let o,l;switch(t.type){case Zf.LATTICE:const u=t.verticesPerRow,h=Math.floor(n.length/u)-1,f=u-1;for(o=0;o<h;o++){let p=o*u;for(let m=0;m<f;m++,p++)bf(a,e,n[p],n[p+1],n[p+u],s[p],s[p+1],s[p+u]),bf(a,e,n[p+u+1],n[p+1],n[p+u],s[p+u+1],s[p+1],s[p+u])}break;case Zf.TRIANGLES:for(o=0,l=n.length;o<l;o+=3)bf(a,e,n[o],n[o+1],n[o+2],s[o],s[o+1],s[o+2]);break;default:throw new Error("illegal figure")}}class lD extends Kp{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),y=f/m,A=p/b,w={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/y,scaleY:1/A},x=m+4,S=b+4,E=n.getCanvas("mesh",x,S),T=E.context,R=T.createImageData(m,b);if(e){const O=R.data;for(let L=0,z=O.length;L<z;L+=4)O[L]=e[0],O[L+1]=e[1],O[L+2]=e[2],O[L+3]=255}for(const O of this._figures)oD(R,O,w);return T.putImageData(R,2,2),{canvas:E.canvas,offsetX:u-2*y,offsetY:h-2*A,scaleX:y,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){rp(t,this._bbox);const o=new Float32Array(2);if(s===fn.SHADING)Tt.singularValueDecompose2dScale(ke(t),o);else if(this.matrix){Tt.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;Tt.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=u,o[1]*=h}else Tt.singularValueDecompose2dScale(e.baseTransform,o);const l=this._createMeshCanvas(o,s===fn.SHADING?null:this._background,e.cachedCanvases);return s!==fn.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(l.offsetX,l.offsetY),t.scale(l.scaleX,l.scaleY),t.createPattern(l.canvas,"no-repeat")}}class cD extends Kp{getPattern(){return"hotpink"}}function uD(a){switch(a[0]){case"RadialAxial":return new aD(a);case"Mesh":return new lD(a);case"Dummy":return new cD}throw new Error(`Unknown IR type: ${a[0]}`)}const Zv={COLORED:1,UNCOLORED:2};class Zp{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t,e){const{bbox:n,operatorList:s,paintType:o,tilingType:l,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),bu("TilingType: "+l);const m=n[0],b=n[1],y=n[2],A=n[3],w=y-m,x=A-b,S=new Float32Array(2);Tt.singularValueDecompose2dScale(this.matrix,S);const[E,T]=S;Tt.singularValueDecompose2dScale(this.baseTransform,S);const R=E*S[0],D=T*S[1];let O=w,L=x,z=!1,I=!1;const Q=Math.ceil(f*R),at=Math.ceil(p*D),U=Math.ceil(w*R),Z=Math.ceil(x*D);Q>=U?O=f:z=!0,at>=Z?L=p:I=!0;const M=this.getSizeAndScale(O,this.ctx.canvas.width,R),tt=this.getSizeAndScale(L,this.ctx.canvas.height,D),H=t.cachedCanvases.getCanvas("pattern",M.size,tt.size),j=H.context,lt=h.createCanvasGraphics(j,e);if(lt.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(lt,o,u),j.translate(-M.scale*m,-tt.scale*b),lt.transform(0,M.scale,0,0,tt.scale,0,0),j.save(),lt.dependencyTracker?.save(),this.clipBbox(lt,m,b,y,A),lt.baseTransform=ke(lt.ctx),lt.executeOperatorList(s),lt.endDrawing(),lt.dependencyTracker?.restore(),j.restore(),z||I){const st=H.canvas;z&&(O=f),I&&(L=p);const B=this.getSizeAndScale(O,this.ctx.canvas.width,R),_=this.getSizeAndScale(L,this.ctx.canvas.height,D),N=B.size,X=_.size,K=t.cachedCanvases.getCanvas("pattern-workaround",N,X),$=K.context,ht=z?Math.floor(w/f):0,pt=I?Math.floor(x/p):0;for(let At=0;At<=ht;At++)for(let vt=0;vt<=pt;vt++)$.drawImage(st,N*At,X*vt,N,X,0,0,N,X);return{canvas:K.canvas,scaleX:B.scale,scaleY:_.scale,offsetX:m,offsetY:b}}return{canvas:H.canvas,scaleX:M.scale,scaleY:tt.scale,offsetX:m,offsetY:b}}getSizeAndScale(t,e,n){const s=Math.max(Zp.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*n);return o>=s?o=s:n=o/t,{scale:n,size:o}}clipBbox(t,e,n,s,o){const l=s-e,u=o-n;t.ctx.rect(e,n,l,u),Tt.axialAlignedBoundingBox([e,n,s,o],ke(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,o=t.current;switch(e){case Zv.COLORED:const{fillStyle:l,strokeStyle:u}=this.ctx;s.fillStyle=o.fillColor=l,s.strokeStyle=o.strokeColor=u;break;case Zv.UNCOLORED:s.fillStyle=s.strokeStyle=n,o.fillColor=o.strokeColor=n;break;default:throw new SM(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s,o){let l=n;s!==fn.SHADING&&(l=Tt.transform(l,e.baseTransform),this.matrix&&(l=Tt.transform(l,this.matrix)));const u=this.createPatternCanvas(e,o);let h=new DOMMatrix(l);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=t.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function hD({src:a,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:o=4294967295,inverseDecode:l=!1}){const u=Ze.isLittleEndian?4278190080:255,[h,f]=l?[o,u]:[u,o],p=n>>3,m=n&7,b=a.length;e=new Uint32Array(e.buffer);let y=0;for(let A=0;A<s;A++){for(const x=t+p;t<x;t++){const S=t<b?a[t]:255;e[y++]=S&128?f:h,e[y++]=S&64?f:h,e[y++]=S&32?f:h,e[y++]=S&16?f:h,e[y++]=S&8?f:h,e[y++]=S&4?f:h,e[y++]=S&2?f:h,e[y++]=S&1?f:h}if(m===0)continue;const w=t<b?a[t++]:255;for(let x=0;x<m;x++)e[y++]=w&1<<7-x?f:h}return{srcPos:t,destPos:y}}const Qv=16,Jv=100,dD=15,t1=10,Rn=16,yf=new DOMMatrix,jn=new Float32Array(2),ga=new Float32Array([1/0,1/0,-1/0,-1/0]);function fD(a,t){if(a._removeMirroring)throw new Error("Context is already forwarding operations.");a.__originalSave=a.save,a.__originalRestore=a.restore,a.__originalRotate=a.rotate,a.__originalScale=a.scale,a.__originalTranslate=a.translate,a.__originalTransform=a.transform,a.__originalSetTransform=a.setTransform,a.__originalResetTransform=a.resetTransform,a.__originalClip=a.clip,a.__originalMoveTo=a.moveTo,a.__originalLineTo=a.lineTo,a.__originalBezierCurveTo=a.bezierCurveTo,a.__originalRect=a.rect,a.__originalClosePath=a.closePath,a.__originalBeginPath=a.beginPath,a._removeMirroring=()=>{a.save=a.__originalSave,a.restore=a.__originalRestore,a.rotate=a.__originalRotate,a.scale=a.__originalScale,a.translate=a.__originalTranslate,a.transform=a.__originalTransform,a.setTransform=a.__originalSetTransform,a.resetTransform=a.__originalResetTransform,a.clip=a.__originalClip,a.moveTo=a.__originalMoveTo,a.lineTo=a.__originalLineTo,a.bezierCurveTo=a.__originalBezierCurveTo,a.rect=a.__originalRect,a.closePath=a.__originalClosePath,a.beginPath=a.__originalBeginPath,delete a._removeMirroring},a.save=function(){t.save(),this.__originalSave()},a.restore=function(){t.restore(),this.__originalRestore()},a.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},a.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},a.transform=function(e,n,s,o,l,u){t.transform(e,n,s,o,l,u),this.__originalTransform(e,n,s,o,l,u)},a.setTransform=function(e,n,s,o,l,u){t.setTransform(e,n,s,o,l,u),this.__originalSetTransform(e,n,s,o,l,u)},a.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},a.rotate=function(e){t.rotate(e),this.__originalRotate(e)},a.clip=function(e){t.clip(e),this.__originalClip(e)},a.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},a.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},a.bezierCurveTo=function(e,n,s,o,l,u){t.bezierCurveTo(e,n,s,o,l,u),this.__originalBezierCurveTo(e,n,s,o,l,u)},a.rect=function(e,n,s,o){t.rect(e,n,s,o),this.__originalRect(e,n,s,o)},a.closePath=function(){t.closePath(),this.__originalClosePath()},a.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class pD{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Dc(a,t,e,n,s,o,l,u,h,f){const[p,m,b,y,A,w]=ke(a);if(m===0&&b===0){const E=l*p+A,T=Math.round(E),R=u*y+w,D=Math.round(R),O=(l+h)*p+A,L=Math.abs(Math.round(O)-T)||1,z=(u+f)*y+w,I=Math.abs(Math.round(z)-D)||1;return a.setTransform(Math.sign(p),0,0,Math.sign(y),T,D),a.drawImage(t,e,n,s,o,0,0,L,I),a.setTransform(p,m,b,y,A,w),[L,I]}if(p===0&&y===0){const E=u*b+A,T=Math.round(E),R=l*m+w,D=Math.round(R),O=(u+f)*b+A,L=Math.abs(Math.round(O)-T)||1,z=(l+h)*m+w,I=Math.abs(Math.round(z)-D)||1;return a.setTransform(0,Math.sign(m),Math.sign(b),0,T,D),a.drawImage(t,e,n,s,o,0,0,I,L),a.setTransform(p,m,b,y,A,w),[I,L]}a.drawImage(t,e,n,s,o,l,u,h,f);const x=Math.hypot(p,m),S=Math.hypot(b,y);return[x*h,S*f]}class e1{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Kf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=We.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,n){n?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ga.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=fn.FILL,e=null){const n=this.minMax.slice();if(t===fn.STROKE){e||he("Stroke bounding box must include transform."),Tt.singularValueDecompose2dScale(e,jn);const s=jn[0]*this.lineWidth/2,o=jn[1]*this.lineWidth/2;n[0]-=s,n[1]-=o,n[2]+=s,n[3]+=o}return n}updateClipFromPath(){const t=Tt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ga,0)}getClippedPathBoundingBox(t=fn.FILL,e=null){return Tt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function n1(a,t){if(t instanceof ImageData){a.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%Rn,o=(e-s)/Rn,l=s===0?o:o+1,u=a.createImageData(n,Rn);let h=0,f;const p=t.data,m=u.data;let b,y,A,w;if(t.kind===Yc.GRAYSCALE_1BPP){const x=p.byteLength,S=new Uint32Array(m.buffer,0,m.byteLength>>2),E=S.length,T=n+7>>3,R=4294967295,D=Ze.isLittleEndian?4278190080:255;for(b=0;b<l;b++){for(A=b<o?Rn:s,f=0,y=0;y<A;y++){const O=x-h;let L=0;const z=O>T?n:O*8-7,I=z&-8;let Q=0,at=0;for(;L<I;L+=8)at=p[h++],S[f++]=at&128?R:D,S[f++]=at&64?R:D,S[f++]=at&32?R:D,S[f++]=at&16?R:D,S[f++]=at&8?R:D,S[f++]=at&4?R:D,S[f++]=at&2?R:D,S[f++]=at&1?R:D;for(;L<z;L++)Q===0&&(at=p[h++],Q=128),S[f++]=at&Q?R:D,Q>>=1}for(;f<E;)S[f++]=0;a.putImageData(u,0,b*Rn)}}else if(t.kind===Yc.RGBA_32BPP){for(y=0,w=n*Rn*4,b=0;b<o;b++)m.set(p.subarray(h,h+w)),h+=w,a.putImageData(u,0,y),y+=Rn;b<l&&(w=n*s*4,m.set(p.subarray(h,h+w)),a.putImageData(u,0,y))}else if(t.kind===Yc.RGB_24BPP)for(A=Rn,w=n*A,b=0;b<l;b++){for(b>=o&&(A=s,w=n*A),f=0,y=w;y--;)m[f++]=p[h++],m[f++]=p[h++],m[f++]=p[h++],m[f++]=255;a.putImageData(u,0,b*Rn)}else throw new Error(`bad image kind: ${t.kind}`)}function i1(a,t){if(t.bitmap){a.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%Rn,o=(e-s)/Rn,l=s===0?o:o+1,u=a.createImageData(n,Rn);let h=0;const f=t.data,p=u.data;for(let m=0;m<l;m++){const b=m<o?Rn:s;({srcPos:h}=hD({src:f,srcPos:h,dest:p,width:n,height:b,nonBlackColor:0})),a.putImageData(u,0,m*Rn)}}function Eo(a,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)a[n]!==void 0&&(t[n]=a[n]);a.setLineDash!==void 0&&(t.setLineDash(a.getLineDash()),t.lineDashOffset=a.lineDashOffset)}function Rc(a){a.strokeStyle=a.fillStyle="#000000",a.fillRule="nonzero",a.globalAlpha=1,a.lineWidth=1,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=10,a.globalCompositeOperation="source-over",a.font="10px sans-serif",a.setLineDash!==void 0&&(a.setLineDash([]),a.lineDashOffset=0);const{filter:t}=a;t!=="none"&&t!==""&&(a.filter="none")}function s1(a,t){if(t)return!0;Tt.singularValueDecompose2dScale(a,jn);const e=Math.fround(Ri.pixelRatio*Ea.PDF_TO_CSS_UNITS);return jn[0]<=e&&jn[1]<=e}const mD=["butt","round","square"],gD=["miter","round","bevel"],bD={},r1={};class Aa{constructor(t,e,n,s,o,{optionalContentConfig:l,markedContentStack:u=null},h,f,p){this.ctx=t,this.current=new e1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=l,this.cachedCanvases=new pD(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,e,n=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const o=this.ctx.canvas.width,l=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,o,l),this.ctx.fillStyle=u,n){const h=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...ke(this.compositeCtx))}this.ctx.save(),Rc(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ke(this.ctx)}executeOperatorList(t,e,n,s,o){const l=t.argsArray,u=t.fnArray;let h=e||0;const f=l.length;if(f===h)return h;const p=f-h>t1&&typeof n=="function",m=p?Date.now()+dD:0;let b=0;const y=this.commonObjs,A=this.objs;let w,x;for(;;){if(s!==void 0&&h===s.nextBreakPoint)return s.breakIt(h,n),h;if(!o||o(h))if(w=u[h],x=l[h]??null,w!==qo.dependency)x===null?this[w](h):this[w](h,...x);else for(const S of x){this.dependencyTracker?.recordNamedData(S,h);const E=S.startsWith("g_")?y:A;if(!E.has(S))return E.get(S,n),h}if(h++,h===f)return h;if(p&&++b>t1){if(Date.now()>m)return n(),h;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),u=n,h=s,f="prescale1",p,m;for(;o>2&&u>1||l>2&&h>1;){let b=u,y=h;o>2&&u>1&&(b=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/b),l>2&&h>1&&(y=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,l/=h/y),p=this.cachedCanvases.getCanvas(f,b,y),m=p.context,m.clearRect(0,0,b,y),m.drawImage(t,0,0,u,h,0,0,b,y),t=p.canvas,u=b,h=y,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,e){const n=this.ctx,{width:s,height:o}=e,l=this.current.fillColor,u=this.current.patternFill,h=ke(n);let f,p,m,b;if((e.bitmap||e.data)&&e.count>1){const Q=e.bitmap||e.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),l]),f=this._cachedBitmapsMap.get(Q),f||(f=new Map,this._cachedBitmapsMap.set(Q,f));const at=f.get(p);if(at&&!u){const U=Math.round(Math.min(h[0],h[2])+h[4]),Z=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,ii.transformAndFill),{canvas:at,offsetX:U,offsetY:Z}}m=at}m||(b=this.cachedCanvases.getCanvas("maskCanvas",s,o),i1(b.context,e));let y=Tt.transform(h,[1/s,0,0,-1/o,0,0]);y=Tt.transform(y,[1,0,0,1,0,-o]);const A=ga.slice();Tt.axialAlignedBoundingBox([0,0,s,o],y,A);const[w,x,S,E]=A,T=Math.round(S-w)||1,R=Math.round(E-x)||1,D=this.cachedCanvases.getCanvas("fillCanvas",T,R),O=D.context,L=w,z=x;O.translate(-L,-z),O.transform(...y),m||(m=this._scaleImage(b.canvas,_i(O)),m=m.img,f&&u&&f.set(p,m)),O.imageSmoothingEnabled=s1(ke(O),e.interpolate),Dc(O,m,0,0,m.width,m.height,0,0,s,o),O.globalCompositeOperation="source-in";const I=Tt.transform(_i(O),[1,0,0,1,-L,-z]);return O.fillStyle=u?l.getPattern(n,this,I,fn.FILL,t):l,O.fillRect(0,0,s,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,D.canvas)),this.dependencyTracker?.recordDependencies(t,ii.transformAndFill),{canvas:D.canvas,offsetX:Math.round(L),offsetY:Math.round(z)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=mD[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=gD[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){this.dependencyTracker?.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[n,s]of e)switch(n){case"LW":this.setLineWidth(t,s);break;case"LC":this.setLineCap(t,s);break;case"LJ":this.setLineJoin(t,s);break;case"ML":this.setMiterLimit(t,s);break;case"D":this.setDash(t,s[0],s[1]);break;case"RI":this.setRenderingIntent(t,s);break;case"FL":this.setFlatness(t,s);break;case"Font":this.setFont(t,s[0],s[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=s;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=s;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(s,e,n);this.suspendedCtx=this.ctx;const l=this.ctx=o.context;l.setTransform(this.suspendedCtx.getTransform()),Eo(this.suspendedCtx,l),fD(l,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Eo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const o=s[0],l=s[1],u=s[2]-o,h=s[3]-l;u===0||h===0||(this.genericComposeSMask(e.context,n,u,h,e.subtype,e.backdrop,e.transferMap,o,l,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,o,l,u,h,f,p,m){let b=t.canvas,y=h-p,A=f-m;if(l)if(y<0||A<0||y+n>b.width||A+s>b.height){const x=this.cachedCanvases.getCanvas("maskExtension",n,s),S=x.context;S.drawImage(b,-y,-A),S.globalCompositeOperation="destination-atop",S.fillStyle=l,S.fillRect(0,0,n,s),S.globalCompositeOperation="source-over",b=x.canvas,y=A=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(y,A,n,s),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=l,t.fillRect(y,A,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?e.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(u));const w=new Path2D;w.rect(h,f,n,s),e.clip(w),e.globalCompositeOperation="destination-in",e.drawImage(b,y,A,n,s,h,f,n,s),e.restore()}save(t){this.inSMaskMode&&Eo(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Eo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,o,l,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,n,s,o,l,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,s){let[o]=n;if(!s){o||=n[0]=new Path2D,this[e](t,o);return}if(this.dependencyTracker!==null){const l=e===qo.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-l,s[2]+l,s[1]-l,s[3]+l).recordDependencies(t,["transform"])}o instanceof Path2D||(o=n[0]=vA(o)),Tt.axialAlignedBoundingBox(s,ke(this.ctx),this.current.minMax),this[e](t,o),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){const s=this.ctx,o=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const l=o.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=o.getPattern(s,this,_i(s),fn.STROKE,t),l){const u=new Path2D;u.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=u}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,ii.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(fn.STROKE,ke(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){const s=this.ctx,o=this.current.fillColor,l=this.current.patternFill;let u=!1;if(l){const f=o.isModifyingCurrentTransform()?s.getTransform():null;if(this.dependencyTracker?.save(t),s.save(),s.fillStyle=o.getPattern(s,this,_i(s),fn.FILL,t),f){const p=new Path2D;p.addPath(e,s.getTransform().invertSelf().multiplySelf(f)),e=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),this.dependencyTracker?.recordDependencies(t,ii.fill),u&&(s.restore(),this.dependencyTracker?.restore(t)),n&&this.consumePath(t,e,h)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,ii.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=bD}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=r1}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,o=n.getTransform().invertSelf();for(const{transform:l,x:u,y:h,fontSize:f,path:p}of e)p&&s.addPath(p,new DOMMatrix(l).preMultiplySelf(o).translate(u,h).scale(f,-f));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const s=this.commonObjs.get(e),o=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(o.fontMatrix=s.fontMatrix||Kf,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Ut("Invalid font matrix for font "+e),n<0?(n=-n,o.fontDirection=-1):o.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const l=s.loadedName||"sans-serif",u=s.systemFontInfo?.css||`"${l}", ${s.fallbackName}`;let h="normal";s.black?h="900":s.bold&&(h="bold");const f=s.italic?"italic":"normal";let p=n;n<Qv?p=Qv:n>Jv&&(p=Jv),this.current.fontSizeScale=n/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s}paintChar(t,e,n,s,o,l){const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,m=h.fontSize/h.fontSizeScale,b=p&We.FILL_STROKE_MASK,y=!!(p&We.ADD_TO_PATH_FLAG),A=h.patternFill&&!f.missingFile,w=h.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||y||A||w)&&!f.missingFile&&(x=f.getPathGenerator(this.commonObjs,e)),x&&(f.disableFontFace||A||w)){u.save(),u.translate(n,s),u.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,u,f);let S;if(b===We.FILL||b===We.FILL_STROKE)if(o){S=u.getTransform(),u.setTransform(...o);const E=this.#i(x,S,o);u.fill(E)}else u.fill(x);if(b===We.STROKE||b===We.FILL_STROKE)if(l){S||=u.getTransform(),u.setTransform(...l);const{a:E,b:T,c:R,d:D}=S,O=Tt.inverseTransform(l),L=Tt.transform([E,T,R,D,0,0],O);Tt.singularValueDecompose2dScale(L,jn),u.lineWidth*=Math.max(jn[0],jn[1])/m,u.stroke(this.#i(x,S,l))}else u.lineWidth/=m,u.stroke(x);u.restore()}else(b===We.FILL||b===We.FILL_STROKE)&&(u.fillText(e,n,s),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,s,()=>u.measureText(e))),(b===We.STROKE||b===We.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,s,()=>u.measureText(e)).recordDependencies(t,ii.stroke),u.strokeText(e,n,s));y&&((this.pendingTextPaths||=[]).push({transform:ke(u),x:n,y:s,fontSize:m,path:x}),this.dependencyTracker?.recordCharacterBBox(t,u,f,m,n,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return jt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,ii.showText).resetBBox(t),this.current.textRenderingMode&We.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const o=n.fontSize;if(o===0){this.dependencyTracker?.recordOperation(t);return}const l=this.ctx,u=n.fontSizeScale,h=n.charSpacing,f=n.wordSpacing,p=n.fontDirection,m=n.textHScale*p,b=e.length,y=s.vertical,A=y?1:-1,w=s.defaultVMetrics,x=o*n.fontMatrix[0],S=n.textRenderingMode===We.FILL&&!s.disableFontFace&&!n.patternFill;l.save(),n.textMatrix&&l.transform(...n.textMatrix),l.translate(n.x,n.y+n.textRise),p>0?l.scale(m,-1):l.scale(m,1);let E,T;const R=n.textRenderingMode&We.FILL_STROKE_MASK,D=R===We.FILL||R===We.FILL_STROKE,O=R===We.STROKE||R===We.FILL_STROKE;if(D&&n.patternFill){l.save();const at=n.fillColor.getPattern(l,this,_i(l),fn.FILL,t);E=ke(l),l.restore(),l.fillStyle=at}if(O&&n.patternStroke){l.save();const at=n.strokeColor.getPattern(l,this,_i(l),fn.STROKE,t);T=ke(l),l.restore(),l.strokeStyle=at}let L=n.lineWidth;const z=n.textMatrixScale;if(z===0||L===0?O&&(L=this.getSinglePixelWidth()):L/=z,u!==1&&(l.scale(u,u),L/=u),l.lineWidth=L,s.isInvalidPDFjsFont){const at=[];let U=0;for(const M of e)at.push(M.unicode),U+=M.width;const Z=at.join("");if(l.fillText(Z,0,0),this.dependencyTracker!==null){const M=l.measureText(Z);this.dependencyTracker.recordBBox(t,this.ctx,-M.actualBoundingBoxLeft,M.actualBoundingBoxRight,-M.actualBoundingBoxAscent,M.actualBoundingBoxDescent).recordShowTextOperation(t)}n.x+=U*x*m,l.restore(),this.compose();return}let I=0,Q;for(Q=0;Q<b;++Q){const at=e[Q];if(typeof at=="number"){I+=A*at*o/1e3;continue}let U=!1;const Z=(at.isSpace?f:0)+h,M=at.fontChar,tt=at.accent;let H,j,lt=at.width;if(y){const _=at.vmetric||w,N=-(at.vmetric?_[1]:lt*.5)*x,X=_[2]*x;lt=_?-_[0]:lt,H=N/u,j=(I+X)/u}else H=I/u,j=0;let st;if(s.remeasure&&lt>0){st=l.measureText(M);const _=st.width*1e3/o*u;if(lt<_&&this.isFontSubpixelAAEnabled){const N=lt/_;U=!0,l.save(),l.scale(N,1),H/=N}else lt!==_&&(H+=(lt-_)/2e3*o/u)}if(this.contentVisible&&(at.isInFont||s.missingFile)){if(S&&!tt)l.fillText(M,H,j),this.dependencyTracker?.recordCharacterBBox(t,l,st?{bbox:null}:s,o/u,H,j,()=>st??l.measureText(M));else if(this.paintChar(t,M,H,j,E,T),tt){const _=H+o*tt.offset.x/u,N=j-o*tt.offset.y/u;this.paintChar(t,tt.fontChar,_,N,E,T)}}const B=y?lt*x-Z*p:lt*x+Z*p;I+=B,U&&l.restore()}y?n.y-=I:n.x+=I*m,l.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const n=this.ctx,s=this.current,o=s.font,l=s.fontSize,u=s.fontDirection,h=o.vertical?1:-1,f=s.charSpacing,p=s.wordSpacing,m=s.textHScale*u,b=s.fontMatrix||Kf,y=e.length,A=s.textRenderingMode===We.INVISIBLE;let w,x,S,E;if(A||l===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(m,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new au(T,t):null,w=0;w<y;++w){if(x=e[w],typeof x=="number"){E=h*x*l/1e3,this.ctx.translate(E,0),s.x+=E*m;continue}const R=(x.isSpace?p:0)+f,D=o.charProcOperatorList[x.operatorListId];D?this.contentVisible&&(this.save(),n.scale(l,l),n.transform(...b),this.executeOperatorList(D),this.restore()):Ut(`Type3 character "${x.operatorListId}" is not available.`);const O=[x.width,0];Tt.applyTransform(O,b),S=O[0]*l+R,n.translate(S,0),s.x+=S*m}n.restore(),T&&(this.dependencyTracker=T)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,s,o,l,u){const h=new Path2D;h.rect(s,o,l-s,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,s,l,o,u).recordClipBox(t,this.ctx,s,l,o,u),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const s=this.baseTransform||ke(this.ctx),o={createCanvasGraphics:(l,u)=>new Aa(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new au(this.dependencyTracker,u,!0):null)};n=new Zp(e,this.ctx,o,s)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=uD(this.getObject(t,e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(t,e){if(!this.contentVisible)return;const n=this.ctx;this.save(t);const s=this._getPattern(t,e);n.fillStyle=s.getPattern(n,this,_i(n),fn.SHADING,t);const o=_i(n);if(o){const{width:l,height:u}=n.canvas,h=ga.slice();Tt.axialAlignedBoundingBox([0,0,l,u],o,h);const[f,p,m,b]=h;this.ctx.fillRect(f,p,m-f,b-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,ii.transform).recordDependencies(t,ii.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){he("Should not call beginInlineImage")}beginImageData(){he("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ke(this.ctx),n)){Tt.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[s,o,l,u]=n,h=new Path2D;h.rect(s,o,l-s,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,s,l,o,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||bu("TODO: Support non-isolated groups."),e.knockout&&Ut("Knockout groups not supported.");const s=ke(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let o=ga.slice();Tt.axialAlignedBoundingBox(e.bbox,ke(n),o);const l=[0,0,n.canvas.width,n.canvas.height];o=Tt.intersect(o,l)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(m,f,p),y=b.context;y.translate(-u,-h),y.transform(...s);let A=new Path2D;const[w,x,S,E]=e.bbox;if(A.rect(w,x,S-w,E-x),e.matrix){const T=new Path2D;T.addPath(A,new DOMMatrix(e.matrix)),A=T}y.clip(A),e.smask&&this.smaskStack.push({canvas:b.canvas,context:y,offsetX:u,offsetY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(u,h),n.save()),Eo(n,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=ke(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=ga.slice();Tt.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,s,o,l){if(this.#t(),Rc(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const u=n[2]-n[0],h=n[3]-n[1];if(l&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=u,n[3]=h,Tt.singularValueDecompose2dScale(ke(this.ctx),jn);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),m=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,m);const{canvas:b,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(jn[0],0,0,-jn[1],0,h*jn[1]),Rc(this.ctx)}else{Rc(this.ctx),this.endPath(t);const f=new Path2D;f.rect(n[0],n[1],u,h),this.ctx.clip(f)}}this.current=new e1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...o)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const s=this.ctx,o=this._createMaskCanvas(t,e),l=o.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(l,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,o.offsetX,o.offsetX+l.width,o.offsetY,o.offsetY+l.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,s=0,o=0,l,u){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const h=this.ctx;h.save();const f=ke(h);h.transform(n,s,o,l,0,0);const p=this._createMaskCanvas(t,e);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,b=u.length;m<b;m+=2){const y=Tt.transform(f,[n,s,o,l,u[m],u[m+1]]);h.drawImage(p.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(t,this.ctx,y[4],y[4]+p.canvas.width,y[5],y[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,ii.transformAndFill);for(const l of e){const{data:u,width:h,height:f,transform:p}=l,m=this.cachedCanvases.getCanvas("maskCanvas",h,f),b=m.context;b.save();const y=this.getObject(t,u,l);i1(b,y),b.globalCompositeOperation="source-in",b.fillStyle=o?s.getPattern(b,this,_i(n),fn.FILL,t):s,b.fillRect(0,0,h,f),b.restore(),n.save(),n.transform(...p),n.scale(1,-1),Dc(n,m.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,n,0,h,0,f),n.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){Ut("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,s,o){if(!this.contentVisible)return;const l=this.getObject(t,e);if(!l){Ut("Dependent image isn't ready yet");return}const u=l.width,h=l.height,f=[];for(let p=0,m=o.length;p<m;p+=2)f.push({transform:[n,0,0,s,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,l,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,o=this.cachedCanvases.getCanvas("inlineImage",n,s),l=o.context;return l.filter=this.current.transferMaps,l.drawImage(e,0,0),l.filter="none",o.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const n=e.width,s=e.height,o=this.ctx;this.save(t);const{filter:l}=o;l!=="none"&&l!==""&&(o.filter="none"),o.scale(1/n,-1/s);let u;if(e.bitmap)u=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)u=e;else{const p=this.cachedCanvases.getCanvas("inlineImage",n,s).context;n1(p,e),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,_i(o));o.imageSmoothingEnabled=s1(ke(o),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,o,0,n,-s,0).recordDependencies(t,ii.imageXObject).recordOperation(t),Dc(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-s,n,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){if(!this.contentVisible)return;const s=this.ctx;let o;if(e.bitmap)o=e.bitmap;else{const l=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",l,u).context;n1(f,e),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const l of n)s.save(),s.transform(...l.transform),s.scale(1,-1),Dc(s,o,l.x,l.y,l.w,l.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,1,-1,0),s.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,ii.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const o=this.ctx;this.pendingClip?(s||(this.pendingClip===r1?o.clip(e,"evenodd"):o.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ke(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:o}=this.ctx.getTransform();let l,u;if(n===0&&s===0){const h=Math.abs(e),f=Math.abs(o);if(h===f)if(t===0)l=u=1/h;else{const p=h*t;l=u=p<1?1/p:1}else if(t===0)l=1/h,u=1/f;else{const p=h*t,m=f*t;l=p<1?1/p:1,u=m<1?1/m:1}}else{const h=Math.abs(e*o-n*s),f=Math.hypot(e,n),p=Math.hypot(s,o);if(t===0)l=p/h,u=f/h;else{const m=t*h;l=p>m?p/m:1,u=f>m?f/m:1}}this._cachedScaleForStroking[0]=l,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[o,l]=this.getScaleForStroking();if(o===l){n.lineWidth=(s||1)*o,n.stroke(t);return}const u=n.getLineDash();e&&n.save(),n.scale(o,l),yf.a=1/o,yf.d=1/l;const h=new Path2D;if(h.addPath(t,yf),u.length>0){const f=Math.max(o,l);n.setLineDash(u.map(p=>p/f)),n.lineDashOffset/=f}n.lineWidth=s||1,n.stroke(h),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const a in qo)Aa.prototype[a]!==void 0&&(Aa.prototype[qo[a]]=Aa.prototype[a]);class Sa{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class yD{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const oa=Symbol("INTERNAL");class vD{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:n,usage:s,rbGroups:o}){this.#t=!!(t&In.DISPLAY),this.#e=!!(t&In.PRINT),this.name=e,this.intent=n,this.usage=s,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,n=!1){t!==oa&&he("Internal method `_setVisible` called."),this.#i=n,this.#n=e}}class wD{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=In.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const n of t.groups)this.#e.set(n.id,new vD(e,n));if(t.baseState==="OFF")for(const n of this.#e.values())n._setVisible(oa,!1);for(const n of t.on)this.#e.get(n)._setVisible(oa,!0);for(const n of t.off)this.#e.get(n)._setVisible(oa,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const o=t[s];let l;if(Array.isArray(o))l=this.#r(o);else if(this.#e.has(o))l=this.#e.get(o).visible;else return Ut(`Optional content group not found: ${o}`),!0;switch(n){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return n==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return bu("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(Ut(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return Ut(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return Ut(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return Ut(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return Ut(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return Ut(`Unknown optional content policy ${t.policy}.`),!0}return Ut(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){const s=this.#e.get(t);if(!s){Ut(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==t&&this.#e.get(l)?._setVisible(oa,!1,!0);s._setVisible(oa,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const o=this.#e.get(s);if(o)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!o.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new AA;for(const[e,n]of this.#e)t.update(`${e}:${n.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Au{#t=null;#e=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(t,e,n){this._source=t,this.#t=e,this.#e=n}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return ue(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#t(this)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new this.#e(this,t,e);return this._rangeReaders.add(n),n}cancelAllRequests(t){this._fullReader?.cancel(t);for(const e of new Set(this._rangeReaders))e.cancel(t)}}class Su{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(t){this._stream=t}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){he("Abstract method `read` called")}cancel(t){he("Abstract method `cancel` called")}}class xu{_stream=null;constructor(t,e,n){this._stream=t}async read(){he("Abstract method `read` called")}cancel(t){he("Abstract method `cancel` called")}}function a1(a){return a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer}class AD extends Au{_progressiveDone=!1;_queuedChunks=[];constructor(t){super(t,SD,xD);const{pdfDataRangeTransport:e}=t,{initialData:n,progressiveDone:s}=e;if(n?.length>0){const o=a1(n);this._queuedChunks.push(o)}this._progressiveDone=s,e.addRangeListener((o,l)=>{this.#t(o,l)}),e.addProgressListener((o,l)=>{l!==void 0&&this._fullReader?.onProgress?.({loaded:o,total:l})}),e.addProgressiveReadListener(o=>{this.#t(void 0,o)}),e.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),e.transportReady()}#t(t,e){const n=a1(e);if(t===void 0)this._fullReader?this._fullReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.keys().find(o=>o._begin===t);ue(s,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),s._enqueue(n)}}getFullReader(){const t=super.getFullReader();return this._queuedChunks=null,t}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onDone=()=>this._rangeReaders.delete(n),this._source.pdfDataRangeTransport.requestDataRange(t,e)),n}cancelAllRequests(t){super.cancelAllRequests(t),this._source.pdfDataRangeTransport.abort()}}class SD extends Su{_done=!1;_queuedChunks=null;_requests=[];constructor(t){super(t);const{pdfDataRangeTransport:e,disableRange:n,disableStream:s}=t._source,{length:o,contentDispositionFilename:l}=e;this._queuedChunks=t._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=t._progressiveDone,this._contentLength=o,this._isStreamingSupported=!s,this._isRangeSupported=!n,Xp(l)&&(this._filename=l),this._headersCapability.resolve()}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class xD extends xu{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(t,e,n){super(t,e,n),this._begin=e}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function _D(a){let t=!0,e=n("filename\\*","i").exec(a);if(e){e=e[1];let p=u(e);return p=unescape(p),p=h(p),p=f(p),o(p)}if(e=l(a),e){const p=f(e);return o(p)}if(e=n("filename","i").exec(a),e){e=e[1];let p=u(e);return p=f(p),o(p)}function n(p,m){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function s(p,m){if(p){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const b=new TextDecoder(p,{fatal:!0}),y=yu(m);m=b.decode(y),t=!1}catch{}}return m}function o(p){return t&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),t&&(p=s("iso-8859-1",p))),p}function l(p){const m=[];let b;const y=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=y.exec(p))!==null;){let[,w,x,S]=b;if(w=parseInt(w,10),w in m){if(w===0)break;continue}m[w]=[x,S]}const A=[];for(let w=0;w<m.length&&w in m;++w){let[x,S]=m[w];S=u(S),x&&(S=unescape(S),w===0&&(S=h(S))),A.push(S)}return A.join("")}function u(p){if(p.startsWith('"')){const m=p.slice(1).split('\\"');for(let b=0;b<m.length;++b){const y=m[b].indexOf('"');y!==-1&&(m[b]=m[b].slice(0,y),m.length=b+1),m[b]=m[b].replaceAll(/\\(.)/g,"$1")}p=m.join('"')}return p}function h(p){const m=p.indexOf("'");if(m===-1)return p;const b=p.slice(0,m),A=p.slice(m+1).replace(/^[^']*'/,"");return s(b,A)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,b,y,A){if(y==="q"||y==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),s(b,A);try{A=atob(A)}catch{}return s(b,A)})}return""}function kA(a,t){const e=new Headers;if(!a||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function _u(a){return URL.parse(a)?.origin??null}function MA({responseHeaders:a,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(a.get("Content-Length"),10);return!Number.isInteger(o)||(s.suggestedLength=o,o<=2*e)||n||!t||a.get("Accept-Ranges")!=="bytes"||(a.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function DA(a){const t=a.get("Content-Disposition");if(t){let e=_D(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Xp(e))return e}return null}function Eu(a,t){return new ru(`Unexpected server response (${a}) while retrieving PDF "${t}".`,a,a===404||a===0&&t.startsWith("file:"))}function RA(a,t){if(a!==t)throw new Error(`Expected range response-origin "${a}" to match "${t}".`)}function NA(a,t,e,n){return fetch(a,{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"})}function PA(a,t){if(a!==200&&a!==206)throw Eu(a,t)}function OA(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(Ut(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class ED extends Au{_responseOrigin=null;constructor(t){super(t,TD,CD),this.isHttp=/^https?:/i.test(t.url),this.headers=kA(this.isHttp,t.httpHeaders)}}class TD extends Su{_abortController=new AbortController;_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:s,rangeChunkSize:o,url:l,withCredentials:u}=t._source;this._contentLength=s,this._isStreamingSupported=!n,this._isRangeSupported=!e;const h=new Headers(t.headers);NA(l,h,u,this._abortController).then(f=>{t._responseOrigin=_u(f.url),PA(f.status,l),this._reader=f.body.getReader();const p=f.headers,{allowRangeRequests:m,suggestedLength:b}=MA({responseHeaders:p,isHttp:t.isHttp,rangeChunkSize:o,disableRange:e});this._isRangeSupported=m,this._contentLength=b||this._contentLength,this._filename=DA(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ls("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:OA(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class CD extends xu{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const{url:s,withCredentials:o}=t._source,l=new Headers(t.headers);l.append("Range",`bytes=${e}-${n-1}`),NA(s,l,o,this._abortController).then(u=>{const h=_u(u.url);RA(h,t._responseOrigin),PA(u.status,s),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:OA(t),done:!1}}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const vf=200,o1=206;function kD(a){return typeof a!="string"?a:yu(a).buffer}class MD extends Au{#t=new WeakMap;_responseOrigin=null;constructor(t){super(t,DD,RD),this.url=t.url,this.isHttp=/^https?:/i.test(this.url),this.headers=kA(this.isHttp,t.httpHeaders)}_request(t){const e=new XMLHttpRequest,n={validateStatus:null,onHeadersReceived:t.onHeadersReceived,onDone:t.onDone,onError:t.onError,onProgress:t.onProgress};this.#t.set(e,n),e.open("GET",this.url),e.withCredentials=this._source.withCredentials;for(const[s,o]of this.headers)e.setRequestHeader(s,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.validateStatus=s=>s===o1||s===vf):n.validateStatus=s=>s===vf,e.responseType="arraybuffer",ue(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>t.onError(e.status),e.onreadystatechange=this.#i.bind(this,e),e.onprogress=this.#e.bind(this,e),e.send(null),e}#e(t,e){this.#t.get(t)?.onProgress?.(e)}#i(t,e){const n=this.#t.get(t);if(!n||(t.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),t.readyState!==4)||!this.#t.has(t))return;if(this.#t.delete(t),t.status===0&&this.isHttp){n.onError(t.status);return}const s=t.status||vf;if(!n.validateStatus(s)){n.onError(t.status);return}const o=kD(t.response);if(s===o1){const l=t.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(l)?n.onDone(o):(Ut('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone(o):n.onError(t.status)}_abortRequest(t){this.#t.has(t)&&(this.#t.delete(t),t.abort())}getRangeReader(t,e){const n=super.getRangeReader(t,e);return n&&(n.onClosed=()=>this._rangeReaders.delete(n)),n}}class DD extends Su{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(t){super(t);const{length:e}=t._source;this._contentLength=e,this._fullRequestXhr=t._request({onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#i.bind(this),onProgress:this.#n.bind(this)})}#t(){const t=this._stream,{disableRange:e,rangeChunkSize:n}=t._source,s=this._fullRequestXhr;t._responseOrigin=_u(s.responseURL);const o=s.getAllResponseHeaders(),l=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[p,...m]=f.split(": ");return[p,m.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:h}=MA({responseHeaders:l,isHttp:t.isHttp,rangeChunkSize:n,disableRange:e});u&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=DA(l),this._isRangeSupported&&t._abortRequest(s),this._headersCapability.resolve()}#e(t){if(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._cachedChunks.push(t),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}#i(t){this._storedError=Eu(t,this._stream.url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class RD extends xu{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(t,e,n){super(t,e,n),this._requestXhr=t._request({begin:e,end:n,onHeadersReceived:this.#t.bind(this),onDone:this.#e.bind(this),onError:this.#i.bind(this),onProgress:null})}#t(){const t=_u(this._requestXhr?.responseURL);try{RA(t,this._stream._responseOrigin)}catch(e){this._storedError=e,this.#i(0)}}#e(t){this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#i(t){this._storedError??=Eu(t,this._stream.url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const ND=/^[a-z][a-z0-9\-+.]+:/i;function PD(a){if(ND.test(a))return new URL(a);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(a))}function LA(a){const{Readable:t}=process.getBuiltinModule("stream");return typeof t.toWeb=="function"?t.toWeb(a):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(a)}function BA(a){return a instanceof Uint8Array?a.buffer:a instanceof ArrayBuffer?a:(Ut(`getArrayBuffer - unexpected data format: ${a}`),new Uint8Array(a).buffer)}class OD extends Au{constructor(t){super(t,LD,BD),this.url=PD(t.url),ue(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class LD extends Su{_reader=null;constructor(t){super(t);const{disableRange:e,disableStream:n,length:s,rangeChunkSize:o}=t._source;this._contentLength=s,this._isStreamingSupported=!n,this._isRangeSupported=!e;const l=t.url,u=process.getBuiltinModule("fs");u.promises.lstat(l).then(h=>{const f=u.createReadStream(l),p=LA(f);this._reader=p.getReader();const{size:m}=h;m<=2*o&&(this._isRangeSupported=!1),this._contentLength=m,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ls("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=Eu(0,l.href)),this._headersCapability.reject(h)})}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:BA(t),done:!1})}cancel(t){this._reader?.cancel(t)}}class BD extends xu{_readCapability=Promise.withResolvers();_reader=null;constructor(t,e,n){super(t,e,n);const s=t.url,o=process.getBuiltinModule("fs");try{const l=o.createReadStream(s,{start:e,end:n-1}),u=LA(l);this._reader=u.getReader(),this._readCapability.resolve()}catch(l){this._readCapability.reject(l)}}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:{value:BA(t),done:!1}}cancel(t){this._reader?.cancel(t)}}const To=Symbol("INITIAL_DATA");class zA{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:To}}get(t,e=null){if(e){const s=this.#e(t);return s.promise.then(()=>e(s.data)),null}const n=this.#t[t];if(!n||n.data===To)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#t[t];return!!e&&e.data!==To}delete(t){const e=this.#t[t];return!e||e.data===To?!1:(delete this.#t[t],!0)}resolve(t,e=null){const n=this.#e(t);n.data=e,n.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==To&&(yield[t,e])}}}const zD=1e5,l1=30;class Un{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#b=null;static#v=new Map;static#y=new Map;static#E=new WeakMap;static#x=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:n}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=n.scale*Ri.pixelRatio,this.#d=n.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:o,pageX:l,pageY:u}=n.rawDims;this.#b=[1,0,0,-1,-l,u+o],this.#o=s,this.#s=o,Un.#M(),e.style.setProperty("--min-font-size",Un.#x),fr(e,n),this.#t.promise.finally(()=>{Un.#A.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ze.platform;return jt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:n})=>{if(n){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#m.getReader(),Un.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const n=t.scale*Ri.pixelRatio,s=t.rotation;if(s!==this.#d&&(e?.(),this.#d=s,fr(this.#l,{rotation:s})),n!==this.#h){e?.(),this.#h=n;const o={div:null,properties:null,ctx:Un.#D(this.#r)};for(const l of this.#u)o.properties=this.#p.get(l),o.div=l,this.#_(o)}}cancel(){const t=new Ls("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(t){if(this.#i)return;this.#a.ctx??=Un.#D(this.#r);const e=this.#u,n=this.#g;for(const s of t){if(e.length>zD){Ut("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const o=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),s.id&&this.#e.setAttribute("id",`${s.id}`),s.tag==="Artifact"&&(this.#e.ariaHidden=!0),o.append(this.#e)}else s.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}n.push(s.str),this.#w(s)}}#w(t){const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const s=Tt.transform(this.#b,t.transform);let o=Math.atan2(s[1],s[0]);const l=this.#f[t.fontName];l.vertical&&(o+=Math.PI/2);let u=this.#n&&l.fontSubstitution||l.fontFamily;u=Un.fontFamilyMap.get(u)||u;const h=Math.hypot(s[2],s[3]),f=h*Un.#z(u,l,this.#r);let p,m;o===0?(p=s[4],m=s[5]-f):(p=s[4]+f*Math.sin(o),m=s[5]-f*Math.cos(o));const b=e.style;b.left=`${(100*p/this.#o).toFixed(2)}%`,b.top=`${(100*m/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${h.toFixed(2)}px`),b.fontFamily=u,n.fontSize=h,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=l.fontSubstitutionLoadedName||t.fontName),o!==0&&(n.angle=o*(180/Math.PI));let y=!1;if(t.str.length>1)y=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const A=Math.abs(t.transform[0]),w=Math.abs(t.transform[3]);A!==w&&Math.max(A,w)/Math.min(A,w)>1.5&&(y=!0)}if(y&&(n.canvasWidth=l.vertical?t.height:t.width),this.#p.set(e,n),this.#a.div=e,this.#a.properties=n,this.#_(this.#a),n.hasText&&this.#e.append(e),n.hasEOL){const A=document.createElement("br");A.setAttribute("role","presentation"),this.#e.append(A)}}#_(t){const{div:e,properties:n,ctx:s}=t,{style:o}=e;if(n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=o,{canvasWidth:u,fontSize:h}=n;Un.#k(s,h*this.#h,l);const{width:f}=s.measureText(e.textContent);f>0&&o.setProperty("--scale-x",u*this.#h/f)}n.angle!==0&&o.setProperty("--rotate",`${n.angle}deg`)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#D(t=null){let e=this.#y.get(t||="");if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#k(t,e,n){const s=this.#E.get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)}static#M(){if(this.#x!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#x=t.getBoundingClientRect().height,t.remove()}static#z(t,e,n){const s=this.#v.get(t);if(s)return s;const o=this.#D(n);o.canvas.width=o.canvas.height=l1,this.#k(o,l1,t);const l=o.measureText(""),u=l.fontBoundingBoxAscent,h=Math.abs(l.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(Ze.platform.isFirefox&&Ut("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const FD=100;function FA(a={}){typeof a=="string"||a instanceof URL?a={url:a}:(a instanceof ArrayBuffer||ArrayBuffer.isView(a))&&(a={data:a});const t=new Qp,{docId:e}=t,n=a.url?YM(a.url):null,s=a.data?qM(a.data):null,o=a.httpHeaders||null,l=a.withCredentials===!0,u=a.password??null,h=a.range instanceof IA?a.range:null,f=Number.isInteger(a.rangeChunkSize)&&a.rangeChunkSize>0?a.rangeChunkSize:2**16;let p=a.worker instanceof Wo?a.worker:null;const m=a.verbosity,b=typeof a.docBaseUrl=="string"&&!vu(a.docBaseUrl)?a.docBaseUrl:null,y=Tc(a.cMapUrl),A=a.cMapPacked!==!1,w=a.CMapReaderFactory||(yn?eD:Yv),x=Tc(a.iccUrl),S=Tc(a.standardFontDataUrl),E=a.StandardFontDataFactory||(yn?nD:qv),T=Tc(a.wasmUrl),R=a.WasmFactory||(yn?iD:$v),D=a.stopAtErrors!==!0,O=Number.isInteger(a.maxImageSize)&&a.maxImageSize>-1?a.maxImageSize:-1,L=a.isEvalSupported!==!1,z=typeof a.isOffscreenCanvasSupported=="boolean"?a.isOffscreenCanvasSupported:!yn,I=typeof a.isImageDecoderSupported=="boolean"?a.isImageDecoderSupported:!yn&&(Ze.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(a.canvasMaxAreaInBytes)?a.canvasMaxAreaInBytes:-1,at=typeof a.disableFontFace=="boolean"?a.disableFontFace:yn,U=a.fontExtraProperties===!0,Z=a.enableXfa===!0,M=a.ownerDocument||globalThis.document,tt=a.disableRange===!0,H=a.disableStream===!0,j=a.disableAutoFetch===!0,lt=a.pdfBug===!0,st=a.CanvasFactory||(yn?tD:ZM),B=a.FilterFactory||(yn?JM:QM),_=a.enableHWA===!0,N=a.useWasm!==!1,X=h?h.length:a.length??NaN,K=typeof a.useSystemFonts=="boolean"?a.useSystemFonts:!yn&&!at,$=typeof a.useWorkerFetch=="boolean"?a.useWorkerFetch:!!(w===Yv&&E===qv&&R===$v&&y&&S&&T&&Po(y,document.baseURI)&&Po(S,document.baseURI)&&Po(T,document.baseURI)),ht=null;vM(m);const pt={canvasFactory:new st({ownerDocument:M,enableHWA:_}),filterFactory:new B({docId:e,ownerDocument:M}),cMapReaderFactory:$?null:new w({baseUrl:y,isCompressed:A}),standardFontDataFactory:$?null:new E({baseUrl:S}),wasmFactory:$?null:new R({baseUrl:T})};p||(p=Wo.create({verbosity:m,port:Sa.workerPort}),t._worker=p);const At={docId:e,apiVersion:"5.4.624",data:s,password:u,disableAutoFetch:j,rangeChunkSize:f,length:X,docBaseUrl:b,enableXfa:Z,evaluatorOptions:{maxImageSize:O,disableFontFace:at,ignoreErrors:D,isEvalSupported:L,isOffscreenCanvasSupported:z,isImageDecoderSupported:I,canvasMaxAreaInBytes:Q,fontExtraProperties:U,useSystemFonts:K,useWasm:N,useWorkerFetch:$,cMapUrl:y,iccUrl:x,standardFontDataUrl:S,wasmUrl:T}},vt={ownerDocument:M,pdfBug:lt,styleElement:ht,enableHWA:_,loadingParams:{disableAutoFetch:j,enableXfa:Z}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ot=p.messageHandler.sendWithPromise("GetDocRequest",At,s?[s.buffer]:null);let Mt;if(h)Mt=new AD({pdfDataRangeTransport:h,disableRange:tt,disableStream:H});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const It=Po(n)?ED:yn?OD:MD;Mt=new It({url:n,length:X,httpHeaders:o,withCredentials:l,rangeChunkSize:f,disableRange:tt,disableStream:H})}return Ot.then(It=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const qt=new Oo(e,It,p.port),k=new jD(qt,t,Mt,vt,pt);t._transport=k,qt.send("Ready",null)})}).catch(t._capability.reject),t}class Qp{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Qp.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class IA{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const n of this.#r)n(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const n of this.#n)n(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){he("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ID{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class UD{#t=!1;#e=le.instance;constructor(t,e,n,s=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new Iv:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new zA,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(t){this._pageIndex=t-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:o=!1}={}){return new nl({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:s="display",annotationMode:o=Rs.ENABLE,transform:l=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:b=!1,recordOperations:y=!1,operationsFilter:A=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(s,o,m,b),{renderingIntent:x,cacheKey:S}=w;this.#t=!1,h||=this._transport.getOptionalContentConfig(x);let E=this._intentStates.get(S);E||(E=Object.create(null),this._intentStates.set(S,E)),E.streamReaderCancelTimeout&&(clearTimeout(E.streamReaderCancelTimeout),E.streamReaderCancelTimeout=null);const T=!!(x&In.PRINT);E.displayReadyCapability||(E.displayReadyCapability=Promise.withResolvers(),E.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const R=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(y||R),O=I=>{if(E.renderTasks.delete(L),D){const Q=L.gfx?.dependencyTracker.take();Q&&(L.stepper&&L.stepper.setOperatorBBoxes(Q,L.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=Q))}T&&(this.#t=!0),this.#i(),I?(L.capability.reject(I),this._abortOperatorList({intentState:E,reason:I instanceof Error?I:new Error(I)})):L.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},L=new ba({callback:O,params:{canvas:e,canvasContext:t,dependencyTracker:D?new rD(e,E.operatorList.length,R):null,viewport:n,transform:l,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:E.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:A});(E.renderTasks||=new Set).add(L);const z=L.task;return Promise.all([E.displayReadyCapability.promise,h]).then(([I,Q])=>{if(this.destroyed){O();return}if(this._stats?.time("Rendering"),!(Q.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");L.initializeGraphics({transparency:I,optionalContentConfig:Q}),L.operatorListChanged()}).catch(O),z}getOperatorList({intent:t="display",annotationMode:e=Rs.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const l=this._transport.getRenderingIntent(t,e,n,s,!0);let u=this._intentStates.get(l.cacheKey);u||(u=Object.create(null),this._intentStates.set(l.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(l)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>$o.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function o(){l.read().then(function({value:h,done:f}){if(f){n(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},s)}const l=e.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#i();return t&&e&&(this._stats&&=new Iv),e}#i(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&this.#i()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:o,transfer:l}=n,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#e.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:s},l).getReader(),f=this._intentStates.get(e);f.streamReader=h;const p=()=>{h.read().then(({value:m,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),p())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#i()}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};p()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Gp){let s=FD;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Ls(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}var Ns,pi,es,cr,uu,ur,hr,An,qc,UA,jA,Lo,xa,$c;const Te=class Te{constructor({name:t=null,port:e=null,verbosity:n=wM()}={}){Si(this,An);Si(this,Ns,Promise.withResolvers());Si(this,pi,null);Si(this,es,null);Si(this,cr,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(Ee(Te,hr).has(e))throw new Error("Cannot use more than one PDFWorker per port.");Ee(Te,hr).set(e,this),xi(this,An,UA).call(this,e)}else xi(this,An,jA).call(this)}get promise(){return Ee(this,Ns).promise}get port(){return Ee(this,es)}get messageHandler(){return Ee(this,pi)}destroy(){this.destroyed=!0,Ee(this,cr)?.terminate(),Mn(this,cr,null),Ee(Te,hr).delete(Ee(this,es)),Mn(this,es,null),Ee(this,pi)?.destroy(),Mn(this,pi,null)}static create(t){const e=Ee(this,hr).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Te(t)}static get workerSrc(){if(Sa.workerSrc)return Sa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return jt(this,"_setupFakeWorkerGlobal",(async()=>Ee(this,xa,$c)?Ee(this,xa,$c):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ns=new WeakMap,pi=new WeakMap,es=new WeakMap,cr=new WeakMap,uu=new WeakMap,ur=new WeakMap,hr=new WeakMap,An=new WeakSet,qc=function(){Ee(this,Ns).resolve(),Ee(this,pi).send("configure",{verbosity:this.verbosity})},UA=function(t){Mn(this,es,t),Mn(this,pi,new Oo("main","worker",t)),Ee(this,pi).on("ready",()=>{}),xi(this,An,qc).call(this)},jA=function(){if(Ee(Te,ur)||Ee(Te,xa,$c)){xi(this,An,Lo).call(this);return}let{workerSrc:t}=Te;try{Te._isSameOrigin(window.location,t)||(t=Te._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Oo("main","worker",e),s=()=>{o.abort(),n.destroy(),e.terminate(),this.destroyed?Ee(this,Ns).reject(new Error("Worker was destroyed")):xi(this,An,Lo).call(this)},o=new AbortController;e.addEventListener("error",()=>{Ee(this,cr)||s()},{signal:o.signal}),n.on("test",u=>{if(o.abort(),this.destroyed||!u){s();return}Mn(this,pi,n),Mn(this,es,e),Mn(this,cr,e),xi(this,An,qc).call(this)}),n.on("ready",u=>{if(o.abort(),this.destroyed){s();return}try{l()}catch{xi(this,An,Lo).call(this)}});const l=()=>{const u=new Uint8Array;n.send("test",u,[u.buffer])};l();return}catch{bu("The worker has been disabled.")}xi(this,An,Lo).call(this)},Lo=function(){Ee(Te,ur)||(Ut("Setting up fake worker."),Mn(Te,ur,!0)),Te._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){Ee(this,Ns).reject(new Error("Worker was destroyed"));return}const e=new KM;Mn(this,es,e);const n=`fake${l0(Te,uu)._++}`,s=new Oo(n+"_worker",n,e);t.setup(s,e),Mn(this,pi,new Oo(n,n+"_worker",e)),xi(this,An,qc).call(this)}).catch(t=>{Ee(this,Ns).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},xa=new WeakSet,$c=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Si(Te,xa),Si(Te,uu,0),Si(Te,ur,!1),Si(Te,hr,new WeakMap),yn&&(Mn(Te,ur,!0),Sa.workerSrc||="./pdf.worker.mjs"),Te._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!n?.origin||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},Te._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Te.fromPort=t=>{if(NM("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Te.create(t)};let Wo=Te;class jD{downloadInfoCapability=Promise.withResolvers();#t=null;#e=new Map;#i=null;#n=new Map;#r=new Map;#a=new Map;#s=null;#o=le.instance;constructor(t,e,n,s,o){this.messageHandler=t,this.loadingTask=e,this.#i=n,this.commonObjs=new zA,this.fontLoader=new HM({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.enableHWA=s.enableHWA,this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const t=new Map,e=new Map;for(let n=0,s=this.#o.pagesNumber;n<s;n++){const o=this.#o.getPrevPageNumber(n+1)-1,l=this.#n.get(o);l&&t.set(n,l);const u=this.#r.get(o);u&&e.set(n,u)}this.#n=t,this.#r=e}#l(t,e=null){const n=this.#e.get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,s),s}#d({loaded:t,total:e}){this.loadingTask.onProgress?.({loaded:t,total:e,percent:dn(Math.round(t/e*100),0,100)})}get annotationStorage(){return jt(this,"annotationStorage",new $p)}getRenderingIntent(t,e=Rs.ENABLE,n=null,s=!1,o=!1){let l=In.DISPLAY,u=np;switch(t){case"any":l=In.ANY;break;case"display":break;case"print":l=In.PRINT;break;default:Ut(`getRenderingIntent - invalid intent: ${t}`)}const h=l&In.PRINT&&n instanceof SA?n:this.annotationStorage;switch(e){case Rs.DISABLE:l+=In.ANNOTATIONS_DISABLE;break;case Rs.ENABLE:break;case Rs.ENABLE_FORMS:l+=In.ANNOTATIONS_FORMS;break;case Rs.ENABLE_STORAGE:l+=In.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Ut(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(l+=In.IS_EDITING),o&&(l+=In.OPLIST);const{ids:f,hash:p}=h.modifiedIds,m=[l,u.hash,p];return{renderingIntent:l,cacheKey:m.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of this.#n.values())t.push(n._destroy());this.#n.clear(),this.#r.clear(),this.#a.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),Un.cleanup(),this.#i?.cancelAllRequests(new Ls("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{ue(this.#i,"GetReader - no `BasePDFStream` instance available."),this.#t=this.#i.getFullReader(),this.#t.onProgress=o=>this.#d(o),s.onPull=()=>{this.#t.read().then(function({value:o,done:l}){if(l){s.close();return}ue(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{this.#t.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",async n=>{await this.#t.headersReady;const{isStreamingSupported:s,isRangeSupported:o,contentLength:l}=this.#t;return s&&o&&(this.#t.onProgress=null),{isStreamingSupported:s,isRangeSupported:o,contentLength:l}}),t.on("GetRangeReader",(n,s)=>{ue(this.#i,"GetRangeReader - no `BasePDFStream` instance available.");const o=this.#i.getRangeReader(n.begin,n.end);if(!o){s.close();return}s.onPull=()=>{o.read().then(function({value:l,done:u}){if(u){s.close();return}ue(l instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{s.error(l)})},s.onCancel=l=>{o.cancel(l),s.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:n})=>{this.#o.pagesNumber=n.numPages,this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new ID(n,this))}),t.on("DocException",n=>{e._capability.reject(Dn(n))}),t.on("PasswordRequest",n=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw Dn(n);const s=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};e.onPassword(s,n.code)}catch(s){this.#s.reject(s)}return this.#s.promise}),t.on("DataLoaded",n=>{this.#d({loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;this.#n.get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,o])=>{if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in o){const m=o.error;Ut(`Error during font loading: ${m}`),this.commonObjs.resolve(n,m);break}const l=new ye(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,b)=>globalThis.FontInspector.fontAdded(m,b):null,h=new GM(l,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=o;ue(f,"The imageRef must be defined.");for(const m of this.#n.values())for(const[,b]of m.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(n,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(n,new XM(o));break;case"Image":this.commonObjs.resolve(n,o);break;case"Pattern":const p=new en(o);this.commonObjs.resolve(n,p.getIR());break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,o,l])=>{if(this.destroyed)return;const u=this.#n.get(s);if(!u.objs.has(n)){if(u._intentStates.size===0){l?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(n,l);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",n=>{this.destroyed||this.#d(n)}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ut("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this.#t?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#o.getPageId(t)-1,s=this.#r.get(e);if(s)return s;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#a.set(l.refStr,n);const u=new UD(e,l,this,this._params.pdfBug);return this.#n.set(e,u),u});return this.#r.set(e,o),o}async getPageIndex(t){if(!ip(t))throw new Error("Invalid pageIndex request.");const e=await this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen});return this.#o.getPageNumber(e+1)-1}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(t+1)-1,intent:e})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(t+1)-1})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(t+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#l("GetOptionalContentConfig").then(e=>new wD(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#e.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>({info:s[0],metadata:s[1]?new yD(s[1]):null,contentDispositionFilename:this.#t?.filename??null,contentLength:this.#t?.contentLength??null,hasStructTree:s[2]}));return this.#e.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#n.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),Un.cleanup()}}cachedPageNumber(t){if(!ip(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`,n=this.#a.get(e);return n>=0?this.#o.getPageNumber(n+1):null}}class VD{_internalRenderTask=null;onContinue=null;onError=null;constructor(t){this._internalRenderTask=t}get promise(){return this._internalRenderTask.capability.promise}cancel(t=0){this._internalRenderTask.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this._internalRenderTask.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this._internalRenderTask;return t.form||t.canvas&&e?.size>0}}class ba{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:o,operatorList:l,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:m=!1,pageColors:b=null,enableHWA:y=!1,operationsFilter:A=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=m,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new VD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=y,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ba.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ba.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:o,dependencyTracker:l}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Aa(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ba.#e.delete(this._canvas),t||=new Gp(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ba.#e.delete(this._canvas),this.callback())))}}const HD="5.4.624",GD="384c6208b";class si{#t=null;#e=null;#i;#n=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return jt(this,"_keyboardManager",new sl([[["Escape","mac+Escape"],si.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],si.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],si.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],si.prototype._moveToPrevious],[["Home","mac+Home"],si.prototype._moveToBeginning],[["End","mac+End"],si.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",si.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const n=this.#e=document.createElement("span");return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=this.#i,t.append(n),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",oi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[n,s]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",s),o.title=n,o.setAttribute("data-l10n-id",si.#d[n]);const l=document.createElement("span");o.append(l),l.className="swatch",l.style.backgroundColor=s,o.ariaSelected=s===this.#i,o.addEventListener("click",this.#f.bind(this,s),{signal:e}),t.append(o)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ne.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#n.lastElementChild?.focus()}#g(t){si._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const n of this.#n.children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Ko{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Ko.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:n}=this.#e,s=this.#t=document.createElement("input");return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",Ko.#n[t]),s.addEventListener("input",()=>{this.#i.updateParams(e,s.value)},{signal:this.#i._signal}),s}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function c1(a){return Math.floor(Math.max(0,Math.min(1,a))*255).toString(16).padStart(2,"0")}function Co(a){return Math.max(0,Math.min(255,255*a))}class u1{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Co(t),[t,t,t]}static G_HTML([t]){const e=c1(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Co)}static RGB_HTML(t){return`#${t.map(c1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Co(1-Math.min(1,t+s)),Co(1-Math.min(1,n+s)),Co(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,o=1-e,l=1-n,u=Math.min(s,o,l);return["CMYK",s,o,l,u]}}class XD{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){he("Abstract method `_createSVG` called.")}}class ou extends XD{_createSVG(t){return document.createElementNS(Ji,t)}}const YD=9,pr=new WeakSet,qD=new Date().getTimezoneOffset()*60*1e3;class wf{static create(t){switch(t.data.annotationType){case Ge.LINK:return new Jp(t);case Ge.TEXT:return new WD(t);case Ge.WIDGET:switch(t.data.fieldType){case"Tx":return new KD(t);case"Btn":return t.data.radioButton?new VA(t):t.data.checkBox?new QD(t):new JD(t);case"Ch":return new tR(t);case"Sig":return new ZD(t)}return new gr(t);case Ge.POPUP:return new ap(t);case Ge.FREETEXT:return new HA(t);case Ge.LINE:return new nR(t);case Ge.SQUARE:return new iR(t);case Ge.CIRCLE:return new sR(t);case Ge.POLYLINE:return new GA(t);case Ge.CARET:return new aR(t);case Ge.INK:return new tm(t);case Ge.POLYGON:return new rR(t);case Ge.HIGHLIGHT:return new XA(t);case Ge.UNDERLINE:return new oR(t);case Ge.SQUIGGLY:return new lR(t);case Ge.STRIKEOUT:return new cR(t);case Ge.STAMP:return new YA(t);case Ge.FILEATTACHMENT:return new uR(t);default:return new De(t)}}}class De{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return De._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:n,rect:s}=this.data;let o=-1/0,l=-1/0;if(e?.length>=8){for(let u=0;u<e.length;u+=8)e[u+1]>l?(l=e[u+1],o=e[u+2]):e[u+1]===l&&(o=Math.max(o,e[u+2]));return[o,l]}if(n?.length>=1){for(const u of n)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>l?(l=u[h+1],o=u[h]):u[h+1]===l&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,l]}return s?[s[2],s[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:o,pageY:l}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-o)/n,t[1]=100*(t[1]-l)/s,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Yo}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,n={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:n})||this.annotationStorage.setValue(`${Yo}${e.id}`,{id:e.id,annotationType:e.annotationType,page:this.parent.page,popup:n,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:n}=t;e&&this.#n(e);let s=this.#i?.popup||this.popup;!s&&n?.text&&(this._createPopup(n),s=this.#i.popup),s&&(s.updateEdited(t),n?.deleted&&(s.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:l,pageX:u,pageY:h}}}}=this;n?.splice(0,4,...t),e.left=`${100*(t[0]-u)/o}%`,e.top=`${100*(l-t[3]+h)/l}%`,s===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/l}%`):this.setRotation(s)}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),!(this instanceof gr)&&!(this instanceof Jp)&&(o.tabIndex=0);const{style:l}=o;if(l.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof ap){const{rotation:w}=e;return!e.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:u,height:h}=this;if(!t&&e.borderStyle.width>0){l.borderWidth=`${e.borderStyle.width}px`;const w=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(w>0||x>0){const E=`calc(${w}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;l.borderRadius=E}else if(this instanceof VA){const E=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;l.borderRadius=E}switch(e.borderStyle.style){case aa.SOLID:l.borderStyle="solid";break;case aa.DASHED:l.borderStyle="dashed";break;case aa.BEVELED:Ut("Unimplemented border style: beveled");break;case aa.INSET:Ut("Unimplemented border style: inset");break;case aa.UNDERLINE:l.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(this.#e=!0,l.borderColor=Tt.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):l.borderWidth=0}const f=Tt.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:m,pageX:b,pageY:y}=s.rawDims;l.left=`${100*(f[0]-b)/p}%`,l.top=`${100*(f[1]-y)/m}%`;const{rotation:A}=e;return e.hasOwnCanvas||A===0?(l.width=`${100*u/p}%`,l.height=`${100*h/m}%`):this.setRotation(A,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:o,height:l}=this;t%180!==0&&([o,l]=[l,o]),e.style.width=`${100*o/n}%`,e.style.height=`${100*l/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const o=s.detail[e],l=o[0],u=o.slice(1);s.target.style[n]=u1[`${l}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[n]:u1[`${l}_rgb`](u)})};return jt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail))(t[s]||n[s])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,o]of Object.entries(e)){const l=n[s];if(l){const u={detail:{[s]:o},target:t};l(u),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,o]=this.data.rect.map(w=>Math.fround(w));if(t.length===8){const[w,x,S,E]=t.subarray(2,6);if(s===w&&o===x&&e===S&&n===E)return}const{style:l}=this.container;let u;if(this.#e){const{borderColor:w,borderWidth:x}=l;l.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const h=s-e,f=o-n,{svgFactory:p}=this,m=p.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const b=p.createElement("defs");m.append(b);const y=p.createElement("clipPath"),A=`clippath_${this.data.id}`;y.setAttribute("id",A),y.setAttribute("clipPathUnits","objectBoundingBox"),b.append(y);for(let w=2,x=t.length;w<x;w+=8){const S=t[w],E=t[w+1],T=t[w+2],R=t[w+3],D=p.createElement("rect"),O=(T-e)/h,L=(o-E)/f,z=(S-T)/h,I=(E-R)/f;D.setAttribute("x",O),D.setAttribute("y",L),D.setAttribute("width",z),D.setAttribute("height",I),y.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${L}" width="${z}" height="${I}"/>`)}this.#e&&(u.push("</g></svg>')"),l.backgroundImage=u.join("")),this.container.append(m),this.container.style.clipPath=`url(#${A})`}_createPopup(t=null){const{data:e}=this;let n,s;t?(n={str:t.text},s=t.date):(n=e.contentsObj,s=e.modificationDate),this.#i=new ap({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){he("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:o,id:l,exportValues:u}of s){if(o===-1||l===e)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${l}"]`);if(f&&!pr.has(f)){Ut(`_getElementsByName - element not allowed: ${l}`);continue}n.push({id:l,exportValue:h,domElement:f})}return n}for(const s of document.getElementsByName(t)){const{exportValue:o}=s,l=s.getAttribute("data-element-id");l!==e&&pr.has(s)&&n.push({id:l,exportValue:o,domElement:s})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class $D extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Jp extends De{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let s=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(n,t.action,t.overlaidText),s=!0):t.attachment?(this.#e(n,t.attachment,t.overlaidText,t.attachmentDest),s=!0):t.setOCGState?(this.#i(n,t.setOCGState,t.overlaidText),s=!0):t.dest?(this._bindLink(n,t.dest,t.overlaidText),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),s=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(n,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&(this.contentElement=n,this.container.append(n)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,n=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),n&&(t.title=n)}_bindNamedAction(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),n&&(t.title=n),this.#t()}#e(t,e,n="",s=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:n&&(t.title=n),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,s),!1),this.#t()}#i(t,e,n=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),n&&(t.title=n),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(e.actions)){const o=n.get(s);o&&(t[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:s}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){Ut('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(t.onclick=()=>!1);return}t.onclick=()=>{n?.();const{fields:s,refs:o,include:l}=e,u=[];if(s.length!==0||o.length!==0){const p=new Set(o);for(const m of s){const b=this._fieldObjects[m]||[];for(const{id:y}of b)p.add(y)}for(const m of Object.values(this._fieldObjects))for(const b of m)p.has(b.id)===l&&u.push(b)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,f=[];for(const p of u){const{id:m}=p;switch(f.push(m),p.type){case"text":{const y=p.defaultValue||"";h.setValue(m,{value:y});break}case"checkbox":case"radiobutton":{const y=p.defaultValue===p.exportValues;h.setValue(m,{value:y});break}case"combobox":case"listbox":{const y=p.defaultValue||"";h.setValue(m,{value:y});break}default:continue}const b=document.querySelector(`[data-element-id="${m}"]`);if(b){if(!pr.has(b)){Ut(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class WD extends De{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class gr extends De{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ze.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,o){n.includes("mouse")?t.addEventListener(n,l=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(l),shift:l.shiftKey,modifier:this._getKeyModifier(l)}})}):t.addEventListener(n,l=>{if(n==="blur"){if(!e.focused||!l.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(l)}})})}_setEventListeners(t,e,n,s){for(const[o,l]of n)(l==="Action"||this.data.actions?.[l])&&((l==="Focus"||l==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,o,l,s),l==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):l==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":Tt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||YD,o=t.style;let l;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(ff*s))||1,m=f/p;l=Math.min(s,h(m/ff))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);l=Math.min(s,h(f/ff))}o.fontSize=`calc(${l}px * var(--total-scale-factor))`,o.color=Tt.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class KD extends gr{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const o=this.annotationStorage;for(const l of this._getElementsByName(t.name,t.id))l.domElement&&(l.domElement[e]=n),o.setValue(l.id,{[s]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const s=t.getValue(e,{value:this.data.fieldValue});let o=s.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=s.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),pr.add(n),this.contentElement=n,n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:m}=this.data,b=!!p&&this.enableScripting;f&&(n.title=f),this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",A=>{t.setValue(e,{value:A.target.value}),this.setPropertyOnSiblings(n,"value",A.target.value,"value"),h.formattedValue=null}),n.addEventListener("resetform",A=>{const w=this.data.defaultFieldValue??"";n.value=h.userValue=w,h.formattedValue=null});let y=A=>{const{formattedValue:w}=h;w!=null&&(A.target.value=w),A.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",w=>{if(h.focused)return;const{target:x}=w;if(b&&(x.type=p,m&&(x.step=m)),h.userValue){const S=h.userValue;if(b)if(p==="time"){const E=new Date(S),T=[E.getHours(),E.getMinutes(),E.getSeconds()];x.value=T.map(R=>R.toString().padStart(2,"0")).join(":")}else x.value=new Date(S-qD).toISOString().split(p==="date"?"T":".",1)[0];else x.value=S}h.lastCommittedValue=x.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),n.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const x={value(S){h.userValue=S.detail.value??"",b||t.setValue(e,{value:h.userValue.toString()}),S.target.value=h.userValue},formattedValue(S){const{formattedValue:E}=S.detail;h.formattedValue=E,E!=null&&S.target!==document.activeElement&&(S.target.value=E);const T={formattedValue:E};b&&(T.value=E),t.setValue(e,T)},selRange(S){S.target.setSelectionRange(...S.detail.selRange)},charLimit:S=>{const{charLimit:E}=S.detail,{target:T}=S;if(E===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",E);let R=h.userValue;!R||R.length<=E||(R=R.slice(0,E),T.value=h.userValue=R,t.setValue(e,{value:R}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:R,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(x,w)}),n.addEventListener("keydown",w=>{h.commitKey=1;let x=-1;if(w.key==="Escape"?x=0:w.key==="Enter"&&!this.data.multiLine?x=2:w.key==="Tab"&&(h.commitKey=3),x===-1)return;const{value:S}=w.target;h.lastCommittedValue!==S&&(h.lastCommittedValue=S,h.userValue=S,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:x,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const A=y;y=null,n.addEventListener("blur",w=>{if(!h.focused||!w.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:x}=w;let{value:S}=x;if(b){if(S&&p==="time"){const E=S.split(":").map(T=>parseInt(T,10));S=new Date(2e3,0,1,E[0],E[1],E[2]||0).valueOf(),x.step=""}else S.includes("T")||(S=`${S}T00:00`),S=new Date(S).valueOf();x.type="text"}h.userValue=S,h.lastCommittedValue!==S&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:S,willCommit:!0,commitKey:h.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),A(w)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",w=>{h.lastCommittedValue=null;const{data:x,target:S}=w,{value:E,selectionStart:T,selectionEnd:R}=S;let D=T,O=R;switch(w.inputType){case"deleteWordBackward":{const L=E.substring(0,T).match(/\w*[^\w]*$/);L&&(D-=L[0].length);break}case"deleteWordForward":{const L=E.substring(T).match(/^[^\w]*\w*/);L&&(O+=L[0].length);break}case"deleteContentBackward":T===R&&(D-=1);break;case"deleteContentForward":T===R&&(O+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:x||"",willCommit:!1,selStart:D,selEnd:O}})}),this._setEventListeners(n,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(y&&n.addEventListener("blur",y),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class ZD extends gr{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class QD extends gr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return pr.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,s&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n)){const p=h&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}t.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue||"Off";l.target.checked=u===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",l=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(n,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,l)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class VA extends gr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const l of this._getElementsByName(e.fieldName,n))t.setValue(l.id,{value:!1});const o=document.createElement("input");if(pr.add(o),o.setAttribute("data-element-id",n),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,s&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",l=>{const{name:u,checked:h}=l.target;for(const f of this._getElementsByName(u,n))t.setValue(f.id,{value:!1});t.setValue(n,{value:h})}),o.addEventListener("resetform",l=>{const u=e.defaultFieldValue;l.target.checked=u!=null&&u===e.buttonValue}),this.enableScripting&&this.hasJSActions){const l=e.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=l===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const b=p&&m.id===n;m.domElement&&(m.domElement.checked=b),t.setValue(m.id,{value:b})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class JD extends Jp{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class tR extends gr{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");pr.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const m=this.data.defaultFieldValue;for(const b of s.options)b.selected=b.value===m});for(const p of this.data.options){const m=document.createElement("option");m.textContent=p.displayValue,m.value=p.exportValue,n.value.includes(p.exportValue)&&(m.setAttribute("selected",!0),o=!1),s.append(m)}let l=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),l=()=>{p.remove(),s.removeEventListener("input",l),l=null},s.addEventListener("input",l)}const u=p=>{const m=p?"value":"textContent",{options:b,multiple:y}=s;return y?Array.prototype.filter.call(b,A=>A.selected).map(A=>A[m]):b.selectedIndex===-1?null:b[b.selectedIndex][m]};let h=u(!1);const f=p=>{const m=p.target.options;return Array.prototype.map.call(m,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const m={value(b){l?.();const y=b.detail.value,A=new Set(Array.isArray(y)?y:[y]);for(const w of s.options)w.selected=A.has(w.value);t.setValue(e,{value:u(!0)}),h=u(!1)},multipleSelection(b){s.multiple=!0},remove(b){const y=s.options,A=b.detail.remove;y[A].selected=!1,s.remove(A),y.length>0&&Array.prototype.findIndex.call(y,x=>x.selected)===-1&&(y[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},clear(b){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),h=u(!1)},insert(b){const{index:y,displayValue:A,exportValue:w}=b.detail.insert,x=s.children[y],S=document.createElement("option");S.textContent=A,S.value=w,x?x.before(S):s.append(S),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},items(b){const{items:y}=b.detail;for(;s.length!==0;)s.remove(0);for(const A of y){const{displayValue:w,exportValue:x}=A,S=document.createElement("option");S.textContent=w,S.value=x,s.append(S)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:u(!0),items:f(b)}),h=u(!1)},indices(b){const y=new Set(b.detail.indices);for(const A of b.target.options)A.selected=y.has(A.index);t.setValue(e,{value:u(!0)}),h=u(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(m,p)}),s.addEventListener("input",p=>{const m=u(!0),b=u(!1);t.setValue(e,{value:m}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:h,change:b,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){t.setValue(e,{value:u(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class ap extends De{constructor(t){const{data:e,elements:n,parent:s}=t,o=!!s._commentManager;if(super(t,{isRenderable:!o&&De._hasPopupData(e)}),this.elements=n,o&&De._hasPopupData(e)){const l=this.popup=this.#t();for(const u of n)u.popup=l}else this.popup=null}#t(){return new eR({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),n=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${ma}${s}`).join(",")),this.container}}class eR{#t=null;#e=this.#G.bind(this);#i=this.#I.bind(this);#n=this.#P.bind(this);#r=this.#S.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#b=null;#v=null;#y=null;#E=null;#x=null;#A=null;#C=!1;#w=null;#_=null;constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:o,contentsObj:l,richText:u,parent:h,rect:f,parentRect:p,open:m,commentManager:b=null}){this.#s=t,this.#x=s,this.#o=l,this.#E=u,this.#d=h,this.#a=e,this.#y=f,this.#h=p,this.#l=n,this.#t=b,this.#w=n[0],this.#c=Jf.toDateObject(o),this.trigger=n.flatMap(y=>y.getElementsToTriggerPopup()),b||(this.#D(),this.#s.hidden=!0,m&&this.#S())}#D(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#k(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#b||this.#k(),!this.#b)return;const{signal:t}=this.#m=new AbortController,e=this.#w.hasOwnCommentButton,n=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},s=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},o=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const l of this.trigger)l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",s,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),l.classList.add("popupTriggerArea")}else{const l=this.#p=document.createElement("button");l.className="annotationCommentButton";const u=this.#w.container;l.style.zIndex=u.style.zIndex+1,l.tabIndex=0,l.ariaHasPopup="dialog",l.ariaControls="commentPopup",l.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#z(),this.#M(),l.addEventListener("keydown",this.#e,{signal:t}),l.addEventListener("click",n,{signal:t}),l.addEventListener("pointerenter",s,{signal:t}),l.addEventListener("pointerleave",o,{signal:t}),u.after(l)}}#M(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#b,{style:n}=this.#p;n.left=`calc(${t}%)`,n.top=`calc(${e}% - var(--comment-button-dim))`}#z(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:n,creationDate:s,modificationDate:o}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:n,creationDate:s,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#w.commentText,this.#_}set comment(t){t!==this.comment&&(this.#w.commentText=this.#_=t)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:n}=this.#p.getBoundingClientRect(),{x:s,y:o,width:l,height:u}=this.#w.layer.getBoundingClientRect();return[(t-s)/l,(e+n-o)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,n]=this.#v||this.commentButtonPosition.map(f=>f/100),s=this.parentBoundingClientRect,{x:o,y:l,width:u,height:h}=s;this.#t.showDialog(null,this,o+e*u,l+n*h,{...t,parentDimensions:s})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#a){const n=t.style.outlineColor=Tt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${n} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#x?.str){const n=document.createElement("span");n.className="title",e.append(n),{dir:n.dir,str:n.textContent}=this.#x}if(t.append(e),this.#c){const n=document.createElement("time");n.className="popupDate",n.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),n.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),n.dateTime=this.#c.toISOString(),e.append(n)}yA({html:this.#N||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#N(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#O(){return this.#N?.attributes?.style?.fontSize||0}get#F(){return this.#N?.attributes?.style?.color||null}#L(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:this.#F,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:s});return n}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:n}){if(this.#t){n?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#z(),this.#_=e.text)),t&&(this.#b=null,this.#k(),this.#M());return}if(n||e?.deleted){this.remove();return}this.#D(),this.#A||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#L(e.text),this.#c=Jf.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#E}=this.#A,this.#A=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:o}}}=this.#d;let l=!!this.#h,u=l?this.#h:this.#y;for(const A of this.#l)if(!u||Tt.intersect(A.data.rect,u)!==null){u=A.data.rect,l=!0;break}const h=Tt.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=l?u[2]-u[0]+5:0,m=h[0]+p,b=h[1];this.#u=[100*(m-s)/e,100*(b-o)/n];const{style:y}=this.#s;y.left=`${this.#u[0]}%`,y.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#P(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#I(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#P(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#I(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#D(),this.#C&&(this.#g||this.#P(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class HA extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Ht.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class nR extends De{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),o=this.#t=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class iR extends De{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:rect");return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",e-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class sR extends De{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:n}=this,s=this.svgFactory.create(e,n,!0),o=t.borderStyle.width,l=this.#t=this.svgFactory.createElement("svg:ellipse");return l.setAttribute("cx",e/2),l.setAttribute("cy",n/2),l.setAttribute("rx",e/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),s.append(l),this.container.append(s),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class GA extends De{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:n,popupRef:s},width:o,height:l}=this;if(!e)return this.container;const u=this.svgFactory.create(o,l,!0);let h=[];for(let p=0,m=e.length;p<m;p+=2){const b=e[p]-t[0],y=t[3]-e[p+1];h.push(`${b},${y}`)}h=h.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",n.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class rR extends GA{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class aR extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class tm extends De{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Ht.HIGHLIGHT:Ht.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:n,borderStyle:s,popupRef:o}}=this,{transform:l,width:u,height:h}=this.#i(e,t),f=this.svgFactory.create(u,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",l);for(let m=0,b=n.length;m<b;m++){const y=this.svgFactory.createElement(this.svgElementName);this.#e.push(y),y.setAttribute("points",n[m].join(",")),p.append(y)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:n,rect:s}=t,o=this.#t;if(e>=0&&o.setAttribute("stroke-width",e||1),n)for(let l=0,u=this.#e.length;l<u;l++)this.#e[l].setAttribute("points",n[l].join(","));if(s){const{transform:l,width:u,height:h}=this.#i(this.data.rotation,s);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class XA extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Ht.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class oR extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class lR extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class cR extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class YA extends De{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Ht.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class uR extends De{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||e.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),n.addEventListener("dblclick",this.#e.bind(this)),this.#t=n;const{isMac:s}=Ze.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(s?o.metaKey:o.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class em{#t=null;#e=null;#i=null;#n=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:o,viewport:l,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){this.div=t,this.#t=e,this.#e=n,this.#r=u||null,this.#a=f||null,this.#i=p||new $p,this.page=o,this.viewport=l,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,n=this.div;fr(n,this.viewport);const s=new Map,o=[],l={data:null,layer:n,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ou,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const u of e){if(u.noHTML)continue;const h=u.annotationType===Ge.POPUP;if(h){const m=s.get(u.id);if(!m)continue;if(!this._commentManager){o.push(u);continue}l.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;l.data=u;const f=wf.create(l);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),u.popupRef)){const m=s.get(u.popupRef);m?m.push(f):s.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const h=l.elements=s.get(u.id);l.data=u;const f=wf.create(l);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${ma}${u.id}`,u.hidden&&(p.style.visibility="hidden"),h.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:n,data:{id:s}}of this.#s){const o=n.id=`${ma}${s}`;t.push(this.#r?.getAriaAttributes(o).then(l=>{if(l)for(const[u,h]of l)n.setAttribute(u,h)}))}}this.#s.sort(({data:{rect:[n,s,o,l]}},{data:{rect:[u,h,f,p]}})=>{if(n===o&&s===l)return 1;if(u===f&&h===p)return-1;const m=l,b=s,y=(s+l)/2,A=p,w=h,x=(h+p)/2;if(y>=A&&x<=b)return-1;if(x>=m&&y<=w)return 1;const S=(n+o)/2,E=(u+f)/2;return S-E});const e=document.createDocumentFragment();for(const n of this.#s)e.append(n.container),this._commentManager?(n.extraPopupElement?.popup||n.popup)?.renderCommentButton():n.extraPopupElement&&e.append(n.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const n of this.#s)this.#t.addPointerInTextLayer(n.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new ou,parent:this};for(const n of t){n.borderStyle||=em._defaultBorderStyle,e.data=n;const s=wf.create(e);s.isRenderable&&(s.render(),s.contentElement.id=`${ma}${n.id}`,this.#s.push(s))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,fr(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,n]of this.#e){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:o}=s;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):s.append(n);const l=this.#n.get(e);l&&(l._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,s.id,n),l._hasNoCanvas=!1):l.canvas=n)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:n,rotation:s}=t,o=new $D({data:{id:n,rect:t.getPDFRect(),rotation:s},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#i});return o.render(),o.contentElement.id=`${ma}${n}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(t){const e=this.#s.findIndex(s=>s.data.id===t);if(e<0)return;const[n]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(n.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return jt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:aa.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Nc=/\r\n?|\n/g;class nn extends zt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=nn.prototype,e=o=>o.isEmpty(),n=Bs.TRANSLATE_SMALL,s=Bs.TRANSLATE_BIG;return jt(this,"_keyboardManager",new sl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:e}]]))}static _type="freetext";static _editorType=Ht.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||nn._defaultColor||zt._defaultLineColor,this.#n=t.fontSize||nn._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){zt.initialize(t,e);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case ne.FREETEXT_SIZE:nn._defaultFontSize=e;break;case ne.FREETEXT_COLOR:nn._defaultColor=e;break}}updateParams(t,e){switch(t){case ne.FREETEXT_SIZE:this.#r(e);break;case ne.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[ne.FREETEXT_SIZE,nn._defaultFontSize],[ne.FREETEXT_COLOR,nn._defaultColor||zt._defaultLineColor]]}get propertiesToUpdate(){return[[ne.FREETEXT_SIZE,this.#n],[ne.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Ko(this),[["colorPicker",this._colorPicker]]}get colorType(){return ne.FREETEXT_COLOR}#r(t){const e=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--total-scale-factor))`,this.translate(0,-(s-this.#n)*this.parentScale),this.#n=s,this.#o()},n=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=s=>{this.color=s,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-nn._internalPadding*t,-(nn._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const n of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&n.nodeName==="BR"||(t.push(nn.#c(n)),e=n);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:s,div:o}=this,l=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",s.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const n=s=>{if(this.#t=s,!s){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){nn._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[s,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,p]=this.pageDimensions,[m,b]=this.pageTranslation;let y,A;switch(this.rotation){case 0:y=t+(l[0]-m)/f,A=e+this.height-(l[1]-b)/p;break;case 90:y=t+(l[0]-m)/f,A=e-(l[1]-b)/p,[u,h]=[h,-u];break;case 180:y=t-this.width+(l[0]-m)/f,A=e-(l[1]-b)/p,[u,h]=[-u,-h];break;case 270:y=t+(l[0]-m-this.height*p)/f,A=e+(l[1]-b-this.width*f)/p,[u,h]=[-h,u];break}this.setAt(y*s,A*o,u,h)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Nc,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:n}=e;if(n.length===1&&n[0]==="text/plain")return;t.preventDefault();const s=nn.#h(e.getData("text")||"").replaceAll(Nc,`
`);if(!s)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!s.includes(`
`)){l.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=l,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const y=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Nc,"")),y!==this.editorDiv){let A=f;for(const w of this.editorDiv.childNodes){if(w===y){A=p;continue}A.push(nn.#c(w))}}f.push(u.nodeValue.slice(0,h).replaceAll(Nc,""))}else if(u===this.editorDiv){let y=f,A=0;for(const w of this.editorDiv.childNodes)A++===h&&(y=p),y.push(nn.#c(w))}this.#t=`${f.join(`
`)}${s}${p.join(`
`)}`,this.#l();const m=new Range;let b=Math.sumPrecise(f.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const A=y.nodeValue.length;if(b<=A){m.setStart(y,b),m.setEnd(y,b);break}b-=A}o.removeAllRanges(),o.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=nn._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,n){let s=null;if(t instanceof HA){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:f,id:p,popupRef:m,richText:b,contentsObj:y,creationDate:A,modificationDate:w},textContent:x,textPosition:S,parent:{page:{pageNumber:E}}}=t;if(!x||x.length===0)return null;s=t={annotationType:Ht.FREETEXT,color:Array.from(u),fontSize:l,value:x.join(`
`),position:S,pageIndex:E-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:m,comment:y?.str||null,richText:b,creationDate:A,modificationDate:w}}const o=await super.deserialize(t,e,n);return o.#n=t.fontSize,o.color=Tt.makeHexColor(...t.color),o.#t=nn.#h(t.value),o._initialData=s,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=zt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(n),t?(n.isCopy=!0,n):this.annotationElementId&&!this.#f(n)?null:(n.id=this.annotationElementId,n)}#f(t){const{value:e,fontSize:n,color:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==n||t.color.some((l,u)=>l!==s[u])||t.pageIndex!==o}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:n}=e;n.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,n.color=this.color,e.replaceChildren();for(const s of this.#t.split(`
`)){const o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),e.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class Ct{static PRECISION=1e-4;toSVGPath(){he("Abstract method `toSVGPath` must be implemented.")}get box(){he("Abstract getter `box` must be implemented.")}serialize(t,e){he("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,o,l){l||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u]*s,l[u+1]=n+t[u+1]*o;return l}static _rescaleAndSwap(t,e,n,s,o,l){l||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)l[u]=e+t[u+1]*s,l[u+1]=n+t[u]*o;return l}static _translate(t,e,n,s){s||=new Float32Array(t.length);for(let o=0,l=t.length;o<l;o+=2)s[o]=e+t[o],s[o+1]=n+t[o+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,o){switch(o){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,o,l){return[(t+5*n)/6,(e+5*s)/6,(5*n+o)/6,(5*s+l)/6,(n+o)/2,(s+l)/2]}}class lr{#t;#e=[];#i;#n;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#g=8;static#m=2;static#u=lr.#g+lr.#m;constructor({x:t,y:e},n,s,o,l,u=0){this.#t=n,this.#h=o*s,this.#n=l,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=u,this.#l=lr.#g*s,this.#c=lr.#u*s,this.#d=s,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[n,s,o,l]=this.#t;return[(this.#s+(t[0]-e[0])/2-n)/o,(this.#o+(t[1]-e[1])/2-s)/l,(this.#s+(e[0]-t[0])/2-n)/o,(this.#o+(e[1]-t[1])/2-s)/l]}add({x:t,y:e}){this.#s=t,this.#o=e;const[n,s,o,l]=this.#t;let[u,h,f,p]=this.#a.subarray(8,12);const m=t-f,b=e-p,y=Math.hypot(m,b);if(y<this.#c)return!1;const A=y-this.#l,w=A/y,x=w*m,S=w*b;let E=u,T=h;u=f,h=p,f+=x,p+=S,this.#f?.push(t,e);const R=-S/A,D=x/A,O=R*this.#h,L=D*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+O,p+L],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-O,p-L],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([u+O,h+L],2),this.#r.push(NaN,NaN,NaN,NaN,(u+O-n)/o,(h+L-s)/l),this.#a.set([u-O,h-L],14),this.#e.push(NaN,NaN,NaN,NaN,(u-O-n)/o,(h-L-s)/l)),this.#a.set([E,T,u,h,f,p],6),!this.isEmpty()):(this.#a.set([E,T,u,h,f,p],6),Math.abs(Math.atan2(T-h,E-u)-Math.atan2(S,x))<Math.PI/2?([u,h,f,p]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+f)/2-n)/o,((h+p)/2-s)/l),[u,h,E,T]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((E+u)/2-n)/o,((T+h)/2-s)/l),!0):([E,T,u,h,f,p]=this.#a.subarray(0,6),this.#r.push(((E+5*u)/6-n)/o,((T+5*h)/6-s)/l,((5*u+f)/6-n)/o,((5*h+p)/6-s)/l,((u+f)/2-n)/o,((h+p)/2-s)/l),[f,p,u,h,E,T]=this.#a.subarray(12,18),this.#e.push(((E+5*u)/6-n)/o,((T+5*h)/6-s)/l,((5*u+f)/6-n)/o,((5*h+p)/6-s)/l,((u+f)/2-n)/o,((h+p)/2-s)/l),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#b();const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);this.#y(n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return this.#v(n),n.join(" ")}#b(){const[t,e,n,s]=this.#t,[o,l,u,h]=this.#p();return`M${(this.#a[2]-t)/n} ${(this.#a[3]-e)/s} L${(this.#a[4]-t)/n} ${(this.#a[5]-e)/s} L${o} ${l} L${u} ${h} L${(this.#a[16]-t)/n} ${(this.#a[17]-e)/s} L${(this.#a[14]-t)/n} ${(this.#a[15]-e)/s} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#y(t){const[e,n,s,o]=this.#t,l=this.#a.subarray(4,6),u=this.#a.subarray(16,18),[h,f,p,m]=this.#p();t.push(`L${(l[0]-e)/s} ${(l[1]-n)/o} L${h} ${f} L${p} ${m} L${(u[0]-e)/s} ${(u[1]-n)/o}`)}newFreeDrawOutline(t,e,n,s,o,l){return new qA(t,e,n,s,o,l)}getOutlines(){const t=this.#r,e=this.#e,n=this.#a,[s,o,l,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let m=0,b=h.length-2;m<b;m+=2)h[m]=(this.#f[m]-s)/l,h[m+1]=(this.#f[m+1]-o)/u;if(h[h.length-2]=(this.#s-s)/l,h[h.length-1]=(this.#o-o)/u,isNaN(n[6])&&!this.isEmpty())return this.#E(h);const f=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let m=0;m<p;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}p=this.#A(f,p);for(let m=e.length-6;m>=6;m-=6)for(let b=0;b<6;b+=2){if(isNaN(e[m+b])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=e[m+b],f[p+1]=e[m+b+1],p+=2}return this.#x(f,p),this.newFreeDrawOutline(f,h,this.#t,this.#d,this.#i,this.#n)}#E(t){const e=this.#a,[n,s,o,l]=this.#t,[u,h,f,p]=this.#p(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-n)/o,(e[3]-s)/l,NaN,NaN,NaN,NaN,(e[4]-n)/o,(e[5]-s)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(e[16]-n)/o,(e[17]-s)/l,NaN,NaN,NaN,NaN,(e[14]-n)/o,(e[15]-s)/l],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#i,this.#n)}#x(t,e){const n=this.#e;return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6}#A(t,e){const n=this.#a.subarray(4,6),s=this.#a.subarray(16,18),[o,l,u,h]=this.#t,[f,p,m,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(n[0]-o)/u,(n[1]-l)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,m,b,NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-l)/h],e),e+=24}}class qA extends Ct{#t;#e=new Float32Array(4);#i;#n;#r;#a;#s;constructor(t,e,n,s,o,l){super(),this.#s=t,this.#r=e,this.#t=n,this.#a=s,this.#i=o,this.#n=l,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(l);const[u,h,f,p]=this.#e;for(let m=0,b=t.length;m<b;m+=2)t[m]=(t[m]-u)/f,t[m+1]=(t[m+1]-h)/p;for(let m=0,b=e.length;m<b;m+=2)e[m]=(e[m]-u)/f,e[m+1]=(e[m+1]-h)/p}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,n=this.#s.length;e<n;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,n,s],o){const l=n-t,u=s-e;let h,f;switch(o){case 0:h=Ct._rescale(this.#s,t,s,l,-u),f=Ct._rescale(this.#r,t,s,l,-u);break;case 90:h=Ct._rescaleAndSwap(this.#s,t,e,l,u),f=Ct._rescaleAndSwap(this.#r,t,e,l,u);break;case 180:h=Ct._rescale(this.#s,n,e,-l,u),f=Ct._rescale(this.#r,n,e,-l,u);break;case 270:h=Ct._rescaleAndSwap(this.#s,n,s,-l,-u),f=Ct._rescaleAndSwap(this.#r,n,s,-l,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(t){const e=this.#s;let n=e[4],s=e[5];const o=[n,s,n,s];let l=n,u=s,h=n,f=s;const p=t?Math.max:Math.min,m=new Float32Array(4);for(let y=6,A=e.length;y<A;y+=6){const w=e[y+4],x=e[y+5];isNaN(e[y])?(Tt.pointBoundingBox(w,x,o),u>x?(l=w,u=x):u===x&&(l=p(l,w)),f<x?(h=w,f=x):f===x&&(h=p(h,w))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,Tt.bezierBoundingBox(n,s,...e.slice(y,y+6),m),Tt.rectBoundingBox(m[0],m[1],m[2],m[3],o),u>m[1]?(l=m[0],u=m[1]):u===m[1]&&(l=p(l,m[0])),f<m[3]?(h=m[2],f=m[3]):f===m[3]&&(h=p(h,m[2]))),n=w,s=x}const b=this.#e;b[0]=o[0]-this.#i,b[1]=o[1]-this.#i,b[2]=o[2]-o[0]+2*this.#i,b[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[l,u],this.lastPoint=[h,f]}get box(){return this.#e}newOutliner(t,e,n,s,o,l=0){return new lr(t,e,n,s,o,l)}getNewOutline(t,e){const[n,s,o,l]=this.#e,[u,h,f,p]=this.#t,m=o*f,b=l*p,y=n*f+u,A=s*p+h,w=this.newOutliner({x:this.#r[0]*m+y,y:this.#r[1]*b+A},this.#t,this.#a,t,this.#n,e??this.#i);for(let x=2;x<this.#r.length;x+=2)w.add({x:this.#r[x]*m+y,y:this.#r[x+1]*b+A});return w.getOutlines()}}class op{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,n=0,s=!0){const o=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:w,y:x,width:S,height:E}of t){const T=Math.floor((w-e)/l)*l,R=Math.ceil((w+S+e)/l)*l,D=Math.floor((x-e)/l)*l,O=Math.ceil((x+E+e)/l)*l,L=[T,D,O,!0],z=[R,D,O,!1];this.#n.push(L,z),Tt.rectBoundingBox(T,D,R,O,o)}const u=o[2]-o[0]+2*n,h=o[3]-o[1]+2*n,f=o[0]-n,p=o[1]-n;let m=s?-1/0:1/0,b=1/0;const y=this.#n.at(s?-1:-2),A=[y[0],y[2]];for(const w of this.#n){const[x,S,E,T]=w;!T&&s?S<b?(b=S,m=x):S===b&&(m=Math.max(m,x)):T&&!s&&(S<b?(b=S,m=x):S===b&&(m=Math.min(m,x))),w[0]=(x-f)/u,w[1]=(S-p)/h,w[2]=(E-p)/h}this.#t=new Float32Array([f,p,u,h]),this.#e=[m,b],this.#i=A}getOutlines(){this.#n.sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],n=new Set;for(const l of t){const[u,h,f]=l;e.push([u,h,l],[u,f,l])}e.sort((l,u)=>l[1]-u[1]||l[0]-u[0]);for(let l=0,u=e.length;l<u;l+=2){const h=e[l][2],f=e[l+1][2];h.push(f),f.push(h),n.add(h),n.add(f)}const s=[];let o;for(;n.size>0;){const l=n.values().next().value;let[u,h,f,p,m]=l;n.delete(l);let b=u,y=h;for(o=[u,f],s.push(o);;){let A;if(n.has(p))A=p;else if(n.has(m))A=m;else break;n.delete(A),[u,h,f,p,m]=A,b!==u&&(o.push(b,y,u,y===h?h:f),b=u),y=y===h?f:h}o.push(b,y)}return new hR(s,this.#t,this.#e,this.#i)}#s(t){const e=this.#r;let n=0,s=e.length-1;for(;n<=s;){const o=n+s>>1,l=e[o][0];if(l===t)return o;l<t?n=o+1:s=o-1}return s+1}#o([,t,e]){const n=this.#s(t);this.#r.splice(n,0,[t,e])}#c([,t,e]){const n=this.#s(t);for(let s=n;s<this.#r.length;s++){const[o,l]=this.#r[s];if(o!==t)break;if(o===t&&l===e){this.#r.splice(s,1);return}}for(let s=n-1;s>=0;s--){const[o,l]=this.#r[s];if(o!==t)break;if(o===t&&l===e){this.#r.splice(s,1);return}}}#l(t){const[e,n,s]=t,o=[[e,n,s]],l=this.#s(s);for(let u=0;u<l;u++){const[h,f]=this.#r[u];for(let p=0,m=o.length;p<m;p++){const[,b,y]=o[p];if(!(f<=b||y<=h)){if(b>=h){if(y>f)o[p][1]=f;else{if(m===1)return[];o.splice(p,1),p--,m--}continue}o[p][2]=h,y>f&&o.push([e,f,y])}}}return o}}class hR extends Ct{#t;#e;constructor(t,e,n,s){super(),this.#e=t,this.#t=e,this.firstPoint=n,this.lastPoint=s}toSVGPath(){const t=[];for(const e of this.#e){let[n,s]=e;t.push(`M${n} ${s}`);for(let o=2;o<e.length;o+=2){const l=e[o],u=e[o+1];l===n?(t.push(`V${u}`),s=u):u===s&&(t.push(`H${l}`),n=l)}t.push("Z")}return t.join(" ")}serialize([t,e,n,s],o){const l=[],u=n-t,h=s-e;for(const f of this.#e){const p=new Array(f.length);for(let m=0;m<f.length;m+=2)p[m]=t+f[m]*u,p[m+1]=s-f[m+1]*h;l.push(p)}return l}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class lp extends lr{newFreeDrawOutline(t,e,n,s,o,l){return new dR(t,e,n,s,o,l)}}class dR extends qA{newOutliner(t,e,n,s,o,l=0){return new lp(t,e,n,s,o,l)}}class ze extends zt{#t=null;#e=0;#i;#n=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#m=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=Ht.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ze.prototype;return jt(this,"_keyboardManager",new sl([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ze._defaultColor,this.#p=t.thickness||ze._defaultThickness,this.opacity=t.opacity||ze._defaultOpacity,this.#i=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new op(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new op(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:n}=this.#l;this.#f=[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height];const{lastPoint:s}=this.#a;this.#g=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:e,clipPathId:n}){this.#l=t;const s=1.5;if(this.#a=t.getNewOutline(this.#p/2+s,.0025),e>=0)this.#d=e,this.#n=n,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ze.#_(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:ze.#_(this.#a.box,m),path:{d:this.#a.toSVGPath()}})}const[o,l,u,h]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=u,this.height=h;break;case 90:{const[m,b]=this.parentDimensions;this.x=l,this.y=1-o,this.width=u*b/m,this.height=h*m/b;break}case 180:this.x=1-o,this.y=1-l,this.width=u,this.height=h;break;case 270:{const[m,b]=this.parentDimensions;this.x=1-l,this.y=o,this.width=u*b/m,this.height=h*m/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-o)/u,(f[1]-l)/h];const{lastPoint:p}=this.#a;this.#g=[(p[0]-o)/u,(p[1]-l)/h]}static initialize(t,e){zt.initialize(t,e),ze._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case ne.HIGHLIGHT_COLOR:ze._defaultColor=e;break;case ne.HIGHLIGHT_THICKNESS:ze._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case ne.HIGHLIGHT_COLOR:this.#E(e);break;case ne.HIGHLIGHT_THICKNESS:this.#x(e);break}}static get defaultPropertiesToUpdate(){return[[ne.HIGHLIGHT_COLOR,ze._defaultColor],[ne.HIGHLIGHT_THICKNESS,ze._defaultThickness]]}get propertiesToUpdate(){return[[ne.HIGHLIGHT_COLOR,this.color||ze._defaultColor],[ne.HIGHLIGHT_THICKNESS,this.#p||ze._defaultThickness],[ne.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},n=this.color,s=this.opacity;this.addCommands({cmd:e.bind(this,t,ze._defaultOpacity),undo:e.bind(this,n,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#x(t){const e=this.#p,n=s=>{this.#p=s,this.#A(s)};this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ne.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new si({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#M())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#y({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,n,s],o){switch(o){case 90:return[1-e-s,t,s,n];case 180:return[1-t-n,1-e-s,n,s];case 270:return[e,1-t-n,s,n]}return[t,e,n,s]}rotate(t){const{drawLayer:e}=this.parent;let n;this.#h?(t=(t-this.rotation+360)%360,n=ze.#_(this.#l.box,t)):n=ze.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:n,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:ze.#_(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),wA(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#D(t){ze._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#k(!0);break;case 1:case 3:this.#k(!1);break}}#k(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#k(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#M(){return this.#h?this.rotation:0}#z(){if(this.#h)return null;const[t,e]=this.pageDimensions,[n,s]=this.pageTranslation,o=this.#i,l=new Float32Array(o.length*8);let u=0;for(const{x:h,y:f,width:p,height:m}of o){const b=h*t+n,y=(1-f)*e+s;l[u]=l[u+4]=b,l[u+1]=l[u+3]=y,l[u+2]=l[u+6]=b+p*t,l[u+5]=l[u+7]=y-m*e,u+=8}return l}#N(t){return this.#l.serialize(t,this.#M())}static startHighlighting(t,e,{target:n,x:s,y:o}){const{x:l,y:u,width:h,height:f}=n.getBoundingClientRect(),p=new AbortController,m=t.combinedSignal(p),b=y=>{p.abort(),this.#F(t,y)};window.addEventListener("blur",b,{signal:m}),window.addEventListener("pointerup",b,{signal:m}),window.addEventListener("pointerdown",Oe,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",oi,{signal:m}),n.addEventListener("pointermove",this.#O.bind(this,t),{signal:m}),this._freeHighlight=new lp({x:s,y:o},[l,u,h,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,n){let s=null;if(t instanceof XA){const{data:{quadPoints:A,rect:w,rotation:x,id:S,color:E,opacity:T,popupRef:R,richText:D,contentsObj:O,creationDate:L,modificationDate:z},parent:{page:{pageNumber:I}}}=t;s=t={annotationType:Ht.HIGHLIGHT,color:Array.from(E),opacity:T,quadPoints:A,boxes:null,pageIndex:I-1,rect:w.slice(0),rotation:x,annotationElementId:S,id:S,deleted:!1,popupRef:R,richText:D,comment:O?.str||null,creationDate:L,modificationDate:z}}else if(t instanceof tm){const{data:{inkLists:A,rect:w,rotation:x,id:S,color:E,borderStyle:{rawWidth:T},popupRef:R,richText:D,contentsObj:O,creationDate:L,modificationDate:z},parent:{page:{pageNumber:I}}}=t;s=t={annotationType:Ht.HIGHLIGHT,color:Array.from(E),thickness:T,inkLists:A,boxes:null,pageIndex:I-1,rect:w.slice(0),rotation:x,annotationElementId:S,id:S,deleted:!1,popupRef:R,richText:D,comment:O?.str||null,creationDate:L,modificationDate:z}}const{color:o,quadPoints:l,inkLists:u,opacity:h}=t,f=await super.deserialize(t,e,n);f.color=Tt.makeHexColor(...o),f.opacity=h||1,u&&(f.#p=t.thickness),f._initialData=s,t.comment&&f.setCommentData(t);const[p,m]=f.pageDimensions,[b,y]=f.pageTranslation;if(l){const A=f.#i=[];for(let w=0;w<l.length;w+=8)A.push({x:(l[w]-b)/p,y:1-(l[w+1]-y)/m,width:(l[w+2]-l[w])/p,height:(l[w+1]-l[w+5])/m});f.#v(),f.#w(),f.rotate(f.rotation)}else if(u){f.#h=!0;const A=u[0],w={x:A[0]-b,y:m-(A[1]-y)},x=new lp(w,[0,0,p,m],1,f.#p/2,!0,.001);for(let T=0,R=A.length;T<R;T+=2)w.x=A[T]-b,w.y=m-(A[T+1]-y),x.add(w);const{id:S,clipPathId:E}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);f.#y({highlightOutlines:x.getOutlines(),highlightId:S,clipPathId:E}),f.#w(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=zt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(t);return Object.assign(n,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#z(),outlines:this.#N(n.rect)}),this.addComment(n),this.annotationElementId&&!this.#L(n)?null:(n.id=this.annotationElementId,n)}#L(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((n,s)=>n!==e[s])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class $A{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){he("Not implemented")}}class oe extends zt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:e,drawingOptions:n}){this.#t=t,this._drawingOptions||=n,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:n}=e.drawLayer.draw(oe._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return n}static _mergeSVGProperties(t,e){const n=new Set(Object.keys(t));for(const[s,o]of Object.entries(e))n.has(s)?Object.assign(t[s],o):t[s]=o;return t}static getDefaultDrawingOptions(t){he("Not implemented")}static get typesMap(){he("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const n=this.typesMap.get(t);n&&this._defaultDrawingOptions.updateProperty(n,e),this._currentParent&&(oe.#i.updateProperty(n,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const n=this.constructor.typesMap.get(t);n&&this._updateProperty(t,n,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[n,s]of this.typesMap)t.push([n,e[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[n,s]of this.constructor.typesMap)t.push([n,e[s]]);return t}_updateProperty(t,e,n){const s=this._drawingOptions,o=s[e],l=u=>{s.updateProperty(e,u);const h=this.#t.updateProperty(e,u);h&&this.#h(h),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,n,s]){const{parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[e,1-t,n*(l/o),s*(o/l)];case 180:return[1-t,1-e,n,s];case 270:return[1-e,t,n*(l/o),s*(o/l)];default:return[t,e,n,s]}}#d(){const{x:t,y:e,width:n,height:s,parentDimensions:[o,l],rotation:u}=this;switch(u){case 90:return[1-e,t,n*(o/l),s*(l/o)];case 180:return[1-t,1-e,n,s];case 270:return[e,1-t,n*(o/l),s*(l/o)];default:return[t,e,n,s]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:n,height:s,rotation:o,parentRotation:l,parentDimensions:[u,h]}=this;switch((o*4+l)/90){case 1:return[1-e-s,t,s,n];case 2:return[1-t-n,1-e-s,n,s];case 3:return[e,1-t-n,s,n];case 4:return[t,e-n*(u/h),s*(h/u),n*(u/h)];case 5:return[1-e,t,n*(u/h),s*(h/u)];case 6:return[1-t-s*(h/u),1-e,s*(h/u),n*(u/h)];case 7:return[e-n*(u/h),1-t-s*(h/u),n*(u/h),s*(h/u)];case 8:return[t-n,e-s,n,s];case 9:return[1-e,t-n,s,n];case 10:return[1-t,1-e,n,s];case 11:return[e-s,1-t,s,n];case 12:return[t-s*(h/u),e,s*(h/u),n*(u/h)];case 13:return[1-e-n*(u/h),t-s*(h/u),n*(u/h),s*(h/u)];case 14:return[1-t,1-e-n*(u/h),s*(h/u),n*(u/h)];case 15:return[e,1-t,n*(u/h),s*(h/u)];default:return[t,e,n,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,oe._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const n=super.render();n.classList.add("draw");const s=document.createElement("div");return n.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),n}static createDrawerInstance(t,e,n,s,o){he("Not implemented")}static startDrawing(t,e,n,s){const{target:o,offsetX:l,offsetY:u,pointerId:h,pointerType:f}=s;if(ce.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=t,{width:m,height:b}=o.getBoundingClientRect(),y=oe.#n=new AbortController,A=t.combinedSignal(y);if(ce.setPointer(f,h),window.addEventListener("pointerup",w=>{ce.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:A}),window.addEventListener("pointercancel",w=>{ce.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:A}),window.addEventListener("pointerdown",w=>{ce.isSamePointerType(w.pointerType)&&(ce.initializeAndAddPointerId(w.pointerId),oe.#i.isCancellable()&&(oe.#i.removeLastElement(),oe.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",oi,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",w=>{ce.isSameTimeStamp(w.timeStamp)&&Oe(w)},{signal:A}),t.toggleDrawing(),e._editorUndoBar?.hide(),oe.#i){t.drawLayer.updateProperties(this._currentDrawId,oe.#i.startNew(l,u,m,b,p));return}e.updateUIForDefaultProperties(this),oe.#i=this.createDrawerInstance(l,u,m,b,p),oe.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(oe.#r.toSVGProperties(),oe.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(ce.isSameTimeStamp(t.timeStamp),!oe.#i)return;const{offsetX:e,offsetY:n,pointerId:s}=t;if(ce.isSamePointerId(s)){if(ce.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,oe.#i.add(e,n)),ce.setTimeStamp(t.timeStamp),Oe(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,oe.#i=null,oe.#r=null,ce.clearTimeStamp()),oe.#n&&(oe.#n.abort(),oe.#n=null,ce.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,oe.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const n=oe.#i,s=this._currentDrawId,o=n.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(s,n.setLastElement(o))},undo:()=>{e.drawLayer.updateProperties(s,n.removeLastElement())},mustExec:!1,type:ne.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(ne.DRAW_STEP),!oe.#i.isEmpty()){const{pageDimensions:[n,s],scale:o}=e,l=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:oe.#i.getOutlines(n*o,s*o,o,this._INNER_MARGIN),drawingOptions:oe.#r,mustBeCommitted:!t});return this._cleanup(!0),l}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,n,s,o,l){he("Not implemented")}static async deserialize(t,e,n){const{rawDims:{pageWidth:s,pageHeight:o,pageX:l,pageY:u}}=e.viewport,h=this.deserializeDraw(l,u,s,o,this._INNER_MARGIN,t),f=await super.deserialize(t,e,n);return f.createDrawingOptions(t),f.#a({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,n]=this.pageTranslation,[s,o]=this.pageDimensions;return this.#t.serialize([e,n,s,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class fR{#t=new Float64Array(6);#e;#i;#n;#r;#a;#s="";#o=0;#c=new rl;#l;#d;constructor(t,e,n,s,o,l){this.#l=n,this.#d=s,this.#n=o,this.#r=l,[t,e]=this.#h(t,e);const u=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#i=[{line:u,points:this.#a}],this.#t.set(u,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return Ct._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[n,s,o,l]=this.#t.subarray(2,6),u=t-o,h=e-l;return Math.hypot(this.#l*u,this.#d*h)<=2?null:(this.#a.push(t,e),isNaN(n)?(this.#t.set([o,l,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([n,s,o,l,t,e],0),this.#e.push(...Ct.createBezierPoints(n,s,o,l,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,o){this.#l=n,this.#d=s,this.#n=o,[t,e]=this.#h(t,e);const l=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:l,points:this.#a}),this.#t.set(l,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let t=0,e=this.#i.length;t<e;t++){const{line:n,points:s}=this.#i[t];this.#e=n,this.#a=s,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=Ct.svgRound(this.#e[4]),e=Ct.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const s=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,s)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const s=Ct.svgRound(this.#e[10]),o=Ct.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${s} ${o}`,this.#o=12,this.#s}const n=[];this.#o===0&&(n.push(`M ${t} ${e}`),this.#o=6);for(let s=this.#o,o=this.#e.length;s<o;s+=6){const[l,u,h,f,p,m]=this.#e.slice(s,s+6).map(Ct.svgRound);n.push(`C${l} ${u} ${h} ${f} ${p} ${m}`)}return this.#s+=n.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,n,s){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,t,e,n,this.#n,this.#r,s),this.#t=null,this.#e=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class rl extends Ct{#t;#e=0;#i;#n;#r;#a;#s;#o;#c;build(t,e,n,s,o,l,u){this.#r=e,this.#a=n,this.#s=s,this.#o=o,this.#c=l,this.#i=u??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${Ct.svgRound(e[4])} ${Ct.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${Ct.svgRound(e[10])} ${Ct.svgRound(e[11])}`);continue}for(let n=6,s=e.length;n<s;n+=6){const[o,l,u,h,f,p]=e.subarray(n,n+6).map(Ct.svgRound);t.push(`C${o} ${l} ${u} ${h} ${f} ${p}`)}}return t.join("")}serialize([t,e,n,s],o){const l=[],u=[],[h,f,p,m]=this.#d();let b,y,A,w,x,S,E,T,R;switch(this.#o){case 0:R=Ct._rescale,b=t,y=e+s,A=n,w=-s,x=t+h*n,S=e+(1-f-m)*s,E=t+(h+p)*n,T=e+(1-f)*s;break;case 90:R=Ct._rescaleAndSwap,b=t,y=e,A=n,w=s,x=t+f*n,S=e+h*s,E=t+(f+m)*n,T=e+(h+p)*s;break;case 180:R=Ct._rescale,b=t+n,y=e,A=-n,w=s,x=t+(1-h-p)*n,S=e+f*s,E=t+(1-h)*n,T=e+(f+m)*s;break;case 270:R=Ct._rescaleAndSwap,b=t+n,y=e+s,A=-n,w=-s,x=t+(1-f-m)*n,S=e+(1-h-p)*s,E=t+(1-f)*n,T=e+(1-h)*s;break}for(const{line:D,points:O}of this.#n)l.push(R(D,b,y,A,w,o?new Array(D.length):null)),u.push(R(O,b,y,A,w,o?new Array(O.length):null));return{lines:l,points:u,rect:[x,S,E,T]}}static deserialize(t,e,n,s,o,{paths:{lines:l,points:u},rotation:h,thickness:f}){const p=[];let m,b,y,A,w;switch(h){case 0:w=Ct._rescale,m=-t/n,b=e/s+1,y=1/n,A=-1/s;break;case 90:w=Ct._rescaleAndSwap,m=-e/s,b=-t/n,y=1/s,A=1/n;break;case 180:w=Ct._rescale,m=t/n+1,b=-e/s,y=-1/n,A=1/s;break;case 270:w=Ct._rescaleAndSwap,m=e/s+1,b=t/n+1,y=-1/s,A=-1/n;break}if(!l){l=[];for(const S of u){const E=S.length;if(E===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1]]));continue}if(E===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,S[0],S[1],NaN,NaN,NaN,NaN,S[2],S[3]]));continue}const T=new Float32Array(3*(E-2));l.push(T);let[R,D,O,L]=S.subarray(0,4);T.set([NaN,NaN,NaN,NaN,R,D],0);for(let z=4;z<E;z+=2){const I=S[z],Q=S[z+1];T.set(Ct.createBezierPoints(R,D,O,L,I,Q),(z-2)*3),[R,D,O,L]=[O,L,I,Q]}}}for(let S=0,E=l.length;S<E;S++)p.push({line:w(l[S].map(T=>T??NaN),m,b,y,A),points:w(u[S].map(T=>T??NaN),m,b,y,A)});const x=new this.prototype.constructor;return x.build(p,n,s,1,h,f,o),x}#l(t=this.#c){const e=this.#i+t/2*this.#s;return this.#o%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#d(){const[t,e,n,s]=this.#t,[o,l]=this.#l(0);return[t+o,e+l,n-2*o,s-2*l]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#n){if(s.length<=12){for(let u=4,h=s.length;u<h;u+=6)Tt.pointBoundingBox(s[u],s[u+1],t);continue}let o=s[4],l=s[5];for(let u=6,h=s.length;u<h;u+=6){const[f,p,m,b,y,A]=s.subarray(u,u+6);Tt.bezierBoundingBox(o,l,f,p,m,b,y,A,t),o=y,l=A}}const[e,n]=this.#l();t[0]=dn(t[0]-e,0,1),t[1]=dn(t[1]-n,0,1),t[2]=dn(t[2]+e,0,1),t[3]=dn(t[3]+n,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,n]=this.#l();this.#c=t;const[s,o]=this.#l(),[l,u]=[s-e,o-n],h=this.#t;return h[0]-=l,h[1]-=u,h[2]+=2*l,h[3]+=2*u,h}updateParentDimensions([t,e],n){const[s,o]=this.#l();this.#r=t,this.#a=e,this.#s=n;const[l,u]=this.#l(),h=l-s,f=u-o,p=this.#t;return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(Ct.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ct.svgRound(t)} ${Ct.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let n=0,s=0,o=0,l=0,u=0,h=0;switch(this.#e){case 90:s=e/t,o=-t/e,u=t;break;case 180:n=-1,l=-1,u=t,h=e;break;case 270:s=-e/t,o=t/e,h=e;break;default:return""}return`matrix(${n} ${s} ${o} ${l} ${Ct.svgRound(u)} ${Ct.svgRound(h)})`}getPathResizingSVGProperties([t,e,n,s]){const[o,l]=this.#l(),[u,h,f,p]=this.#t;if(Math.abs(f-o)<=Ct.PRECISION||Math.abs(p-l)<=Ct.PRECISION){const w=t+n/2-(u+f/2),x=e+s/2-(h+p/2);return{path:{"transform-origin":`${Ct.svgRound(t)} ${Ct.svgRound(e)}`,transform:`${this.rotationTransform} translate(${w} ${x})`}}}const m=(n-2*o)/(f-2*o),b=(s-2*l)/(p-2*l),y=f/n,A=p/s;return{path:{"transform-origin":`${Ct.svgRound(u)} ${Ct.svgRound(h)}`,transform:`${this.rotationTransform} scale(${y} ${A}) translate(${Ct.svgRound(o)} ${Ct.svgRound(l)}) scale(${m} ${b}) translate(${Ct.svgRound(-o)} ${Ct.svgRound(-l)})`}}}getPathResizedSVGProperties([t,e,n,s]){const[o,l]=this.#l(),u=this.#t,[h,f,p,m]=u;if(u[0]=t,u[1]=e,u[2]=n,u[3]=s,Math.abs(p-o)<=Ct.PRECISION||Math.abs(m-l)<=Ct.PRECISION){const x=t+n/2-(h+p/2),S=e+s/2-(f+m/2);for(const{line:E,points:T}of this.#n)Ct._translate(E,x,S,E),Ct._translate(T,x,S,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ct.svgRound(t)} ${Ct.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(n-2*o)/(p-2*o),y=(s-2*l)/(m-2*l),A=-b*(h+o)+t+o,w=-y*(f+l)+e+l;if(b!==1||y!==1||A!==0||w!==0)for(const{line:x,points:S}of this.#n)Ct._rescale(x,A,w,b,y,x),Ct._rescale(S,A,w,b,y,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ct.svgRound(t)} ${Ct.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],n){const[s,o]=n,l=this.#t,u=t-l[0],h=e-l[1];if(this.#r===s&&this.#a===o)for(const{line:f,points:p}of this.#n)Ct._translate(f,u,h,f),Ct._translate(p,u,h,p);else{const f=this.#r/s,p=this.#a/o;this.#r=s,this.#a=o;for(const{line:m,points:b}of this.#n)Ct._rescale(m,u,h,f,p,m),Ct._rescale(b,u,h,f,p,b);l[2]*=f,l[3]*=p}return l[0]=t,l[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ct.svgRound(t)} ${Ct.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ct.svgRound(t[0])} ${Ct.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Tu extends $A{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:zt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Tu(this._viewParameters);return t.updateAll(this),t}}class nm extends oe{static _type="ink";static _editorType=Ht.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){zt.initialize(t,e),this._defaultDrawingOptions=new Tu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return jt(this,"typesMap",new Map([[ne.INK_THICKNESS,"stroke-width"],[ne.INK_COLOR,"stroke"],[ne.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,n,s,o){return new fR(t,e,n,s,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,n,s,o,l){return rl.deserialize(t,e,n,s,o,l)}static async deserialize(t,e,n){let s=null;if(t instanceof tm){const{data:{inkLists:l,rect:u,rotation:h,id:f,color:p,opacity:m,borderStyle:{rawWidth:b},popupRef:y,richText:A,contentsObj:w,creationDate:x,modificationDate:S},parent:{page:{pageNumber:E}}}=t;s=t={annotationType:Ht.INK,color:Array.from(p),thickness:b,opacity:m,paths:{points:l},boxes:null,pageIndex:E-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:y,richText:A,comment:w?.str||null,creationDate:x,modificationDate:S}}const o=await super.deserialize(t,e,n);return o._initialData=s,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||=new Ko(this),[["colorPicker",this._colorPicker]]}get colorType(){return ne.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:n}=this;e.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:n}){this._drawingOptions=nm.getDefaultDrawingOptions({stroke:Tt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":n})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":l}}=this,u=Object.assign(super.serialize(t),{color:zt._colorManager.convert(s),opacity:o,thickness:l,paths:{lines:e,points:n}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:e,thickness:n,opacity:s,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,u)=>l!==e[u])||t.thickness!==n||t.opacity!==s||t.pageIndex!==o}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:n}=this.serializeDraw(!1);return t.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class cp extends rl{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Pc=8,ko=3;class la{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,n,s,o,l,u){const h=this.#e(n,s,o,l);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,m=this.#i[2*p],b=this.#i[2*p+1];if(t[(n+m)*e+(s+b)]!==0)return p}return-1}static#r(t,e,n,s,o,l,u){const h=this.#e(n,s,o,l);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,m=this.#i[2*p],b=this.#i[2*p+1];if(t[(n+m)*e+(s+b)]!==0)return p}return-1}static#a(t,e,n,s){const o=t.length,l=new Int32Array(o);for(let p=0;p<o;p++)l[p]=t[p]<=s?1:0;for(let p=1;p<n-1;p++)l[p*e]=l[p*e+e-1]=0;for(let p=0;p<e;p++)l[p]=l[e*n-1-p]=0;let u=1,h;const f=[];for(let p=1;p<n-1;p++){h=1;for(let m=1;m<e-1;m++){const b=p*e+m,y=l[b];if(y===0)continue;let A=p,w=m;if(y===1&&l[b-1]===0)u+=1,w-=1;else if(y>=1&&l[b+1]===0)u+=1,w+=1,y>1&&(h=y);else{y!==1&&(h=Math.abs(y));continue}const x=[m,p],S=w===m+1,E={isHole:S,points:x,id:u,parent:0};f.push(E);let T;for(const at of f)if(at.id===h){T=at;break}T?T.isHole?E.parent=S?T.parent:h:E.parent=S?h:T.parent:E.parent=S?h:0;const R=this.#n(l,e,p,m,A,w,0);if(R===-1){l[b]=-u,l[b]!==1&&(h=Math.abs(l[b]));continue}let D=this.#i[2*R],O=this.#i[2*R+1];const L=p+D,z=m+O;A=L,w=z;let I=p,Q=m;for(;;){const at=this.#r(l,e,I,Q,A,w,1);D=this.#i[2*at],O=this.#i[2*at+1];const U=I+D,Z=Q+O;x.push(Z,U);const M=I*e+Q;if(l[M+1]===0?l[M]=-u:l[M]===1&&(l[M]=u),U===p&&Z===m&&I===L&&Q===z){l[b]!==1&&(h=Math.abs(l[b]));break}else A=I,w=Q,I=U,Q=Z}}}return f}static#s(t,e,n,s){if(n-e<=4){for(let L=e;L<n-2;L+=2)s.push(t[L],t[L+1]);return}const o=t[e],l=t[e+1],u=t[n-4]-o,h=t[n-3]-l,f=Math.hypot(u,h),p=u/f,m=h/f,b=p*l-m*o,y=h/u,A=1/f,w=Math.atan(y),x=Math.cos(w),S=Math.sin(w),E=A*(Math.abs(x)+Math.abs(S)),T=A*(1-E+E**2),R=Math.max(Math.atan(Math.abs(S+x)*T),Math.atan(Math.abs(S-x)*T));let D=0,O=e;for(let L=e+2;L<n-2;L+=2){const z=Math.abs(b-p*t[L+1]+m*t[L]);z>D&&(O=L,D=z)}D>(f*R)**2?(this.#s(t,e,O+2,s),this.#s(t,O,n,s)):s.push(o,l)}static#o(t){const e=[],n=t.length;return this.#s(t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e}static#c(t,e,n,s,o,l){const u=new Float32Array(l**2),h=-2*s**2,f=l>>1;for(let w=0;w<l;w++){const x=(w-f)**2;for(let S=0;S<l;S++)u[w*l+S]=Math.exp((x+(S-f)**2)/h)}const p=new Float32Array(256),m=-2*o**2;for(let w=0;w<256;w++)p[w]=Math.exp(w**2/m);const b=t.length,y=new Uint8Array(b),A=new Uint32Array(256);for(let w=0;w<n;w++)for(let x=0;x<e;x++){const S=w*e+x,E=t[S];let T=0,R=0;for(let O=0;O<l;O++){const L=w+O-f;if(!(L<0||L>=n))for(let z=0;z<l;z++){const I=x+z-f;if(I<0||I>=e)continue;const Q=t[L*e+I],at=u[O*l+z]*p[Math.abs(Q-E)];T+=Q*at,R+=at}}const D=y[S]=Math.round(T/R);A[D]++}return[y,A]}static#l(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e}static#d(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,o=1/0;for(let u=0,h=n.length;u<h;u++){const f=n[u]=t[u<<2];s=Math.max(s,f),o=Math.min(o,f)}const l=255/(s-o);for(let u=0,h=n.length;u<h;u++)n[u]=(n[u]-o)*l;return n}static#h(t){let e,n=-1/0,s=-1/0;const o=t.findIndex(h=>h!==0);let l=o,u=o;for(e=o;e<256;e++){const h=t[e];h>n&&(e-l>s&&(s=e-l,u=e-1),n=h,l=e)}for(e=u-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:n,height:s}=t,{maxDim:o}=this.#t;let l=n,u=s;if(n>o||s>o){let b=n,y=s,A=Math.log2(Math.max(n,s)/o);const w=Math.floor(A);A=A===w?w-1:w;for(let S=0;S<A;S++){l=Math.ceil(b/2),u=Math.ceil(y/2);const E=new OffscreenCanvas(l,u);E.getContext("2d").drawImage(t,0,0,b,y,0,0,l,u),b=l,y=u,t!==e&&t.close(),t=E.transferToImageBitmap()}const x=Math.min(o/l,o/u);l=Math.round(l*x),u=Math.round(u*x)}const f=new OffscreenCanvas(l,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,l,u),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,l,u);const p=f.getImageData(0,0,l,u).data;return[this.#d(p),l,u]}static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},o,l,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const m=200,b=p.font=`${n} ${s} ${m}px ${e}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:A,actualBoundingBoxAscent:w,actualBoundingBoxDescent:x,fontBoundingBoxAscent:S,fontBoundingBoxDescent:E,width:T}=p.measureText(t),R=1.5,D=Math.ceil(Math.max(Math.abs(y)+Math.abs(A)||0,T)*R),O=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||m,Math.abs(S)+Math.abs(E)||m)*R);f=new OffscreenCanvas(D,O),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=b,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,O),p.fillStyle="black",p.fillText(t,D*(R-1)/2,O*(3-R)/2);const L=this.#d(p.getImageData(0,0,D,O).data),z=this.#l(L),I=this.#h(z),Q=this.#a(L,D,O,I);return this.processDrawnLines({lines:{curves:Q,width:D,height:O},pageWidth:o,pageHeight:l,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,o){const[l,u,h]=this.#f(t),[f,p]=this.#c(l,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#h(p),b=this.#a(f,u,h,m);return this.processDrawnLines({lines:{curves:b,width:u,height:h},pageWidth:e,pageHeight:n,rotation:s,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:o,mustSmooth:l,areContours:u}){s%180!==0&&([e,n]=[n,e]);const{curves:h,width:f,height:p}=t,m=t.thickness??0,b=[],y=Math.min(e/f,n/p),A=y/e,w=y/n,x=[];for(const{points:E}of h){const T=l?this.#o(E):E;if(!T)continue;x.push(T);const R=T.length,D=new Float32Array(R),O=new Float32Array(3*(R===2?2:R-2));if(b.push({line:O,points:D}),R===2){D[0]=T[0]*A,D[1]=T[1]*w,O.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[L,z,I,Q]=T;L*=A,z*=w,I*=A,Q*=w,D.set([L,z,I,Q],0),O.set([NaN,NaN,NaN,NaN,L,z],0);for(let at=4;at<R;at+=2){const U=D[at]=T[at]*A,Z=D[at+1]=T[at+1]*w;O.set(Ct.createBezierPoints(L,z,I,Q,U,Z),(at-2)*3),[L,z,I,Q]=[I,Q,U,Z]}}if(b.length===0)return null;const S=u?new cp:new rl;return S.build(b,e,n,1,s,u?0:m,o),{outline:S,newCurves:x,areContours:u,thickness:m,width:f,height:p}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:o}){let l=1/0,u=-1/0,h=0;for(const T of t){h+=T.length;for(let R=2,D=T.length;R<D;R++){const O=T[R]-T[R-2];l=Math.min(l,O),u=Math.max(u,O)}}let f;l>=-128&&u<=127?f=Int8Array:l>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=t.length,m=Pc+ko*p,b=new Uint32Array(m);let y=0;b[y++]=m*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,b[y++]=0,b[y++]=s,b[y++]=o,b[y++]=e?0:1,b[y++]=Math.max(0,Math.floor(n??0)),b[y++]=p,b[y++]=f.BYTES_PER_ELEMENT;for(const T of t)b[y++]=T.length-2,b[y++]=T[0],b[y++]=T[1];const A=new CompressionStream("deflate-raw"),w=A.writable.getWriter();await w.ready,w.write(b);const x=f.prototype.constructor;for(const T of t){const R=new x(T.length-2);for(let D=2,O=T.length;D<O;D++)R[D-2]=T[D]-T[D-2];w.write(R)}w.close();const S=await new Response(A.readable).arrayBuffer();return new Uint8Array(S).toBase64()}static async decompressSignature(t){try{const e=Uint8Array.fromBase64(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),o=s.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let l=null,u=0;for await(const T of n)l||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),l.set(T,u),u+=T.length;const h=new Uint32Array(l.buffer,0,l.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],m=h[3],b=h[4]===0,y=h[5],A=h[6],w=h[7],x=[],S=(Pc+ko*A)*Uint32Array.BYTES_PER_ELEMENT;let E;switch(w){case Int8Array.BYTES_PER_ELEMENT:E=new Int8Array(l.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:E=new Int16Array(l.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:E=new Int32Array(l.buffer,S);break}u=0;for(let T=0;T<A;T++){const R=h[ko*T+Pc],D=new Float32Array(R+2);x.push(D);for(let O=0;O<ko-1;O++)D[O]=h[ko*T+Pc+O+1];for(let O=0;O<R;O++)D[O+2]=D[O]+E[u++]}return{areContours:b,thickness:y,outlines:x,width:p,height:m}}catch(e){return Ut(`decompressSignature: ${e}`),null}}}class im extends $A{constructor(){super(),super.updateProperties({fill:zt._defaultLineColor,"stroke-width":0})}clone(){const t=new im;return t.updateAll(this),t}}class sm extends Tu{constructor(t){super(t),super.updateProperties({stroke:zt._defaultLineColor,"stroke-width":1})}clone(){const t=new sm(this._viewParameters);return t.updateAll(this),t}}class Ci extends oe{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=Ht.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){zt.initialize(t,e),this._defaultDrawingOptions=new im,this._defaultDrawnSignatureOptions=new sm(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return jt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:s,mustSmooth:o,areContours:l,description:u,uuid:h,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:m},rotation:b}=this.parent.viewport,y=la.processDrawnLines({lines:s,pageWidth:p,pageHeight:m,rotation:b,innerMargin:Ci._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:n,width:s,height:o}=this.#i,l=Math.max(s,o),u=la.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:n,width:s,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,n,s){const{x:o,y:l}=this,{outline:u}=this.#i=t;this.#t=u instanceof cp,this.description=n;let h;this.#t?h=Ci.getDefaultDrawingOptions():(h=Ci._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let p=e/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(s),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!s,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:s}=this.parent.viewport;return la.process(t,e,n,s,Ci._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:o}=this.parent.viewport;return la.extractContoursFromText(t,e,n,s,o,Ci._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:n},rotation:s}=this.parent.viewport;return la.processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:Ci._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Ci.getDefaultDrawingOptions():(this._drawingOptions=Ci._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:n}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:s});return this.addComment(o),t?(o.paths={lines:e,points:n},o.uuid=this.#n,o.isCopy=!0):o.lines=e,this.#e&&(o.accessibilityData={type:"Figure",alt:this.#e}),o}static deserializeDraw(t,e,n,s,o,l){return l.areContours?cp.deserialize(t,e,n,s,o,l):rl.deserialize(t,e,n,s,o,l)}static async deserialize(t,e,n){const s=await super.deserialize(t,e,n);return s.#t=t.areContours,s.description=t.accessibilityData?.alt||"",s.#n=t.uuid,s}}class pR extends zt{#t=null;#e=null;#i=null;#n=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=Ht.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){zt.initialize(t,e)}static isHandlingMimeForPasting(t){return tp.includes(t)}static paste(t,e){e.pasteEditor({mode:Ht.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#m()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,u=await n.guess({name:"altText",request:{data:s,width:o,height:l,channels:s.length/(o*l)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),e&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(n=>this.#h(n,!0)).finally(()=>this.#f());return}if(this.#n){const n=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(n).then(s=>this.#h(s)).finally(()=>this.#f());return}if(this.#r){const n=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(n).then(s=>this.#h(s)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=tp.join(",");const e=this._uiManager._signal;this.#i=new Promise(n=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(s)}n()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),n()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:n,bitmap:s}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(this.#e=n,s&&(this.#t=s),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:n}=this.#t;const[s,o]=this.pageDimensions,l=.75;if(this.width)e=this.width*s,n=this.height*o;else if(e>l*s||n>l*o){const h=Math.min(l*s/e,l*o/n);e*=h,n*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=e/s,this.height=n/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,n=!1){t||(t=224);const{width:s,height:o}=this.#t,l=new Ri;let u=this.#t,h=s,f=o,p=null;if(e){if(s>e||o>e){const O=Math.min(e/s,e/o);h=Math.floor(s*O),f=Math.floor(o*O)}p=document.createElement("canvas");const b=p.width=Math.ceil(h*l.sx),y=p.height=Math.ceil(f*l.sy);this.#l||(u=this.#u(b,y));const A=p.getContext("2d");A.filter=this._uiManager.hcmFilter;let w="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":LM.isDarkMode&&(w="#8f8f9d",x="#42414d");const S=15,E=S*l.sx,T=S*l.sy,R=new OffscreenCanvas(E*2,T*2),D=R.getContext("2d");D.fillStyle=w,D.fillRect(0,0,E*2,T*2),D.fillStyle=x,D.fillRect(0,0,E,T),D.fillRect(E,T,E,T),A.fillStyle=A.createPattern(R,"repeat"),A.fillRect(0,0,b,y),A.drawImage(u,0,0,u.width,u.height,0,0,b,y)}let m=null;if(n){let b,y;if(l.symmetric&&u.width<t&&u.height<t)b=u.width,y=u.height;else if(u=this.#t,s>t||o>t){const x=Math.min(t/s,t/o);b=Math.floor(s*x),y=Math.floor(o*x),this.#l||(u=this.#u(b,y))}const w=new OffscreenCanvas(b,y).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,b,y),m={width:b,height:y,data:w.getImageData(0,0,b,y).data}}return{canvas:p,width:h,height:f,imageData:m}}#u(t,e){const{width:n,height:s}=this.#t;let o=n,l=s,u=this.#t;for(;o>2*t||l>2*e;){const h=o,f=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*e&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const p=new OffscreenCanvas(o,l);p.getContext("2d").drawImage(u,0,0,h,f,0,0,o,l),u=p.transferToImageBitmap()}return u}#p(){const[t,e]=this.parentDimensions,{width:n,height:s}=this,o=new Ri,l=Math.ceil(n*t*o.sx),u=Math.ceil(s*e*o.sy),h=this.#s;if(!h||h.width===l&&h.height===u)return;h.width=l,h.height=u;const f=this.#l?this.#t:this.#u(l,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,l,u)}#b(t){if(t){if(this.#l){const s=this._uiManager.imageManager.getSvgUrl(this.#e);if(s)return s}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,n]=this.pageDimensions,s=Math.round(this.width*e*Ea.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Ea.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(s,o);return l.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,s,o),l.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,n){let s=null,o=!1;if(t instanceof YA){const{data:{rect:w,rotation:x,id:S,structParent:E,popupRef:T,richText:R,contentsObj:D,creationDate:O,modificationDate:L},container:z,parent:{page:{pageNumber:I}},canvas:Q}=t;let at,U;Q?(delete t.canvas,{id:at,bitmap:U}=n.imageManager.getFromCanvas(z.id,Q),Q.remove()):(o=!0,t._hasNoCanvas=!0);const Z=(await e._structTree.getAriaAttributes(`${ma}${S}`))?.get("aria-label")||"";s=t={annotationType:Ht.STAMP,bitmapId:at,bitmap:U,pageIndex:I-1,rect:w.slice(0),rotation:x,annotationElementId:S,id:S,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:E,popupRef:T,richText:R,comment:D?.str||null,creationDate:O,modificationDate:L}}const l=await super.deserialize(t,e,n),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:p,isSvg:m,accessibilityData:b}=t;o?(n.addMissingCanvas(t.id,l),l.#o=!0):p&&n.imageManager.isValidId(p)?(l.#e=p,h&&(l.#t=h)):l.#n=f,l.#l=m;const[y,A]=l.pageDimensions;return l.width=(u[2]-u[0])/y,l.height=(u[3]-u[1])/A,b&&(l.altTextData=b),l._initialData=s,t.comment&&l.setCommentData(t),l.#d=!!s,l}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(n),t)return n.bitmapUrl=this.#b(!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:s,altText:o}=this.serializeAltText(!1);if(!s&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(n);return u.isSame?null:(u.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1,n.id=this.annotationElementId,delete n.bitmapId,n)}if(e===null)return n;e.stamps||=new Map;const l=this.#l?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:l,serialized:n}),n.bitmap=this.#b(!1);else if(this.#l){const u=e.stamps.get(this.#e);l>u.area&&(u.area=l,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return n}#v(t){const{pageIndex:e,accessibilityData:{altText:n}}=this._initialData,s=t.pageIndex===e,o=(t.accessibilityData?.alt||"")===n;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&s&&o,isSameAltText:o}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class ts{#t;#e=!1;#i=null;#n=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([nn,nm,pR,ze,Ci].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:o,annotationLayer:l,drawLayer:u,textLayer:h,viewport:f,l10n:p}){const m=[...ts.#p.values()];if(!ts._initialized){ts._initialized=!0;for(const b of m)b.initialize(p,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=e,this.div=n,this.#t=o,this.#i=l,this.viewport=f,this.#h=h,this.drawLayer=u,this._structTree=s,this.#u.addLayer(this)}updatePageIndex(t){this.pageIndex=t}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===Ht.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case Ht.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Ht.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Ht.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===Ht.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const n of ts.#p.values())e.toggle(`${n._type}Editing`,t===n._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.togglePointerEvents(t)}get#b(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const n of this.#b)n.enableEditing(),n.show(!0),n.annotationElementId&&(this.#u.removeChangedExistingAnnotation(n),t.add(n.annotationElementId));const e=this.#i;if(e)for(const n of e.getEditableAnnotations()){if(n.hide(),this.#u.isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const s=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:h,timeStamp:f}=o,p=this.#m;if(f-p>500){this.#m=f;return}this.#m=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const b=document.elementsFromPoint(u,h);if(m.toggle("getElements",!1),!this.div.contains(b[0]))return;let y;const A=new RegExp(`^${Yo}[0-9]+$`);for(const x of b)if(A.test(x.id)){y=x.id;break}if(!y)return;const w=this.#a.get(y);w?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),w.dblclick(o))},{signal:s,capture:!0})}const t=this.#i,e=[];if(t){const s=new Map,o=new Map;for(const u of this.#b){if(u.disableEditing(),!u.annotationElementId){e.push(u);continue}if(u.serialize()!==null){s.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const l=t.getEditableAnnotations();for(const u of l){const{id:h}=u.data;if(this.#u.isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=o.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=s.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of ts.#p.values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:n}=Ze.platform;if(t.button!==0||t.ctrlKey&&n)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ze.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),zt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#y(){return ts.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#y;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:n,offsetY:s}=this.#x(),o=this.getNextId(),l=this.#E({parent:this,id:o,x:n,y:s,uiManager:this.#u,isCentered:!0,...e});l&&this.add(l)}async deserialize(t){return await ts.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),o=this.#E({parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...n});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:t,y:e,width:n,height:s}=this.boundingClientRect,o=Math.max(0,t),l=Math.max(0,e),u=Math.min(window.innerWidth,t+n),h=Math.min(window.innerHeight,e+s),f=(o+u)/2-t,p=(l+h)/2-e,[m,b]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:m,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#x(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Ze.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const n=this.#u.getMode();if(n===Ht.STAMP||n===Ht.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===Ht.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Ze.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const n=this.#u.getActive();this.#e=!n||n.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#y.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,e,n){const s=this.#u.findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,fr(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,fr(this.div,{rotation:n}),e!==n)for(const s of this.#a.values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class un{#t=null;#e=new Map;#i=new Map;static#n=0;setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return jt(this,"_svgFactory",new ou)}static#r(t,[e,n,s,o]){const{style:l}=t;l.top=`${100*n}%`,l.left=`${100*e}%`,l.width=`${100*s}%`,l.height=`${100*o}%`}#a(){const t=un._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const n=un._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const o=un._svgFactory.createElement("use");return n.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),s}#o(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)}draw(t,e=!1,n=!1){const s=un.#n++,o=this.#a(),l=un._svgFactory.createElement("defs");o.append(l);const u=un._svgFactory.createElement("path");l.append(u);const h=`path_${s}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(s,u);const f=n?this.#s(l,h):null,p=un._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,t),this.#e.set(s,o),{id:s,clipPathId:`url(#${f})`}}drawOutline(t,e){const n=un.#n++,s=this.#a(),o=un._svgFactory.createElement("defs");s.append(o);const l=un._svgFactory.createElement("path");o.append(l);const u=`path_${n}`;l.setAttribute("id",u),l.setAttribute("vector-effect","non-scaling-stroke");let h;if(e){const m=un._svgFactory.createElement("mask");o.append(m),h=`mask_${n}`,m.setAttribute("id",h),m.setAttribute("maskUnits","objectBoundingBox");const b=un._svgFactory.createElement("rect");m.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const y=un._svgFactory.createElement("use");m.append(y),y.setAttribute("href",`#${u}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const f=un._svgFactory.createElement("use");s.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return s.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,t),this.#e.set(n,s),n}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:n,bbox:s,rootClass:o,path:l}=e,u=typeof t=="number"?this.#e.get(t):t;if(u){if(n&&this.#o(u,n),s&&un.#r(u,s),o){const{classList:h}=u;for(const[f,p]of Object.entries(o))h.toggle(f,p)}if(l){const f=u.firstElementChild.firstElementChild;this.#o(f,l)}}}updateParent(t,e){if(e===this)return;const n=this.#e.get(t);n&&(e.#t.append(n),this.#e.delete(t),e.#e.set(t,n))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:op};globalThis.pdfjsLib={AbortException:Ls,AnnotationEditorLayer:ts,AnnotationEditorParamsType:ne,AnnotationEditorType:Ht,AnnotationEditorUIManager:Bs,AnnotationLayer:em,AnnotationMode:Rs,AnnotationType:Ge,applyOpacity:zM,build:GD,ColorPicker:si,createValidAbsoluteUrl:pA,CSSConstants:BM,DOMSVGFactory:ou,DrawLayer:un,FeatureTest:Ze,fetchData:el,findContrastColor:FM,getDocument:FA,getFilenameFromUrl:DM,getPdfFilenameFromUrl:RM,getRGB:il,getUuid:gA,getXfaPageViewport:PM,GlobalWorkerOptions:Sa,ImageKind:Yc,InvalidPDFException:Qf,isDataScheme:vu,isPdfFile:Xp,isValidExplicitDest:WM,MathClamp:dn,noContextMenu:oi,normalizeUnicode:kM,OPS:qo,OutputScale:Ri,PagesMapper:le,PasswordResponses:yM,PDFDataRangeTransport:IA,PDFDateString:Jf,PDFWorker:Wo,PermissionFlag:bM,PixelsPerInch:Ea,RenderingCancelledException:Gp,renderRichText:yA,ResponseException:ru,setLayerDimensions:fr,shadow:jt,SignatureExtractor:la,stopEvent:Oe,SupportedImageMimeTypes:tp,TextLayer:Un,TouchManager:wu,updateUrlHash:mA,Util:Tt,VerbosityLevel:mu,version:HD,XfaLayer:bA};const mR="/docshit/assets/pdf.worker.min-wgc6bjNh.mjs";var rm={};(function a(t,e,n,s){var o=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),l=typeof Path2D=="function"&&typeof DOMMatrix=="function",u=(function(){if(!t.OffscreenCanvas)return!1;try{var B=new OffscreenCanvas(1,1),_=B.getContext("2d");_.fillRect(0,0,1,1);var N=B.transferToImageBitmap();_.createPattern(N,"no-repeat")}catch{return!1}return!0})();function h(){}function f(B){var _=e.exports.Promise,N=_!==void 0?_:t.Promise;return typeof N=="function"?new N(B):(B(h,h),null)}var p=(function(B,_){return{transform:function(N){if(B)return N;if(_.has(N))return _.get(N);var X=new OffscreenCanvas(N.width,N.height),K=X.getContext("2d");return K.drawImage(N,0,0),_.set(N,X),X},clear:function(){_.clear()}}})(u,new Map),m=(function(){var B=Math.floor(16.666666666666668),_,N,X={},K=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(_=function($){var ht=Math.random();return X[ht]=requestAnimationFrame(function pt(At){K===At||K+B-1<At?(K=At,delete X[ht],$()):X[ht]=requestAnimationFrame(pt)}),ht},N=function($){X[$]&&cancelAnimationFrame(X[$])}):(_=function($){return setTimeout($,B)},N=function($){return clearTimeout($)}),{frame:_,cancel:N}})(),b=(function(){var B,_,N={};function X(K){function $(ht,pt){K.postMessage({options:ht||{},callback:pt})}K.init=function(pt){var At=pt.transferControlToOffscreen();K.postMessage({canvas:At},[At])},K.fire=function(pt,At,vt){if(_)return $(pt,null),_;var Ot=Math.random().toString(36).slice(2);return _=f(function(Mt){function It(qt){qt.data.callback===Ot&&(delete N[Ot],K.removeEventListener("message",It),_=null,p.clear(),vt(),Mt())}K.addEventListener("message",It),$(pt,Ot),N[Ot]=It.bind(null,{data:{callback:Ot}})}),_},K.reset=function(){K.postMessage({reset:!0});for(var pt in N)N[pt](),delete N[pt]}}return function(){if(B)return B;if(!n&&o){var K=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{B=new Worker(URL.createObjectURL(new Blob([K])))}catch($){return typeof console<"u"&&typeof console.warn=="function"&&console.warn(" Could not load worker",$),null}X(B)}return B}})(),y={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function A(B,_){return _?_(B):B}function w(B){return B!=null}function x(B,_,N){return A(B&&w(B[_])?B[_]:y[_],N)}function S(B){return B<0?0:Math.floor(B)}function E(B,_){return Math.floor(Math.random()*(_-B))+B}function T(B){return parseInt(B,16)}function R(B){return B.map(D)}function D(B){var _=String(B).replace(/[^0-9a-f]/gi,"");return _.length<6&&(_=_[0]+_[0]+_[1]+_[1]+_[2]+_[2]),{r:T(_.substring(0,2)),g:T(_.substring(2,4)),b:T(_.substring(4,6))}}function O(B){var _=x(B,"origin",Object);return _.x=x(_,"x",Number),_.y=x(_,"y",Number),_}function L(B){B.width=document.documentElement.clientWidth,B.height=document.documentElement.clientHeight}function z(B){var _=B.getBoundingClientRect();B.width=_.width,B.height=_.height}function I(B){var _=document.createElement("canvas");return _.style.position="fixed",_.style.top="0px",_.style.left="0px",_.style.pointerEvents="none",_.style.zIndex=B,_}function Q(B,_,N,X,K,$,ht,pt,At){B.save(),B.translate(_,N),B.rotate($),B.scale(X,K),B.arc(0,0,1,ht,pt,At),B.restore()}function at(B){var _=B.angle*(Math.PI/180),N=B.spread*(Math.PI/180);return{x:B.x,y:B.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:B.startVelocity*.5+Math.random()*B.startVelocity,angle2D:-_+(.5*N-Math.random()*N),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:B.color,shape:B.shape,tick:0,totalTicks:B.ticks,decay:B.decay,drift:B.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:B.gravity*3,ovalScalar:.6,scalar:B.scalar,flat:B.flat}}function U(B,_){_.x+=Math.cos(_.angle2D)*_.velocity+_.drift,_.y+=Math.sin(_.angle2D)*_.velocity+_.gravity,_.velocity*=_.decay,_.flat?(_.wobble=0,_.wobbleX=_.x+10*_.scalar,_.wobbleY=_.y+10*_.scalar,_.tiltSin=0,_.tiltCos=0,_.random=1):(_.wobble+=_.wobbleSpeed,_.wobbleX=_.x+10*_.scalar*Math.cos(_.wobble),_.wobbleY=_.y+10*_.scalar*Math.sin(_.wobble),_.tiltAngle+=.1,_.tiltSin=Math.sin(_.tiltAngle),_.tiltCos=Math.cos(_.tiltAngle),_.random=Math.random()+2);var N=_.tick++/_.totalTicks,X=_.x+_.random*_.tiltCos,K=_.y+_.random*_.tiltSin,$=_.wobbleX+_.random*_.tiltCos,ht=_.wobbleY+_.random*_.tiltSin;if(B.fillStyle="rgba("+_.color.r+", "+_.color.g+", "+_.color.b+", "+(1-N)+")",B.beginPath(),l&&_.shape.type==="path"&&typeof _.shape.path=="string"&&Array.isArray(_.shape.matrix))B.fill(j(_.shape.path,_.shape.matrix,_.x,_.y,Math.abs($-X)*.1,Math.abs(ht-K)*.1,Math.PI/10*_.wobble));else if(_.shape.type==="bitmap"){var pt=Math.PI/10*_.wobble,At=Math.abs($-X)*.1,vt=Math.abs(ht-K)*.1,Ot=_.shape.bitmap.width*_.scalar,Mt=_.shape.bitmap.height*_.scalar,It=new DOMMatrix([Math.cos(pt)*At,Math.sin(pt)*At,-Math.sin(pt)*vt,Math.cos(pt)*vt,_.x,_.y]);It.multiplySelf(new DOMMatrix(_.shape.matrix));var qt=B.createPattern(p.transform(_.shape.bitmap),"no-repeat");qt.setTransform(It),B.globalAlpha=1-N,B.fillStyle=qt,B.fillRect(_.x-Ot/2,_.y-Mt/2,Ot,Mt),B.globalAlpha=1}else if(_.shape==="circle")B.ellipse?B.ellipse(_.x,_.y,Math.abs($-X)*_.ovalScalar,Math.abs(ht-K)*_.ovalScalar,Math.PI/10*_.wobble,0,2*Math.PI):Q(B,_.x,_.y,Math.abs($-X)*_.ovalScalar,Math.abs(ht-K)*_.ovalScalar,Math.PI/10*_.wobble,0,2*Math.PI);else if(_.shape==="star")for(var k=Math.PI/2*3,ft=4*_.scalar,ot=8*_.scalar,V=_.x,F=_.y,W=5,gt=Math.PI/W;W--;)V=_.x+Math.cos(k)*ot,F=_.y+Math.sin(k)*ot,B.lineTo(V,F),k+=gt,V=_.x+Math.cos(k)*ft,F=_.y+Math.sin(k)*ft,B.lineTo(V,F),k+=gt;else B.moveTo(Math.floor(_.x),Math.floor(_.y)),B.lineTo(Math.floor(_.wobbleX),Math.floor(K)),B.lineTo(Math.floor($),Math.floor(ht)),B.lineTo(Math.floor(X),Math.floor(_.wobbleY));return B.closePath(),B.fill(),_.tick<_.totalTicks}function Z(B,_,N,X,K){var $=_.slice(),ht=B.getContext("2d"),pt,At,vt=f(function(Ot){function Mt(){pt=At=null,ht.clearRect(0,0,X.width,X.height),p.clear(),K(),Ot()}function It(){n&&!(X.width===s.width&&X.height===s.height)&&(X.width=B.width=s.width,X.height=B.height=s.height),!X.width&&!X.height&&(N(B),X.width=B.width,X.height=B.height),ht.clearRect(0,0,X.width,X.height),$=$.filter(function(qt){return U(ht,qt)}),$.length?pt=m.frame(It):Mt()}pt=m.frame(It),At=Mt});return{addFettis:function(Ot){return $=$.concat(Ot),vt},canvas:B,promise:vt,reset:function(){pt&&m.cancel(pt),At&&At()}}}function M(B,_){var N=!B,X=!!x(_||{},"resize"),K=!1,$=x(_,"disableForReducedMotion",Boolean),ht=o&&!!x(_||{},"useWorker"),pt=ht?b():null,At=N?L:z,vt=B&&pt?!!B.__confetti_initialized:!1,Ot=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Mt;function It(k,ft,ot){for(var V=x(k,"particleCount",S),F=x(k,"angle",Number),W=x(k,"spread",Number),gt=x(k,"startVelocity",Number),wt=x(k,"decay",Number),it=x(k,"gravity",Number),St=x(k,"drift",Number),Et=x(k,"colors",R),xt=x(k,"ticks",Number),Lt=x(k,"shapes"),re=x(k,"scalar"),Xt=!!x(k,"flat"),sn=O(k),li=V,pn=[],Ni=B.width*sn.x,de=B.height*sn.y;li--;)pn.push(at({x:Ni,y:de,angle:F,spread:W,startVelocity:gt,color:Et[li%Et.length],shape:Lt[E(0,Lt.length)],ticks:xt,decay:wt,gravity:it,drift:St,scalar:re,flat:Xt}));return Mt?Mt.addFettis(pn):(Mt=Z(B,pn,At,ft,ot),Mt.promise)}function qt(k){var ft=$||x(k,"disableForReducedMotion",Boolean),ot=x(k,"zIndex",Number);if(ft&&Ot)return f(function(gt){gt()});N&&Mt?B=Mt.canvas:N&&!B&&(B=I(ot),document.body.appendChild(B)),X&&!vt&&At(B);var V={width:B.width,height:B.height};pt&&!vt&&pt.init(B),vt=!0,pt&&(B.__confetti_initialized=!0);function F(){if(pt){var gt={getBoundingClientRect:function(){if(!N)return B.getBoundingClientRect()}};At(gt),pt.postMessage({resize:{width:gt.width,height:gt.height}});return}V.width=V.height=null}function W(){Mt=null,X&&(K=!1,t.removeEventListener("resize",F)),N&&B&&(document.body.contains(B)&&document.body.removeChild(B),B=null,vt=!1)}return X&&!K&&(K=!0,t.addEventListener("resize",F,!1)),pt?pt.fire(k,V,W):It(k,V,W)}return qt.reset=function(){pt&&pt.reset(),Mt&&Mt.reset()},qt}var tt;function H(){return tt||(tt=M(null,{useWorker:!0,resize:!0})),tt}function j(B,_,N,X,K,$,ht){var pt=new Path2D(B),At=new Path2D;At.addPath(pt,new DOMMatrix(_));var vt=new Path2D;return vt.addPath(At,new DOMMatrix([Math.cos(ht)*K,Math.sin(ht)*K,-Math.sin(ht)*$,Math.cos(ht)*$,N,X])),vt}function lt(B){if(!l)throw new Error("path confetti are not supported in this browser");var _,N;typeof B=="string"?_=B:(_=B.path,N=B.matrix);var X=new Path2D(_),K=document.createElement("canvas"),$=K.getContext("2d");if(!N){for(var ht=1e3,pt=ht,At=ht,vt=0,Ot=0,Mt,It,qt=0;qt<ht;qt+=2)for(var k=0;k<ht;k+=2)$.isPointInPath(X,qt,k,"nonzero")&&(pt=Math.min(pt,qt),At=Math.min(At,k),vt=Math.max(vt,qt),Ot=Math.max(Ot,k));Mt=vt-pt,It=Ot-At;var ft=10,ot=Math.min(ft/Mt,ft/It);N=[ot,0,0,ot,-Math.round(Mt/2+pt)*ot,-Math.round(It/2+At)*ot]}return{type:"path",path:_,matrix:N}}function st(B){var _,N=1,X="#000000",K='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof B=="string"?_=B:(_=B.text,N="scalar"in B?B.scalar:N,K="fontFamily"in B?B.fontFamily:K,X="color"in B?B.color:X);var $=10*N,ht=""+$+"px "+K,pt=new OffscreenCanvas($,$),At=pt.getContext("2d");At.font=ht;var vt=At.measureText(_),Ot=Math.ceil(vt.actualBoundingBoxRight+vt.actualBoundingBoxLeft),Mt=Math.ceil(vt.actualBoundingBoxAscent+vt.actualBoundingBoxDescent),It=2,qt=vt.actualBoundingBoxLeft+It,k=vt.actualBoundingBoxAscent+It;Ot+=It+It,Mt+=It+It,pt=new OffscreenCanvas(Ot,Mt),At=pt.getContext("2d"),At.font=ht,At.fillStyle=X,At.fillText(_,qt,k);var ft=1/N;return{type:"bitmap",bitmap:pt.transferToImageBitmap(),matrix:[ft,0,0,ft,-Ot*ft/2,-Mt*ft/2]}}e.exports=function(){return H().apply(this,arguments)},e.exports.reset=function(){H().reset()},e.exports.create=M,e.exports.shapeFromPath=lt,e.exports.shapeFromText=st})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),rm,!1);const gR=rm.exports;rm.exports.create;function Oc(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Af={exports:{}};var h1;function bR(){return h1||(h1=1,(function(a,t){(function(e){a.exports=e()})(function(){return(function e(n,s,o){function l(f,p){if(!s[f]){if(!n[f]){var m=typeof Oc=="function"&&Oc;if(!p&&m)return m(f,!0);if(u)return u(f,!0);var b=new Error("Cannot find module '"+f+"'");throw b.code="MODULE_NOT_FOUND",b}var y=s[f]={exports:{}};n[f][0].call(y.exports,function(A){var w=n[f][1][A];return l(w||A)},y,y.exports,e,n,s,o)}return s[f].exports}for(var u=typeof Oc=="function"&&Oc,h=0;h<o.length;h++)l(o[h]);return l})({1:[function(e,n,s){var o=e("./utils"),l=e("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";s.encode=function(h){for(var f,p,m,b,y,A,w,x=[],S=0,E=h.length,T=E,R=o.getTypeOf(h)!=="string";S<h.length;)T=E-S,m=R?(f=h[S++],p=S<E?h[S++]:0,S<E?h[S++]:0):(f=h.charCodeAt(S++),p=S<E?h.charCodeAt(S++):0,S<E?h.charCodeAt(S++):0),b=f>>2,y=(3&f)<<4|p>>4,A=1<T?(15&p)<<2|m>>6:64,w=2<T?63&m:64,x.push(u.charAt(b)+u.charAt(y)+u.charAt(A)+u.charAt(w));return x.join("")},s.decode=function(h){var f,p,m,b,y,A,w=0,x=0,S="data:";if(h.substr(0,S.length)===S)throw new Error("Invalid base64 input, it looks like a data url.");var E,T=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===u.charAt(64)&&T--,h.charAt(h.length-2)===u.charAt(64)&&T--,T%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=l.uint8array?new Uint8Array(0|T):new Array(0|T);w<h.length;)f=u.indexOf(h.charAt(w++))<<2|(b=u.indexOf(h.charAt(w++)))>>4,p=(15&b)<<4|(y=u.indexOf(h.charAt(w++)))>>2,m=(3&y)<<6|(A=u.indexOf(h.charAt(w++))),E[x++]=f,y!==64&&(E[x++]=p),A!==64&&(E[x++]=m);return E}},{"./support":30,"./utils":32}],2:[function(e,n,s){var o=e("./external"),l=e("./stream/DataWorker"),u=e("./stream/Crc32Probe"),h=e("./stream/DataLengthProbe");function f(p,m,b,y,A){this.compressedSize=p,this.uncompressedSize=m,this.crc32=b,this.compression=y,this.compressedContent=A}f.prototype={getContentWorker:function(){var p=new l(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),m=this;return p.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),p},getCompressedWorker:function(){return new l(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(p,m,b){return p.pipe(new u).pipe(new h("uncompressedSize")).pipe(m.compressWorker(b)).pipe(new h("compressedSize")).withStreamInfo("compression",m)},n.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,s){var o=e("./stream/GenericWorker");s.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},s.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,s){var o=e("./utils"),l=(function(){for(var u,h=[],f=0;f<256;f++){u=f;for(var p=0;p<8;p++)u=1&u?3988292384^u>>>1:u>>>1;h[f]=u}return h})();n.exports=function(u,h){return u!==void 0&&u.length?o.getTypeOf(u)!=="string"?(function(f,p,m,b){var y=l,A=b+m;f^=-1;for(var w=b;w<A;w++)f=f>>>8^y[255&(f^p[w])];return-1^f})(0|h,u,u.length,0):(function(f,p,m,b){var y=l,A=b+m;f^=-1;for(var w=b;w<A;w++)f=f>>>8^y[255&(f^p.charCodeAt(w))];return-1^f})(0|h,u,u.length,0):0}},{"./utils":32}],5:[function(e,n,s){s.base64=!1,s.binary=!1,s.dir=!1,s.createFolders=!0,s.date=null,s.compression=null,s.compressionOptions=null,s.comment=null,s.unixPermissions=null,s.dosPermissions=null},{}],6:[function(e,n,s){var o=null;o=typeof Promise<"u"?Promise:e("lie"),n.exports={Promise:o}},{lie:37}],7:[function(e,n,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=e("pako"),u=e("./utils"),h=e("./stream/GenericWorker"),f=o?"uint8array":"array";function p(m,b){h.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=b,this.meta={}}s.magic="\b\0",u.inherits(p,h),p.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(f,m.data),!1)},p.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},p.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},p.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(b){m.push({data:b,meta:m.meta})}},s.compressWorker=function(m){return new p("Deflate",m)},s.uncompressWorker=function(){return new p("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,s){function o(y,A){var w,x="";for(w=0;w<A;w++)x+=String.fromCharCode(255&y),y>>>=8;return x}function l(y,A,w,x,S,E){var T,R,D=y.file,O=y.compression,L=E!==f.utf8encode,z=u.transformTo("string",E(D.name)),I=u.transformTo("string",f.utf8encode(D.name)),Q=D.comment,at=u.transformTo("string",E(Q)),U=u.transformTo("string",f.utf8encode(Q)),Z=I.length!==D.name.length,M=U.length!==Q.length,tt="",H="",j="",lt=D.dir,st=D.date,B={crc32:0,compressedSize:0,uncompressedSize:0};A&&!w||(B.crc32=y.crc32,B.compressedSize=y.compressedSize,B.uncompressedSize=y.uncompressedSize);var _=0;A&&(_|=8),L||!Z&&!M||(_|=2048);var N=0,X=0;lt&&(N|=16),S==="UNIX"?(X=798,N|=(function($,ht){var pt=$;return $||(pt=ht?16893:33204),(65535&pt)<<16})(D.unixPermissions,lt)):(X=20,N|=(function($){return 63&($||0)})(D.dosPermissions)),T=st.getUTCHours(),T<<=6,T|=st.getUTCMinutes(),T<<=5,T|=st.getUTCSeconds()/2,R=st.getUTCFullYear()-1980,R<<=4,R|=st.getUTCMonth()+1,R<<=5,R|=st.getUTCDate(),Z&&(H=o(1,1)+o(p(z),4)+I,tt+="up"+o(H.length,2)+H),M&&(j=o(1,1)+o(p(at),4)+U,tt+="uc"+o(j.length,2)+j);var K="";return K+=`
\0`,K+=o(_,2),K+=O.magic,K+=o(T,2),K+=o(R,2),K+=o(B.crc32,4),K+=o(B.compressedSize,4),K+=o(B.uncompressedSize,4),K+=o(z.length,2),K+=o(tt.length,2),{fileRecord:m.LOCAL_FILE_HEADER+K+z+tt,dirRecord:m.CENTRAL_FILE_HEADER+o(X,2)+K+o(at.length,2)+"\0\0\0\0"+o(N,4)+o(x,4)+z+tt+at}}var u=e("../utils"),h=e("../stream/GenericWorker"),f=e("../utf8"),p=e("../crc32"),m=e("../signature");function b(y,A,w,x){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=A,this.zipPlatform=w,this.encodeFileName=x,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(b,h),b.prototype.push=function(y){var A=y.meta.percent||0,w=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,h.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:w?(A+100*(w-x-1))/w:100}}))},b.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var A=this.streamFiles&&!y.file.dir;if(A){var w=l(y,A,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(y){this.accumulate=!1;var A=this.streamFiles&&!y.file.dir,w=l(y,A,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),A)this.push({data:(function(x){return m.DATA_DESCRIPTOR+o(x.crc32,4)+o(x.compressedSize,4)+o(x.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var y=this.bytesWritten,A=0;A<this.dirRecords.length;A++)this.push({data:this.dirRecords[A],meta:{percent:100}});var w=this.bytesWritten-y,x=(function(S,E,T,R,D){var O=u.transformTo("string",D(R));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(S,2)+o(S,2)+o(E,4)+o(T,4)+o(O.length,2)+O})(this.dirRecords.length,w,y,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(y){this._sources.push(y);var A=this;return y.on("data",function(w){A.processChunk(w)}),y.on("end",function(){A.closedSource(A.previous.streamInfo),A._sources.length?A.prepareNextSource():A.end()}),y.on("error",function(w){A.error(w)}),this},b.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(y){var A=this._sources;if(!h.prototype.error.call(this,y))return!1;for(var w=0;w<A.length;w++)try{A[w].error(y)}catch{}return!0},b.prototype.lock=function(){h.prototype.lock.call(this);for(var y=this._sources,A=0;A<y.length;A++)y[A].lock()},n.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,s){var o=e("../compressions"),l=e("./ZipFileWorker");s.generateWorker=function(u,h,f){var p=new l(h.streamFiles,f,h.platform,h.encodeFileName),m=0;try{u.forEach(function(b,y){m++;var A=(function(E,T){var R=E||T,D=o[R];if(!D)throw new Error(R+" is not a valid compression method !");return D})(y.options.compression,h.compression),w=y.options.compressionOptions||h.compressionOptions||{},x=y.dir,S=y.date;y._compressWorker(A,w).withStreamInfo("file",{name:b,dir:x,date:S,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(p)}),p.entriesCount=m}catch(b){p.error(b)}return p}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,s){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new o;for(var u in this)typeof this[u]!="function"&&(l[u]=this[u]);return l}}(o.prototype=e("./object")).loadAsync=e("./load"),o.support=e("./support"),o.defaults=e("./defaults"),o.version="3.10.1",o.loadAsync=function(l,u){return new o().loadAsync(l,u)},o.external=e("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,s){var o=e("./utils"),l=e("./external"),u=e("./utf8"),h=e("./zipEntries"),f=e("./stream/Crc32Probe"),p=e("./nodejsUtils");function m(b){return new l.Promise(function(y,A){var w=b.decompressed.getContentWorker().pipe(new f);w.on("error",function(x){A(x)}).on("end",function(){w.streamInfo.crc32!==b.decompressed.crc32?A(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}n.exports=function(b,y){var A=this;return y=o.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),p.isNode&&p.isStream(b)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",b,!0,y.optimizedBinaryString,y.base64).then(function(w){var x=new h(y);return x.load(w),x}).then(function(w){var x=[l.Promise.resolve(w)],S=w.files;if(y.checkCRC32)for(var E=0;E<S.length;E++)x.push(m(S[E]));return l.Promise.all(x)}).then(function(w){for(var x=w.shift(),S=x.files,E=0;E<S.length;E++){var T=S[E],R=T.fileNameStr,D=o.resolve(T.fileNameStr);A.file(D,T.decompressed,{binary:!0,optimizedBinaryString:!0,date:T.date,dir:T.dir,comment:T.fileCommentStr.length?T.fileCommentStr:null,unixPermissions:T.unixPermissions,dosPermissions:T.dosPermissions,createFolders:y.createFolders}),T.dir||(A.file(D).unsafeOriginalName=R)}return x.zipComment.length&&(A.comment=x.zipComment),A})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,s){var o=e("../utils"),l=e("../stream/GenericWorker");function u(h,f){l.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(f)}o.inherits(u,l),u.prototype._bindStream=function(h){var f=this;(this._stream=h).pause(),h.on("data",function(p){f.push({data:p,meta:{percent:0}})}).on("error",function(p){f.isPaused?this.generatedError=p:f.error(p)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},u.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,s){var o=e("readable-stream").Readable;function l(u,h,f){o.call(this,h),this._helper=u;var p=this;u.on("data",function(m,b){p.push(m)||p._helper.pause(),f&&f(b)}).on("error",function(m){p.emit("error",m)}).on("end",function(){p.push(null)})}e("../utils").inherits(l,o),l.prototype._read=function(){this._helper.resume()},n.exports=l},{"../utils":32,"readable-stream":16}],14:[function(e,n,s){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,l){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,l);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,l)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var l=new Buffer(o);return l.fill(0),l},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(e,n,s){function o(D,O,L){var z,I=u.getTypeOf(O),Q=u.extend(L||{},p);Q.date=Q.date||new Date,Q.compression!==null&&(Q.compression=Q.compression.toUpperCase()),typeof Q.unixPermissions=="string"&&(Q.unixPermissions=parseInt(Q.unixPermissions,8)),Q.unixPermissions&&16384&Q.unixPermissions&&(Q.dir=!0),Q.dosPermissions&&16&Q.dosPermissions&&(Q.dir=!0),Q.dir&&(D=S(D)),Q.createFolders&&(z=x(D))&&E.call(this,z,!0);var at=I==="string"&&Q.binary===!1&&Q.base64===!1;L&&L.binary!==void 0||(Q.binary=!at),(O instanceof m&&O.uncompressedSize===0||Q.dir||!O||O.length===0)&&(Q.base64=!1,Q.binary=!0,O="",Q.compression="STORE",I="string");var U=null;U=O instanceof m||O instanceof h?O:A.isNode&&A.isStream(O)?new w(D,O):u.prepareContent(D,O,Q.binary,Q.optimizedBinaryString,Q.base64);var Z=new b(D,U,Q);this.files[D]=Z}var l=e("./utf8"),u=e("./utils"),h=e("./stream/GenericWorker"),f=e("./stream/StreamHelper"),p=e("./defaults"),m=e("./compressedObject"),b=e("./zipObject"),y=e("./generate"),A=e("./nodejsUtils"),w=e("./nodejs/NodejsStreamInputAdapter"),x=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var O=D.lastIndexOf("/");return 0<O?D.substring(0,O):""},S=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},E=function(D,O){return O=O!==void 0?O:p.createFolders,D=S(D),this.files[D]||o.call(this,D,null,{dir:!0,createFolders:O}),this.files[D]};function T(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var R={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var O,L,z;for(O in this.files)z=this.files[O],(L=O.slice(this.root.length,O.length))&&O.slice(0,this.root.length)===this.root&&D(L,z)},filter:function(D){var O=[];return this.forEach(function(L,z){D(L,z)&&O.push(z)}),O},file:function(D,O,L){if(arguments.length!==1)return D=this.root+D,o.call(this,D,O,L),this;if(T(D)){var z=D;return this.filter(function(Q,at){return!at.dir&&z.test(Q)})}var I=this.files[this.root+D];return I&&!I.dir?I:null},folder:function(D){if(!D)return this;if(T(D))return this.filter(function(I,Q){return Q.dir&&D.test(I)});var O=this.root+D,L=E.call(this,O),z=this.clone();return z.root=L.name,z},remove:function(D){D=this.root+D;var O=this.files[D];if(O||(D.slice(-1)!=="/"&&(D+="/"),O=this.files[D]),O&&!O.dir)delete this.files[D];else for(var L=this.filter(function(I,Q){return Q.name.slice(0,D.length)===D}),z=0;z<L.length;z++)delete this.files[L[z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var O,L={};try{if((L=u.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");u.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var z=L.comment||this.comment||"";O=y.generateWorker(this,L,z)}catch(I){(O=new h("error")).error(I)}return new f(O,L.type||"string",L.mimeType)},generateAsync:function(D,O){return this.generateInternalStream(D).accumulate(O)},generateNodeStream:function(D,O){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(O)}};n.exports=R},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,s){n.exports=e("stream")},{stream:void 0}],17:[function(e,n,s){var o=e("./DataReader");function l(u){o.call(this,u);for(var h=0;h<this.data.length;h++)u[h]=255&u[h]}e("../utils").inherits(l,o),l.prototype.byteAt=function(u){return this.data[this.zero+u]},l.prototype.lastIndexOfSignature=function(u){for(var h=u.charCodeAt(0),f=u.charCodeAt(1),p=u.charCodeAt(2),m=u.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===h&&this.data[b+1]===f&&this.data[b+2]===p&&this.data[b+3]===m)return b-this.zero;return-1},l.prototype.readAndCheckSignature=function(u){var h=u.charCodeAt(0),f=u.charCodeAt(1),p=u.charCodeAt(2),m=u.charCodeAt(3),b=this.readData(4);return h===b[0]&&f===b[1]&&p===b[2]&&m===b[3]},l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},n.exports=l},{"../utils":32,"./DataReader":18}],18:[function(e,n,s){var o=e("../utils");function l(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var h,f=0;for(this.checkOffset(u),h=this.index+u-1;h>=this.index;h--)f=(f<<8)+this.byteAt(h);return this.index+=u,f},readString:function(u){return o.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},n.exports=l},{"../utils":32}],19:[function(e,n,s){var o=e("./Uint8ArrayReader");function l(u){o.call(this,u)}e("../utils").inherits(l,o),l.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},n.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,s){var o=e("./DataReader");function l(u){o.call(this,u)}e("../utils").inherits(l,o),l.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},l.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},l.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},l.prototype.readData=function(u){this.checkOffset(u);var h=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},n.exports=l},{"../utils":32,"./DataReader":18}],21:[function(e,n,s){var o=e("./ArrayReader");function l(u){o.call(this,u)}e("../utils").inherits(l,o),l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,h},n.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,s){var o=e("../utils"),l=e("../support"),u=e("./ArrayReader"),h=e("./StringReader"),f=e("./NodeBufferReader"),p=e("./Uint8ArrayReader");n.exports=function(m){var b=o.getTypeOf(m);return o.checkSupport(b),b!=="string"||l.uint8array?b==="nodebuffer"?new f(m):l.uint8array?new p(o.transformTo("uint8array",m)):new u(o.transformTo("array",m)):new h(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,s){s.LOCAL_FILE_HEADER="PK",s.CENTRAL_FILE_HEADER="PK",s.CENTRAL_DIRECTORY_END="PK",s.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",s.ZIP64_CENTRAL_DIRECTORY_END="PK",s.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,s){var o=e("./GenericWorker"),l=e("../utils");function u(h){o.call(this,"ConvertWorker to "+h),this.destType=h}l.inherits(u,o),u.prototype.processChunk=function(h){this.push({data:l.transformTo(this.destType,h.data),meta:h.meta})},n.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,s){var o=e("./GenericWorker"),l=e("../crc32");function u(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(u,o),u.prototype.processChunk=function(h){this.streamInfo.crc32=l(h.data,this.streamInfo.crc32||0),this.push(h)},n.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,s){var o=e("../utils"),l=e("./GenericWorker");function u(h){l.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}o.inherits(u,l),u.prototype.processChunk=function(h){if(h){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+h.data.length}l.prototype.processChunk.call(this,h)},n.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,s){var o=e("../utils"),l=e("./GenericWorker");function u(h){l.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(p){f.dataIsReady=!0,f.data=p,f.max=p&&p.length||0,f.type=o.getTypeOf(p),f.isPaused||f._tickAndRepeat()},function(p){f.error(p)})}o.inherits(u,l),u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,f);break;case"uint8array":h=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":h=this.data.slice(this.index,f)}return this.index=f,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,s){function o(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,u){return this._listeners[l].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,u){if(this._listeners[l])for(var h=0;h<this._listeners[l].length;h++)this._listeners[l][h].call(this,u)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var u=this;return l.on("data",function(h){u.processChunk(h)}),l.on("end",function(){u.end()}),l.on("error",function(h){u.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,u){return this.extraStreamInfo[l]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},n.exports=o},{}],29:[function(e,n,s){var o=e("../utils"),l=e("./ConvertWorker"),u=e("./GenericWorker"),h=e("../base64"),f=e("../support"),p=e("../external"),m=null;if(f.nodestream)try{m=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(A,w){return new p.Promise(function(x,S){var E=[],T=A._internalType,R=A._outputType,D=A._mimeType;A.on("data",function(O,L){E.push(O),w&&w(L)}).on("error",function(O){E=[],S(O)}).on("end",function(){try{var O=(function(L,z,I){switch(L){case"blob":return o.newBlob(o.transformTo("arraybuffer",z),I);case"base64":return h.encode(z);default:return o.transformTo(L,z)}})(R,(function(L,z){var I,Q=0,at=null,U=0;for(I=0;I<z.length;I++)U+=z[I].length;switch(L){case"string":return z.join("");case"array":return Array.prototype.concat.apply([],z);case"uint8array":for(at=new Uint8Array(U),I=0;I<z.length;I++)at.set(z[I],Q),Q+=z[I].length;return at;case"nodebuffer":return Buffer.concat(z);default:throw new Error("concat : unsupported type '"+L+"'")}})(T,E),D);x(O)}catch(L){S(L)}E=[]}).resume()})}function y(A,w,x){var S=w;switch(w){case"blob":case"arraybuffer":S="uint8array";break;case"base64":S="string"}try{this._internalType=S,this._outputType=w,this._mimeType=x,o.checkSupport(S),this._worker=A.pipe(new l(S)),A.lock()}catch(E){this._worker=new u("error"),this._worker.error(E)}}y.prototype={accumulate:function(A){return b(this,A)},on:function(A,w){var x=this;return A==="data"?this._worker.on(A,function(S){w.call(x,S.data,S.meta)}):this._worker.on(A,function(){o.delay(w,arguments,x)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(A){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},A)}},n.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,s){if(s.base64=!0,s.array=!0,s.string=!0,s.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",s.nodebuffer=typeof Buffer<"u",s.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")s.blob=!1;else{var o=new ArrayBuffer(0);try{s.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(o),s.blob=l.getBlob("application/zip").size===0}catch{s.blob=!1}}}try{s.nodestream=!!e("readable-stream").Readable}catch{s.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,s){for(var o=e("./utils"),l=e("./support"),u=e("./nodejsUtils"),h=e("./stream/GenericWorker"),f=new Array(256),p=0;p<256;p++)f[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;f[254]=f[254]=1;function m(){h.call(this,"utf-8 decode"),this.leftOver=null}function b(){h.call(this,"utf-8 encode")}s.utf8encode=function(y){return l.nodebuffer?u.newBufferFrom(y,"utf-8"):(function(A){var w,x,S,E,T,R=A.length,D=0;for(E=0;E<R;E++)(64512&(x=A.charCodeAt(E)))==55296&&E+1<R&&(64512&(S=A.charCodeAt(E+1)))==56320&&(x=65536+(x-55296<<10)+(S-56320),E++),D+=x<128?1:x<2048?2:x<65536?3:4;for(w=l.uint8array?new Uint8Array(D):new Array(D),E=T=0;T<D;E++)(64512&(x=A.charCodeAt(E)))==55296&&E+1<R&&(64512&(S=A.charCodeAt(E+1)))==56320&&(x=65536+(x-55296<<10)+(S-56320),E++),x<128?w[T++]=x:(x<2048?w[T++]=192|x>>>6:(x<65536?w[T++]=224|x>>>12:(w[T++]=240|x>>>18,w[T++]=128|x>>>12&63),w[T++]=128|x>>>6&63),w[T++]=128|63&x);return w})(y)},s.utf8decode=function(y){return l.nodebuffer?o.transformTo("nodebuffer",y).toString("utf-8"):(function(A){var w,x,S,E,T=A.length,R=new Array(2*T);for(w=x=0;w<T;)if((S=A[w++])<128)R[x++]=S;else if(4<(E=f[S]))R[x++]=65533,w+=E-1;else{for(S&=E===2?31:E===3?15:7;1<E&&w<T;)S=S<<6|63&A[w++],E--;1<E?R[x++]=65533:S<65536?R[x++]=S:(S-=65536,R[x++]=55296|S>>10&1023,R[x++]=56320|1023&S)}return R.length!==x&&(R.subarray?R=R.subarray(0,x):R.length=x),o.applyFromCharCode(R)})(y=o.transformTo(l.uint8array?"uint8array":"array",y))},o.inherits(m,h),m.prototype.processChunk=function(y){var A=o.transformTo(l.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var w=A;(A=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),A.set(w,this.leftOver.length)}else A=this.leftOver.concat(A);this.leftOver=null}var x=(function(E,T){var R;for((T=T||E.length)>E.length&&(T=E.length),R=T-1;0<=R&&(192&E[R])==128;)R--;return R<0||R===0?T:R+f[E[R]]>T?R:T})(A),S=A;x!==A.length&&(l.uint8array?(S=A.subarray(0,x),this.leftOver=A.subarray(x,A.length)):(S=A.slice(0,x),this.leftOver=A.slice(x,A.length))),this.push({data:s.utf8decode(S),meta:y.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:s.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},s.Utf8DecodeWorker=m,o.inherits(b,h),b.prototype.processChunk=function(y){this.push({data:s.utf8encode(y.data),meta:y.meta})},s.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,s){var o=e("./support"),l=e("./base64"),u=e("./nodejsUtils"),h=e("./external");function f(w){return w}function p(w,x){for(var S=0;S<w.length;++S)x[S]=255&w.charCodeAt(S);return x}e("setimmediate"),s.newBlob=function(w,x){s.checkSupport("blob");try{return new Blob([w],{type:x})}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return S.append(w),S.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(w,x,S){var E=[],T=0,R=w.length;if(R<=S)return String.fromCharCode.apply(null,w);for(;T<R;)x==="array"||x==="nodebuffer"?E.push(String.fromCharCode.apply(null,w.slice(T,Math.min(T+S,R)))):E.push(String.fromCharCode.apply(null,w.subarray(T,Math.min(T+S,R)))),T+=S;return E.join("")},stringifyByChar:function(w){for(var x="",S=0;S<w.length;S++)x+=String.fromCharCode(w[S]);return x},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}})()}};function b(w){var x=65536,S=s.getTypeOf(w),E=!0;if(S==="uint8array"?E=m.applyCanBeUsed.uint8array:S==="nodebuffer"&&(E=m.applyCanBeUsed.nodebuffer),E)for(;1<x;)try{return m.stringifyByChunk(w,S,x)}catch{x=Math.floor(x/2)}return m.stringifyByChar(w)}function y(w,x){for(var S=0;S<w.length;S++)x[S]=w[S];return x}s.applyFromCharCode=b;var A={};A.string={string:f,array:function(w){return p(w,new Array(w.length))},arraybuffer:function(w){return A.string.uint8array(w).buffer},uint8array:function(w){return p(w,new Uint8Array(w.length))},nodebuffer:function(w){return p(w,u.allocBuffer(w.length))}},A.array={string:b,array:f,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return u.newBufferFrom(w)}},A.arraybuffer={string:function(w){return b(new Uint8Array(w))},array:function(w){return y(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:f,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return u.newBufferFrom(new Uint8Array(w))}},A.uint8array={string:b,array:function(w){return y(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:f,nodebuffer:function(w){return u.newBufferFrom(w)}},A.nodebuffer={string:b,array:function(w){return y(w,new Array(w.length))},arraybuffer:function(w){return A.nodebuffer.uint8array(w).buffer},uint8array:function(w){return y(w,new Uint8Array(w.length))},nodebuffer:f},s.transformTo=function(w,x){if(x=x||"",!w)return x;s.checkSupport(w);var S=s.getTypeOf(x);return A[S][w](x)},s.resolve=function(w){for(var x=w.split("/"),S=[],E=0;E<x.length;E++){var T=x[E];T==="."||T===""&&E!==0&&E!==x.length-1||(T===".."?S.pop():S.push(T))}return S.join("/")},s.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":o.nodebuffer&&u.isBuffer(w)?"nodebuffer":o.uint8array&&w instanceof Uint8Array?"uint8array":o.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},s.checkSupport=function(w){if(!o[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},s.MAX_VALUE_16BITS=65535,s.MAX_VALUE_32BITS=-1,s.pretty=function(w){var x,S,E="";for(S=0;S<(w||"").length;S++)E+="\\x"+((x=w.charCodeAt(S))<16?"0":"")+x.toString(16).toUpperCase();return E},s.delay=function(w,x,S){setImmediate(function(){w.apply(S||null,x||[])})},s.inherits=function(w,x){function S(){}S.prototype=x.prototype,w.prototype=new S},s.extend=function(){var w,x,S={};for(w=0;w<arguments.length;w++)for(x in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],x)&&S[x]===void 0&&(S[x]=arguments[w][x]);return S},s.prepareContent=function(w,x,S,E,T){return h.Promise.resolve(x).then(function(R){return o.blob&&(R instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(R))!==-1)&&typeof FileReader<"u"?new h.Promise(function(D,O){var L=new FileReader;L.onload=function(z){D(z.target.result)},L.onerror=function(z){O(z.target.error)},L.readAsArrayBuffer(R)}):R}).then(function(R){var D=s.getTypeOf(R);return D?(D==="arraybuffer"?R=s.transformTo("uint8array",R):D==="string"&&(T?R=l.decode(R):S&&E!==!0&&(R=(function(O){return p(O,o.uint8array?new Uint8Array(O.length):new Array(O.length))})(R))),R):h.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,s){var o=e("./reader/readerFor"),l=e("./utils"),u=e("./signature"),h=e("./zipEntry"),f=e("./support");function p(m){this.files=[],this.loadOptions=m}p.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(b)+", expected "+l.pretty(m)+")")}},isSignature:function(m,b){var y=this.reader.index;this.reader.setIndex(m);var A=this.reader.readString(4)===b;return this.reader.setIndex(y),A},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),b=f.uint8array?"uint8array":"array",y=l.transformTo(b,m);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,b,y,A=this.zip64EndOfCentralSize-44;0<A;)m=this.reader.readInt(2),b=this.reader.readInt(4),y=this.reader.readData(b),this.zip64ExtensibleData[m]={id:m,length:b,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,b;for(m=0;m<this.files.length;m++)b=this.files[m],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(m=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var b=m;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var A=b-y;if(0<A)this.isSignature(b,u.CENTRAL_FILE_HEADER)||(this.reader.zero=A);else if(A<0)throw new Error("Corrupted zip: missing "+Math.abs(A)+" bytes.")},prepareReader:function(m){this.reader=o(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=p},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,s){var o=e("./reader/readerFor"),l=e("./utils"),u=e("./compressedObject"),h=e("./crc32"),f=e("./utf8"),p=e("./compressions"),m=e("./support");function b(y,A){this.options=y,this.loadOptions=A}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var A,w;if(y.skip(22),this.fileNameLength=y.readInt(2),w=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((A=(function(x){for(var S in p)if(Object.prototype.hasOwnProperty.call(p,S)&&p[S].magic===x)return p[S];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,A,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var A=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(A),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=o(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var A,w,x,S=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<S;)A=y.readInt(2),w=y.readInt(2),x=y.readData(w),this.extraFields[A]={id:A,length:w,value:x};y.setIndex(S)},handleUTF8:function(){var y=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var A=this.findExtraFieldUnicodePath();if(A!==null)this.fileNameStr=A;else{var w=l.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var S=l.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(S)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var A=o(y.value);return A.readInt(1)!==1||h(this.fileName)!==A.readInt(4)?null:f.utf8decode(A.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var A=o(y.value);return A.readInt(1)!==1||h(this.fileComment)!==A.readInt(4)?null:f.utf8decode(A.readData(y.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,s){function o(A,w,x){this.name=A,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=w,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var l=e("./stream/StreamHelper"),u=e("./stream/DataWorker"),h=e("./utf8"),f=e("./compressedObject"),p=e("./stream/GenericWorker");o.prototype={internalStream:function(A){var w=null,x="string";try{if(!A)throw new Error("No output type specified.");var S=(x=A.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),w=this._decompressWorker();var E=!this._dataBinary;E&&!S&&(w=w.pipe(new h.Utf8EncodeWorker)),!E&&S&&(w=w.pipe(new h.Utf8DecodeWorker))}catch(T){(w=new p("error")).error(T)}return new l(w,x,"")},async:function(A,w){return this.internalStream(A).accumulate(w)},nodeStream:function(A,w){return this.internalStream(A||"nodebuffer").toNodejsStream(w)},_compressWorker:function(A,w){if(this._data instanceof f&&this._data.compression.magic===A.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new h.Utf8EncodeWorker)),f.createWorkerFrom(x,A,w)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof p?this._data:new u(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<m.length;y++)o.prototype[m[y]]=b;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,s){(function(o){var l,u,h=o.MutationObserver||o.WebKitMutationObserver;if(h){var f=0,p=new h(A),m=o.document.createTextNode("");p.observe(m,{characterData:!0}),l=function(){m.data=f=++f%2}}else if(o.setImmediate||o.MessageChannel===void 0)l="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var w=o.document.createElement("script");w.onreadystatechange=function(){A(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},o.document.documentElement.appendChild(w)}:function(){setTimeout(A,0)};else{var b=new o.MessageChannel;b.port1.onmessage=A,l=function(){b.port2.postMessage(0)}}var y=[];function A(){var w,x;u=!0;for(var S=y.length;S;){for(x=y,y=[],w=-1;++w<S;)x[w]();S=y.length}u=!1}n.exports=function(w){y.push(w)!==1||u||l()}}).call(this,typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,n,s){var o=e("immediate");function l(){}var u={},h=["REJECTED"],f=["FULFILLED"],p=["PENDING"];function m(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,S!==l&&w(this,S)}function b(S,E,T){this.promise=S,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}function y(S,E,T){o(function(){var R;try{R=E(T)}catch(D){return u.reject(S,D)}R===S?u.reject(S,new TypeError("Cannot resolve promise with itself")):u.resolve(S,R)})}function A(S){var E=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof E=="function")return function(){E.apply(S,arguments)}}function w(S,E){var T=!1;function R(L){T||(T=!0,u.reject(S,L))}function D(L){T||(T=!0,u.resolve(S,L))}var O=x(function(){E(D,R)});O.status==="error"&&R(O.value)}function x(S,E){var T={};try{T.value=S(E),T.status="success"}catch(R){T.status="error",T.value=R}return T}(n.exports=m).prototype.finally=function(S){if(typeof S!="function")return this;var E=this.constructor;return this.then(function(T){return E.resolve(S()).then(function(){return T})},function(T){return E.resolve(S()).then(function(){throw T})})},m.prototype.catch=function(S){return this.then(null,S)},m.prototype.then=function(S,E){if(typeof S!="function"&&this.state===f||typeof E!="function"&&this.state===h)return this;var T=new this.constructor(l);return this.state!==p?y(T,this.state===f?S:E,this.outcome):this.queue.push(new b(T,S,E)),T},b.prototype.callFulfilled=function(S){u.resolve(this.promise,S)},b.prototype.otherCallFulfilled=function(S){y(this.promise,this.onFulfilled,S)},b.prototype.callRejected=function(S){u.reject(this.promise,S)},b.prototype.otherCallRejected=function(S){y(this.promise,this.onRejected,S)},u.resolve=function(S,E){var T=x(A,E);if(T.status==="error")return u.reject(S,T.value);var R=T.value;if(R)w(S,R);else{S.state=f,S.outcome=E;for(var D=-1,O=S.queue.length;++D<O;)S.queue[D].callFulfilled(E)}return S},u.reject=function(S,E){S.state=h,S.outcome=E;for(var T=-1,R=S.queue.length;++T<R;)S.queue[T].callRejected(E);return S},m.resolve=function(S){return S instanceof this?S:u.resolve(new this(l),S)},m.reject=function(S){var E=new this(l);return u.reject(E,S)},m.all=function(S){var E=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=S.length,R=!1;if(!T)return this.resolve([]);for(var D=new Array(T),O=0,L=-1,z=new this(l);++L<T;)I(S[L],L);return z;function I(Q,at){E.resolve(Q).then(function(U){D[at]=U,++O!==T||R||(R=!0,u.resolve(z,D))},function(U){R||(R=!0,u.reject(z,U))})}},m.race=function(S){var E=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=S.length,R=!1;if(!T)return this.resolve([]);for(var D=-1,O=new this(l);++D<T;)L=S[D],E.resolve(L).then(function(z){R||(R=!0,u.resolve(O,z))},function(z){R||(R=!0,u.reject(O,z))});var L;return O}},{immediate:36}],38:[function(e,n,s){var o={};(0,e("./lib/utils/common").assign)(o,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,s){var o=e("./zlib/deflate"),l=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/messages"),f=e("./zlib/zstream"),p=Object.prototype.toString,m=0,b=-1,y=0,A=8;function w(S){if(!(this instanceof w))return new w(S);this.options=l.assign({level:b,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},S||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var T=o.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(T!==m)throw new Error(h[T]);if(E.header&&o.deflateSetHeader(this.strm,E.header),E.dictionary){var R;if(R=typeof E.dictionary=="string"?u.string2buf(E.dictionary):p.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(T=o.deflateSetDictionary(this.strm,R))!==m)throw new Error(h[T]);this._dict_set=!0}}function x(S,E){var T=new w(E);if(T.push(S,!0),T.err)throw T.msg||h[T.err];return T.result}w.prototype.push=function(S,E){var T,R,D=this.strm,O=this.options.chunkSize;if(this.ended)return!1;R=E===~~E?E:E===!0?4:0,typeof S=="string"?D.input=u.string2buf(S):p.call(S)==="[object ArrayBuffer]"?D.input=new Uint8Array(S):D.input=S,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new l.Buf8(O),D.next_out=0,D.avail_out=O),(T=o.deflate(D,R))!==1&&T!==m)return this.onEnd(T),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||R!==4&&R!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(l.shrinkBuf(D.output,D.next_out))):this.onData(l.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&T!==1);return R===4?(T=o.deflateEnd(this.strm),this.onEnd(T),this.ended=!0,T===m):R!==2||(this.onEnd(m),!(D.avail_out=0))},w.prototype.onData=function(S){this.chunks.push(S)},w.prototype.onEnd=function(S){S===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},s.Deflate=w,s.deflate=x,s.deflateRaw=function(S,E){return(E=E||{}).raw=!0,x(S,E)},s.gzip=function(S,E){return(E=E||{}).gzip=!0,x(S,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,s){var o=e("./zlib/inflate"),l=e("./utils/common"),u=e("./utils/strings"),h=e("./zlib/constants"),f=e("./zlib/messages"),p=e("./zlib/zstream"),m=e("./zlib/gzheader"),b=Object.prototype.toString;function y(w){if(!(this instanceof y))return new y(w);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},w||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||w&&w.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var S=o.inflateInit2(this.strm,x.windowBits);if(S!==h.Z_OK)throw new Error(f[S]);this.header=new m,o.inflateGetHeader(this.strm,this.header)}function A(w,x){var S=new y(x);if(S.push(w,!0),S.err)throw S.msg||f[S.err];return S.result}y.prototype.push=function(w,x){var S,E,T,R,D,O,L=this.strm,z=this.options.chunkSize,I=this.options.dictionary,Q=!1;if(this.ended)return!1;E=x===~~x?x:x===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof w=="string"?L.input=u.binstring2buf(w):b.call(w)==="[object ArrayBuffer]"?L.input=new Uint8Array(w):L.input=w,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new l.Buf8(z),L.next_out=0,L.avail_out=z),(S=o.inflate(L,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&I&&(O=typeof I=="string"?u.string2buf(I):b.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,S=o.inflateSetDictionary(this.strm,O)),S===h.Z_BUF_ERROR&&Q===!0&&(S=h.Z_OK,Q=!1),S!==h.Z_STREAM_END&&S!==h.Z_OK)return this.onEnd(S),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&S!==h.Z_STREAM_END&&(L.avail_in!==0||E!==h.Z_FINISH&&E!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(T=u.utf8border(L.output,L.next_out),R=L.next_out-T,D=u.buf2string(L.output,T),L.next_out=R,L.avail_out=z-R,R&&l.arraySet(L.output,L.output,T,R,0),this.onData(D)):this.onData(l.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(Q=!0)}while((0<L.avail_in||L.avail_out===0)&&S!==h.Z_STREAM_END);return S===h.Z_STREAM_END&&(E=h.Z_FINISH),E===h.Z_FINISH?(S=o.inflateEnd(this.strm),this.onEnd(S),this.ended=!0,S===h.Z_OK):E!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(L.avail_out=0))},y.prototype.onData=function(w){this.chunks.push(w)},y.prototype.onEnd=function(w){w===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},s.Inflate=y,s.inflate=A,s.inflateRaw=function(w,x){return(x=x||{}).raw=!0,A(w,x)},s.ungzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,s){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";s.assign=function(h){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var p=f.shift();if(p){if(typeof p!="object")throw new TypeError(p+"must be non-object");for(var m in p)p.hasOwnProperty(m)&&(h[m]=p[m])}}return h},s.shrinkBuf=function(h,f){return h.length===f?h:h.subarray?h.subarray(0,f):(h.length=f,h)};var l={arraySet:function(h,f,p,m,b){if(f.subarray&&h.subarray)h.set(f.subarray(p,p+m),b);else for(var y=0;y<m;y++)h[b+y]=f[p+y]},flattenChunks:function(h){var f,p,m,b,y,A;for(f=m=0,p=h.length;f<p;f++)m+=h[f].length;for(A=new Uint8Array(m),f=b=0,p=h.length;f<p;f++)y=h[f],A.set(y,b),b+=y.length;return A}},u={arraySet:function(h,f,p,m,b){for(var y=0;y<m;y++)h[b+y]=f[p+y]},flattenChunks:function(h){return[].concat.apply([],h)}};s.setTyped=function(h){h?(s.Buf8=Uint8Array,s.Buf16=Uint16Array,s.Buf32=Int32Array,s.assign(s,l)):(s.Buf8=Array,s.Buf16=Array,s.Buf32=Array,s.assign(s,u))},s.setTyped(o)},{}],42:[function(e,n,s){var o=e("./common"),l=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var h=new o.Buf8(256),f=0;f<256;f++)h[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function p(m,b){if(b<65537&&(m.subarray&&u||!m.subarray&&l))return String.fromCharCode.apply(null,o.shrinkBuf(m,b));for(var y="",A=0;A<b;A++)y+=String.fromCharCode(m[A]);return y}h[254]=h[254]=1,s.string2buf=function(m){var b,y,A,w,x,S=m.length,E=0;for(w=0;w<S;w++)(64512&(y=m.charCodeAt(w)))==55296&&w+1<S&&(64512&(A=m.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(A-56320),w++),E+=y<128?1:y<2048?2:y<65536?3:4;for(b=new o.Buf8(E),w=x=0;x<E;w++)(64512&(y=m.charCodeAt(w)))==55296&&w+1<S&&(64512&(A=m.charCodeAt(w+1)))==56320&&(y=65536+(y-55296<<10)+(A-56320),w++),y<128?b[x++]=y:(y<2048?b[x++]=192|y>>>6:(y<65536?b[x++]=224|y>>>12:(b[x++]=240|y>>>18,b[x++]=128|y>>>12&63),b[x++]=128|y>>>6&63),b[x++]=128|63&y);return b},s.buf2binstring=function(m){return p(m,m.length)},s.binstring2buf=function(m){for(var b=new o.Buf8(m.length),y=0,A=b.length;y<A;y++)b[y]=m.charCodeAt(y);return b},s.buf2string=function(m,b){var y,A,w,x,S=b||m.length,E=new Array(2*S);for(y=A=0;y<S;)if((w=m[y++])<128)E[A++]=w;else if(4<(x=h[w]))E[A++]=65533,y+=x-1;else{for(w&=x===2?31:x===3?15:7;1<x&&y<S;)w=w<<6|63&m[y++],x--;1<x?E[A++]=65533:w<65536?E[A++]=w:(w-=65536,E[A++]=55296|w>>10&1023,E[A++]=56320|1023&w)}return p(E,A)},s.utf8border=function(m,b){var y;for((b=b||m.length)>m.length&&(b=m.length),y=b-1;0<=y&&(192&m[y])==128;)y--;return y<0||y===0?b:y+h[m[y]]>b?y:b}},{"./common":41}],43:[function(e,n,s){n.exports=function(o,l,u,h){for(var f=65535&o|0,p=o>>>16&65535|0,m=0;u!==0;){for(u-=m=2e3<u?2e3:u;p=p+(f=f+l[h++]|0)|0,--m;);f%=65521,p%=65521}return f|p<<16|0}},{}],44:[function(e,n,s){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,s){var o=(function(){for(var l,u=[],h=0;h<256;h++){l=h;for(var f=0;f<8;f++)l=1&l?3988292384^l>>>1:l>>>1;u[h]=l}return u})();n.exports=function(l,u,h,f){var p=o,m=f+h;l^=-1;for(var b=f;b<m;b++)l=l>>>8^p[255&(l^u[b])];return-1^l}},{}],46:[function(e,n,s){var o,l=e("../utils/common"),u=e("./trees"),h=e("./adler32"),f=e("./crc32"),p=e("./messages"),m=0,b=4,y=0,A=-2,w=-1,x=4,S=2,E=8,T=9,R=286,D=30,O=19,L=2*R+1,z=15,I=3,Q=258,at=Q+I+1,U=42,Z=113,M=1,tt=2,H=3,j=4;function lt(k,ft){return k.msg=p[ft],ft}function st(k){return(k<<1)-(4<k?9:0)}function B(k){for(var ft=k.length;0<=--ft;)k[ft]=0}function _(k){var ft=k.state,ot=ft.pending;ot>k.avail_out&&(ot=k.avail_out),ot!==0&&(l.arraySet(k.output,ft.pending_buf,ft.pending_out,ot,k.next_out),k.next_out+=ot,ft.pending_out+=ot,k.total_out+=ot,k.avail_out-=ot,ft.pending-=ot,ft.pending===0&&(ft.pending_out=0))}function N(k,ft){u._tr_flush_block(k,0<=k.block_start?k.block_start:-1,k.strstart-k.block_start,ft),k.block_start=k.strstart,_(k.strm)}function X(k,ft){k.pending_buf[k.pending++]=ft}function K(k,ft){k.pending_buf[k.pending++]=ft>>>8&255,k.pending_buf[k.pending++]=255&ft}function $(k,ft){var ot,V,F=k.max_chain_length,W=k.strstart,gt=k.prev_length,wt=k.nice_match,it=k.strstart>k.w_size-at?k.strstart-(k.w_size-at):0,St=k.window,Et=k.w_mask,xt=k.prev,Lt=k.strstart+Q,re=St[W+gt-1],Xt=St[W+gt];k.prev_length>=k.good_match&&(F>>=2),wt>k.lookahead&&(wt=k.lookahead);do if(St[(ot=ft)+gt]===Xt&&St[ot+gt-1]===re&&St[ot]===St[W]&&St[++ot]===St[W+1]){W+=2,ot++;do;while(St[++W]===St[++ot]&&St[++W]===St[++ot]&&St[++W]===St[++ot]&&St[++W]===St[++ot]&&St[++W]===St[++ot]&&St[++W]===St[++ot]&&St[++W]===St[++ot]&&St[++W]===St[++ot]&&W<Lt);if(V=Q-(Lt-W),W=Lt-Q,gt<V){if(k.match_start=ft,wt<=(gt=V))break;re=St[W+gt-1],Xt=St[W+gt]}}while((ft=xt[ft&Et])>it&&--F!=0);return gt<=k.lookahead?gt:k.lookahead}function ht(k){var ft,ot,V,F,W,gt,wt,it,St,Et,xt=k.w_size;do{if(F=k.window_size-k.lookahead-k.strstart,k.strstart>=xt+(xt-at)){for(l.arraySet(k.window,k.window,xt,xt,0),k.match_start-=xt,k.strstart-=xt,k.block_start-=xt,ft=ot=k.hash_size;V=k.head[--ft],k.head[ft]=xt<=V?V-xt:0,--ot;);for(ft=ot=xt;V=k.prev[--ft],k.prev[ft]=xt<=V?V-xt:0,--ot;);F+=xt}if(k.strm.avail_in===0)break;if(gt=k.strm,wt=k.window,it=k.strstart+k.lookahead,St=F,Et=void 0,Et=gt.avail_in,St<Et&&(Et=St),ot=Et===0?0:(gt.avail_in-=Et,l.arraySet(wt,gt.input,gt.next_in,Et,it),gt.state.wrap===1?gt.adler=h(gt.adler,wt,Et,it):gt.state.wrap===2&&(gt.adler=f(gt.adler,wt,Et,it)),gt.next_in+=Et,gt.total_in+=Et,Et),k.lookahead+=ot,k.lookahead+k.insert>=I)for(W=k.strstart-k.insert,k.ins_h=k.window[W],k.ins_h=(k.ins_h<<k.hash_shift^k.window[W+1])&k.hash_mask;k.insert&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[W+I-1])&k.hash_mask,k.prev[W&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=W,W++,k.insert--,!(k.lookahead+k.insert<I)););}while(k.lookahead<at&&k.strm.avail_in!==0)}function pt(k,ft){for(var ot,V;;){if(k.lookahead<at){if(ht(k),k.lookahead<at&&ft===m)return M;if(k.lookahead===0)break}if(ot=0,k.lookahead>=I&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+I-1])&k.hash_mask,ot=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),ot!==0&&k.strstart-ot<=k.w_size-at&&(k.match_length=$(k,ot)),k.match_length>=I)if(V=u._tr_tally(k,k.strstart-k.match_start,k.match_length-I),k.lookahead-=k.match_length,k.match_length<=k.max_lazy_match&&k.lookahead>=I){for(k.match_length--;k.strstart++,k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+I-1])&k.hash_mask,ot=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart,--k.match_length!=0;);k.strstart++}else k.strstart+=k.match_length,k.match_length=0,k.ins_h=k.window[k.strstart],k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+1])&k.hash_mask;else V=u._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++;if(V&&(N(k,!1),k.strm.avail_out===0))return M}return k.insert=k.strstart<I-1?k.strstart:I-1,ft===b?(N(k,!0),k.strm.avail_out===0?H:j):k.last_lit&&(N(k,!1),k.strm.avail_out===0)?M:tt}function At(k,ft){for(var ot,V,F;;){if(k.lookahead<at){if(ht(k),k.lookahead<at&&ft===m)return M;if(k.lookahead===0)break}if(ot=0,k.lookahead>=I&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+I-1])&k.hash_mask,ot=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),k.prev_length=k.match_length,k.prev_match=k.match_start,k.match_length=I-1,ot!==0&&k.prev_length<k.max_lazy_match&&k.strstart-ot<=k.w_size-at&&(k.match_length=$(k,ot),k.match_length<=5&&(k.strategy===1||k.match_length===I&&4096<k.strstart-k.match_start)&&(k.match_length=I-1)),k.prev_length>=I&&k.match_length<=k.prev_length){for(F=k.strstart+k.lookahead-I,V=u._tr_tally(k,k.strstart-1-k.prev_match,k.prev_length-I),k.lookahead-=k.prev_length-1,k.prev_length-=2;++k.strstart<=F&&(k.ins_h=(k.ins_h<<k.hash_shift^k.window[k.strstart+I-1])&k.hash_mask,ot=k.prev[k.strstart&k.w_mask]=k.head[k.ins_h],k.head[k.ins_h]=k.strstart),--k.prev_length!=0;);if(k.match_available=0,k.match_length=I-1,k.strstart++,V&&(N(k,!1),k.strm.avail_out===0))return M}else if(k.match_available){if((V=u._tr_tally(k,0,k.window[k.strstart-1]))&&N(k,!1),k.strstart++,k.lookahead--,k.strm.avail_out===0)return M}else k.match_available=1,k.strstart++,k.lookahead--}return k.match_available&&(V=u._tr_tally(k,0,k.window[k.strstart-1]),k.match_available=0),k.insert=k.strstart<I-1?k.strstart:I-1,ft===b?(N(k,!0),k.strm.avail_out===0?H:j):k.last_lit&&(N(k,!1),k.strm.avail_out===0)?M:tt}function vt(k,ft,ot,V,F){this.good_length=k,this.max_lazy=ft,this.nice_length=ot,this.max_chain=V,this.func=F}function Ot(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*L),this.dyn_dtree=new l.Buf16(2*(2*D+1)),this.bl_tree=new l.Buf16(2*(2*O+1)),B(this.dyn_ltree),B(this.dyn_dtree),B(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(z+1),this.heap=new l.Buf16(2*R+1),B(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*R+1),B(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Mt(k){var ft;return k&&k.state?(k.total_in=k.total_out=0,k.data_type=S,(ft=k.state).pending=0,ft.pending_out=0,ft.wrap<0&&(ft.wrap=-ft.wrap),ft.status=ft.wrap?U:Z,k.adler=ft.wrap===2?0:1,ft.last_flush=m,u._tr_init(ft),y):lt(k,A)}function It(k){var ft=Mt(k);return ft===y&&(function(ot){ot.window_size=2*ot.w_size,B(ot.head),ot.max_lazy_match=o[ot.level].max_lazy,ot.good_match=o[ot.level].good_length,ot.nice_match=o[ot.level].nice_length,ot.max_chain_length=o[ot.level].max_chain,ot.strstart=0,ot.block_start=0,ot.lookahead=0,ot.insert=0,ot.match_length=ot.prev_length=I-1,ot.match_available=0,ot.ins_h=0})(k.state),ft}function qt(k,ft,ot,V,F,W){if(!k)return A;var gt=1;if(ft===w&&(ft=6),V<0?(gt=0,V=-V):15<V&&(gt=2,V-=16),F<1||T<F||ot!==E||V<8||15<V||ft<0||9<ft||W<0||x<W)return lt(k,A);V===8&&(V=9);var wt=new Ot;return(k.state=wt).strm=k,wt.wrap=gt,wt.gzhead=null,wt.w_bits=V,wt.w_size=1<<wt.w_bits,wt.w_mask=wt.w_size-1,wt.hash_bits=F+7,wt.hash_size=1<<wt.hash_bits,wt.hash_mask=wt.hash_size-1,wt.hash_shift=~~((wt.hash_bits+I-1)/I),wt.window=new l.Buf8(2*wt.w_size),wt.head=new l.Buf16(wt.hash_size),wt.prev=new l.Buf16(wt.w_size),wt.lit_bufsize=1<<F+6,wt.pending_buf_size=4*wt.lit_bufsize,wt.pending_buf=new l.Buf8(wt.pending_buf_size),wt.d_buf=1*wt.lit_bufsize,wt.l_buf=3*wt.lit_bufsize,wt.level=ft,wt.strategy=W,wt.method=ot,It(k)}o=[new vt(0,0,0,0,function(k,ft){var ot=65535;for(ot>k.pending_buf_size-5&&(ot=k.pending_buf_size-5);;){if(k.lookahead<=1){if(ht(k),k.lookahead===0&&ft===m)return M;if(k.lookahead===0)break}k.strstart+=k.lookahead,k.lookahead=0;var V=k.block_start+ot;if((k.strstart===0||k.strstart>=V)&&(k.lookahead=k.strstart-V,k.strstart=V,N(k,!1),k.strm.avail_out===0)||k.strstart-k.block_start>=k.w_size-at&&(N(k,!1),k.strm.avail_out===0))return M}return k.insert=0,ft===b?(N(k,!0),k.strm.avail_out===0?H:j):(k.strstart>k.block_start&&(N(k,!1),k.strm.avail_out),M)}),new vt(4,4,8,4,pt),new vt(4,5,16,8,pt),new vt(4,6,32,32,pt),new vt(4,4,16,16,At),new vt(8,16,32,32,At),new vt(8,16,128,128,At),new vt(8,32,128,256,At),new vt(32,128,258,1024,At),new vt(32,258,258,4096,At)],s.deflateInit=function(k,ft){return qt(k,ft,E,15,8,0)},s.deflateInit2=qt,s.deflateReset=It,s.deflateResetKeep=Mt,s.deflateSetHeader=function(k,ft){return k&&k.state?k.state.wrap!==2?A:(k.state.gzhead=ft,y):A},s.deflate=function(k,ft){var ot,V,F,W;if(!k||!k.state||5<ft||ft<0)return k?lt(k,A):A;if(V=k.state,!k.output||!k.input&&k.avail_in!==0||V.status===666&&ft!==b)return lt(k,k.avail_out===0?-5:A);if(V.strm=k,ot=V.last_flush,V.last_flush=ft,V.status===U)if(V.wrap===2)k.adler=0,X(V,31),X(V,139),X(V,8),V.gzhead?(X(V,(V.gzhead.text?1:0)+(V.gzhead.hcrc?2:0)+(V.gzhead.extra?4:0)+(V.gzhead.name?8:0)+(V.gzhead.comment?16:0)),X(V,255&V.gzhead.time),X(V,V.gzhead.time>>8&255),X(V,V.gzhead.time>>16&255),X(V,V.gzhead.time>>24&255),X(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),X(V,255&V.gzhead.os),V.gzhead.extra&&V.gzhead.extra.length&&(X(V,255&V.gzhead.extra.length),X(V,V.gzhead.extra.length>>8&255)),V.gzhead.hcrc&&(k.adler=f(k.adler,V.pending_buf,V.pending,0)),V.gzindex=0,V.status=69):(X(V,0),X(V,0),X(V,0),X(V,0),X(V,0),X(V,V.level===9?2:2<=V.strategy||V.level<2?4:0),X(V,3),V.status=Z);else{var gt=E+(V.w_bits-8<<4)<<8;gt|=(2<=V.strategy||V.level<2?0:V.level<6?1:V.level===6?2:3)<<6,V.strstart!==0&&(gt|=32),gt+=31-gt%31,V.status=Z,K(V,gt),V.strstart!==0&&(K(V,k.adler>>>16),K(V,65535&k.adler)),k.adler=1}if(V.status===69)if(V.gzhead.extra){for(F=V.pending;V.gzindex<(65535&V.gzhead.extra.length)&&(V.pending!==V.pending_buf_size||(V.gzhead.hcrc&&V.pending>F&&(k.adler=f(k.adler,V.pending_buf,V.pending-F,F)),_(k),F=V.pending,V.pending!==V.pending_buf_size));)X(V,255&V.gzhead.extra[V.gzindex]),V.gzindex++;V.gzhead.hcrc&&V.pending>F&&(k.adler=f(k.adler,V.pending_buf,V.pending-F,F)),V.gzindex===V.gzhead.extra.length&&(V.gzindex=0,V.status=73)}else V.status=73;if(V.status===73)if(V.gzhead.name){F=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>F&&(k.adler=f(k.adler,V.pending_buf,V.pending-F,F)),_(k),F=V.pending,V.pending===V.pending_buf_size)){W=1;break}W=V.gzindex<V.gzhead.name.length?255&V.gzhead.name.charCodeAt(V.gzindex++):0,X(V,W)}while(W!==0);V.gzhead.hcrc&&V.pending>F&&(k.adler=f(k.adler,V.pending_buf,V.pending-F,F)),W===0&&(V.gzindex=0,V.status=91)}else V.status=91;if(V.status===91)if(V.gzhead.comment){F=V.pending;do{if(V.pending===V.pending_buf_size&&(V.gzhead.hcrc&&V.pending>F&&(k.adler=f(k.adler,V.pending_buf,V.pending-F,F)),_(k),F=V.pending,V.pending===V.pending_buf_size)){W=1;break}W=V.gzindex<V.gzhead.comment.length?255&V.gzhead.comment.charCodeAt(V.gzindex++):0,X(V,W)}while(W!==0);V.gzhead.hcrc&&V.pending>F&&(k.adler=f(k.adler,V.pending_buf,V.pending-F,F)),W===0&&(V.status=103)}else V.status=103;if(V.status===103&&(V.gzhead.hcrc?(V.pending+2>V.pending_buf_size&&_(k),V.pending+2<=V.pending_buf_size&&(X(V,255&k.adler),X(V,k.adler>>8&255),k.adler=0,V.status=Z)):V.status=Z),V.pending!==0){if(_(k),k.avail_out===0)return V.last_flush=-1,y}else if(k.avail_in===0&&st(ft)<=st(ot)&&ft!==b)return lt(k,-5);if(V.status===666&&k.avail_in!==0)return lt(k,-5);if(k.avail_in!==0||V.lookahead!==0||ft!==m&&V.status!==666){var wt=V.strategy===2?(function(it,St){for(var Et;;){if(it.lookahead===0&&(ht(it),it.lookahead===0)){if(St===m)return M;break}if(it.match_length=0,Et=u._tr_tally(it,0,it.window[it.strstart]),it.lookahead--,it.strstart++,Et&&(N(it,!1),it.strm.avail_out===0))return M}return it.insert=0,St===b?(N(it,!0),it.strm.avail_out===0?H:j):it.last_lit&&(N(it,!1),it.strm.avail_out===0)?M:tt})(V,ft):V.strategy===3?(function(it,St){for(var Et,xt,Lt,re,Xt=it.window;;){if(it.lookahead<=Q){if(ht(it),it.lookahead<=Q&&St===m)return M;if(it.lookahead===0)break}if(it.match_length=0,it.lookahead>=I&&0<it.strstart&&(xt=Xt[Lt=it.strstart-1])===Xt[++Lt]&&xt===Xt[++Lt]&&xt===Xt[++Lt]){re=it.strstart+Q;do;while(xt===Xt[++Lt]&&xt===Xt[++Lt]&&xt===Xt[++Lt]&&xt===Xt[++Lt]&&xt===Xt[++Lt]&&xt===Xt[++Lt]&&xt===Xt[++Lt]&&xt===Xt[++Lt]&&Lt<re);it.match_length=Q-(re-Lt),it.match_length>it.lookahead&&(it.match_length=it.lookahead)}if(it.match_length>=I?(Et=u._tr_tally(it,1,it.match_length-I),it.lookahead-=it.match_length,it.strstart+=it.match_length,it.match_length=0):(Et=u._tr_tally(it,0,it.window[it.strstart]),it.lookahead--,it.strstart++),Et&&(N(it,!1),it.strm.avail_out===0))return M}return it.insert=0,St===b?(N(it,!0),it.strm.avail_out===0?H:j):it.last_lit&&(N(it,!1),it.strm.avail_out===0)?M:tt})(V,ft):o[V.level].func(V,ft);if(wt!==H&&wt!==j||(V.status=666),wt===M||wt===H)return k.avail_out===0&&(V.last_flush=-1),y;if(wt===tt&&(ft===1?u._tr_align(V):ft!==5&&(u._tr_stored_block(V,0,0,!1),ft===3&&(B(V.head),V.lookahead===0&&(V.strstart=0,V.block_start=0,V.insert=0))),_(k),k.avail_out===0))return V.last_flush=-1,y}return ft!==b?y:V.wrap<=0?1:(V.wrap===2?(X(V,255&k.adler),X(V,k.adler>>8&255),X(V,k.adler>>16&255),X(V,k.adler>>24&255),X(V,255&k.total_in),X(V,k.total_in>>8&255),X(V,k.total_in>>16&255),X(V,k.total_in>>24&255)):(K(V,k.adler>>>16),K(V,65535&k.adler)),_(k),0<V.wrap&&(V.wrap=-V.wrap),V.pending!==0?y:1)},s.deflateEnd=function(k){var ft;return k&&k.state?(ft=k.state.status)!==U&&ft!==69&&ft!==73&&ft!==91&&ft!==103&&ft!==Z&&ft!==666?lt(k,A):(k.state=null,ft===Z?lt(k,-3):y):A},s.deflateSetDictionary=function(k,ft){var ot,V,F,W,gt,wt,it,St,Et=ft.length;if(!k||!k.state||(W=(ot=k.state).wrap)===2||W===1&&ot.status!==U||ot.lookahead)return A;for(W===1&&(k.adler=h(k.adler,ft,Et,0)),ot.wrap=0,Et>=ot.w_size&&(W===0&&(B(ot.head),ot.strstart=0,ot.block_start=0,ot.insert=0),St=new l.Buf8(ot.w_size),l.arraySet(St,ft,Et-ot.w_size,ot.w_size,0),ft=St,Et=ot.w_size),gt=k.avail_in,wt=k.next_in,it=k.input,k.avail_in=Et,k.next_in=0,k.input=ft,ht(ot);ot.lookahead>=I;){for(V=ot.strstart,F=ot.lookahead-(I-1);ot.ins_h=(ot.ins_h<<ot.hash_shift^ot.window[V+I-1])&ot.hash_mask,ot.prev[V&ot.w_mask]=ot.head[ot.ins_h],ot.head[ot.ins_h]=V,V++,--F;);ot.strstart=V,ot.lookahead=I-1,ht(ot)}return ot.strstart+=ot.lookahead,ot.block_start=ot.strstart,ot.insert=ot.lookahead,ot.lookahead=0,ot.match_length=ot.prev_length=I-1,ot.match_available=0,k.next_in=wt,k.input=it,k.avail_in=gt,ot.wrap=W,y},s.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,s){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,s){n.exports=function(o,l){var u,h,f,p,m,b,y,A,w,x,S,E,T,R,D,O,L,z,I,Q,at,U,Z,M,tt;u=o.state,h=o.next_in,M=o.input,f=h+(o.avail_in-5),p=o.next_out,tt=o.output,m=p-(l-o.avail_out),b=p+(o.avail_out-257),y=u.dmax,A=u.wsize,w=u.whave,x=u.wnext,S=u.window,E=u.hold,T=u.bits,R=u.lencode,D=u.distcode,O=(1<<u.lenbits)-1,L=(1<<u.distbits)-1;t:do{T<15&&(E+=M[h++]<<T,T+=8,E+=M[h++]<<T,T+=8),z=R[E&O];e:for(;;){if(E>>>=I=z>>>24,T-=I,(I=z>>>16&255)===0)tt[p++]=65535&z;else{if(!(16&I)){if((64&I)==0){z=R[(65535&z)+(E&(1<<I)-1)];continue e}if(32&I){u.mode=12;break t}o.msg="invalid literal/length code",u.mode=30;break t}Q=65535&z,(I&=15)&&(T<I&&(E+=M[h++]<<T,T+=8),Q+=E&(1<<I)-1,E>>>=I,T-=I),T<15&&(E+=M[h++]<<T,T+=8,E+=M[h++]<<T,T+=8),z=D[E&L];n:for(;;){if(E>>>=I=z>>>24,T-=I,!(16&(I=z>>>16&255))){if((64&I)==0){z=D[(65535&z)+(E&(1<<I)-1)];continue n}o.msg="invalid distance code",u.mode=30;break t}if(at=65535&z,T<(I&=15)&&(E+=M[h++]<<T,(T+=8)<I&&(E+=M[h++]<<T,T+=8)),y<(at+=E&(1<<I)-1)){o.msg="invalid distance too far back",u.mode=30;break t}if(E>>>=I,T-=I,(I=p-m)<at){if(w<(I=at-I)&&u.sane){o.msg="invalid distance too far back",u.mode=30;break t}if(Z=S,(U=0)===x){if(U+=A-I,I<Q){for(Q-=I;tt[p++]=S[U++],--I;);U=p-at,Z=tt}}else if(x<I){if(U+=A+x-I,(I-=x)<Q){for(Q-=I;tt[p++]=S[U++],--I;);if(U=0,x<Q){for(Q-=I=x;tt[p++]=S[U++],--I;);U=p-at,Z=tt}}}else if(U+=x-I,I<Q){for(Q-=I;tt[p++]=S[U++],--I;);U=p-at,Z=tt}for(;2<Q;)tt[p++]=Z[U++],tt[p++]=Z[U++],tt[p++]=Z[U++],Q-=3;Q&&(tt[p++]=Z[U++],1<Q&&(tt[p++]=Z[U++]))}else{for(U=p-at;tt[p++]=tt[U++],tt[p++]=tt[U++],tt[p++]=tt[U++],2<(Q-=3););Q&&(tt[p++]=tt[U++],1<Q&&(tt[p++]=tt[U++]))}break}}break}}while(h<f&&p<b);h-=Q=T>>3,E&=(1<<(T-=Q<<3))-1,o.next_in=h,o.next_out=p,o.avail_in=h<f?f-h+5:5-(h-f),o.avail_out=p<b?b-p+257:257-(p-b),u.hold=E,u.bits=T}},{}],49:[function(e,n,s){var o=e("../utils/common"),l=e("./adler32"),u=e("./crc32"),h=e("./inffast"),f=e("./inftrees"),p=1,m=2,b=0,y=-2,A=1,w=852,x=592;function S(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function T(U){var Z;return U&&U.state?(Z=U.state,U.total_in=U.total_out=Z.total=0,U.msg="",Z.wrap&&(U.adler=1&Z.wrap),Z.mode=A,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new o.Buf32(w),Z.distcode=Z.distdyn=new o.Buf32(x),Z.sane=1,Z.back=-1,b):y}function R(U){var Z;return U&&U.state?((Z=U.state).wsize=0,Z.whave=0,Z.wnext=0,T(U)):y}function D(U,Z){var M,tt;return U&&U.state?(tt=U.state,Z<0?(M=0,Z=-Z):(M=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?y:(tt.window!==null&&tt.wbits!==Z&&(tt.window=null),tt.wrap=M,tt.wbits=Z,R(U))):y}function O(U,Z){var M,tt;return U?(tt=new E,(U.state=tt).window=null,(M=D(U,Z))!==b&&(U.state=null),M):y}var L,z,I=!0;function Q(U){if(I){var Z;for(L=new o.Buf32(512),z=new o.Buf32(32),Z=0;Z<144;)U.lens[Z++]=8;for(;Z<256;)U.lens[Z++]=9;for(;Z<280;)U.lens[Z++]=7;for(;Z<288;)U.lens[Z++]=8;for(f(p,U.lens,0,288,L,0,U.work,{bits:9}),Z=0;Z<32;)U.lens[Z++]=5;f(m,U.lens,0,32,z,0,U.work,{bits:5}),I=!1}U.lencode=L,U.lenbits=9,U.distcode=z,U.distbits=5}function at(U,Z,M,tt){var H,j=U.state;return j.window===null&&(j.wsize=1<<j.wbits,j.wnext=0,j.whave=0,j.window=new o.Buf8(j.wsize)),tt>=j.wsize?(o.arraySet(j.window,Z,M-j.wsize,j.wsize,0),j.wnext=0,j.whave=j.wsize):(tt<(H=j.wsize-j.wnext)&&(H=tt),o.arraySet(j.window,Z,M-tt,H,j.wnext),(tt-=H)?(o.arraySet(j.window,Z,M-tt,tt,0),j.wnext=tt,j.whave=j.wsize):(j.wnext+=H,j.wnext===j.wsize&&(j.wnext=0),j.whave<j.wsize&&(j.whave+=H))),0}s.inflateReset=R,s.inflateReset2=D,s.inflateResetKeep=T,s.inflateInit=function(U){return O(U,15)},s.inflateInit2=O,s.inflate=function(U,Z){var M,tt,H,j,lt,st,B,_,N,X,K,$,ht,pt,At,vt,Ot,Mt,It,qt,k,ft,ot,V,F=0,W=new o.Buf8(4),gt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return y;(M=U.state).mode===12&&(M.mode=13),lt=U.next_out,H=U.output,B=U.avail_out,j=U.next_in,tt=U.input,st=U.avail_in,_=M.hold,N=M.bits,X=st,K=B,ft=b;t:for(;;)switch(M.mode){case A:if(M.wrap===0){M.mode=13;break}for(;N<16;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if(2&M.wrap&&_===35615){W[M.check=0]=255&_,W[1]=_>>>8&255,M.check=u(M.check,W,2,0),N=_=0,M.mode=2;break}if(M.flags=0,M.head&&(M.head.done=!1),!(1&M.wrap)||(((255&_)<<8)+(_>>8))%31){U.msg="incorrect header check",M.mode=30;break}if((15&_)!=8){U.msg="unknown compression method",M.mode=30;break}if(N-=4,k=8+(15&(_>>>=4)),M.wbits===0)M.wbits=k;else if(k>M.wbits){U.msg="invalid window size",M.mode=30;break}M.dmax=1<<k,U.adler=M.check=1,M.mode=512&_?10:12,N=_=0;break;case 2:for(;N<16;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if(M.flags=_,(255&M.flags)!=8){U.msg="unknown compression method",M.mode=30;break}if(57344&M.flags){U.msg="unknown header flags set",M.mode=30;break}M.head&&(M.head.text=_>>8&1),512&M.flags&&(W[0]=255&_,W[1]=_>>>8&255,M.check=u(M.check,W,2,0)),N=_=0,M.mode=3;case 3:for(;N<32;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}M.head&&(M.head.time=_),512&M.flags&&(W[0]=255&_,W[1]=_>>>8&255,W[2]=_>>>16&255,W[3]=_>>>24&255,M.check=u(M.check,W,4,0)),N=_=0,M.mode=4;case 4:for(;N<16;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}M.head&&(M.head.xflags=255&_,M.head.os=_>>8),512&M.flags&&(W[0]=255&_,W[1]=_>>>8&255,M.check=u(M.check,W,2,0)),N=_=0,M.mode=5;case 5:if(1024&M.flags){for(;N<16;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}M.length=_,M.head&&(M.head.extra_len=_),512&M.flags&&(W[0]=255&_,W[1]=_>>>8&255,M.check=u(M.check,W,2,0)),N=_=0}else M.head&&(M.head.extra=null);M.mode=6;case 6:if(1024&M.flags&&(st<($=M.length)&&($=st),$&&(M.head&&(k=M.head.extra_len-M.length,M.head.extra||(M.head.extra=new Array(M.head.extra_len)),o.arraySet(M.head.extra,tt,j,$,k)),512&M.flags&&(M.check=u(M.check,tt,$,j)),st-=$,j+=$,M.length-=$),M.length))break t;M.length=0,M.mode=7;case 7:if(2048&M.flags){if(st===0)break t;for($=0;k=tt[j+$++],M.head&&k&&M.length<65536&&(M.head.name+=String.fromCharCode(k)),k&&$<st;);if(512&M.flags&&(M.check=u(M.check,tt,$,j)),st-=$,j+=$,k)break t}else M.head&&(M.head.name=null);M.length=0,M.mode=8;case 8:if(4096&M.flags){if(st===0)break t;for($=0;k=tt[j+$++],M.head&&k&&M.length<65536&&(M.head.comment+=String.fromCharCode(k)),k&&$<st;);if(512&M.flags&&(M.check=u(M.check,tt,$,j)),st-=$,j+=$,k)break t}else M.head&&(M.head.comment=null);M.mode=9;case 9:if(512&M.flags){for(;N<16;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if(_!==(65535&M.check)){U.msg="header crc mismatch",M.mode=30;break}N=_=0}M.head&&(M.head.hcrc=M.flags>>9&1,M.head.done=!0),U.adler=M.check=0,M.mode=12;break;case 10:for(;N<32;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}U.adler=M.check=S(_),N=_=0,M.mode=11;case 11:if(M.havedict===0)return U.next_out=lt,U.avail_out=B,U.next_in=j,U.avail_in=st,M.hold=_,M.bits=N,2;U.adler=M.check=1,M.mode=12;case 12:if(Z===5||Z===6)break t;case 13:if(M.last){_>>>=7&N,N-=7&N,M.mode=27;break}for(;N<3;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}switch(M.last=1&_,N-=1,3&(_>>>=1)){case 0:M.mode=14;break;case 1:if(Q(M),M.mode=20,Z!==6)break;_>>>=2,N-=2;break t;case 2:M.mode=17;break;case 3:U.msg="invalid block type",M.mode=30}_>>>=2,N-=2;break;case 14:for(_>>>=7&N,N-=7&N;N<32;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if((65535&_)!=(_>>>16^65535)){U.msg="invalid stored block lengths",M.mode=30;break}if(M.length=65535&_,N=_=0,M.mode=15,Z===6)break t;case 15:M.mode=16;case 16:if($=M.length){if(st<$&&($=st),B<$&&($=B),$===0)break t;o.arraySet(H,tt,j,$,lt),st-=$,j+=$,B-=$,lt+=$,M.length-=$;break}M.mode=12;break;case 17:for(;N<14;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if(M.nlen=257+(31&_),_>>>=5,N-=5,M.ndist=1+(31&_),_>>>=5,N-=5,M.ncode=4+(15&_),_>>>=4,N-=4,286<M.nlen||30<M.ndist){U.msg="too many length or distance symbols",M.mode=30;break}M.have=0,M.mode=18;case 18:for(;M.have<M.ncode;){for(;N<3;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}M.lens[gt[M.have++]]=7&_,_>>>=3,N-=3}for(;M.have<19;)M.lens[gt[M.have++]]=0;if(M.lencode=M.lendyn,M.lenbits=7,ot={bits:M.lenbits},ft=f(0,M.lens,0,19,M.lencode,0,M.work,ot),M.lenbits=ot.bits,ft){U.msg="invalid code lengths set",M.mode=30;break}M.have=0,M.mode=19;case 19:for(;M.have<M.nlen+M.ndist;){for(;vt=(F=M.lencode[_&(1<<M.lenbits)-1])>>>16&255,Ot=65535&F,!((At=F>>>24)<=N);){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if(Ot<16)_>>>=At,N-=At,M.lens[M.have++]=Ot;else{if(Ot===16){for(V=At+2;N<V;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if(_>>>=At,N-=At,M.have===0){U.msg="invalid bit length repeat",M.mode=30;break}k=M.lens[M.have-1],$=3+(3&_),_>>>=2,N-=2}else if(Ot===17){for(V=At+3;N<V;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}N-=At,k=0,$=3+(7&(_>>>=At)),_>>>=3,N-=3}else{for(V=At+7;N<V;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}N-=At,k=0,$=11+(127&(_>>>=At)),_>>>=7,N-=7}if(M.have+$>M.nlen+M.ndist){U.msg="invalid bit length repeat",M.mode=30;break}for(;$--;)M.lens[M.have++]=k}}if(M.mode===30)break;if(M.lens[256]===0){U.msg="invalid code -- missing end-of-block",M.mode=30;break}if(M.lenbits=9,ot={bits:M.lenbits},ft=f(p,M.lens,0,M.nlen,M.lencode,0,M.work,ot),M.lenbits=ot.bits,ft){U.msg="invalid literal/lengths set",M.mode=30;break}if(M.distbits=6,M.distcode=M.distdyn,ot={bits:M.distbits},ft=f(m,M.lens,M.nlen,M.ndist,M.distcode,0,M.work,ot),M.distbits=ot.bits,ft){U.msg="invalid distances set",M.mode=30;break}if(M.mode=20,Z===6)break t;case 20:M.mode=21;case 21:if(6<=st&&258<=B){U.next_out=lt,U.avail_out=B,U.next_in=j,U.avail_in=st,M.hold=_,M.bits=N,h(U,K),lt=U.next_out,H=U.output,B=U.avail_out,j=U.next_in,tt=U.input,st=U.avail_in,_=M.hold,N=M.bits,M.mode===12&&(M.back=-1);break}for(M.back=0;vt=(F=M.lencode[_&(1<<M.lenbits)-1])>>>16&255,Ot=65535&F,!((At=F>>>24)<=N);){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if(vt&&(240&vt)==0){for(Mt=At,It=vt,qt=Ot;vt=(F=M.lencode[qt+((_&(1<<Mt+It)-1)>>Mt)])>>>16&255,Ot=65535&F,!(Mt+(At=F>>>24)<=N);){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}_>>>=Mt,N-=Mt,M.back+=Mt}if(_>>>=At,N-=At,M.back+=At,M.length=Ot,vt===0){M.mode=26;break}if(32&vt){M.back=-1,M.mode=12;break}if(64&vt){U.msg="invalid literal/length code",M.mode=30;break}M.extra=15&vt,M.mode=22;case 22:if(M.extra){for(V=M.extra;N<V;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}M.length+=_&(1<<M.extra)-1,_>>>=M.extra,N-=M.extra,M.back+=M.extra}M.was=M.length,M.mode=23;case 23:for(;vt=(F=M.distcode[_&(1<<M.distbits)-1])>>>16&255,Ot=65535&F,!((At=F>>>24)<=N);){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if((240&vt)==0){for(Mt=At,It=vt,qt=Ot;vt=(F=M.distcode[qt+((_&(1<<Mt+It)-1)>>Mt)])>>>16&255,Ot=65535&F,!(Mt+(At=F>>>24)<=N);){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}_>>>=Mt,N-=Mt,M.back+=Mt}if(_>>>=At,N-=At,M.back+=At,64&vt){U.msg="invalid distance code",M.mode=30;break}M.offset=Ot,M.extra=15&vt,M.mode=24;case 24:if(M.extra){for(V=M.extra;N<V;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}M.offset+=_&(1<<M.extra)-1,_>>>=M.extra,N-=M.extra,M.back+=M.extra}if(M.offset>M.dmax){U.msg="invalid distance too far back",M.mode=30;break}M.mode=25;case 25:if(B===0)break t;if($=K-B,M.offset>$){if(($=M.offset-$)>M.whave&&M.sane){U.msg="invalid distance too far back",M.mode=30;break}ht=$>M.wnext?($-=M.wnext,M.wsize-$):M.wnext-$,$>M.length&&($=M.length),pt=M.window}else pt=H,ht=lt-M.offset,$=M.length;for(B<$&&($=B),B-=$,M.length-=$;H[lt++]=pt[ht++],--$;);M.length===0&&(M.mode=21);break;case 26:if(B===0)break t;H[lt++]=M.length,B--,M.mode=21;break;case 27:if(M.wrap){for(;N<32;){if(st===0)break t;st--,_|=tt[j++]<<N,N+=8}if(K-=B,U.total_out+=K,M.total+=K,K&&(U.adler=M.check=M.flags?u(M.check,H,K,lt-K):l(M.check,H,K,lt-K)),K=B,(M.flags?_:S(_))!==M.check){U.msg="incorrect data check",M.mode=30;break}N=_=0}M.mode=28;case 28:if(M.wrap&&M.flags){for(;N<32;){if(st===0)break t;st--,_+=tt[j++]<<N,N+=8}if(_!==(4294967295&M.total)){U.msg="incorrect length check",M.mode=30;break}N=_=0}M.mode=29;case 29:ft=1;break t;case 30:ft=-3;break t;case 31:return-4;default:return y}return U.next_out=lt,U.avail_out=B,U.next_in=j,U.avail_in=st,M.hold=_,M.bits=N,(M.wsize||K!==U.avail_out&&M.mode<30&&(M.mode<27||Z!==4))&&at(U,U.output,U.next_out,K-U.avail_out)?(M.mode=31,-4):(X-=U.avail_in,K-=U.avail_out,U.total_in+=X,U.total_out+=K,M.total+=K,M.wrap&&K&&(U.adler=M.check=M.flags?u(M.check,H,K,U.next_out-K):l(M.check,H,K,U.next_out-K)),U.data_type=M.bits+(M.last?64:0)+(M.mode===12?128:0)+(M.mode===20||M.mode===15?256:0),(X==0&&K===0||Z===4)&&ft===b&&(ft=-5),ft)},s.inflateEnd=function(U){if(!U||!U.state)return y;var Z=U.state;return Z.window&&(Z.window=null),U.state=null,b},s.inflateGetHeader=function(U,Z){var M;return U&&U.state?(2&(M=U.state).wrap)==0?y:((M.head=Z).done=!1,b):y},s.inflateSetDictionary=function(U,Z){var M,tt=Z.length;return U&&U.state?(M=U.state).wrap!==0&&M.mode!==11?y:M.mode===11&&l(1,Z,tt,0)!==M.check?-3:at(U,Z,tt,tt)?(M.mode=31,-4):(M.havedict=1,b):y},s.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,s){var o=e("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(p,m,b,y,A,w,x,S){var E,T,R,D,O,L,z,I,Q,at=S.bits,U=0,Z=0,M=0,tt=0,H=0,j=0,lt=0,st=0,B=0,_=0,N=null,X=0,K=new o.Buf16(16),$=new o.Buf16(16),ht=null,pt=0;for(U=0;U<=15;U++)K[U]=0;for(Z=0;Z<y;Z++)K[m[b+Z]]++;for(H=at,tt=15;1<=tt&&K[tt]===0;tt--);if(tt<H&&(H=tt),tt===0)return A[w++]=20971520,A[w++]=20971520,S.bits=1,0;for(M=1;M<tt&&K[M]===0;M++);for(H<M&&(H=M),U=st=1;U<=15;U++)if(st<<=1,(st-=K[U])<0)return-1;if(0<st&&(p===0||tt!==1))return-1;for($[1]=0,U=1;U<15;U++)$[U+1]=$[U]+K[U];for(Z=0;Z<y;Z++)m[b+Z]!==0&&(x[$[m[b+Z]]++]=Z);if(L=p===0?(N=ht=x,19):p===1?(N=l,X-=257,ht=u,pt-=257,256):(N=h,ht=f,-1),U=M,O=w,lt=Z=_=0,R=-1,D=(B=1<<(j=H))-1,p===1&&852<B||p===2&&592<B)return 1;for(;;){for(z=U-lt,Q=x[Z]<L?(I=0,x[Z]):x[Z]>L?(I=ht[pt+x[Z]],N[X+x[Z]]):(I=96,0),E=1<<U-lt,M=T=1<<j;A[O+(_>>lt)+(T-=E)]=z<<24|I<<16|Q|0,T!==0;);for(E=1<<U-1;_&E;)E>>=1;if(E!==0?(_&=E-1,_+=E):_=0,Z++,--K[U]==0){if(U===tt)break;U=m[b+x[Z]]}if(H<U&&(_&D)!==R){for(lt===0&&(lt=H),O+=M,st=1<<(j=U-lt);j+lt<tt&&!((st-=K[j+lt])<=0);)j++,st<<=1;if(B+=1<<j,p===1&&852<B||p===2&&592<B)return 1;A[R=_&D]=H<<24|j<<16|O-w|0}}return _!==0&&(A[O+_]=U-lt<<24|64<<16|0),S.bits=H,0}},{"../utils/common":41}],51:[function(e,n,s){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,s){var o=e("../utils/common"),l=0,u=1;function h(F){for(var W=F.length;0<=--W;)F[W]=0}var f=0,p=29,m=256,b=m+1+p,y=30,A=19,w=2*b+1,x=15,S=16,E=7,T=256,R=16,D=17,O=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],at=new Array(2*(b+2));h(at);var U=new Array(2*y);h(U);var Z=new Array(512);h(Z);var M=new Array(256);h(M);var tt=new Array(p);h(tt);var H,j,lt,st=new Array(y);function B(F,W,gt,wt,it){this.static_tree=F,this.extra_bits=W,this.extra_base=gt,this.elems=wt,this.max_length=it,this.has_stree=F&&F.length}function _(F,W){this.dyn_tree=F,this.max_code=0,this.stat_desc=W}function N(F){return F<256?Z[F]:Z[256+(F>>>7)]}function X(F,W){F.pending_buf[F.pending++]=255&W,F.pending_buf[F.pending++]=W>>>8&255}function K(F,W,gt){F.bi_valid>S-gt?(F.bi_buf|=W<<F.bi_valid&65535,X(F,F.bi_buf),F.bi_buf=W>>S-F.bi_valid,F.bi_valid+=gt-S):(F.bi_buf|=W<<F.bi_valid&65535,F.bi_valid+=gt)}function $(F,W,gt){K(F,gt[2*W],gt[2*W+1])}function ht(F,W){for(var gt=0;gt|=1&F,F>>>=1,gt<<=1,0<--W;);return gt>>>1}function pt(F,W,gt){var wt,it,St=new Array(x+1),Et=0;for(wt=1;wt<=x;wt++)St[wt]=Et=Et+gt[wt-1]<<1;for(it=0;it<=W;it++){var xt=F[2*it+1];xt!==0&&(F[2*it]=ht(St[xt]++,xt))}}function At(F){var W;for(W=0;W<b;W++)F.dyn_ltree[2*W]=0;for(W=0;W<y;W++)F.dyn_dtree[2*W]=0;for(W=0;W<A;W++)F.bl_tree[2*W]=0;F.dyn_ltree[2*T]=1,F.opt_len=F.static_len=0,F.last_lit=F.matches=0}function vt(F){8<F.bi_valid?X(F,F.bi_buf):0<F.bi_valid&&(F.pending_buf[F.pending++]=F.bi_buf),F.bi_buf=0,F.bi_valid=0}function Ot(F,W,gt,wt){var it=2*W,St=2*gt;return F[it]<F[St]||F[it]===F[St]&&wt[W]<=wt[gt]}function Mt(F,W,gt){for(var wt=F.heap[gt],it=gt<<1;it<=F.heap_len&&(it<F.heap_len&&Ot(W,F.heap[it+1],F.heap[it],F.depth)&&it++,!Ot(W,wt,F.heap[it],F.depth));)F.heap[gt]=F.heap[it],gt=it,it<<=1;F.heap[gt]=wt}function It(F,W,gt){var wt,it,St,Et,xt=0;if(F.last_lit!==0)for(;wt=F.pending_buf[F.d_buf+2*xt]<<8|F.pending_buf[F.d_buf+2*xt+1],it=F.pending_buf[F.l_buf+xt],xt++,wt===0?$(F,it,W):($(F,(St=M[it])+m+1,W),(Et=L[St])!==0&&K(F,it-=tt[St],Et),$(F,St=N(--wt),gt),(Et=z[St])!==0&&K(F,wt-=st[St],Et)),xt<F.last_lit;);$(F,T,W)}function qt(F,W){var gt,wt,it,St=W.dyn_tree,Et=W.stat_desc.static_tree,xt=W.stat_desc.has_stree,Lt=W.stat_desc.elems,re=-1;for(F.heap_len=0,F.heap_max=w,gt=0;gt<Lt;gt++)St[2*gt]!==0?(F.heap[++F.heap_len]=re=gt,F.depth[gt]=0):St[2*gt+1]=0;for(;F.heap_len<2;)St[2*(it=F.heap[++F.heap_len]=re<2?++re:0)]=1,F.depth[it]=0,F.opt_len--,xt&&(F.static_len-=Et[2*it+1]);for(W.max_code=re,gt=F.heap_len>>1;1<=gt;gt--)Mt(F,St,gt);for(it=Lt;gt=F.heap[1],F.heap[1]=F.heap[F.heap_len--],Mt(F,St,1),wt=F.heap[1],F.heap[--F.heap_max]=gt,F.heap[--F.heap_max]=wt,St[2*it]=St[2*gt]+St[2*wt],F.depth[it]=(F.depth[gt]>=F.depth[wt]?F.depth[gt]:F.depth[wt])+1,St[2*gt+1]=St[2*wt+1]=it,F.heap[1]=it++,Mt(F,St,1),2<=F.heap_len;);F.heap[--F.heap_max]=F.heap[1],(function(Xt,sn){var li,pn,Ni,de,Qe,Gn,Ce=sn.dyn_tree,al=sn.max_code,Cu=sn.stat_desc.static_tree,ku=sn.stat_desc.has_stree,vr=sn.stat_desc.extra_bits,Is=sn.stat_desc.extra_base,bi=sn.stat_desc.max_length,Xn=0;for(de=0;de<=x;de++)Xt.bl_count[de]=0;for(Ce[2*Xt.heap[Xt.heap_max]+1]=0,li=Xt.heap_max+1;li<w;li++)bi<(de=Ce[2*Ce[2*(pn=Xt.heap[li])+1]+1]+1)&&(de=bi,Xn++),Ce[2*pn+1]=de,al<pn||(Xt.bl_count[de]++,Qe=0,Is<=pn&&(Qe=vr[pn-Is]),Gn=Ce[2*pn],Xt.opt_len+=Gn*(de+Qe),ku&&(Xt.static_len+=Gn*(Cu[2*pn+1]+Qe)));if(Xn!==0){do{for(de=bi-1;Xt.bl_count[de]===0;)de--;Xt.bl_count[de]--,Xt.bl_count[de+1]+=2,Xt.bl_count[bi]--,Xn-=2}while(0<Xn);for(de=bi;de!==0;de--)for(pn=Xt.bl_count[de];pn!==0;)al<(Ni=Xt.heap[--li])||(Ce[2*Ni+1]!==de&&(Xt.opt_len+=(de-Ce[2*Ni+1])*Ce[2*Ni],Ce[2*Ni+1]=de),pn--)}})(F,W),pt(St,re,F.bl_count)}function k(F,W,gt){var wt,it,St=-1,Et=W[1],xt=0,Lt=7,re=4;for(Et===0&&(Lt=138,re=3),W[2*(gt+1)+1]=65535,wt=0;wt<=gt;wt++)it=Et,Et=W[2*(wt+1)+1],++xt<Lt&&it===Et||(xt<re?F.bl_tree[2*it]+=xt:it!==0?(it!==St&&F.bl_tree[2*it]++,F.bl_tree[2*R]++):xt<=10?F.bl_tree[2*D]++:F.bl_tree[2*O]++,St=it,re=(xt=0)===Et?(Lt=138,3):it===Et?(Lt=6,3):(Lt=7,4))}function ft(F,W,gt){var wt,it,St=-1,Et=W[1],xt=0,Lt=7,re=4;for(Et===0&&(Lt=138,re=3),wt=0;wt<=gt;wt++)if(it=Et,Et=W[2*(wt+1)+1],!(++xt<Lt&&it===Et)){if(xt<re)for(;$(F,it,F.bl_tree),--xt!=0;);else it!==0?(it!==St&&($(F,it,F.bl_tree),xt--),$(F,R,F.bl_tree),K(F,xt-3,2)):xt<=10?($(F,D,F.bl_tree),K(F,xt-3,3)):($(F,O,F.bl_tree),K(F,xt-11,7));St=it,re=(xt=0)===Et?(Lt=138,3):it===Et?(Lt=6,3):(Lt=7,4)}}h(st);var ot=!1;function V(F,W,gt,wt){K(F,(f<<1)+(wt?1:0),3),(function(it,St,Et,xt){vt(it),X(it,Et),X(it,~Et),o.arraySet(it.pending_buf,it.window,St,Et,it.pending),it.pending+=Et})(F,W,gt)}s._tr_init=function(F){ot||((function(){var W,gt,wt,it,St,Et=new Array(x+1);for(it=wt=0;it<p-1;it++)for(tt[it]=wt,W=0;W<1<<L[it];W++)M[wt++]=it;for(M[wt-1]=it,it=St=0;it<16;it++)for(st[it]=St,W=0;W<1<<z[it];W++)Z[St++]=it;for(St>>=7;it<y;it++)for(st[it]=St<<7,W=0;W<1<<z[it]-7;W++)Z[256+St++]=it;for(gt=0;gt<=x;gt++)Et[gt]=0;for(W=0;W<=143;)at[2*W+1]=8,W++,Et[8]++;for(;W<=255;)at[2*W+1]=9,W++,Et[9]++;for(;W<=279;)at[2*W+1]=7,W++,Et[7]++;for(;W<=287;)at[2*W+1]=8,W++,Et[8]++;for(pt(at,b+1,Et),W=0;W<y;W++)U[2*W+1]=5,U[2*W]=ht(W,5);H=new B(at,L,m+1,b,x),j=new B(U,z,0,y,x),lt=new B(new Array(0),I,0,A,E)})(),ot=!0),F.l_desc=new _(F.dyn_ltree,H),F.d_desc=new _(F.dyn_dtree,j),F.bl_desc=new _(F.bl_tree,lt),F.bi_buf=0,F.bi_valid=0,At(F)},s._tr_stored_block=V,s._tr_flush_block=function(F,W,gt,wt){var it,St,Et=0;0<F.level?(F.strm.data_type===2&&(F.strm.data_type=(function(xt){var Lt,re=4093624447;for(Lt=0;Lt<=31;Lt++,re>>>=1)if(1&re&&xt.dyn_ltree[2*Lt]!==0)return l;if(xt.dyn_ltree[18]!==0||xt.dyn_ltree[20]!==0||xt.dyn_ltree[26]!==0)return u;for(Lt=32;Lt<m;Lt++)if(xt.dyn_ltree[2*Lt]!==0)return u;return l})(F)),qt(F,F.l_desc),qt(F,F.d_desc),Et=(function(xt){var Lt;for(k(xt,xt.dyn_ltree,xt.l_desc.max_code),k(xt,xt.dyn_dtree,xt.d_desc.max_code),qt(xt,xt.bl_desc),Lt=A-1;3<=Lt&&xt.bl_tree[2*Q[Lt]+1]===0;Lt--);return xt.opt_len+=3*(Lt+1)+5+5+4,Lt})(F),it=F.opt_len+3+7>>>3,(St=F.static_len+3+7>>>3)<=it&&(it=St)):it=St=gt+5,gt+4<=it&&W!==-1?V(F,W,gt,wt):F.strategy===4||St===it?(K(F,2+(wt?1:0),3),It(F,at,U)):(K(F,4+(wt?1:0),3),(function(xt,Lt,re,Xt){var sn;for(K(xt,Lt-257,5),K(xt,re-1,5),K(xt,Xt-4,4),sn=0;sn<Xt;sn++)K(xt,xt.bl_tree[2*Q[sn]+1],3);ft(xt,xt.dyn_ltree,Lt-1),ft(xt,xt.dyn_dtree,re-1)})(F,F.l_desc.max_code+1,F.d_desc.max_code+1,Et+1),It(F,F.dyn_ltree,F.dyn_dtree)),At(F),wt&&vt(F)},s._tr_tally=function(F,W,gt){return F.pending_buf[F.d_buf+2*F.last_lit]=W>>>8&255,F.pending_buf[F.d_buf+2*F.last_lit+1]=255&W,F.pending_buf[F.l_buf+F.last_lit]=255&gt,F.last_lit++,W===0?F.dyn_ltree[2*gt]++:(F.matches++,W--,F.dyn_ltree[2*(M[gt]+m+1)]++,F.dyn_dtree[2*N(W)]++),F.last_lit===F.lit_bufsize-1},s._tr_align=function(F){K(F,2,3),$(F,T,at),(function(W){W.bi_valid===16?(X(W,W.bi_buf),W.bi_buf=0,W.bi_valid=0):8<=W.bi_valid&&(W.pending_buf[W.pending++]=255&W.bi_buf,W.bi_buf>>=8,W.bi_valid-=8)})(F)}},{"../utils/common":41}],53:[function(e,n,s){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,s){(function(o){(function(l,u){if(!l.setImmediate){var h,f,p,m,b=1,y={},A=!1,w=l.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(l);x=x&&x.setTimeout?x:l,h={}.toString.call(l.process)==="[object process]"?function(R){process.nextTick(function(){E(R)})}:(function(){if(l.postMessage&&!l.importScripts){var R=!0,D=l.onmessage;return l.onmessage=function(){R=!1},l.postMessage("","*"),l.onmessage=D,R}})()?(m="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",T,!1):l.attachEvent("onmessage",T),function(R){l.postMessage(m+R,"*")}):l.MessageChannel?((p=new MessageChannel).port1.onmessage=function(R){E(R.data)},function(R){p.port2.postMessage(R)}):w&&"onreadystatechange"in w.createElement("script")?(f=w.documentElement,function(R){var D=w.createElement("script");D.onreadystatechange=function(){E(R),D.onreadystatechange=null,f.removeChild(D),D=null},f.appendChild(D)}):function(R){setTimeout(E,0,R)},x.setImmediate=function(R){typeof R!="function"&&(R=new Function(""+R));for(var D=new Array(arguments.length-1),O=0;O<D.length;O++)D[O]=arguments[O+1];var L={callback:R,args:D};return y[b]=L,h(b),b++},x.clearImmediate=S}function S(R){delete y[R]}function E(R){if(A)setTimeout(E,0,R);else{var D=y[R];if(D){A=!0;try{(function(O){var L=O.callback,z=O.args;switch(z.length){case 0:L();break;case 1:L(z[0]);break;case 2:L(z[0],z[1]);break;case 3:L(z[0],z[1],z[2]);break;default:L.apply(u,z)}})(D)}finally{S(R),A=!1}}}}function T(R){R.source===l&&typeof R.data=="string"&&R.data.indexOf(m)===0&&E(+R.data.slice(m.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof wc<"u"?wc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Af)),Af.exports}var yR=bR();const WA=z_(yR);var Fe;(function(a){a.OfficeDocument="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",a.FontTable="http://schemas.openxmlformats.org/officeDocument/2006/relationships/fontTable",a.Image="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",a.Numbering="http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering",a.Styles="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",a.StylesWithEffects="http://schemas.microsoft.com/office/2007/relationships/stylesWithEffects",a.Theme="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",a.Settings="http://schemas.openxmlformats.org/officeDocument/2006/relationships/settings",a.WebSettings="http://schemas.openxmlformats.org/officeDocument/2006/relationships/webSettings",a.Hyperlink="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",a.Footnotes="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footnotes",a.Endnotes="http://schemas.openxmlformats.org/officeDocument/2006/relationships/endnotes",a.Footer="http://schemas.openxmlformats.org/officeDocument/2006/relationships/footer",a.Header="http://schemas.openxmlformats.org/officeDocument/2006/relationships/header",a.ExtendedProperties="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",a.CoreProperties="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",a.CustomProperties="http://schemas.openxmlformats.org/package/2006/relationships/metadata/custom-properties",a.Comments="http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",a.CommentsExtended="http://schemas.microsoft.com/office/2011/relationships/commentsExtended",a.AltChunk="http://schemas.openxmlformats.org/officeDocument/2006/relationships/aFChunk"})(Fe||(Fe={}));function vR(a,t){return t.elements(a).map(e=>({id:t.attr(e,"Id"),type:t.attr(e,"Type"),target:t.attr(e,"Target"),targetMode:t.attr(e,"TargetMode")}))}function wR(a){return a?.replace(/[ .]+/g,"-").replace(/[&]+/g,"and").toLowerCase()}function up(a){return/^[^"'].*\s.*[^"']$/.test(a)?`'${a}'`:a}function Wc(a){let t=a.lastIndexOf("/")+1,e=t==0?"":a.substring(0,t),n=t==0?a:a.substring(t);return[e,n]}function Sf(a,t){try{const e="http://docx/";return new URL(a,e+t).toString().substring(e.length)}catch{return`${t}${a}`}}function Ds(a,t){return a.reduce((e,n)=>(e[t(n)]=n,e),{})}function AR(a){return new Promise((t,e)=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.onerror=()=>e(),n.readAsDataURL(a)})}function xf(a){return a&&typeof a=="object"&&!Array.isArray(a)}function SR(a){return typeof a=="string"||a instanceof String}function lu(a,...t){if(!t.length)return a;const e=t.shift();if(xf(a)&&xf(e))for(const n in e)if(xf(e[n])){const s=a[n]??(a[n]={});lu(s,e[n])}else a[n]=e[n];return lu(a,...t)}function Mo(a){return Array.isArray(a)?a:[a]}function xR(a,t,e){return t>a?t:e<a?e:a}const KA={wordml:"http://schemas.openxmlformats.org/wordprocessingml/2006/main"},Xe={Dxa:{mul:.05,unit:"pt"},Emu:{mul:1/12700,unit:"pt"},FontSize:{mul:.5,unit:"pt"},Border:{mul:.125,unit:"pt",min:.25,max:12},Point:{mul:1,unit:"pt"},Percent:{mul:.02,unit:"%"}};function ZA(a,t=Xe.Dxa){if(a==null||/.+(p[xt]|[%])$/.test(a))return a;var e=parseInt(a)*t.mul;return t.min&&t.max&&(e=xR(e,t.min,t.max)),`${e.toFixed(2)}${t.unit}`}function _R(a,t=!1){switch(a){case"1":return!0;case"0":return!1;case"on":return!0;case"off":return!1;case"true":return!0;case"false":return!1;default:return t}}function QA(a,t,e){if(a.namespaceURI!=KA.wordml)return!1;switch(a.localName){case"color":t.color=e.attr(a,"val");break;case"sz":t.fontSize=e.lengthAttr(a,"val",Xe.FontSize);break;default:return!1}return!0}function ER(a,t=!1){t&&(a=a.replace(/<[?].*[?]>/,"")),a=CR(a);const e=new DOMParser().parseFromString(a,"application/xml"),n=TR(e);if(n)throw new Error(n);return e}function TR(a){return a.getElementsByTagName("parsererror")[0]?.textContent}function CR(a){return a.charCodeAt(0)===65279?a.substring(1):a}function kR(a){return new XMLSerializer().serializeToString(a)}class JA{elements(t,e=null){const n=[];for(let s=0,o=t.childNodes.length;s<o;s++){let l=t.childNodes.item(s);l.nodeType==Node.ELEMENT_NODE&&(e==null||l.localName==e)&&n.push(l)}return n}element(t,e){for(let n=0,s=t.childNodes.length;n<s;n++){let o=t.childNodes.item(n);if(o.nodeType==1&&o.localName==e)return o}return null}elementAttr(t,e,n){var s=this.element(t,e);return s?this.attr(s,n):void 0}attrs(t){return Array.from(t.attributes)}attr(t,e){for(let n=0,s=t.attributes.length;n<s;n++){let o=t.attributes.item(n);if(o.localName==e)return o.value}return null}intAttr(t,e,n=null){var s=this.attr(t,e);return s?parseInt(s):n}hexAttr(t,e,n=null){var s=this.attr(t,e);return s?parseInt(s,16):n}floatAttr(t,e,n=null){var s=this.attr(t,e);return s?parseFloat(s):n}boolAttr(t,e,n=null){return _R(this.attr(t,e),n)}lengthAttr(t,e,n=Xe.Dxa){return ZA(this.attr(t,e),n)}}const q=new JA;class Hn{constructor(t,e){this._package=t,this.path=e}async load(){this.rels=await this._package.loadRelationships(this.path);const t=await this._package.load(this.path),e=this._package.parseXmlDocument(t);this._package.options.keepOrigin&&(this._xmlDocument=e),this.parseXml(e.firstElementChild)}save(){this._package.update(this.path,kR(this._xmlDocument))}parseXml(t){}}const MR={embedRegular:"regular",embedBold:"bold",embedItalic:"italic",embedBoldItalic:"boldItalic"};function DR(a,t){return t.elements(a).map(e=>RR(e,t))}function RR(a,t){let e={name:t.attr(a,"name"),embedFontRefs:[]};for(let n of t.elements(a))switch(n.localName){case"family":e.family=t.attr(n,"val");break;case"altName":e.altName=t.attr(n,"val");break;case"embedRegular":case"embedBold":case"embedItalic":case"embedBoldItalic":e.embedFontRefs.push(NR(n,t));break}return e}function NR(a,t){return{id:t.attr(a,"id"),key:t.attr(a,"fontKey"),type:MR[a.localName]}}class PR extends Hn{parseXml(t){this.fonts=DR(t,this._package.xmlParser)}}class am{constructor(t,e){this._zip=t,this.options=e,this.xmlParser=new JA}get(t){const e=OR(t);return this._zip.files[e]??this._zip.files[e.replace(/\//g,"\\")]}update(t,e){this._zip.file(t,e)}static async load(t,e){const n=await WA.loadAsync(t);return new am(n,e)}save(t="blob"){return this._zip.generateAsync({type:t})}load(t,e="string"){return this.get(t)?.async(e)??Promise.resolve(null)}async loadRelationships(t=null){let e="_rels/.rels";if(t!=null){const[s,o]=Wc(t);e=`${s}_rels/${o}.rels`}const n=await this.load(e);return n?vR(this.parseXmlDocument(n).firstElementChild,this.xmlParser):null}parseXmlDocument(t){return ER(t,this.options.trimXmlDeclaration)}}function OR(a){return a.startsWith("/")?a.substr(1):a}class LR extends Hn{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){this.body=this._documentParser.parseDocumentFile(t)}}function Lc(a,t){return{type:t.attr(a,"val"),color:t.attr(a,"color"),size:t.lengthAttr(a,"sz",Xe.Border),offset:t.lengthAttr(a,"space",Xe.Point),frame:t.boolAttr(a,"frame"),shadow:t.boolAttr(a,"shadow")}}function BR(a,t){var e={};for(let n of t.elements(a))switch(n.localName){case"left":e.left=Lc(n,t);break;case"top":e.top=Lc(n,t);break;case"right":e.right=Lc(n,t);break;case"bottom":e.bottom=Lc(n,t);break}return e}var d1;(function(a){a.Continuous="continuous",a.NextPage="nextPage",a.NextColumn="nextColumn",a.EvenPage="evenPage",a.OddPage="oddPage"})(d1||(d1={}));function tS(a,t=q){var e={};for(let n of t.elements(a))switch(n.localName){case"pgSz":e.pageSize={width:t.lengthAttr(n,"w"),height:t.lengthAttr(n,"h"),orientation:t.attr(n,"orient")};break;case"type":e.type=t.attr(n,"val");break;case"pgMar":e.pageMargins={left:t.lengthAttr(n,"left"),right:t.lengthAttr(n,"right"),top:t.lengthAttr(n,"top"),bottom:t.lengthAttr(n,"bottom"),header:t.lengthAttr(n,"header"),footer:t.lengthAttr(n,"footer"),gutter:t.lengthAttr(n,"gutter")};break;case"cols":e.columns=zR(n,t);break;case"headerReference":(e.headerRefs??(e.headerRefs=[])).push(f1(n,t));break;case"footerReference":(e.footerRefs??(e.footerRefs=[])).push(f1(n,t));break;case"titlePg":e.titlePage=t.boolAttr(n,"val",!0);break;case"pgBorders":e.pageBorders=BR(n,t);break;case"pgNumType":e.pageNumber=FR(n,t);break}return e}function zR(a,t){return{numberOfColumns:t.intAttr(a,"num"),space:t.lengthAttr(a,"space"),separator:t.boolAttr(a,"sep"),equalWidth:t.boolAttr(a,"equalWidth",!0),columns:t.elements(a,"col").map(e=>({width:t.lengthAttr(e,"w"),space:t.lengthAttr(e,"space")}))}}function FR(a,t){return{chapSep:t.attr(a,"chapSep"),chapStyle:t.attr(a,"chapStyle"),format:t.attr(a,"fmt"),start:t.intAttr(a,"start")}}function f1(a,t){return{id:t.attr(a,"id"),type:t.attr(a,"type")}}function IR(a,t){return{before:t.lengthAttr(a,"before"),after:t.lengthAttr(a,"after"),line:t.intAttr(a,"line"),lineRule:t.attr(a,"lineRule")}}function om(a,t){let e={};for(let n of t.elements(a))UR(n,e,t);return e}function UR(a,t,e){return!!QA(a,t,e)}function eS(a,t){let e={};for(let n of t.elements(a))nS(n,e,t);return e}function nS(a,t,e){if(a.namespaceURI!=KA.wordml)return!1;if(QA(a,t,e))return!0;switch(a.localName){case"tabs":t.tabs=jR(a,e);break;case"sectPr":t.sectionProps=tS(a,e);break;case"numPr":t.numbering=VR(a,e);break;case"spacing":return t.lineSpacing=IR(a,e),!1;case"textAlignment":return t.textAlignment=e.attr(a,"val"),!1;case"keepLines":t.keepLines=e.boolAttr(a,"val",!0);break;case"keepNext":t.keepNext=e.boolAttr(a,"val",!0);break;case"pageBreakBefore":t.pageBreakBefore=e.boolAttr(a,"val",!0);break;case"outlineLvl":t.outlineLevel=e.intAttr(a,"val");break;case"pStyle":t.styleName=e.attr(a,"val");break;case"rPr":t.runProps=om(a,e);break;default:return!1}return!0}function jR(a,t){return t.elements(a,"tab").map(e=>({position:t.lengthAttr(e,"pos"),leader:t.attr(e,"leader"),style:t.attr(e,"val")}))}function VR(a,t){var e={};for(let n of t.elements(a))switch(n.localName){case"numId":e.id=t.attr(n,"val");break;case"ilvl":e.level=t.intAttr(n,"val");break}return e}function HR(a,t){let e={numberings:[],abstractNumberings:[],bulletPictures:[]};for(let n of t.elements(a))switch(n.localName){case"num":e.numberings.push(GR(n,t));break;case"abstractNum":e.abstractNumberings.push(XR(n,t));break;case"numPicBullet":e.bulletPictures.push(qR(n,t));break}return e}function GR(a,t){let e={id:t.attr(a,"numId"),overrides:[]};for(let n of t.elements(a))switch(n.localName){case"abstractNumId":e.abstractId=t.attr(n,"val");break;case"lvlOverride":e.overrides.push(YR(n,t));break}return e}function XR(a,t){let e={id:t.attr(a,"abstractNumId"),levels:[]};for(let n of t.elements(a))switch(n.localName){case"name":e.name=t.attr(n,"val");break;case"multiLevelType":e.multiLevelType=t.attr(n,"val");break;case"numStyleLink":e.numberingStyleLink=t.attr(n,"val");break;case"styleLink":e.styleLink=t.attr(n,"val");break;case"lvl":e.levels.push(iS(n,t));break}return e}function iS(a,t){let e={level:t.intAttr(a,"ilvl")};for(let n of t.elements(a))switch(n.localName){case"start":e.start=t.attr(n,"val");break;case"lvlRestart":e.restart=t.intAttr(n,"val");break;case"numFmt":e.format=t.attr(n,"val");break;case"lvlText":e.text=t.attr(n,"val");break;case"lvlJc":e.justification=t.attr(n,"val");break;case"lvlPicBulletId":e.bulletPictureId=t.attr(n,"val");break;case"pStyle":e.paragraphStyle=t.attr(n,"val");break;case"pPr":e.paragraphProps=eS(n,t);break;case"rPr":e.runProps=om(n,t);break}return e}function YR(a,t){let e={level:t.intAttr(a,"ilvl")};for(let n of t.elements(a))switch(n.localName){case"startOverride":e.start=t.intAttr(n,"val");break;case"lvl":e.numberingLevel=iS(n,t);break}return e}function qR(a,t){var e=t.element(a,"pict"),n=e&&t.element(e,"shape"),s=n&&t.element(n,"imagedata");return s?{id:t.attr(a,"numPicBulletId"),referenceId:t.attr(s,"id"),style:t.attr(n,"style")}:null}class $R extends Hn{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){Object.assign(this,HR(t,this._package.xmlParser)),this.domNumberings=this._documentParser.parseNumberingFile(t)}}class WR extends Hn{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){this.styles=this._documentParser.parseStylesFile(t)}}var ut;(function(a){a.Document="document",a.Paragraph="paragraph",a.Run="run",a.Break="break",a.NoBreakHyphen="noBreakHyphen",a.Table="table",a.Row="row",a.Cell="cell",a.Hyperlink="hyperlink",a.SmartTag="smartTag",a.Drawing="drawing",a.Image="image",a.Text="text",a.Tab="tab",a.Symbol="symbol",a.BookmarkStart="bookmarkStart",a.BookmarkEnd="bookmarkEnd",a.Footer="footer",a.Header="header",a.FootnoteReference="footnoteReference",a.EndnoteReference="endnoteReference",a.Footnote="footnote",a.Endnote="endnote",a.SimpleField="simpleField",a.ComplexField="complexField",a.Instruction="instruction",a.VmlPicture="vmlPicture",a.MmlMath="mmlMath",a.MmlMathParagraph="mmlMathParagraph",a.MmlFraction="mmlFraction",a.MmlFunction="mmlFunction",a.MmlFunctionName="mmlFunctionName",a.MmlNumerator="mmlNumerator",a.MmlDenominator="mmlDenominator",a.MmlRadical="mmlRadical",a.MmlBase="mmlBase",a.MmlDegree="mmlDegree",a.MmlSuperscript="mmlSuperscript",a.MmlSubscript="mmlSubscript",a.MmlPreSubSuper="mmlPreSubSuper",a.MmlSubArgument="mmlSubArgument",a.MmlSuperArgument="mmlSuperArgument",a.MmlNary="mmlNary",a.MmlDelimiter="mmlDelimiter",a.MmlRun="mmlRun",a.MmlEquationArray="mmlEquationArray",a.MmlLimit="mmlLimit",a.MmlLimitLower="mmlLimitLower",a.MmlMatrix="mmlMatrix",a.MmlMatrixRow="mmlMatrixRow",a.MmlBox="mmlBox",a.MmlBar="mmlBar",a.MmlGroupChar="mmlGroupChar",a.VmlElement="vmlElement",a.Inserted="inserted",a.Deleted="deleted",a.DeletedText="deletedText",a.Comment="comment",a.CommentReference="commentReference",a.CommentRangeStart="commentRangeStart",a.CommentRangeEnd="commentRangeEnd",a.AltChunk="altChunk"})(ut||(ut={}));class br{constructor(){this.children=[],this.cssStyle={}}}class KR extends br{constructor(){super(...arguments),this.type=ut.Header}}class ZR extends br{constructor(){super(...arguments),this.type=ut.Footer}}class sS extends Hn{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){this.rootElement=this.createRootElement(),this.rootElement.children=this._documentParser.parseBodyElements(t)}}class QR extends sS{createRootElement(){return new KR}}class JR extends sS{createRootElement(){return new ZR}}function tN(a,t){const e={};for(let n of t.elements(a))switch(n.localName){case"Template":e.template=n.textContent;break;case"Pages":e.pages=Do(n.textContent);break;case"Words":e.words=Do(n.textContent);break;case"Characters":e.characters=Do(n.textContent);break;case"Application":e.application=n.textContent;break;case"Lines":e.lines=Do(n.textContent);break;case"Paragraphs":e.paragraphs=Do(n.textContent);break;case"Company":e.company=n.textContent;break;case"AppVersion":e.appVersion=n.textContent;break}return e}function Do(a){if(!(typeof a>"u"))return parseInt(a)}class eN extends Hn{parseXml(t){this.props=tN(t,this._package.xmlParser)}}function nN(a,t){const e={};for(let n of t.elements(a))switch(n.localName){case"title":e.title=n.textContent;break;case"description":e.description=n.textContent;break;case"subject":e.subject=n.textContent;break;case"creator":e.creator=n.textContent;break;case"keywords":e.keywords=n.textContent;break;case"language":e.language=n.textContent;break;case"lastModifiedBy":e.lastModifiedBy=n.textContent;break;case"revision":n.textContent&&(e.revision=parseInt(n.textContent));break}return e}class iN extends Hn{parseXml(t){this.props=nN(t,this._package.xmlParser)}}class sN{}function rN(a,t){var e=new sN,n=t.element(a,"themeElements");for(let s of t.elements(n))switch(s.localName){case"clrScheme":e.colorScheme=aN(s,t);break;case"fontScheme":e.fontScheme=oN(s,t);break}return e}function aN(a,t){var e={name:t.attr(a,"name"),colors:{}};for(let o of t.elements(a)){var n=t.element(o,"srgbClr"),s=t.element(o,"sysClr");n?e.colors[o.localName]=t.attr(n,"val"):s&&(e.colors[o.localName]=t.attr(s,"lastClr"))}return e}function oN(a,t){var e={name:t.attr(a,"name")};for(let n of t.elements(a))switch(n.localName){case"majorFont":e.majorFont=p1(n,t);break;case"minorFont":e.minorFont=p1(n,t);break}return e}function p1(a,t){return{latinTypeface:t.elementAttr(a,"latin","typeface"),eaTypeface:t.elementAttr(a,"ea","typeface"),csTypeface:t.elementAttr(a,"cs","typeface")}}class lN extends Hn{constructor(t,e){super(t,e)}parseXml(t){this.theme=rN(t,this._package.xmlParser)}}class rS{}class cN extends rS{constructor(){super(...arguments),this.type=ut.Footnote}}class uN extends rS{constructor(){super(...arguments),this.type=ut.Endnote}}class aS extends Hn{constructor(t,e,n){super(t,e),this._documentParser=n}}class hN extends aS{constructor(t,e,n){super(t,e,n)}parseXml(t){this.notes=this._documentParser.parseNotes(t,"footnote",cN)}}class dN extends aS{constructor(t,e,n){super(t,e,n)}parseXml(t){this.notes=this._documentParser.parseNotes(t,"endnote",uN)}}function fN(a,t){var e={};for(let n of t.elements(a))switch(n.localName){case"defaultTabStop":e.defaultTabStop=t.lengthAttr(n,"val");break;case"footnotePr":e.footnoteProps=m1(n,t);break;case"endnotePr":e.endnoteProps=m1(n,t);break;case"autoHyphenation":e.autoHyphenation=t.boolAttr(n,"val");break}return e}function m1(a,t){var e={defaultNoteIds:[]};for(let n of t.elements(a))switch(n.localName){case"numFmt":e.nummeringFormat=t.attr(n,"val");break;case"footnote":case"endnote":e.defaultNoteIds.push(t.attr(n,"id"));break}return e}class pN extends Hn{constructor(t,e){super(t,e)}parseXml(t){this.settings=fN(t,this._package.xmlParser)}}function mN(a,t){return t.elements(a,"property").map(e=>{const n=e.firstChild;return{formatId:t.attr(e,"fmtid"),name:t.attr(e,"name"),type:n.nodeName,value:n.textContent}})}class gN extends Hn{parseXml(t){this.props=mN(t,this._package.xmlParser)}}class bN extends Hn{constructor(t,e,n){super(t,e),this._documentParser=n}parseXml(t){this.comments=this._documentParser.parseComments(t),this.commentMap=Ds(this.comments,e=>e.id)}}class yN extends Hn{constructor(t,e){super(t,e),this.comments=[]}parseXml(t){const e=this._package.xmlParser;for(let n of e.elements(t,"commentEx"))this.comments.push({paraId:e.attr(n,"paraId"),paraIdParent:e.attr(n,"paraIdParent"),done:e.boolAttr(n,"done")});this.commentMap=Ds(this.comments,n=>n.paraId)}}const vN=[{type:Fe.OfficeDocument,target:"word/document.xml"},{type:Fe.ExtendedProperties,target:"docProps/app.xml"},{type:Fe.CoreProperties,target:"docProps/core.xml"},{type:Fe.CustomProperties,target:"docProps/custom.xml"}];class lm{constructor(){this.parts=[],this.partsMap={}}static async load(t,e,n){var s=new lm;return s._options=n,s._parser=e,s._package=await am.load(t,n),s.rels=await s._package.loadRelationships(),await Promise.all(vN.map(o=>{const l=s.rels.find(u=>u.type===o.type)??o;return s.loadRelationshipPart(l.target,l.type)})),s}save(t="blob"){return this._package.save(t)}async loadRelationshipPart(t,e){if(this.partsMap[t])return this.partsMap[t];if(!this._package.get(t))return null;let n=null;switch(e){case Fe.OfficeDocument:this.documentPart=n=new LR(this._package,t,this._parser);break;case Fe.FontTable:this.fontTablePart=n=new PR(this._package,t);break;case Fe.Numbering:this.numberingPart=n=new $R(this._package,t,this._parser);break;case Fe.Styles:this.stylesPart=n=new WR(this._package,t,this._parser);break;case Fe.Theme:this.themePart=n=new lN(this._package,t);break;case Fe.Footnotes:this.footnotesPart=n=new hN(this._package,t,this._parser);break;case Fe.Endnotes:this.endnotesPart=n=new dN(this._package,t,this._parser);break;case Fe.Footer:n=new JR(this._package,t,this._parser);break;case Fe.Header:n=new QR(this._package,t,this._parser);break;case Fe.CoreProperties:this.corePropsPart=n=new iN(this._package,t);break;case Fe.ExtendedProperties:this.extendedPropsPart=n=new eN(this._package,t);break;case Fe.CustomProperties:n=new gN(this._package,t);break;case Fe.Settings:this.settingsPart=n=new pN(this._package,t);break;case Fe.Comments:this.commentsPart=n=new bN(this._package,t,this._parser);break;case Fe.CommentsExtended:this.commentsExtendedPart=n=new yN(this._package,t);break}if(n==null)return Promise.resolve(null);if(this.partsMap[t]=n,this.parts.push(n),await n.load(),n.rels?.length>0){const[s]=Wc(n.path);await Promise.all(n.rels.map(o=>this.loadRelationshipPart(Sf(o.target,s),o.type)))}return n}async loadDocumentImage(t,e){const n=await this.loadResource(e??this.documentPart,t,"blob");return this.blobToURL(n)}async loadNumberingImage(t){const e=await this.loadResource(this.numberingPart,t,"blob");return this.blobToURL(e)}async loadFont(t,e){const n=await this.loadResource(this.fontTablePart,t,"uint8array");return n&&this.blobToURL(new Blob([wN(n,e)]))}async loadAltChunk(t,e){return await this.loadResource(e??this.documentPart,t,"string")}blobToURL(t){return t?this._options.useBase64URL?AR(t):URL.createObjectURL(t):null}findPartByRelId(t,e=null){var n=(e.rels??this.rels).find(o=>o.id==t);const s=e?Wc(e.path)[0]:"";return n?this.partsMap[Sf(n.target,s)]:null}getPathById(t,e){const n=t.rels.find(o=>o.id==e),[s]=Wc(t.path);return n?Sf(n.target,s):null}loadResource(t,e,n){const s=this.getPathById(t,e);return s?this._package.load(s,n):Promise.resolve(null)}}function wN(a,t){const n=t.replace(/{|}|-/g,""),s=new Array(16);for(let o=0;o<16;o++)s[16-o-1]=parseInt(n.substring(o*2,o*2+2),16);for(let o=0;o<32;o++)a[o]=a[o]^s[o%16];return a}function AN(a,t){return{type:ut.BookmarkStart,id:t.attr(a,"id"),name:t.attr(a,"name"),colFirst:t.intAttr(a,"colFirst"),colLast:t.intAttr(a,"colLast")}}function SN(a,t){return{type:ut.BookmarkEnd,id:t.attr(a,"id")}}class xN extends br{constructor(){super(...arguments),this.type=ut.VmlElement,this.attrs={}}}function oS(a,t){var e=new xN;switch(a.localName){case"rect":e.tagName="rect",Object.assign(e.attrs,{width:"100%",height:"100%"});break;case"oval":e.tagName="ellipse",Object.assign(e.attrs,{cx:"50%",cy:"50%",rx:"50%",ry:"50%"});break;case"line":e.tagName="line";break;case"shape":e.tagName="g";break;case"textbox":e.tagName="foreignObject",Object.assign(e.attrs,{width:"100%",height:"100%"});break;default:return null}for(const n of q.attrs(a))switch(n.localName){case"style":e.cssStyleText=n.value;break;case"fillcolor":e.attrs.fill=n.value;break;case"from":const[s,o]=g1(n.value);Object.assign(e.attrs,{x1:s,y1:o});break;case"to":const[l,u]=g1(n.value);Object.assign(e.attrs,{x2:l,y2:u});break}for(const n of q.elements(a))switch(n.localName){case"stroke":Object.assign(e.attrs,_N(n));break;case"fill":Object.assign(e.attrs,EN());break;case"imagedata":e.tagName="image",Object.assign(e.attrs,{width:"100%",height:"100%"}),e.imageHref={id:q.attr(n,"id"),title:q.attr(n,"title")};break;case"txbxContent":e.children.push(...t.parseBodyElements(n));break;default:const s=oS(n,t);s&&e.children.push(s);break}return e}function _N(a){return{stroke:q.attr(a,"color"),"stroke-width":q.lengthAttr(a,"weight",Xe.Emu)??"1px"}}function EN(a){return{}}function g1(a){return a.split(",")}class TN extends br{constructor(){super(...arguments),this.type=ut.Comment}}class CN extends br{constructor(t){super(),this.id=t,this.type=ut.CommentReference}}class kN extends br{constructor(t){super(),this.id=t,this.type=ut.CommentRangeStart}}class MN extends br{constructor(t){super(),this.id=t,this.type=ut.CommentRangeEnd}}var Kc={shd:"inherit",color:"black",borderColor:"black",highlight:"transparent"};const DN=[],b1={oMath:ut.MmlMath,oMathPara:ut.MmlMathParagraph,f:ut.MmlFraction,func:ut.MmlFunction,fName:ut.MmlFunctionName,num:ut.MmlNumerator,den:ut.MmlDenominator,rad:ut.MmlRadical,deg:ut.MmlDegree,e:ut.MmlBase,sSup:ut.MmlSuperscript,sSub:ut.MmlSubscript,sPre:ut.MmlPreSubSuper,sup:ut.MmlSuperArgument,sub:ut.MmlSubArgument,d:ut.MmlDelimiter,nary:ut.MmlNary,eqArr:ut.MmlEquationArray,lim:ut.MmlLimit,limLow:ut.MmlLimitLower,m:ut.MmlMatrix,mr:ut.MmlMatrixRow,box:ut.MmlBox,bar:ut.MmlBar,groupChr:ut.MmlGroupChar};class RN{constructor(t){this.options={ignoreWidth:!1,debug:!1,...t}}parseNotes(t,e,n){var s=[];for(let o of q.elements(t,e)){const l=new n;l.id=q.attr(o,"id"),l.noteType=q.attr(o,"type"),l.children=this.parseBodyElements(o),s.push(l)}return s}parseComments(t){var e=[];for(let n of q.elements(t,"comment")){const s=new TN;s.id=q.attr(n,"id"),s.author=q.attr(n,"author"),s.initials=q.attr(n,"initials"),s.date=q.attr(n,"date"),s.children=this.parseBodyElements(n),e.push(s)}return e}parseDocumentFile(t){var e=q.element(t,"body"),n=q.element(t,"background"),s=q.element(e,"sectPr");return{type:ut.Document,children:this.parseBodyElements(e),props:s?tS(s,q):{},cssStyle:n?this.parseBackground(n):{}}}parseBackground(t){var e={},n=ca.colorAttr(t,"color");return n&&(e["background-color"]=n),e}parseBodyElements(t){var e=[];for(const n of q.elements(t))switch(n.localName){case"p":e.push(this.parseParagraph(n));break;case"altChunk":e.push(this.parseAltChunk(n));break;case"tbl":e.push(this.parseTable(n));break;case"sdt":e.push(...this.parseSdt(n,s=>this.parseBodyElements(s)));break}return e}parseStylesFile(t){var e=[];for(const n of q.elements(t))switch(n.localName){case"style":e.push(this.parseStyle(n));break;case"docDefaults":e.push(this.parseDefaultStyles(n));break}return e}parseDefaultStyles(t){var e={id:null,name:null,target:null,basedOn:null,styles:[]};for(const o of q.elements(t))switch(o.localName){case"rPrDefault":var n=q.element(o,"rPr");n&&e.styles.push({target:"span",values:this.parseDefaultProperties(n,{})});break;case"pPrDefault":var s=q.element(o,"pPr");s&&e.styles.push({target:"p",values:this.parseDefaultProperties(s,{})});break}return e}parseStyle(t){var e={id:q.attr(t,"styleId"),isDefault:q.boolAttr(t,"default"),name:null,target:null,basedOn:null,styles:[],linked:null};switch(q.attr(t,"type")){case"paragraph":e.target="p";break;case"table":e.target="table";break;case"character":e.target="span";break}for(const n of q.elements(t))switch(n.localName){case"basedOn":e.basedOn=q.attr(n,"val");break;case"name":e.name=q.attr(n,"val");break;case"link":e.linked=q.attr(n,"val");break;case"next":e.next=q.attr(n,"val");break;case"aliases":e.aliases=q.attr(n,"val").split(",");break;case"pPr":e.styles.push({target:"p",values:this.parseDefaultProperties(n,{})}),e.paragraphProps=eS(n,q);break;case"rPr":e.styles.push({target:"span",values:this.parseDefaultProperties(n,{})}),e.runProps=om(n,q);break;case"tblPr":case"tcPr":e.styles.push({target:"td",values:this.parseDefaultProperties(n,{})});break;case"tblStylePr":for(let s of this.parseTableStyle(n))e.styles.push(s);break;case"rsid":case"qFormat":case"hidden":case"semiHidden":case"unhideWhenUsed":case"autoRedefine":case"uiPriority":break;default:this.options.debug&&console.warn(`DOCX: Unknown style element: ${n.localName}`)}return e}parseTableStyle(t){var e=[],n=q.attr(t,"type"),s="",o="";switch(n){case"firstRow":o=".first-row",s="tr.first-row td";break;case"lastRow":o=".last-row",s="tr.last-row td";break;case"firstCol":o=".first-col",s="td.first-col";break;case"lastCol":o=".last-col",s="td.last-col";break;case"band1Vert":o=":not(.no-vband)",s="td.odd-col";break;case"band2Vert":o=":not(.no-vband)",s="td.even-col";break;case"band1Horz":o=":not(.no-hband)",s="tr.odd-row";break;case"band2Horz":o=":not(.no-hband)",s="tr.even-row";break;default:return[]}for(const l of q.elements(t))switch(l.localName){case"pPr":e.push({target:`${s} p`,mod:o,values:this.parseDefaultProperties(l,{})});break;case"rPr":e.push({target:`${s} span`,mod:o,values:this.parseDefaultProperties(l,{})});break;case"tblPr":case"tcPr":e.push({target:s,mod:o,values:this.parseDefaultProperties(l,{})});break}return e}parseNumberingFile(t){var e=[],n={},s=[];for(const u of q.elements(t))switch(u.localName){case"abstractNum":this.parseAbstractNumbering(u,s).forEach(h=>e.push(h));break;case"numPicBullet":s.push(this.parseNumberingPicBullet(u));break;case"num":var o=q.attr(u,"numId"),l=q.elementAttr(u,"abstractNumId","val");n[l]=o;break}return e.forEach(u=>u.id=n[u.id]),e}parseNumberingPicBullet(t){var e=q.element(t,"pict"),n=e&&q.element(e,"shape"),s=n&&q.element(n,"imagedata");return s?{id:q.intAttr(t,"numPicBulletId"),src:q.attr(s,"id"),style:q.attr(n,"style")}:null}parseAbstractNumbering(t,e){var n=[],s=q.attr(t,"abstractNumId");for(const o of q.elements(t))o.localName==="lvl"&&n.push(this.parseNumberingLevel(s,o,e));return n}parseNumberingLevel(t,e,n){var s={id:t,level:q.intAttr(e,"ilvl"),start:1,pStyleName:void 0,pStyle:{},rStyle:{},suff:"tab"};for(const l of q.elements(e))switch(l.localName){case"start":s.start=q.intAttr(l,"val");break;case"pPr":this.parseDefaultProperties(l,s.pStyle);break;case"rPr":this.parseDefaultProperties(l,s.rStyle);break;case"lvlPicBulletId":var o=q.intAttr(l,"val");s.bullet=n.find(u=>u?.id==o);break;case"lvlText":s.levelText=q.attr(l,"val");break;case"pStyle":s.pStyleName=q.attr(l,"val");break;case"numFmt":s.format=q.attr(l,"val");break;case"suff":s.suff=q.attr(l,"val");break}return s}parseSdt(t,e){const n=q.element(t,"sdtContent");return n?e(n):[]}parseInserted(t,e){return{type:ut.Inserted,children:e(t)?.children??[]}}parseDeleted(t,e){return{type:ut.Deleted,children:e(t)?.children??[]}}parseAltChunk(t){return{type:ut.AltChunk,children:[],id:q.attr(t,"id")}}parseParagraph(t){var e={type:ut.Paragraph,children:[]};for(let n of q.elements(t))switch(n.localName){case"pPr":this.parseParagraphProperties(n,e);break;case"r":e.children.push(this.parseRun(n,e));break;case"hyperlink":e.children.push(this.parseHyperlink(n,e));break;case"smartTag":e.children.push(this.parseSmartTag(n,e));break;case"bookmarkStart":e.children.push(AN(n,q));break;case"bookmarkEnd":e.children.push(SN(n,q));break;case"commentRangeStart":e.children.push(new kN(q.attr(n,"id")));break;case"commentRangeEnd":e.children.push(new MN(q.attr(n,"id")));break;case"oMath":case"oMathPara":e.children.push(this.parseMathElement(n));break;case"sdt":e.children.push(...this.parseSdt(n,s=>this.parseParagraph(s).children));break;case"ins":e.children.push(this.parseInserted(n,s=>this.parseParagraph(s)));break;case"del":e.children.push(this.parseDeleted(n,s=>this.parseParagraph(s)));break}return e}parseParagraphProperties(t,e){this.parseDefaultProperties(t,e.cssStyle={},null,n=>{if(nS(n,e,q))return!0;switch(n.localName){case"pStyle":e.styleName=q.attr(n,"val");break;case"cnfStyle":e.className=we.classNameOfCnfStyle(n);break;case"framePr":this.parseFrame(n,e);break;case"rPr":break;default:return!1}return!0})}parseFrame(t,e){var n=q.attr(t,"dropCap");n=="drop"&&(e.cssStyle.float="left")}parseHyperlink(t,e){var n={type:ut.Hyperlink,parent:e,children:[]};n.anchor=q.attr(t,"anchor"),n.id=q.attr(t,"id");for(const s of q.elements(t))s.localName==="r"&&n.children.push(this.parseRun(s,n));return n}parseSmartTag(t,e){var n={type:ut.SmartTag,parent:e,children:[]},s=q.attr(t,"uri"),o=q.attr(t,"element");s&&(n.uri=s),o&&(n.element=o);for(const l of q.elements(t))l.localName==="r"&&n.children.push(this.parseRun(l,n));return n}parseRun(t,e){var n={type:ut.Run,parent:e,children:[]};for(let s of q.elements(t))switch(s=this.checkAlternateContent(s),s.localName){case"t":n.children.push({type:ut.Text,text:s.textContent});break;case"delText":n.children.push({type:ut.DeletedText,text:s.textContent});break;case"commentReference":n.children.push(new CN(q.attr(s,"id")));break;case"fldSimple":n.children.push({type:ut.SimpleField,instruction:q.attr(s,"instr"),lock:q.boolAttr(s,"lock",!1),dirty:q.boolAttr(s,"dirty",!1)});break;case"instrText":n.fieldRun=!0,n.children.push({type:ut.Instruction,text:s.textContent});break;case"fldChar":n.fieldRun=!0,n.children.push({type:ut.ComplexField,charType:q.attr(s,"fldCharType"),lock:q.boolAttr(s,"lock",!1),dirty:q.boolAttr(s,"dirty",!1)});break;case"noBreakHyphen":n.children.push({type:ut.NoBreakHyphen});break;case"br":n.children.push({type:ut.Break,break:q.attr(s,"type")||"textWrapping"});break;case"lastRenderedPageBreak":n.children.push({type:ut.Break,break:"lastRenderedPageBreak"});break;case"sym":n.children.push({type:ut.Symbol,font:up(q.attr(s,"font")),char:q.attr(s,"char")});break;case"tab":n.children.push({type:ut.Tab});break;case"footnoteReference":n.children.push({type:ut.FootnoteReference,id:q.attr(s,"id")});break;case"endnoteReference":n.children.push({type:ut.EndnoteReference,id:q.attr(s,"id")});break;case"drawing":let o=this.parseDrawing(s);o&&(n.children=[o]);break;case"pict":n.children.push(this.parseVmlPicture(s));break;case"rPr":this.parseRunProperties(s,n);break}return n}parseMathElement(t){const e=`${t.localName}Pr`,n={type:b1[t.localName],children:[]};for(const o of q.elements(t))if(b1[o.localName])n.children.push(this.parseMathElement(o));else if(o.localName=="r"){var s=this.parseRun(o);s.type=ut.MmlRun,n.children.push(s)}else o.localName==e&&(n.props=this.parseMathProperies(o));return n}parseMathProperies(t){const e={};for(const n of q.elements(t))switch(n.localName){case"chr":e.char=q.attr(n,"val");break;case"vertJc":e.verticalJustification=q.attr(n,"val");break;case"pos":e.position=q.attr(n,"val");break;case"degHide":e.hideDegree=q.boolAttr(n,"val");break;case"begChr":e.beginChar=q.attr(n,"val");break;case"endChr":e.endChar=q.attr(n,"val");break}return e}parseRunProperties(t,e){this.parseDefaultProperties(t,e.cssStyle={},null,n=>{switch(n.localName){case"rStyle":e.styleName=q.attr(n,"val");break;case"vertAlign":e.verticalAlign=we.valueOfVertAlign(n,!0);break;default:return!1}return!0})}parseVmlPicture(t){const e={type:ut.VmlPicture,children:[]};for(const n of q.elements(t)){const s=oS(n,this);s&&e.children.push(s)}return e}checkAlternateContent(t){if(t.localName!="AlternateContent")return t;var e=q.element(t,"Choice");if(e){var n=q.attr(e,"Requires"),s=t.lookupNamespaceURI(n);if(DN.includes(s))return e.firstElementChild}return q.element(t,"Fallback")?.firstElementChild}parseDrawing(t){for(var e of q.elements(t))switch(e.localName){case"inline":case"anchor":return this.parseDrawingWrapper(e)}}parseDrawingWrapper(t){var e={type:ut.Drawing,children:[],cssStyle:{}},n=t.localName=="anchor";let s=null,o=q.boolAttr(t,"simplePos");q.boolAttr(t,"behindDoc");let l={relative:"page",align:"left",offset:"0"},u={relative:"page",align:"top",offset:"0"};for(var h of q.elements(t))switch(h.localName){case"simplePos":o&&(l.offset=q.lengthAttr(h,"x",Xe.Emu),u.offset=q.lengthAttr(h,"y",Xe.Emu));break;case"extent":e.cssStyle.width=q.lengthAttr(h,"cx",Xe.Emu),e.cssStyle.height=q.lengthAttr(h,"cy",Xe.Emu);break;case"positionH":case"positionV":if(!o){let b=h.localName=="positionH"?l:u;var f=q.element(h,"align"),p=q.element(h,"posOffset");b.relative=q.attr(h,"relativeFrom")??b.relative,f&&(b.align=f.textContent),p&&(b.offset=ZA(p.textContent,Xe.Emu))}break;case"wrapTopAndBottom":s="wrapTopAndBottom";break;case"wrapNone":s="wrapNone";break;case"graphic":var m=this.parseGraphic(h);m&&e.children.push(m);break}return s=="wrapTopAndBottom"?(e.cssStyle.display="block",l.align&&(e.cssStyle["text-align"]=l.align,e.cssStyle.width="100%")):s=="wrapNone"?(e.cssStyle.display="block",e.cssStyle.position="relative",e.cssStyle.width="0px",e.cssStyle.height="0px",l.offset&&(e.cssStyle.left=l.offset),u.offset&&(e.cssStyle.top=u.offset)):n&&(l.align=="left"||l.align=="right")&&(e.cssStyle.float=l.align),e}parseGraphic(t){var e=q.element(t,"graphicData");for(let n of q.elements(e))if(n.localName==="pic")return this.parsePicture(n);return null}parsePicture(t){var e={type:ut.Image,src:"",cssStyle:{}},n=q.element(t,"blipFill"),s=q.element(n,"blip"),o=q.element(n,"srcRect");e.src=q.attr(s,"embed"),o&&(e.srcRect=[q.intAttr(o,"l",0)/1e5,q.intAttr(o,"t",0)/1e5,q.intAttr(o,"r",0)/1e5,q.intAttr(o,"b",0)/1e5]);var l=q.element(t,"spPr"),u=q.element(l,"xfrm");if(e.cssStyle.position="relative",u){e.rotation=q.intAttr(u,"rot",0)/6e4;for(var h of q.elements(u))switch(h.localName){case"ext":e.cssStyle.width=q.lengthAttr(h,"cx",Xe.Emu),e.cssStyle.height=q.lengthAttr(h,"cy",Xe.Emu);break;case"off":e.cssStyle.left=q.lengthAttr(h,"x",Xe.Emu),e.cssStyle.top=q.lengthAttr(h,"y",Xe.Emu);break}}return e}parseTable(t){var e={type:ut.Table,children:[]};for(const n of q.elements(t))switch(n.localName){case"tr":e.children.push(this.parseTableRow(n));break;case"tblGrid":e.columns=this.parseTableColumns(n);break;case"tblPr":this.parseTableProperties(n,e);break}return e}parseTableColumns(t){var e=[];for(const n of q.elements(t))n.localName==="gridCol"&&e.push({width:q.lengthAttr(n,"w")});return e}parseTableProperties(t,e){switch(e.cssStyle={},e.cellStyle={},this.parseDefaultProperties(t,e.cssStyle,e.cellStyle,n=>{switch(n.localName){case"tblStyle":e.styleName=q.attr(n,"val");break;case"tblLook":e.className=we.classNameOftblLook(n);break;case"tblpPr":this.parseTablePosition(n,e);break;case"tblStyleColBandSize":e.colBandSize=q.intAttr(n,"val");break;case"tblStyleRowBandSize":e.rowBandSize=q.intAttr(n,"val");break;case"hidden":e.cssStyle.display="none";break;default:return!1}return!0}),e.cssStyle["text-align"]){case"center":delete e.cssStyle["text-align"],e.cssStyle["margin-left"]="auto",e.cssStyle["margin-right"]="auto";break;case"right":delete e.cssStyle["text-align"],e.cssStyle["margin-left"]="auto";break}}parseTablePosition(t,e){var n=q.lengthAttr(t,"topFromText"),s=q.lengthAttr(t,"bottomFromText"),o=q.lengthAttr(t,"rightFromText"),l=q.lengthAttr(t,"leftFromText");e.cssStyle.float="left",e.cssStyle["margin-bottom"]=we.addSize(e.cssStyle["margin-bottom"],s),e.cssStyle["margin-left"]=we.addSize(e.cssStyle["margin-left"],l),e.cssStyle["margin-right"]=we.addSize(e.cssStyle["margin-right"],o),e.cssStyle["margin-top"]=we.addSize(e.cssStyle["margin-top"],n)}parseTableRow(t){var e={type:ut.Row,children:[]};for(const n of q.elements(t))switch(n.localName){case"tc":e.children.push(this.parseTableCell(n));break;case"trPr":case"tblPrEx":this.parseTableRowProperties(n,e);break}return e}parseTableRowProperties(t,e){e.cssStyle=this.parseDefaultProperties(t,{},null,n=>{switch(n.localName){case"cnfStyle":e.className=we.classNameOfCnfStyle(n);break;case"tblHeader":e.isHeader=q.boolAttr(n,"val");break;case"gridBefore":e.gridBefore=q.intAttr(n,"val");break;case"gridAfter":e.gridAfter=q.intAttr(n,"val");break;default:return!1}return!0})}parseTableCell(t){var e={type:ut.Cell,children:[]};for(const n of q.elements(t))switch(n.localName){case"tbl":e.children.push(this.parseTable(n));break;case"p":e.children.push(this.parseParagraph(n));break;case"tcPr":this.parseTableCellProperties(n,e);break}return e}parseTableCellProperties(t,e){e.cssStyle=this.parseDefaultProperties(t,{},null,n=>{switch(n.localName){case"gridSpan":e.span=q.intAttr(n,"val",null);break;case"vMerge":e.verticalMerge=q.attr(n,"val")??"continue";break;case"cnfStyle":e.className=we.classNameOfCnfStyle(n);break;default:return!1}return!0}),this.parseTableCellVerticalText(t,e)}parseTableCellVerticalText(t,e){const n={btLr:{writingMode:"vertical-rl",transform:"rotate(180deg)"},lrTb:{writingMode:"vertical-lr",transform:"none"},tbRl:{writingMode:"vertical-rl",transform:"none"}};for(const s of q.elements(t))if(s.localName==="textDirection"){const o=q.attr(s,"val"),l=n[o]||{writingMode:"horizontal-tb"};e.cssStyle["writing-mode"]=l.writingMode,e.cssStyle.transform=l.transform}}parseDefaultProperties(t,e=null,n=null,s=null){e=e||{};for(const o of q.elements(t))if(!s?.(o))switch(o.localName){case"jc":e["text-align"]=we.valueOfJc(o);break;case"textAlignment":e["vertical-align"]=we.valueOfTextAlignment(o);break;case"color":e.color=ca.colorAttr(o,"val",null,Kc.color);break;case"sz":e["font-size"]=e["min-height"]=q.lengthAttr(o,"val",Xe.FontSize);break;case"shd":e["background-color"]=ca.colorAttr(o,"fill",null,Kc.shd);break;case"highlight":e["background-color"]=ca.colorAttr(o,"val",null,Kc.highlight);break;case"vertAlign":break;case"position":e.verticalAlign=q.lengthAttr(o,"val",Xe.FontSize);break;case"tcW":if(this.options.ignoreWidth)break;case"tblW":e.width=we.valueOfSize(o,"w");break;case"trHeight":this.parseTrHeight(o,e);break;case"strike":e["text-decoration"]=q.boolAttr(o,"val",!0)?"line-through":"none";break;case"b":e["font-weight"]=q.boolAttr(o,"val",!0)?"bold":"normal";break;case"i":e["font-style"]=q.boolAttr(o,"val",!0)?"italic":"normal";break;case"caps":e["text-transform"]=q.boolAttr(o,"val",!0)?"uppercase":"none";break;case"smallCaps":e["font-variant"]=q.boolAttr(o,"val",!0)?"small-caps":"none";break;case"u":this.parseUnderline(o,e);break;case"ind":case"tblInd":this.parseIndentation(o,e);break;case"rFonts":this.parseFont(o,e);break;case"tblBorders":this.parseBorderProperties(o,n||e);break;case"tblCellSpacing":e["border-spacing"]=we.valueOfMargin(o),e["border-collapse"]="separate";break;case"pBdr":this.parseBorderProperties(o,e);break;case"bdr":e.border=we.valueOfBorder(o);break;case"tcBorders":this.parseBorderProperties(o,e);break;case"vanish":q.boolAttr(o,"val",!0)&&(e.display="none");break;case"kern":break;case"noWrap":break;case"tblCellMar":case"tcMar":this.parseMarginProperties(o,n||e);break;case"tblLayout":e["table-layout"]=we.valueOfTblLayout(o);break;case"vAlign":e["vertical-align"]=we.valueOfTextAlignment(o);break;case"spacing":t.localName=="pPr"&&this.parseSpacing(o,e);break;case"wordWrap":q.boolAttr(o,"val")&&(e["overflow-wrap"]="break-word");break;case"suppressAutoHyphens":e.hyphens=q.boolAttr(o,"val",!0)?"none":"auto";break;case"lang":e.$lang=q.attr(o,"val");break;case"rtl":case"bidi":q.boolAttr(o,"val",!0)&&(e.direction="rtl");break;case"bCs":case"iCs":case"szCs":case"tabs":case"outlineLvl":case"contextualSpacing":case"tblStyleColBandSize":case"tblStyleRowBandSize":case"webHidden":case"pageBreakBefore":case"suppressLineNumbers":case"keepLines":case"keepNext":case"widowControl":case"bidi":case"rtl":case"noProof":break;default:this.options.debug&&console.warn(`DOCX: Unknown document element: ${t.localName}.${o.localName}`);break}return e}parseUnderline(t,e){var n=q.attr(t,"val");if(n!=null){switch(n){case"dash":case"dashDotDotHeavy":case"dashDotHeavy":case"dashedHeavy":case"dashLong":case"dashLongHeavy":case"dotDash":case"dotDotDash":e["text-decoration"]="underline dashed";break;case"dotted":case"dottedHeavy":e["text-decoration"]="underline dotted";break;case"double":e["text-decoration"]="underline double";break;case"single":case"thick":e["text-decoration"]="underline";break;case"wave":case"wavyDouble":case"wavyHeavy":e["text-decoration"]="underline wavy";break;case"words":e["text-decoration"]="underline";break;case"none":e["text-decoration"]="none";break}var s=ca.colorAttr(t,"color");s&&(e["text-decoration-color"]=s)}}parseFont(t,e){var n=q.attr(t,"ascii"),s=we.themeValue(t,"asciiTheme"),o=q.attr(t,"eastAsia"),l=[n,s,o].filter(u=>u).map(u=>up(u));l.length>0&&(e["font-family"]=[...new Set(l)].join(", "))}parseIndentation(t,e){var n=q.lengthAttr(t,"firstLine"),s=q.lengthAttr(t,"hanging"),o=q.lengthAttr(t,"left"),l=q.lengthAttr(t,"start"),u=q.lengthAttr(t,"right"),h=q.lengthAttr(t,"end");n&&(e["text-indent"]=n),s&&(e["text-indent"]=`-${s}`),(o||l)&&(e["margin-inline-start"]=o||l),(u||h)&&(e["margin-inline-end"]=u||h)}parseSpacing(t,e){var n=q.lengthAttr(t,"before"),s=q.lengthAttr(t,"after"),o=q.intAttr(t,"line",null),l=q.attr(t,"lineRule");if(n&&(e["margin-top"]=n),s&&(e["margin-bottom"]=s),o!==null)switch(l){case"auto":e["line-height"]=`${(o/240).toFixed(2)}`;break;case"atLeast":e["line-height"]=`calc(100% + ${o/20}pt)`;break;default:e["line-height"]=e["min-height"]=`${o/20}pt`;break}}parseMarginProperties(t,e){for(const n of q.elements(t))switch(n.localName){case"left":e["padding-left"]=we.valueOfMargin(n);break;case"right":e["padding-right"]=we.valueOfMargin(n);break;case"top":e["padding-top"]=we.valueOfMargin(n);break;case"bottom":e["padding-bottom"]=we.valueOfMargin(n);break}}parseTrHeight(t,e){q.attr(t,"hRule"),e.height=q.lengthAttr(t,"val")}parseBorderProperties(t,e){for(const n of q.elements(t))switch(n.localName){case"start":case"left":e["border-left"]=we.valueOfBorder(n);break;case"end":case"right":e["border-right"]=we.valueOfBorder(n);break;case"top":e["border-top"]=we.valueOfBorder(n);break;case"bottom":e["border-bottom"]=we.valueOfBorder(n);break}}}const NN=["black","blue","cyan","darkBlue","darkCyan","darkGray","darkGreen","darkMagenta","darkRed","darkYellow","green","lightGray","magenta","none","red","white","yellow"];class ca{static colorAttr(t,e,n=null,s="black"){var o=q.attr(t,e);if(o)return o=="auto"?s:NN.includes(o)?o:`#${o}`;var l=q.attr(t,"themeColor");return l?`var(--docx-${l}-color)`:n}}class we{static themeValue(t,e){var n=q.attr(t,e);return n?`var(--docx-${n}-font)`:null}static valueOfSize(t,e){var n=Xe.Dxa;switch(q.attr(t,"type")){case"dxa":break;case"pct":n=Xe.Percent;break;case"auto":return"auto"}return q.lengthAttr(t,e,n)}static valueOfMargin(t){return q.lengthAttr(t,"w")}static valueOfBorder(t){var e=we.parseBorderType(q.attr(t,"val"));if(e=="none")return"none";var n=ca.colorAttr(t,"color"),s=q.lengthAttr(t,"sz",Xe.Border);return`${s} ${e} ${n=="auto"?Kc.borderColor:n}`}static parseBorderType(t){switch(t){case"single":return"solid";case"dashDotStroked":return"solid";case"dashed":return"dashed";case"dashSmallGap":return"dashed";case"dotDash":return"dotted";case"dotDotDash":return"dotted";case"dotted":return"dotted";case"double":return"double";case"doubleWave":return"double";case"inset":return"inset";case"nil":return"none";case"none":return"none";case"outset":return"outset";case"thick":return"solid";case"thickThinLargeGap":return"solid";case"thickThinMediumGap":return"solid";case"thickThinSmallGap":return"solid";case"thinThickLargeGap":return"solid";case"thinThickMediumGap":return"solid";case"thinThickSmallGap":return"solid";case"thinThickThinLargeGap":return"solid";case"thinThickThinMediumGap":return"solid";case"thinThickThinSmallGap":return"solid";case"threeDEmboss":return"solid";case"threeDEngrave":return"solid";case"triple":return"double";case"wave":return"solid"}return"solid"}static valueOfTblLayout(t){var e=q.attr(t,"val");return e=="fixed"?"fixed":"auto"}static classNameOfCnfStyle(t){const e=q.attr(t,"val");return["first-row","last-row","first-col","last-col","odd-col","even-col","odd-row","even-row","ne-cell","nw-cell","se-cell","sw-cell"].filter((s,o)=>e[o]=="1").join(" ")}static valueOfJc(t){var e=q.attr(t,"val");switch(e){case"start":case"left":return"left";case"center":return"center";case"end":case"right":return"right";case"both":return"justify"}return e}static valueOfVertAlign(t,e=!1){var n=q.attr(t,"val");switch(n){case"subscript":return"sub";case"superscript":return e?"sup":"super"}return e?null:n}static valueOfTextAlignment(t){var e=q.attr(t,"val");switch(e){case"auto":case"baseline":return"baseline";case"top":return"top";case"center":return"middle";case"bottom":return"bottom"}return e}static addSize(t,e){return t==null?e:e==null?t:`calc(${t} + ${e})`}static classNameOftblLook(t){const e=q.hexAttr(t,"val",0);let n="";return(q.boolAttr(t,"firstRow")||e&32)&&(n+=" first-row"),(q.boolAttr(t,"lastRow")||e&64)&&(n+=" last-row"),(q.boolAttr(t,"firstColumn")||e&128)&&(n+=" first-col"),(q.boolAttr(t,"lastColumn")||e&256)&&(n+=" last-col"),(q.boolAttr(t,"noHBand")||e&512)&&(n+=" no-hband"),(q.boolAttr(t,"noVBand")||e&1024)&&(n+=" no-vband"),n.trim()}}const y1={pos:0,leader:"none",style:"left"},PN=50;function ON(a=document.body){const t=document.createElement("div");t.style.width="100pt",a.appendChild(t);const e=100/t.offsetWidth;return a.removeChild(t),e}function LN(a,t,e,n=72/96){const s=a.closest("p"),o=a.getBoundingClientRect(),l=s.getBoundingClientRect(),u=getComputedStyle(s),h=t?.length>0?t.map(E=>({pos:v1(E.position),leader:E.leader,style:E.style})).sort((E,T)=>E.pos-T.pos):[y1],f=h[h.length-1],p=l.width*n,m=v1(e);let b=f.pos+m;if(b<p)for(;b<p&&h.length<PN;b+=m)h.push({...y1,pos:b});const y=parseFloat(u.marginLeft),A=l.left+y,w=(o.left-A)*n,x=h.find(E=>E.style!="clear"&&E.pos>w);if(x==null)return;let S=1;if(x.style=="right"||x.style=="center"){const E=Array.from(s.querySelectorAll(`.${a.className}`)),T=E.indexOf(a)+1,R=document.createRange();R.setStart(a,1),T<E.length?R.setEndBefore(E[T]):R.setEndAfter(s);const D=x.style=="center"?.5:1,O=R.getBoundingClientRect(),L=O.left+D*O.width-(l.left-y);S=x.pos-L*n}else S=x.pos-w;switch(a.innerHTML="&nbsp;",a.style.textDecoration="inherit",a.style.wordSpacing=`${S.toFixed(0)}pt`,x.leader){case"dot":case"middleDot":a.style.textDecoration="underline",a.style.textDecorationStyle="dotted";break;case"hyphen":case"heavy":case"underscore":a.style.textDecoration="underline";break}}function v1(a){return parseFloat(a)}const Zt={svg:"http://www.w3.org/2000/svg",mathML:"http://www.w3.org/1998/Math/MathML"};class BN{constructor(t){this.htmlDocument=t,this.className="docx",this.styleMap={},this.currentPart=null,this.tableVerticalMerges=[],this.currentVerticalMerge=null,this.tableCellPositions=[],this.currentCellPosition=null,this.footnoteMap={},this.endnoteMap={},this.currentEndnoteIds=[],this.usedHederFooterParts=[],this.currentTabs=[],this.commentMap={},this.tasks=[],this.postRenderTasks=[]}async render(t,e,n=null,s){this.document=t,this.options=s,this.className=s.className,this.rootSelector=s.inWrapper?`.${this.className}-wrapper`:":root",this.styleMap=null,this.tasks=[],this.options.renderComments&&globalThis.Highlight&&(this.commentHighlight=new Highlight),n=n||e,w1(n),w1(e),n.appendChild(this.createComment("docxjs library predefined styles")),n.appendChild(this.renderDefaultStyle()),t.themePart&&(n.appendChild(this.createComment("docxjs document theme values")),this.renderTheme(t.themePart,n)),t.stylesPart!=null&&(this.styleMap=this.processStyles(t.stylesPart.styles),n.appendChild(this.createComment("docxjs document styles")),n.appendChild(this.renderStyles(t.stylesPart.styles))),t.numberingPart&&(this.prodessNumberings(t.numberingPart.domNumberings),n.appendChild(this.createComment("docxjs document numbering styles")),n.appendChild(this.renderNumbering(t.numberingPart.domNumberings,n))),t.footnotesPart&&(this.footnoteMap=Ds(t.footnotesPart.notes,l=>l.id)),t.endnotesPart&&(this.endnoteMap=Ds(t.endnotesPart.notes,l=>l.id)),t.settingsPart&&(this.defaultTabSize=t.settingsPart.settings?.defaultTabStop),!s.ignoreFonts&&t.fontTablePart&&this.renderFontTable(t.fontTablePart,n);var o=this.renderSections(t.documentPart.body);this.options.inWrapper?e.appendChild(this.renderWrapper(o)):_f(e,o),this.commentHighlight&&s.renderComments&&CSS.highlights.set(`${this.className}-comments`,this.commentHighlight),this.postRenderTasks.forEach(l=>l()),await Promise.allSettled(this.tasks),this.refreshTabStops()}renderTheme(t,e){const n={},s=t.theme?.fontScheme;s&&(s.majorFont&&(n["--docx-majorHAnsi-font"]=s.majorFont.latinTypeface),s.minorFont&&(n["--docx-minorHAnsi-font"]=s.minorFont.latinTypeface));const o=t.theme?.colorScheme;if(o)for(let[u,h]of Object.entries(o.colors))n[`--docx-${u}-color`]=`#${h}`;const l=this.styleToString(`.${this.className}`,n);e.appendChild(this.createStyleElement(l))}renderFontTable(t,e){for(let n of t.fonts)for(let s of n.embedFontRefs)this.tasks.push(this.document.loadFont(s.id,s.key).then(o=>{const l={"font-family":up(n.name),src:`url(${o})`};(s.type=="bold"||s.type=="boldItalic")&&(l["font-weight"]="bold"),(s.type=="italic"||s.type=="boldItalic")&&(l["font-style"]="italic");const u=this.styleToString("@font-face",l);e.appendChild(this.createComment(`docxjs ${n.name} font`)),e.appendChild(this.createStyleElement(u))}))}processStyleName(t){return t?`${this.className}_${wR(t)}`:this.className}processStyles(t){const e=Ds(t.filter(s=>s.id!=null),s=>s.id);for(const s of t.filter(o=>o.basedOn)){var n=e[s.basedOn];if(n){s.paragraphProps=lu(s.paragraphProps,n.paragraphProps),s.runProps=lu(s.runProps,n.runProps);for(const o of n.styles){const l=s.styles.find(u=>u.target==o.target);l?this.copyStyleProperties(o.values,l.values):s.styles.push({...o,values:{...o.values}})}}else this.options.debug&&console.warn(`Can't find base style ${s.basedOn}`)}for(let s of t)s.cssName=this.processStyleName(s.id);return e}prodessNumberings(t){for(let e of t.filter(n=>n.pStyleName)){const n=this.findStyle(e.pStyleName);n?.paragraphProps?.numbering&&(n.paragraphProps.numbering.level=e.level)}}processElement(t){if(t.children)for(var e of t.children)e.parent=t,e.type==ut.Table?this.processTable(e):this.processElement(e)}processTable(t){for(var e of t.children)for(var n of e.children)n.cssStyle=this.copyStyleProperties(t.cellStyle,n.cssStyle,["border-left","border-right","border-top","border-bottom","padding-left","padding-right","padding-top","padding-bottom"]),this.processElement(n)}copyStyleProperties(t,e,n=null){if(!t)return e;e==null&&(e={}),n==null&&(n=Object.getOwnPropertyNames(t));for(var s of n)t.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(e[s]=t[s]);return e}createPageElement(t,e){var n=this.createElement("section",{className:t});return e&&(e.pageMargins&&(n.style.paddingLeft=e.pageMargins.left,n.style.paddingRight=e.pageMargins.right,n.style.paddingTop=e.pageMargins.top,n.style.paddingBottom=e.pageMargins.bottom),e.pageSize&&(this.options.ignoreWidth||(n.style.width=e.pageSize.width),this.options.ignoreHeight||(n.style.minHeight=e.pageSize.height))),n}createSectionContent(t){var e=this.createElement("article");return t.columns&&t.columns.numberOfColumns&&(e.style.columnCount=`${t.columns.numberOfColumns}`,e.style.columnGap=t.columns.space,t.columns.separator&&(e.style.columnRule="1px solid black")),e}renderSections(t){const e=[];this.processElement(t);const n=this.splitBySection(t.children,t.props),s=this.groupByPageBreaks(n);let o=null;for(let u=0,h=s.length;u<h;u++){this.currentFootnoteIds=[];let p=s[u][0].sectProps;const m=this.createPageElement(this.className,p);this.renderStyleValues(t.cssStyle,m),this.options.renderHeaders&&this.renderHeaderFooter(p.headerRefs,p,e.length,o!=p,m);for(const b of s[u]){var l=this.createSectionContent(b.sectProps);this.renderElements(b.elements,l),m.appendChild(l),p=b.sectProps}this.options.renderFootnotes&&this.renderNotes(this.currentFootnoteIds,this.footnoteMap,m),this.options.renderEndnotes&&u==h-1&&this.renderNotes(this.currentEndnoteIds,this.endnoteMap,m),this.options.renderFooters&&this.renderHeaderFooter(p.footerRefs,p,e.length,o!=p,m),e.push(m),o=p}return e}renderHeaderFooter(t,e,n,s,o){if(t){var l=(e.titlePage&&s?t.find(h=>h.type=="first"):null)??(n%2==1?t.find(h=>h.type=="even"):null)??t.find(h=>h.type=="default"),u=l&&this.document.findPartByRelId(l.id,this.document.documentPart);if(u){this.currentPart=u,this.usedHederFooterParts.includes(u.path)||(this.processElement(u.rootElement),this.usedHederFooterParts.push(u.path));const[h]=this.renderElements([u.rootElement],o);e?.pageMargins&&(u.rootElement.type===ut.Header?(h.style.marginTop=`calc(${e.pageMargins.header} - ${e.pageMargins.top})`,h.style.minHeight=`calc(${e.pageMargins.top} - ${e.pageMargins.header})`):u.rootElement.type===ut.Footer&&(h.style.marginBottom=`calc(${e.pageMargins.footer} - ${e.pageMargins.bottom})`,h.style.minHeight=`calc(${e.pageMargins.bottom} - ${e.pageMargins.footer})`)),this.currentPart=null}}}isPageBreakElement(t){return t.type!=ut.Break?!1:t.break=="lastRenderedPageBreak"?!this.options.ignoreLastRenderedPageBreak:t.break=="page"}isPageBreakSection(t,e){return!t||!e?!1:t.pageSize?.orientation!=e.pageSize?.orientation||t.pageSize?.width!=e.pageSize?.width||t.pageSize?.height!=e.pageSize?.height}splitBySection(t,e){var n={sectProps:null,elements:[],pageBreak:!1},s=[n];for(let m of t)if(m.type==ut.Paragraph&&this.findStyle(m.styleName)?.paragraphProps?.pageBreakBefore&&(n.sectProps=o,n.pageBreak=!0,n={sectProps:null,elements:[],pageBreak:!1},s.push(n)),n.elements.push(m),m.type==ut.Paragraph){const b=m;var o=b.sectionProps,l=-1,u=-1;if(this.options.breakPages&&b.children&&(l=b.children.findIndex(y=>(u=y.children?.findIndex(this.isPageBreakElement.bind(this))??-1,u!=-1))),(o||l!=-1)&&(n.sectProps=o,n.pageBreak=l!=-1,n={sectProps:null,elements:[],pageBreak:!1},s.push(n)),l!=-1){let y=b.children[l],A=u<y.children.length-1;if(l<b.children.length-1||A){var h=m.children,f={...m,children:h.slice(l)};if(m.children=h.slice(0,l),n.elements.push(f),A){let w=y.children,x={...y,children:w.slice(0,u)};m.children.push(x),y.children=w.slice(u)}}}}let p=null;for(let m=s.length-1;m>=0;m--)s[m].sectProps==null?s[m].sectProps=p??e:p=s[m].sectProps;return s}groupByPageBreaks(t){let e=[],n;const s=[e];for(let o of t)e.push(o),(this.options.ignoreLastRenderedPageBreak||o.pageBreak||this.isPageBreakSection(n,o.sectProps))&&s.push(e=[]),n=o.sectProps;return s.filter(o=>o.length>0)}renderWrapper(t){return this.createElement("div",{className:`${this.className}-wrapper`},t)}renderDefaultStyle(){var t=this.className,e=`
.${t}-wrapper { background: gray; padding: 30px; padding-bottom: 0px; display: flex; flex-flow: column; align-items: center; } 
.${t}-wrapper>section.${t} { background: white; box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); margin-bottom: 30px; }`;this.options.hideWrapperOnPrint&&(e=`@media not print { ${e} }`);var n=`${e}
.${t} { color: black; hyphens: auto; text-underline-position: from-font; }
section.${t} { box-sizing: border-box; display: flex; flex-flow: column nowrap; position: relative; overflow: hidden; }
section.${t}>article { margin-bottom: auto; z-index: 1; }
section.${t}>footer { z-index: 1; }
.${t} table { border-collapse: collapse; }
.${t} table td, .${t} table th { vertical-align: top; }
.${t} p { margin: 0pt; min-height: 1em; }
.${t} span { white-space: pre-wrap; overflow-wrap: break-word; }
.${t} a { color: inherit; text-decoration: inherit; }
.${t} svg { fill: transparent; }
`;return this.options.renderComments&&(n+=`
.${t}-comment-ref { cursor: default; }
.${t}-comment-popover { display: none; z-index: 1000; padding: 0.5rem; background: white; position: absolute; box-shadow: 0 0 0.25rem rgba(0, 0, 0, 0.25); width: 30ch; }
.${t}-comment-ref:hover~.${t}-comment-popover { display: block; }
.${t}-comment-author,.${t}-comment-date { font-size: 0.875rem; color: #888; }
`),this.createStyleElement(n)}renderNumbering(t,e){var n="",s=[];for(var o of t){var l=`p.${this.numberingClass(o.id,o.level)}`,u="none";if(o.bullet){let h=`--${this.className}-${o.bullet.src}`.toLowerCase();n+=this.styleToString(`${l}:before`,{content:"' '",display:"inline-block",background:`var(${h})`},o.bullet.style),this.tasks.push(this.document.loadNumberingImage(o.bullet.src).then(f=>{var p=`${this.rootSelector} { ${h}: url(${f}) }`;e.appendChild(this.createStyleElement(p))}))}else if(o.levelText){let h=this.numberingCounter(o.id,o.level);const f=h+" "+(o.start-1);o.level>0&&(n+=this.styleToString(`p.${this.numberingClass(o.id,o.level-1)}`,{"counter-set":f})),s.push(f),n+=this.styleToString(`${l}:before`,{content:this.levelTextToContent(o.levelText,o.suff,o.id,this.numFormatToCssValue(o.format)),"counter-increment":h,...o.rStyle})}else u=this.numFormatToCssValue(o.format);n+=this.styleToString(l,{display:"list-item","list-style-position":"inside","list-style-type":u,...o.pStyle})}return s.length>0&&(n+=this.styleToString(this.rootSelector,{"counter-reset":s.join(" ")})),this.createStyleElement(n)}renderStyles(t){var e="";const n=this.styleMap,s=Ds(t.filter(h=>h.isDefault),h=>h.target);for(const h of t){var o=h.styles;if(h.linked){var l=h.linked&&n[h.linked];l?o=o.concat(l.styles):this.options.debug&&console.warn(`Can't find linked style ${h.linked}`)}for(const f of o){var u=`${h.target??""}.${h.cssName}`;h.target!=f.target&&(u+=` ${f.target}`),s[h.target]==h&&(u=`.${this.className} ${h.target}, `+u),e+=this.styleToString(u,f.values)}}return this.createStyleElement(e)}renderNotes(t,e,n){var s=t.map(l=>e[l]).filter(l=>l);if(s.length>0){var o=this.createElement("ol",null,this.renderElements(s));n.appendChild(o)}}renderElement(t){switch(t.type){case ut.Paragraph:return this.renderParagraph(t);case ut.BookmarkStart:return this.renderBookmarkStart(t);case ut.BookmarkEnd:return null;case ut.Run:return this.renderRun(t);case ut.Table:return this.renderTable(t);case ut.Row:return this.renderTableRow(t);case ut.Cell:return this.renderTableCell(t);case ut.Hyperlink:return this.renderHyperlink(t);case ut.SmartTag:return this.renderSmartTag(t);case ut.Drawing:return this.renderDrawing(t);case ut.Image:return this.renderImage(t);case ut.Text:return this.renderText(t);case ut.Text:return this.renderText(t);case ut.DeletedText:return this.renderDeletedText(t);case ut.Tab:return this.renderTab(t);case ut.Symbol:return this.renderSymbol(t);case ut.Break:return this.renderBreak(t);case ut.Footer:return this.renderContainer(t,"footer");case ut.Header:return this.renderContainer(t,"header");case ut.Footnote:case ut.Endnote:return this.renderContainer(t,"li");case ut.FootnoteReference:return this.renderFootnoteReference(t);case ut.EndnoteReference:return this.renderEndnoteReference(t);case ut.NoBreakHyphen:return this.createElement("wbr");case ut.VmlPicture:return this.renderVmlPicture(t);case ut.VmlElement:return this.renderVmlElement(t);case ut.MmlMath:return this.renderContainerNS(t,Zt.mathML,"math",{xmlns:Zt.mathML});case ut.MmlMathParagraph:return this.renderContainer(t,"span");case ut.MmlFraction:return this.renderContainerNS(t,Zt.mathML,"mfrac");case ut.MmlBase:return this.renderContainerNS(t,Zt.mathML,t.parent.type==ut.MmlMatrixRow?"mtd":"mrow");case ut.MmlNumerator:case ut.MmlDenominator:case ut.MmlFunction:case ut.MmlLimit:case ut.MmlBox:return this.renderContainerNS(t,Zt.mathML,"mrow");case ut.MmlGroupChar:return this.renderMmlGroupChar(t);case ut.MmlLimitLower:return this.renderContainerNS(t,Zt.mathML,"munder");case ut.MmlMatrix:return this.renderContainerNS(t,Zt.mathML,"mtable");case ut.MmlMatrixRow:return this.renderContainerNS(t,Zt.mathML,"mtr");case ut.MmlRadical:return this.renderMmlRadical(t);case ut.MmlSuperscript:return this.renderContainerNS(t,Zt.mathML,"msup");case ut.MmlSubscript:return this.renderContainerNS(t,Zt.mathML,"msub");case ut.MmlDegree:case ut.MmlSuperArgument:case ut.MmlSubArgument:return this.renderContainerNS(t,Zt.mathML,"mn");case ut.MmlFunctionName:return this.renderContainerNS(t,Zt.mathML,"ms");case ut.MmlDelimiter:return this.renderMmlDelimiter(t);case ut.MmlRun:return this.renderMmlRun(t);case ut.MmlNary:return this.renderMmlNary(t);case ut.MmlPreSubSuper:return this.renderMmlPreSubSuper(t);case ut.MmlBar:return this.renderMmlBar(t);case ut.MmlEquationArray:return this.renderMllList(t);case ut.Inserted:return this.renderInserted(t);case ut.Deleted:return this.renderDeleted(t);case ut.CommentRangeStart:return this.renderCommentRangeStart(t);case ut.CommentRangeEnd:return this.renderCommentRangeEnd(t);case ut.CommentReference:return this.renderCommentReference(t);case ut.AltChunk:return this.renderAltChunk(t)}return null}renderElements(t,e){if(t==null)return null;var n=t.flatMap(s=>this.renderElement(s)).filter(s=>s!=null);return e&&_f(e,n),n}renderContainer(t,e,n){return this.createElement(e,n,this.renderElements(t.children))}renderContainerNS(t,e,n,s){return this.createElementNS(e,n,s,this.renderElements(t.children))}renderParagraph(t){var e=this.renderContainer(t,"p");const n=this.findStyle(t.styleName);t.tabs??(t.tabs=n?.paragraphProps?.tabs),this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e),this.renderCommonProperties(e.style,t);const s=t.numbering??n?.paragraphProps?.numbering;return s&&e.classList.add(this.numberingClass(s.id,s.level)),e}renderRunProperties(t,e){this.renderCommonProperties(t,e)}renderCommonProperties(t,e){e!=null&&(e.color&&(t.color=e.color),e.fontSize&&(t["font-size"]=e.fontSize))}renderHyperlink(t){var e=this.renderContainer(t,"a");this.renderStyleValues(t.cssStyle,e);let n="";return t.id&&(n=this.document.documentPart.rels.find(o=>o.id==t.id&&o.targetMode==="External")?.target??n),t.anchor&&(n+=`#${t.anchor}`),e.href=n,e}renderSmartTag(t){return this.renderContainer(t,"span")}renderCommentRangeStart(t){if(!this.options.renderComments)return null;const e=new Range;this.commentHighlight?.add(e);const n=this.createComment(`start of comment #${t.id}`);return this.later(()=>e.setStart(n,0)),this.commentMap[t.id]=e,n}renderCommentRangeEnd(t){if(!this.options.renderComments)return null;const e=this.commentMap[t.id],n=this.createComment(`end of comment #${t.id}`);return this.later(()=>e?.setEnd(n,0)),n}renderCommentReference(t){if(!this.options.renderComments)return null;var e=this.document.commentsPart?.commentMap[t.id];if(!e)return null;const n=new DocumentFragment,s=this.createElement("span",{className:`${this.className}-comment-ref`},[""]),o=this.createElement("div",{className:`${this.className}-comment-popover`});return this.renderCommentContent(e,o),n.appendChild(this.createComment(`comment #${e.id} by ${e.author} on ${e.date}`)),n.appendChild(s),n.appendChild(o),n}renderAltChunk(t){if(!this.options.renderAltChunks)return null;var e=this.createElement("iframe");return this.tasks.push(this.document.loadAltChunk(t.id,this.currentPart).then(n=>{e.srcdoc=n})),e}renderCommentContent(t,e){e.appendChild(this.createElement("div",{className:`${this.className}-comment-author`},[t.author])),e.appendChild(this.createElement("div",{className:`${this.className}-comment-date`},[new Date(t.date).toLocaleString()])),this.renderElements(t.children,e)}renderDrawing(t){var e=this.renderContainer(t,"div");return e.style.display="inline-block",e.style.position="relative",e.style.textIndent="0px",this.renderStyleValues(t.cssStyle,e),e}renderImage(t){let e=this.createElement("img"),n=t.cssStyle?.transform;if(this.renderStyleValues(t.cssStyle,e),t.srcRect&&t.srcRect.some(h=>h!=0)){var[s,o,l,u]=t.srcRect;n=`scale(${1/(1-s-l)}, ${1/(1-o-u)})`,e.style["clip-path"]=`rect(${(100*o).toFixed(2)}% ${(100*(1-l)).toFixed(2)}% ${(100*(1-u)).toFixed(2)}% ${(100*s).toFixed(2)}%)`}return t.rotation&&(n=`rotate(${t.rotation}deg) ${n??""}`),e.style.transform=n?.trim(),this.document&&this.tasks.push(this.document.loadDocumentImage(t.src,this.currentPart).then(h=>{e.src=h})),e}renderText(t){return this.htmlDocument.createTextNode(t.text)}renderDeletedText(t){return this.options.renderChanges?this.renderText(t):null}renderBreak(t){return t.break=="textWrapping"?this.createElement("br"):null}renderInserted(t){return this.options.renderChanges?this.renderContainer(t,"ins"):this.renderElements(t.children)}renderDeleted(t){return this.options.renderChanges?this.renderContainer(t,"del"):null}renderSymbol(t){var e=this.createElement("span");return e.style.fontFamily=t.font,e.innerHTML=`&#x${t.char};`,e}renderFootnoteReference(t){var e=this.createElement("sup");return this.currentFootnoteIds.push(t.id),e.textContent=`${this.currentFootnoteIds.length}`,e}renderEndnoteReference(t){var e=this.createElement("sup");return this.currentEndnoteIds.push(t.id),e.textContent=`${this.currentEndnoteIds.length}`,e}renderTab(t){var e=this.createElement("span");if(e.innerHTML="&emsp;",this.options.experimental){e.className=this.tabStopClass();var n=zN(t,ut.Paragraph)?.tabs;this.currentTabs.push({stops:n,span:e})}return e}renderBookmarkStart(t){return this.createElement("span",{id:t.name})}renderRun(t){if(t.fieldRun)return null;const e=this.createElement("span");if(t.id&&(e.id=t.id),this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e),t.verticalAlign){const n=this.createElement(t.verticalAlign);this.renderElements(t.children,n),e.appendChild(n)}else this.renderElements(t.children,e);return e}renderTable(t){let e=this.createElement("table");return this.tableCellPositions.push(this.currentCellPosition),this.tableVerticalMerges.push(this.currentVerticalMerge),this.currentVerticalMerge={},this.currentCellPosition={col:0,row:0},t.columns&&e.appendChild(this.renderTableColumns(t.columns)),this.renderClass(t,e),this.renderElements(t.children,e),this.renderStyleValues(t.cssStyle,e),this.currentVerticalMerge=this.tableVerticalMerges.pop(),this.currentCellPosition=this.tableCellPositions.pop(),e}renderTableColumns(t){let e=this.createElement("colgroup");for(let n of t){let s=this.createElement("col");n.width&&(s.style.width=n.width),e.appendChild(s)}return e}renderTableRow(t){let e=this.createElement("tr");return this.currentCellPosition.col=0,t.gridBefore&&e.appendChild(this.renderTableCellPlaceholder(t.gridBefore)),this.renderClass(t,e),this.renderElements(t.children,e),this.renderStyleValues(t.cssStyle,e),t.gridAfter&&e.appendChild(this.renderTableCellPlaceholder(t.gridAfter)),this.currentCellPosition.row++,e}renderTableCellPlaceholder(t){const e=this.createElement("td",{colSpan:t});return e.style.border="none",e}renderTableCell(t){let e=this.renderContainer(t,"td");const n=this.currentCellPosition.col;return t.verticalMerge?t.verticalMerge=="restart"?(this.currentVerticalMerge[n]=e,e.rowSpan=1):this.currentVerticalMerge[n]&&(this.currentVerticalMerge[n].rowSpan+=1,e.style.display="none"):this.currentVerticalMerge[n]=null,this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e),t.span&&(e.colSpan=t.span),this.currentCellPosition.col+=e.colSpan,e}renderVmlPicture(t){return this.renderContainer(t,"div")}renderVmlElement(t){var e=this.createSvgElement("svg");e.setAttribute("style",t.cssStyleText);const n=this.renderVmlChildElement(t);return t.imageHref?.id&&this.tasks.push(this.document?.loadDocumentImage(t.imageHref.id,this.currentPart).then(s=>n.setAttribute("href",s))),e.appendChild(n),requestAnimationFrame(()=>{const s=e.firstElementChild.getBBox();e.setAttribute("width",`${Math.ceil(s.x+s.width)}`),e.setAttribute("height",`${Math.ceil(s.y+s.height)}`)}),e}renderVmlChildElement(t){const e=this.createSvgElement(t.tagName);Object.entries(t.attrs).forEach(([n,s])=>e.setAttribute(n,s));for(let n of t.children)n.type==ut.VmlElement?e.appendChild(this.renderVmlChildElement(n)):e.appendChild(...Mo(this.renderElement(n)));return e}renderMmlRadical(t){const e=t.children.find(s=>s.type==ut.MmlBase);if(t.props?.hideDegree)return this.createElementNS(Zt.mathML,"msqrt",null,this.renderElements([e]));const n=t.children.find(s=>s.type==ut.MmlDegree);return this.createElementNS(Zt.mathML,"mroot",null,this.renderElements([e,n]))}renderMmlDelimiter(t){const e=[];return e.push(this.createElementNS(Zt.mathML,"mo",null,[t.props.beginChar??"("])),e.push(...this.renderElements(t.children)),e.push(this.createElementNS(Zt.mathML,"mo",null,[t.props.endChar??")"])),this.createElementNS(Zt.mathML,"mrow",null,e)}renderMmlNary(t){const e=[],n=Ds(t.children,f=>f.type),s=n[ut.MmlSuperArgument],o=n[ut.MmlSubArgument],l=s?this.createElementNS(Zt.mathML,"mo",null,Mo(this.renderElement(s))):null,u=o?this.createElementNS(Zt.mathML,"mo",null,Mo(this.renderElement(o))):null,h=this.createElementNS(Zt.mathML,"mo",null,[t.props?.char??""]);return l||u?e.push(this.createElementNS(Zt.mathML,"munderover",null,[h,u,l])):l?e.push(this.createElementNS(Zt.mathML,"mover",null,[h,l])):u?e.push(this.createElementNS(Zt.mathML,"munder",null,[h,u])):e.push(h),e.push(...this.renderElements(n[ut.MmlBase].children)),this.createElementNS(Zt.mathML,"mrow",null,e)}renderMmlPreSubSuper(t){const e=[],n=Ds(t.children,f=>f.type),s=n[ut.MmlSuperArgument],o=n[ut.MmlSubArgument],l=s?this.createElementNS(Zt.mathML,"mo",null,Mo(this.renderElement(s))):null,u=o?this.createElementNS(Zt.mathML,"mo",null,Mo(this.renderElement(o))):null,h=this.createElementNS(Zt.mathML,"mo",null);return e.push(this.createElementNS(Zt.mathML,"msubsup",null,[h,u,l])),e.push(...this.renderElements(n[ut.MmlBase].children)),this.createElementNS(Zt.mathML,"mrow",null,e)}renderMmlGroupChar(t){const e=t.props.verticalJustification==="bot"?"mover":"munder",n=this.renderContainerNS(t,Zt.mathML,e);return t.props.char&&n.appendChild(this.createElementNS(Zt.mathML,"mo",null,[t.props.char])),n}renderMmlBar(t){const e=this.renderContainerNS(t,Zt.mathML,"mrow");switch(t.props.position){case"top":e.style.textDecoration="overline";break;case"bottom":e.style.textDecoration="underline";break}return e}renderMmlRun(t){const e=this.createElementNS(Zt.mathML,"ms",null,this.renderElements(t.children));return this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e),e}renderMllList(t){const e=this.createElementNS(Zt.mathML,"mtable");this.renderClass(t,e),this.renderStyleValues(t.cssStyle,e);for(let n of this.renderElements(t.children))e.appendChild(this.createElementNS(Zt.mathML,"mtr",null,[this.createElementNS(Zt.mathML,"mtd",null,[n])]));return e}renderStyleValues(t,e){for(let n in t)n.startsWith("$")?e.setAttribute(n.slice(1),t[n]):e.style[n]=t[n]}renderClass(t,e){t.className&&(e.className=t.className),t.styleName&&e.classList.add(this.processStyleName(t.styleName))}findStyle(t){return t&&this.styleMap?.[t]}numberingClass(t,e){return`${this.className}-num-${t}-${e}`}tabStopClass(){return`${this.className}-tab-stop`}styleToString(t,e,n=null){let s=`${t} {\r
`;for(const o in e)o.startsWith("$")||(s+=`  ${o}: ${e[o]};\r
`);return n&&(s+=n),s+`}\r
`}numberingCounter(t,e){return`${this.className}-num-${t}-${e}`}levelTextToContent(t,e,n,s){const o={tab:"\\9",space:"\\a0"};var l=t.replace(/%\d*/g,u=>{let h=parseInt(u.substring(1),10)-1;return`"counter(${this.numberingCounter(n,h)}, ${s})"`});return`"${l}${o[e]??""}"`}numFormatToCssValue(t){var e={none:"none",bullet:"disc",decimal:"decimal",lowerLetter:"lower-alpha",upperLetter:"upper-alpha",lowerRoman:"lower-roman",upperRoman:"upper-roman",decimalZero:"decimal-leading-zero",aiueo:"katakana",aiueoFullWidth:"katakana",chineseCounting:"simp-chinese-informal",chineseCountingThousand:"simp-chinese-informal",chineseLegalSimplified:"simp-chinese-formal",chosung:"hangul-consonant",ideographDigital:"cjk-ideographic",ideographTraditional:"cjk-heavenly-stem",ideographLegalTraditional:"trad-chinese-formal",ideographZodiac:"cjk-earthly-branch",iroha:"katakana-iroha",irohaFullWidth:"katakana-iroha",japaneseCounting:"japanese-informal",japaneseDigitalTenThousand:"cjk-decimal",japaneseLegal:"japanese-formal",thaiNumbers:"thai",koreanCounting:"korean-hangul-formal",koreanDigital:"korean-hangul-formal",koreanDigital2:"korean-hanja-informal",hebrew1:"hebrew",hebrew2:"hebrew",hindiNumbers:"devanagari",ganada:"hangul",taiwaneseCounting:"cjk-ideographic",taiwaneseCountingThousand:"cjk-ideographic",taiwaneseDigital:"cjk-decimal"};return e[t]??t}refreshTabStops(){this.options.experimental&&setTimeout(()=>{const t=ON();for(let e of this.currentTabs)LN(e.span,e.stops,this.defaultTabSize,t)},500)}createElementNS(t,e,n,s){var o=t?this.htmlDocument.createElementNS(t,e):this.htmlDocument.createElement(e);return Object.assign(o,n),s&&_f(o,s),o}createElement(t,e,n){return this.createElementNS(void 0,t,e,n)}createSvgElement(t,e,n){return this.createElementNS(Zt.svg,t,e,n)}createStyleElement(t){return this.createElement("style",{innerHTML:t})}createComment(t){return this.htmlDocument.createComment(t)}later(t){this.postRenderTasks.push(t)}}function w1(a){a.innerHTML=""}function _f(a,t){t.forEach(e=>a.appendChild(SR(e)?document.createTextNode(e):e))}function zN(a,t){for(var e=a.parent;e!=null&&e.type!=t;)e=e.parent;return e}const lS={ignoreHeight:!1,ignoreWidth:!1,ignoreFonts:!1,breakPages:!0,debug:!1,experimental:!1,className:"docx",inWrapper:!0,hideWrapperOnPrint:!1,trimXmlDeclaration:!0,ignoreLastRenderedPageBreak:!0,renderHeaders:!0,renderFooters:!0,renderFootnotes:!0,renderEndnotes:!0,useBase64URL:!1,renderChanges:!1,renderComments:!1,renderAltChunks:!0};function FN(a,t){const e={...lS,...t};return lm.load(a,new RN(e),e)}async function IN(a,t,e,n){const s={...lS,...n};return await new BN(window.document).render(a,t,e,s)}async function UN(a,t,e,n){const s=await FN(a,n);return await IN(s,t,e,n),s}function cS(a){var t,e,n="";if(typeof a=="string"||typeof a=="number")n+=a;else if(typeof a=="object")if(Array.isArray(a)){var s=a.length;for(t=0;t<s;t++)a[t]&&(e=cS(a[t]))&&(n&&(n+=" "),n+=e)}else for(e in a)a[e]&&(n&&(n+=" "),n+=e);return n}function jN(){for(var a,t,e=0,n="",s=arguments.length;e<s;e++)(a=arguments[e])&&(t=cS(a))&&(n&&(n+=" "),n+=t);return n}const VN=(a,t)=>{const e=new Array(a.length+t.length);for(let n=0;n<a.length;n++)e[n]=a[n];for(let n=0;n<t.length;n++)e[a.length+n]=t[n];return e},HN=(a,t)=>({classGroupId:a,validator:t}),uS=(a=new Map,t=null,e)=>({nextPart:a,validators:t,classGroupId:e}),cu="-",A1=[],GN="arbitrary..",XN=a=>{const t=qN(a),{conflictingClassGroups:e,conflictingClassGroupModifiers:n}=a;return{getClassGroupId:l=>{if(l.startsWith("[")&&l.endsWith("]"))return YN(l);const u=l.split(cu),h=u[0]===""&&u.length>1?1:0;return hS(u,h,t)},getConflictingClassGroupIds:(l,u)=>{if(u){const h=n[l],f=e[l];return h?f?VN(f,h):h:f||A1}return e[l]||A1}}},hS=(a,t,e)=>{if(a.length-t===0)return e.classGroupId;const s=a[t],o=e.nextPart.get(s);if(o){const f=hS(a,t+1,o);if(f)return f}const l=e.validators;if(l===null)return;const u=t===0?a.join(cu):a.slice(t).join(cu),h=l.length;for(let f=0;f<h;f++){const p=l[f];if(p.validator(u))return p.classGroupId}},YN=a=>a.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=a.slice(1,-1),e=t.indexOf(":"),n=t.slice(0,e);return n?GN+n:void 0})(),qN=a=>{const{theme:t,classGroups:e}=a;return $N(e,t)},$N=(a,t)=>{const e=uS();for(const n in a){const s=a[n];cm(s,e,n,t)}return e},cm=(a,t,e,n)=>{const s=a.length;for(let o=0;o<s;o++){const l=a[o];WN(l,t,e,n)}},WN=(a,t,e,n)=>{if(typeof a=="string"){KN(a,t,e);return}if(typeof a=="function"){ZN(a,t,e,n);return}QN(a,t,e,n)},KN=(a,t,e)=>{const n=a===""?t:dS(t,a);n.classGroupId=e},ZN=(a,t,e,n)=>{if(JN(a)){cm(a(n),t,e,n);return}t.validators===null&&(t.validators=[]),t.validators.push(HN(e,a))},QN=(a,t,e,n)=>{const s=Object.entries(a),o=s.length;for(let l=0;l<o;l++){const[u,h]=s[l];cm(h,dS(t,u),e,n)}},dS=(a,t)=>{let e=a;const n=t.split(cu),s=n.length;for(let o=0;o<s;o++){const l=n[o];let u=e.nextPart.get(l);u||(u=uS(),e.nextPart.set(l,u)),e=u}return e},JN=a=>"isThemeGetter"in a&&a.isThemeGetter===!0,tP=a=>{if(a<1)return{get:()=>{},set:()=>{}};let t=0,e=Object.create(null),n=Object.create(null);const s=(o,l)=>{e[o]=l,t++,t>a&&(t=0,n=e,e=Object.create(null))};return{get(o){let l=e[o];if(l!==void 0)return l;if((l=n[o])!==void 0)return s(o,l),l},set(o,l){o in e?e[o]=l:s(o,l)}}},hp="!",S1=":",eP=[],x1=(a,t,e,n,s)=>({modifiers:a,hasImportantModifier:t,baseClassName:e,maybePostfixModifierPosition:n,isExternal:s}),nP=a=>{const{prefix:t,experimentalParseClassName:e}=a;let n=s=>{const o=[];let l=0,u=0,h=0,f;const p=s.length;for(let w=0;w<p;w++){const x=s[w];if(l===0&&u===0){if(x===S1){o.push(s.slice(h,w)),h=w+1;continue}if(x==="/"){f=w;continue}}x==="["?l++:x==="]"?l--:x==="("?u++:x===")"&&u--}const m=o.length===0?s:s.slice(h);let b=m,y=!1;m.endsWith(hp)?(b=m.slice(0,-1),y=!0):m.startsWith(hp)&&(b=m.slice(1),y=!0);const A=f&&f>h?f-h:void 0;return x1(o,y,b,A)};if(t){const s=t+S1,o=n;n=l=>l.startsWith(s)?o(l.slice(s.length)):x1(eP,!1,l,void 0,!0)}if(e){const s=n;n=o=>e({className:o,parseClassName:s})}return n},iP=a=>{const t=new Map;return a.orderSensitiveModifiers.forEach((e,n)=>{t.set(e,1e6+n)}),e=>{const n=[];let s=[];for(let o=0;o<e.length;o++){const l=e[o],u=l[0]==="[",h=t.has(l);u||h?(s.length>0&&(s.sort(),n.push(...s),s=[]),n.push(l)):s.push(l)}return s.length>0&&(s.sort(),n.push(...s)),n}},sP=a=>({cache:tP(a.cacheSize),parseClassName:nP(a),sortModifiers:iP(a),...XN(a)}),rP=/\s+/,aP=(a,t)=>{const{parseClassName:e,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:o}=t,l=[],u=a.trim().split(rP);let h="";for(let f=u.length-1;f>=0;f-=1){const p=u[f],{isExternal:m,modifiers:b,hasImportantModifier:y,baseClassName:A,maybePostfixModifierPosition:w}=e(p);if(m){h=p+(h.length>0?" "+h:h);continue}let x=!!w,S=n(x?A.substring(0,w):A);if(!S){if(!x){h=p+(h.length>0?" "+h:h);continue}if(S=n(A),!S){h=p+(h.length>0?" "+h:h);continue}x=!1}const E=b.length===0?"":b.length===1?b[0]:o(b).join(":"),T=y?E+hp:E,R=T+S;if(l.indexOf(R)>-1)continue;l.push(R);const D=s(S,x);for(let O=0;O<D.length;++O){const L=D[O];l.push(T+L)}h=p+(h.length>0?" "+h:h)}return h},oP=(...a)=>{let t=0,e,n,s="";for(;t<a.length;)(e=a[t++])&&(n=fS(e))&&(s&&(s+=" "),s+=n);return s},fS=a=>{if(typeof a=="string")return a;let t,e="";for(let n=0;n<a.length;n++)a[n]&&(t=fS(a[n]))&&(e&&(e+=" "),e+=t);return e},lP=(a,...t)=>{let e,n,s,o;const l=h=>{const f=t.reduce((p,m)=>m(p),a());return e=sP(f),n=e.cache.get,s=e.cache.set,o=u,u(h)},u=h=>{const f=n(h);if(f)return f;const p=aP(h,e);return s(h,p),p};return o=l,(...h)=>o(oP(...h))},cP=[],$e=a=>{const t=e=>e[a]||cP;return t.isThemeGetter=!0,t},pS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,mS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,uP=/^\d+(?:\.\d+)?\/\d+(?:\.\d+)?$/,hP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,pP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,mP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Cs=a=>uP.test(a),$t=a=>!!a&&!Number.isNaN(Number(a)),ks=a=>!!a&&Number.isInteger(Number(a)),Ef=a=>a.endsWith("%")&&$t(a.slice(0,-1)),Qi=a=>hP.test(a),gS=()=>!0,gP=a=>dP.test(a)&&!fP.test(a),um=()=>!1,bP=a=>pP.test(a),yP=a=>mP.test(a),vP=a=>!Dt(a)&&!Nt(a),wP=a=>Fs(a,vS,um),Dt=a=>pS.test(a),sr=a=>Fs(a,wS,gP),_1=a=>Fs(a,kP,$t),AP=a=>Fs(a,SS,gS),SP=a=>Fs(a,AS,um),E1=a=>Fs(a,bS,um),xP=a=>Fs(a,yS,yP),Bc=a=>Fs(a,xS,bP),Nt=a=>mS.test(a),Ro=a=>yr(a,wS),_P=a=>yr(a,AS),T1=a=>yr(a,bS),EP=a=>yr(a,vS),TP=a=>yr(a,yS),zc=a=>yr(a,xS,!0),CP=a=>yr(a,SS,!0),Fs=(a,t,e)=>{const n=pS.exec(a);return n?n[1]?t(n[1]):e(n[2]):!1},yr=(a,t,e=!1)=>{const n=mS.exec(a);return n?n[1]?t(n[1]):e:!1},bS=a=>a==="position"||a==="percentage",yS=a=>a==="image"||a==="url",vS=a=>a==="length"||a==="size"||a==="bg-size",wS=a=>a==="length",kP=a=>a==="number",AS=a=>a==="family-name",SS=a=>a==="number"||a==="weight",xS=a=>a==="shadow",MP=()=>{const a=$e("color"),t=$e("font"),e=$e("text"),n=$e("font-weight"),s=$e("tracking"),o=$e("leading"),l=$e("breakpoint"),u=$e("container"),h=$e("spacing"),f=$e("radius"),p=$e("shadow"),m=$e("inset-shadow"),b=$e("text-shadow"),y=$e("drop-shadow"),A=$e("blur"),w=$e("perspective"),x=$e("aspect"),S=$e("ease"),E=$e("animate"),T=()=>["auto","avoid","all","avoid-page","page","left","right","column"],R=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],D=()=>[...R(),Nt,Dt],O=()=>["auto","hidden","clip","visible","scroll"],L=()=>["auto","contain","none"],z=()=>[Nt,Dt,h],I=()=>[Cs,"full","auto",...z()],Q=()=>[ks,"none","subgrid",Nt,Dt],at=()=>["auto",{span:["full",ks,Nt,Dt]},ks,Nt,Dt],U=()=>[ks,"auto",Nt,Dt],Z=()=>["auto","min","max","fr",Nt,Dt],M=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],tt=()=>["start","end","center","stretch","center-safe","end-safe"],H=()=>["auto",...z()],j=()=>[Cs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...z()],lt=()=>[Cs,"screen","full","dvw","lvw","svw","min","max","fit",...z()],st=()=>[Cs,"screen","full","lh","dvh","lvh","svh","min","max","fit",...z()],B=()=>[a,Nt,Dt],_=()=>[...R(),T1,E1,{position:[Nt,Dt]}],N=()=>["no-repeat",{repeat:["","x","y","space","round"]}],X=()=>["auto","cover","contain",EP,wP,{size:[Nt,Dt]}],K=()=>[Ef,Ro,sr],$=()=>["","none","full",f,Nt,Dt],ht=()=>["",$t,Ro,sr],pt=()=>["solid","dashed","dotted","double"],At=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],vt=()=>[$t,Ef,T1,E1],Ot=()=>["","none",A,Nt,Dt],Mt=()=>["none",$t,Nt,Dt],It=()=>["none",$t,Nt,Dt],qt=()=>[$t,Nt,Dt],k=()=>[Cs,"full",...z()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Qi],breakpoint:[Qi],color:[gS],container:[Qi],"drop-shadow":[Qi],ease:["in","out","in-out"],font:[vP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Qi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Qi],shadow:[Qi],spacing:["px",$t],text:[Qi],"text-shadow":[Qi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Cs,Dt,Nt,x]}],container:["container"],columns:[{columns:[$t,Dt,Nt,u]}],"break-after":[{"break-after":T()}],"break-before":[{"break-before":T()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:D()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:I()}],"inset-x":[{"inset-x":I()}],"inset-y":[{"inset-y":I()}],start:[{"inset-s":I(),start:I()}],end:[{"inset-e":I(),end:I()}],"inset-bs":[{"inset-bs":I()}],"inset-be":[{"inset-be":I()}],top:[{top:I()}],right:[{right:I()}],bottom:[{bottom:I()}],left:[{left:I()}],visibility:["visible","invisible","collapse"],z:[{z:[ks,"auto",Nt,Dt]}],basis:[{basis:[Cs,"full","auto",u,...z()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[$t,Cs,"auto","initial","none",Dt]}],grow:[{grow:["",$t,Nt,Dt]}],shrink:[{shrink:["",$t,Nt,Dt]}],order:[{order:[ks,"first","last","none",Nt,Dt]}],"grid-cols":[{"grid-cols":Q()}],"col-start-end":[{col:at()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":Q()}],"row-start-end":[{row:at()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:z()}],"gap-x":[{"gap-x":z()}],"gap-y":[{"gap-y":z()}],"justify-content":[{justify:[...M(),"normal"]}],"justify-items":[{"justify-items":[...tt(),"normal"]}],"justify-self":[{"justify-self":["auto",...tt()]}],"align-content":[{content:["normal",...M()]}],"align-items":[{items:[...tt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...tt(),{baseline:["","last"]}]}],"place-content":[{"place-content":M()}],"place-items":[{"place-items":[...tt(),"baseline"]}],"place-self":[{"place-self":["auto",...tt()]}],p:[{p:z()}],px:[{px:z()}],py:[{py:z()}],ps:[{ps:z()}],pe:[{pe:z()}],pbs:[{pbs:z()}],pbe:[{pbe:z()}],pt:[{pt:z()}],pr:[{pr:z()}],pb:[{pb:z()}],pl:[{pl:z()}],m:[{m:H()}],mx:[{mx:H()}],my:[{my:H()}],ms:[{ms:H()}],me:[{me:H()}],mbs:[{mbs:H()}],mbe:[{mbe:H()}],mt:[{mt:H()}],mr:[{mr:H()}],mb:[{mb:H()}],ml:[{ml:H()}],"space-x":[{"space-x":z()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":z()}],"space-y-reverse":["space-y-reverse"],size:[{size:j()}],"inline-size":[{inline:["auto",...lt()]}],"min-inline-size":[{"min-inline":["auto",...lt()]}],"max-inline-size":[{"max-inline":["none",...lt()]}],"block-size":[{block:["auto",...st()]}],"min-block-size":[{"min-block":["auto",...st()]}],"max-block-size":[{"max-block":["none",...st()]}],w:[{w:[u,"screen",...j()]}],"min-w":[{"min-w":[u,"screen","none",...j()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[l]},...j()]}],h:[{h:["screen","lh",...j()]}],"min-h":[{"min-h":["screen","lh","none",...j()]}],"max-h":[{"max-h":["screen","lh",...j()]}],"font-size":[{text:["base",e,Ro,sr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,CP,AP]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ef,Dt]}],"font-family":[{font:[_P,SP,t]}],"font-features":[{"font-features":[Dt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Nt,Dt]}],"line-clamp":[{"line-clamp":[$t,"none",Nt,_1]}],leading:[{leading:[o,...z()]}],"list-image":[{"list-image":["none",Nt,Dt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Nt,Dt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:B()}],"text-color":[{text:B()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pt(),"wavy"]}],"text-decoration-thickness":[{decoration:[$t,"from-font","auto",Nt,sr]}],"text-decoration-color":[{decoration:B()}],"underline-offset":[{"underline-offset":[$t,"auto",Nt,Dt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:z()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Nt,Dt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Nt,Dt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:_()}],"bg-repeat":[{bg:N()}],"bg-size":[{bg:X()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ks,Nt,Dt],radial:["",Nt,Dt],conic:[ks,Nt,Dt]},TP,xP]}],"bg-color":[{bg:B()}],"gradient-from-pos":[{from:K()}],"gradient-via-pos":[{via:K()}],"gradient-to-pos":[{to:K()}],"gradient-from":[{from:B()}],"gradient-via":[{via:B()}],"gradient-to":[{to:B()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:ht()}],"border-w-x":[{"border-x":ht()}],"border-w-y":[{"border-y":ht()}],"border-w-s":[{"border-s":ht()}],"border-w-e":[{"border-e":ht()}],"border-w-bs":[{"border-bs":ht()}],"border-w-be":[{"border-be":ht()}],"border-w-t":[{"border-t":ht()}],"border-w-r":[{"border-r":ht()}],"border-w-b":[{"border-b":ht()}],"border-w-l":[{"border-l":ht()}],"divide-x":[{"divide-x":ht()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ht()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...pt(),"hidden","none"]}],"divide-style":[{divide:[...pt(),"hidden","none"]}],"border-color":[{border:B()}],"border-color-x":[{"border-x":B()}],"border-color-y":[{"border-y":B()}],"border-color-s":[{"border-s":B()}],"border-color-e":[{"border-e":B()}],"border-color-bs":[{"border-bs":B()}],"border-color-be":[{"border-be":B()}],"border-color-t":[{"border-t":B()}],"border-color-r":[{"border-r":B()}],"border-color-b":[{"border-b":B()}],"border-color-l":[{"border-l":B()}],"divide-color":[{divide:B()}],"outline-style":[{outline:[...pt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[$t,Nt,Dt]}],"outline-w":[{outline:["",$t,Ro,sr]}],"outline-color":[{outline:B()}],shadow:[{shadow:["","none",p,zc,Bc]}],"shadow-color":[{shadow:B()}],"inset-shadow":[{"inset-shadow":["none",m,zc,Bc]}],"inset-shadow-color":[{"inset-shadow":B()}],"ring-w":[{ring:ht()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:B()}],"ring-offset-w":[{"ring-offset":[$t,sr]}],"ring-offset-color":[{"ring-offset":B()}],"inset-ring-w":[{"inset-ring":ht()}],"inset-ring-color":[{"inset-ring":B()}],"text-shadow":[{"text-shadow":["none",b,zc,Bc]}],"text-shadow-color":[{"text-shadow":B()}],opacity:[{opacity:[$t,Nt,Dt]}],"mix-blend":[{"mix-blend":[...At(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":At()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[$t]}],"mask-image-linear-from-pos":[{"mask-linear-from":vt()}],"mask-image-linear-to-pos":[{"mask-linear-to":vt()}],"mask-image-linear-from-color":[{"mask-linear-from":B()}],"mask-image-linear-to-color":[{"mask-linear-to":B()}],"mask-image-t-from-pos":[{"mask-t-from":vt()}],"mask-image-t-to-pos":[{"mask-t-to":vt()}],"mask-image-t-from-color":[{"mask-t-from":B()}],"mask-image-t-to-color":[{"mask-t-to":B()}],"mask-image-r-from-pos":[{"mask-r-from":vt()}],"mask-image-r-to-pos":[{"mask-r-to":vt()}],"mask-image-r-from-color":[{"mask-r-from":B()}],"mask-image-r-to-color":[{"mask-r-to":B()}],"mask-image-b-from-pos":[{"mask-b-from":vt()}],"mask-image-b-to-pos":[{"mask-b-to":vt()}],"mask-image-b-from-color":[{"mask-b-from":B()}],"mask-image-b-to-color":[{"mask-b-to":B()}],"mask-image-l-from-pos":[{"mask-l-from":vt()}],"mask-image-l-to-pos":[{"mask-l-to":vt()}],"mask-image-l-from-color":[{"mask-l-from":B()}],"mask-image-l-to-color":[{"mask-l-to":B()}],"mask-image-x-from-pos":[{"mask-x-from":vt()}],"mask-image-x-to-pos":[{"mask-x-to":vt()}],"mask-image-x-from-color":[{"mask-x-from":B()}],"mask-image-x-to-color":[{"mask-x-to":B()}],"mask-image-y-from-pos":[{"mask-y-from":vt()}],"mask-image-y-to-pos":[{"mask-y-to":vt()}],"mask-image-y-from-color":[{"mask-y-from":B()}],"mask-image-y-to-color":[{"mask-y-to":B()}],"mask-image-radial":[{"mask-radial":[Nt,Dt]}],"mask-image-radial-from-pos":[{"mask-radial-from":vt()}],"mask-image-radial-to-pos":[{"mask-radial-to":vt()}],"mask-image-radial-from-color":[{"mask-radial-from":B()}],"mask-image-radial-to-color":[{"mask-radial-to":B()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":R()}],"mask-image-conic-pos":[{"mask-conic":[$t]}],"mask-image-conic-from-pos":[{"mask-conic-from":vt()}],"mask-image-conic-to-pos":[{"mask-conic-to":vt()}],"mask-image-conic-from-color":[{"mask-conic-from":B()}],"mask-image-conic-to-color":[{"mask-conic-to":B()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:_()}],"mask-repeat":[{mask:N()}],"mask-size":[{mask:X()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Nt,Dt]}],filter:[{filter:["","none",Nt,Dt]}],blur:[{blur:Ot()}],brightness:[{brightness:[$t,Nt,Dt]}],contrast:[{contrast:[$t,Nt,Dt]}],"drop-shadow":[{"drop-shadow":["","none",y,zc,Bc]}],"drop-shadow-color":[{"drop-shadow":B()}],grayscale:[{grayscale:["",$t,Nt,Dt]}],"hue-rotate":[{"hue-rotate":[$t,Nt,Dt]}],invert:[{invert:["",$t,Nt,Dt]}],saturate:[{saturate:[$t,Nt,Dt]}],sepia:[{sepia:["",$t,Nt,Dt]}],"backdrop-filter":[{"backdrop-filter":["","none",Nt,Dt]}],"backdrop-blur":[{"backdrop-blur":Ot()}],"backdrop-brightness":[{"backdrop-brightness":[$t,Nt,Dt]}],"backdrop-contrast":[{"backdrop-contrast":[$t,Nt,Dt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",$t,Nt,Dt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[$t,Nt,Dt]}],"backdrop-invert":[{"backdrop-invert":["",$t,Nt,Dt]}],"backdrop-opacity":[{"backdrop-opacity":[$t,Nt,Dt]}],"backdrop-saturate":[{"backdrop-saturate":[$t,Nt,Dt]}],"backdrop-sepia":[{"backdrop-sepia":["",$t,Nt,Dt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":z()}],"border-spacing-x":[{"border-spacing-x":z()}],"border-spacing-y":[{"border-spacing-y":z()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Nt,Dt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[$t,"initial",Nt,Dt]}],ease:[{ease:["linear","initial",S,Nt,Dt]}],delay:[{delay:[$t,Nt,Dt]}],animate:[{animate:["none",E,Nt,Dt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Nt,Dt]}],"perspective-origin":[{"perspective-origin":D()}],rotate:[{rotate:Mt()}],"rotate-x":[{"rotate-x":Mt()}],"rotate-y":[{"rotate-y":Mt()}],"rotate-z":[{"rotate-z":Mt()}],scale:[{scale:It()}],"scale-x":[{"scale-x":It()}],"scale-y":[{"scale-y":It()}],"scale-z":[{"scale-z":It()}],"scale-3d":["scale-3d"],skew:[{skew:qt()}],"skew-x":[{"skew-x":qt()}],"skew-y":[{"skew-y":qt()}],transform:[{transform:[Nt,Dt,"","none","gpu","cpu"]}],"transform-origin":[{origin:D()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:k()}],"translate-x":[{"translate-x":k()}],"translate-y":[{"translate-y":k()}],"translate-z":[{"translate-z":k()}],"translate-none":["translate-none"],accent:[{accent:B()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:B()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Nt,Dt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":z()}],"scroll-mx":[{"scroll-mx":z()}],"scroll-my":[{"scroll-my":z()}],"scroll-ms":[{"scroll-ms":z()}],"scroll-me":[{"scroll-me":z()}],"scroll-mbs":[{"scroll-mbs":z()}],"scroll-mbe":[{"scroll-mbe":z()}],"scroll-mt":[{"scroll-mt":z()}],"scroll-mr":[{"scroll-mr":z()}],"scroll-mb":[{"scroll-mb":z()}],"scroll-ml":[{"scroll-ml":z()}],"scroll-p":[{"scroll-p":z()}],"scroll-px":[{"scroll-px":z()}],"scroll-py":[{"scroll-py":z()}],"scroll-ps":[{"scroll-ps":z()}],"scroll-pe":[{"scroll-pe":z()}],"scroll-pbs":[{"scroll-pbs":z()}],"scroll-pbe":[{"scroll-pbe":z()}],"scroll-pt":[{"scroll-pt":z()}],"scroll-pr":[{"scroll-pr":z()}],"scroll-pb":[{"scroll-pb":z()}],"scroll-pl":[{"scroll-pl":z()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Nt,Dt]}],fill:[{fill:["none",...B()]}],"stroke-w":[{stroke:[$t,Ro,sr,_1]}],stroke:[{stroke:["none",...B()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","inset-bs","inset-be","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pbs","pbe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mbs","mbe","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-bs","border-w-be","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-bs","border-color-be","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mbs","scroll-mbe","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pbs","scroll-pbe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},DP=lP(MP);function ee(...a){return DP(jN(a))}Sa.workerSrc=mR;const Fc=["ignore previous instructions","system prompt","hidden instruction","jailbreak","do anything now","ignore all rules","forgot about previous","actually move in","instead of","new instructions"],RP=({file:a,theme:t})=>{const e=_t.useRef(null),[n,s]=_t.useState(!1);return _t.useEffect(()=>{a&&e.current&&(async()=>{try{const l=await a.arrayBuffer();e.current.innerHTML="",await UN(l,e.current,null,{className:"docx-render",inWrapper:!1,ignoreWidth:!1,ignoreHeight:!1})}catch(l){console.error("DOCX Preview failed",l),s(!0)}})()},[a]),n?dt.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center text-zinc-500",children:[dt.jsx(wE,{size:32,className:"mb-4 text-orange-500"}),dt.jsx("p",{className:"text-xs font-black uppercase",children:"Preview Failed"})]}):dt.jsx("div",{ref:e,className:ee("docx-wrapper mx-auto max-w-full min-h-full p-4 md:p-8",t==="light"?"docx-light":"docx-dark")})};function NP(){const[a,t]=_t.useState(null),[e,n]=_t.useState(null),[s,o]=_t.useState(!1),[l,u]=_t.useState(null),[h,f]=_t.useState(0),[p,m]=_t.useState("findings"),[b,y]=_t.useState(()=>localStorage.getItem("docshield_theme")||"dark"),[A,w]=_t.useState(!1),[x,S]=_t.useState(null),[E,T]=_t.useState("doc"),R=_t.useRef(null);_t.useEffect(()=>{localStorage.setItem("docshield_theme",b),document.documentElement.className=b},[b]);const D=M=>{let tt=M;return Fc.forEach(H=>{const j=new RegExp(H,"gi");tt=tt.replace(j,"[REMOVED]")}),tt},O=(M,tt)=>{if(!M||!tt)return M;const H=tt.map(B=>B.context).filter(Boolean),j=[...new Set([...Fc,...H])].sort((B,_)=>_.length-B.length),lt=j.map(B=>B.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),st=new RegExp(`(${lt.join("|")})`,"gi");return M.split(st).map((B,_)=>j.some(X=>X.toLowerCase()===B.toLowerCase())?dt.jsx("mark",{className:"bg-red-500/30 text-red-500 border-b-2 border-red-500 font-black px-1 rounded-sm animate-pulse-slow",children:B},_):B)},L=M=>{if(M){e&&URL.revokeObjectURL(e);const tt=URL.createObjectURL(M);n(tt),t(M),M.type==="application/pdf"||M.name.endsWith(".pdf")?z(M):M.name.endsWith(".docx")&&I(M)}},z=async M=>{o(!0),u(null),f(0);try{const tt=new FileReader;tt.onload=async H=>{const j=new Uint8Array(H.target.result),lt=await FA(j).promise;let st=[],B="";const _=lt.numPages;for(let N=1;N<=_;N++){f(Math.round(N/_*100));const K=await(await lt.getPage(N)).getTextContent();let $="";K.items.forEach(ht=>{$+=ht.str+" ";const pt=ht.str.toLowerCase(),At=Math.abs(ht.transform[0]);Fc.forEach(vt=>{pt.includes(vt.toLowerCase())&&st.push({id:Math.random(),type:"Injection Keyword",detail:`Blocked phrase: "${vt}"`,context:ht.str,page:N,severity:"high"})}),At>0&&At<4&&pt.trim().length>0&&st.push({id:Math.random(),type:"Hidden Text",detail:`Micro-text caught (Size: ${At.toFixed(1)})`,context:ht.str,page:N,severity:"medium"})}),B+=$+`

`}Q(st,_,B,M)},tt.readAsArrayBuffer(M)}catch{o(!1)}},I=async M=>{o(!0),u(null),f(10);try{const tt=await M.arrayBuffer(),j=await(await WA.loadAsync(tt)).file("word/document.xml").async("string"),st=new DOMParser().parseFromString(j,"text/xml");let B=[],_="";const N=st.getElementsByTagName("w:r");f(50);for(let X=0;X<N.length;X++){const K=N[X],$=K.getElementsByTagName("w:t");if($.length===0)continue;const ht=Array.from($).map(Ot=>Ot.textContent).join("");_+=ht+" ";const pt=K.getElementsByTagName("w:rPr")[0];let At=!1,vt=!1;if(pt){const Ot=pt.getElementsByTagName("w:color")[0];if(Ot){const It=(Ot.getAttribute("w:val")||"").toUpperCase();(It==="FFFFFF"||It==="FFFFFF00")&&(At=!0)}const Mt=pt.getElementsByTagName("w:sz")[0];Mt&&parseInt(Mt.getAttribute("w:val"))<=8&&(vt=!0)}At&&ht.trim().length>0&&B.push({id:Math.random(),type:"Hidden Text",detail:"White-on-white text detected",context:ht,page:1,severity:"high"}),vt&&ht.trim().length>0&&B.push({id:Math.random(),type:"Micro-text",detail:"Suspiciously small font size",context:ht,page:1,severity:"medium"}),Fc.forEach(Ot=>{ht.toLowerCase().includes(Ot.toLowerCase())&&B.push({id:Math.random(),type:"Injection Keyword",detail:"Malicious command phrase",context:ht,page:1,severity:"high"})})}f(100),Q(B,1,_,M)}catch{o(!1)}},Q=(M,tt,H,j)=>{const lt=H.trim().length===0;setTimeout(()=>{o(!1),u({safe:M.length===0&&!lt,issues:M,pageCount:tt,fileName:j.name,rawText:H,sanitizedText:D(H),isEmpty:lt}),M.length===0&&!lt&&gR({particleCount:100,spread:70,origin:{y:.6},colors:["#ffffff","#C3FF00"]})},800)},at=()=>{l?.sanitizedText&&(navigator.clipboard.writeText(l.sanitizedText),w(!0),setTimeout(()=>w(!1),2e3))},U=()=>{e&&URL.revokeObjectURL(e),t(null),n(null),u(null),o(!1),S(null),m("findings"),T("doc"),R.current&&(R.current.value="")},Z=b==="light";return dt.jsxs("div",{className:ee("h-screen w-screen flex flex-col items-center py-4 px-6 overflow-hidden transition-colors duration-300",Z?"bg-[#F9FAFB] text-zinc-950":"bg-black text-white"),children:[dt.jsxs("div",{className:"w-full max-w-5xl h-full flex flex-col space-y-4",children:[dt.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center shrink-0 gap-4 md:h-16",children:[dt.jsxs("div",{className:"flex items-center justify-between w-full md:w-auto",children:[dt.jsxs("div",{className:"flex items-center gap-3",children:[dt.jsx("img",{src:"/logo.svg",alt:"DocShit Logo",className:"w-8 h-8 md:w-10 md:h-10"}),dt.jsx("h2",{className:"text-lg md:text-xl font-bold uppercase tracking-widest mt-1",children:"docshit"})]}),l&&dt.jsxs("div",{className:ee("md:hidden flex p-1 border transition-colors",Z?"border-zinc-200 bg-white":"border-zinc-800 bg-zinc-900"),children:[dt.jsx("button",{onClick:()=>T("doc"),className:ee("px-3 py-1 text-[8px] font-black uppercase transition-all",E==="doc"?"bg-[#C3FF00] text-black":"text-zinc-500 hover:text-zinc-400"),children:dt.jsx(sE,{size:14})}),dt.jsx("button",{onClick:()=>T("analysis"),className:ee("px-3 py-1 text-[8px] font-black uppercase transition-all",E==="analysis"?"bg-[#C3FF00] text-black":"text-zinc-500 hover:text-zinc-400"),children:dt.jsx(dE,{size:14})})]})]}),dt.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 w-full md:w-auto justify-between md:justify-end",children:[l&&dt.jsx("div",{className:ee("flex p-1 border transition-colors flex-1 md:flex-initial justify-center",Z?"border-zinc-200 bg-white":"border-zinc-800 bg-zinc-900"),children:["findings","safe-text","extracted-text"].map(M=>dt.jsx("button",{onClick:()=>{m(M),T("analysis")},className:ee("flex-1 md:flex-initial px-2 md:px-4 py-1.5 text-[8px] md:text-[9px] font-black uppercase tracking-widest transition-all",p===M?"bg-[#C3FF00] text-black":"text-zinc-500 hover:text-zinc-300"),children:M==="extracted-text"?"Proof":M.replace("-"," ").split(" ")[0]},M))}),dt.jsxs("div",{className:"flex gap-2",children:[dt.jsxs("div",{className:ee("flex p-1 transition-colors border",Z?"border-zinc-200 bg-white":"border-zinc-800 bg-zinc-900"),children:[dt.jsx("button",{onClick:()=>y("light"),className:ee("p-1.5 md:p-2 transition-all",Z?"bg-zinc-100 text-black shadow-sm":"text-zinc-500 hover:text-zinc-300"),children:dt.jsx(gE,{size:16})}),dt.jsx("button",{onClick:()=>y("dark"),className:ee("p-1.5 md:p-2 transition-all",Z?"text-zinc-500 hover:text-zinc-300":"bg-zinc-800 text-white shadow-sm"),children:dt.jsx(lE,{size:16})})]}),dt.jsx("button",{onClick:U,className:ee("p-2 md:p-2.5 border transition-all hover:scale-95",Z?"border-zinc-200 bg-white":"border-zinc-800 bg-zinc-900"),children:dt.jsx(yE,{size:18})}),dt.jsxs("label",{className:ee("p-2 md:p-2.5 border cursor-pointer flex items-center justify-center transition-all hover:scale-95",Z?"border-zinc-200 bg-white":"border-zinc-800 bg-zinc-900"),children:[dt.jsx(w0,{size:18}),dt.jsx("input",{type:"file",className:"hidden",accept:".pdf,.docx",onChange:M=>L(M.target.files[0])})]})]})]})]}),dt.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:dt.jsx(af,{mode:"wait",children:s?dt.jsxs(Zi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"h-full flex flex-col items-center justify-center space-y-8",children:[dt.jsxs("div",{className:ee("p-8 border-2 border-dashed relative flex items-center justify-center transition-colors",Z?"border-zinc-200":"border-zinc-800"),children:[dt.jsx(aE,{size:64,className:"animate-spin text-[#C3FF00] opacity-20"}),dt.jsx("img",{src:"/logo.svg",alt:"DocShit Logo",className:"w-8 h-8 absolute animate-pulse-slow object-contain"})]}),dt.jsxs("div",{className:"text-center space-y-2",children:[dt.jsx("h3",{className:"text-xl font-black uppercase tracking-widest",children:"Scanning"}),dt.jsxs("p",{className:"text-sm font-bold text-zinc-500",children:[h,"% Analyzed"]})]})]},"scanning"):l?dt.jsxs(Zi.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"h-full flex flex-col space-y-4",children:[dt.jsxs("div",{className:ee("shrink-0 flex flex-col md:flex-row md:justify-between md:items-end pb-4 border-b transition-colors gap-4",Z?"border-zinc-200":"border-zinc-800"),children:[dt.jsxs("div",{children:[dt.jsx("p",{className:"text-[9px] md:text-[10px] font-black uppercase tracking-widest text-zinc-500 mb-1",children:"Source Analysis"}),dt.jsx("h2",{className:ee("text-lg md:text-2xl font-black uppercase tracking-tight truncate max-w-[300px] md:max-w-none",l.isEmpty?"text-orange-500":l.safe?"text-emerald-500":"text-red-500"),children:l.fileName})]}),dt.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[dt.jsxs("div",{className:ee("border px-3 md:px-4 py-1.5 md:py-2 transition-colors flex-1 md:flex-initial md:min-w-[150px]",Z?"border-zinc-200 bg-white":"border-zinc-800 bg-zinc-900"),children:[dt.jsx("p",{className:"text-[8px] md:text-[9px] font-black uppercase text-zinc-500 block",children:"Status"}),dt.jsx("span",{className:ee("text-[10px] md:text-xs font-black",l.isEmpty?"text-orange-500":l.safe?"text-emerald-500":"text-red-500"),children:l.isEmpty?"Empty":`${l.issues.length} Risks`})]}),p==="safe-text"&&!l.isEmpty&&dt.jsx("button",{onClick:at,className:ee("h-full px-4 md:px-6 py-2 border border-[#C3FF00] font-black uppercase text-[9px] md:text-[10px] transition-all bg-[#C3FF00] text-black hover:bg-[#b0e600] flex-1 md:flex-initial",A?"bg-emerald-500 border-emerald-500 text-white":""),children:A?"Copied":"Copy"})]})]}),dt.jsxs("div",{className:"flex-1 min-h-0 grid md:grid-cols-[1.2fr_0.8fr] gap-6 pb-2",children:[dt.jsxs("div",{className:ee("flex-col space-y-3 min-h-0",E==="doc"?"flex":"hidden md:flex"),children:[dt.jsxs("div",{className:"flex items-center justify-between shrink-0",children:[dt.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-500",children:"Document Browser"}),dt.jsx("span",{className:"text-[9px] font-black uppercase opacity-30",children:a?.name.endsWith(".pdf")?"PDF":"DOCX"})]}),dt.jsx("div",{className:ee("flex-1 border overflow-hidden relative transition-colors",Z?"bg-white border-zinc-200":"bg-black border-zinc-900 text-black"),children:a?.name.endsWith(".pdf")?dt.jsx("iframe",{src:`${e}#toolbar=0&navpanes=0`,className:"w-full h-full border-none",title:"PDF Preview"},e):dt.jsx("div",{className:"w-full h-full overflow-auto no-scrollbar scroll-smooth",children:dt.jsx(RP,{file:a,theme:b})})})]}),dt.jsxs("div",{className:ee("flex-col space-y-3 min-h-0",E==="analysis"?"flex":"hidden md:flex"),children:[dt.jsx("div",{className:"flex items-center justify-between shrink-0 h-6",children:dt.jsx("h2",{className:"text-[10px] font-black uppercase tracking-widest",children:p.replace("-"," ")})}),dt.jsx("div",{className:"flex-1 min-h-0",children:dt.jsx(af,{mode:"wait",children:l.isEmpty?dt.jsxs(Zi.div,{initial:{opacity:0},animate:{opacity:1},className:ee("h-full border border-dashed flex flex-col items-center justify-center p-8 text-center",Z?"border-orange-200 bg-orange-50/30":"border-orange-900/30 bg-orange-500/5"),children:[dt.jsx(uE,{size:48,className:"text-orange-500 mb-6"}),dt.jsx("h3",{className:"text-sm font-black uppercase text-orange-500 mb-2",children:"OCR Failure / Image Data"}),dt.jsxs("p",{className:"text-[10px] font-bold text-zinc-500 max-w-[240px] leading-relaxed",children:["This document contains no selectable text. It likely consists of ",dt.jsx("span",{className:"text-orange-500",children:"handwritten notes"}),", ",dt.jsx("span",{className:"text-orange-500",children:"scanned images"}),", or vectors. Sanitization cannot be performed."]})]},"empty"):p==="findings"?dt.jsx(Zi.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"h-full overflow-y-auto no-scrollbar space-y-2",children:l.issues.length>0?l.issues.map((M,tt)=>dt.jsxs("div",{onClick:()=>S(M),className:ee("p-3 border flex items-center justify-between cursor-pointer transition-all group",Z?"border-zinc-200 bg-white hover:border-zinc-300":"border-zinc-800 bg-zinc-900/50 hover:border-zinc-700"),children:[dt.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[dt.jsx("div",{className:ee("w-10 h-10 flex items-center justify-center shrink-0",M.severity==="high"?"bg-red-500/10 text-red-500":"bg-orange-500/10 text-orange-500"),children:dt.jsx(pE,{size:16})}),dt.jsxs("div",{className:"truncate",children:[dt.jsx("h4",{className:"text-[11px] font-black uppercase truncate",children:M.detail}),dt.jsxs("span",{className:"text-[8px] font-black opacity-50 uppercase tracking-widest",children:[M.type,"  P",M.page]})]})]}),dt.jsx(tE,{className:"w-4 h-4 opacity-50 group-hover:translate-x-1 transition-transform"})]},tt)):dt.jsxs("div",{className:ee("h-full flex flex-col items-center justify-center border-2 border-dashed transition-colors",Z?"border-zinc-200":"border-zinc-800"),children:[dt.jsx(nE,{size:32,className:"text-emerald-500 mb-4"}),dt.jsx("h3",{className:"font-black text-sm uppercase opacity-50",children:"Safe"})]})},"findings"):p==="safe-text"?dt.jsxs(Zi.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"h-full flex flex-col space-y-3",children:[dt.jsx("div",{className:ee("flex-1 p-4 border font-mono text-[11px] leading-relaxed overflow-y-auto no-scrollbar transition-colors",Z?"border-zinc-200 bg-white text-zinc-600":"border-zinc-800 bg-zinc-950 text-emerald-400/80"),children:l.sanitizedText}),dt.jsx("div",{className:ee("p-3 border border-dashed text-[8px] font-black uppercase leading-tight",Z?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-emerald-500/5 border-emerald-900/30 text-emerald-500"),children:"Hijacking risks and hidden gaps neutralized. Ready for LLM input."})]},"safe"):dt.jsx(Zi.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:ee("h-full border p-4 font-mono text-[11px] overflow-y-auto no-scrollbar whitespace-pre-wrap transition-colors leading-relaxed",Z?"border-zinc-200 bg-white":"border-zinc-800 bg-zinc-900","text-zinc-500"),children:O(l.rawText,l.issues)},"proof")})})]})]})]},"result"):dt.jsx(Zi.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full flex items-center justify-center",children:dt.jsxs("div",{className:"max-w-md w-full text-center space-y-8",children:[dt.jsxs("div",{className:"space-y-4",children:[dt.jsx("img",{src:"/logo.svg",alt:"DocShit Logo",className:"w-24 h-24 mx-auto mb-2 object-contain drop-shadow-2xl"}),dt.jsxs("div",{className:"space-y-1",children:[dt.jsx("h1",{className:"text-4xl font-black uppercase tracking-widest mt-6",children:"DocShit"}),dt.jsx("p",{className:"text-xs font-black uppercase tracking-[0.15em] opacity-50",children:"Sanitize your LLM inputs."})]})]}),dt.jsxs("label",{className:ee("flex items-center justify-center gap-3 w-full py-5 border-2 border-[#C3FF00] cursor-pointer transition-all active:scale-95 font-black text-xs uppercase tracking-widest bg-[#C3FF00] text-black hover:bg-[#b0e600]"),children:[dt.jsx(w0,{size:18}),dt.jsx("span",{children:"Upload File"}),dt.jsx("input",{type:"file",className:"hidden",accept:".pdf,.docx",onChange:M=>L(M.target.files[0])})]}),dt.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[dt.jsxs("div",{className:ee("p-4 border text-left transition-colors",Z?"border-zinc-200 bg-zinc-50":"border-zinc-800 bg-zinc-900"),children:[dt.jsx("h4",{className:"text-[9px] font-black mb-1 uppercase opacity-50",children:"Deep Scan"}),dt.jsx("p",{className:"text-[10px] font-black leading-tight",children:"Full structure analysis."})]}),dt.jsxs("div",{className:ee("p-4 border text-left transition-colors",Z?"border-zinc-200 bg-zinc-50":"border-zinc-800 bg-zinc-900"),children:[dt.jsx("h4",{className:"text-[9px] font-black mb-1 uppercase opacity-50",children:"Privacy"}),dt.jsx("p",{className:"text-[10px] font-black leading-tight",children:"No data uploads."})]})]})]})},"home")})}),dt.jsx("div",{className:"flex justify-center items-center py-2 shrink-0 border-t border-transparent",children:dt.jsxs("p",{className:"text-[9px] md:text-[10px] font-black uppercase tracking-widest",children:["made with love by ",dt.jsx("a",{href:"https://theajmlarazaq.github.io",target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#a098ff] hover:opacity-100 transition-all underline decoration-dotted underline-offset-4",children:"ajmal razaq bhatti"})]})}),dt.jsx(af,{children:x&&dt.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[dt.jsx(Zi.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-md",onClick:()=>S(null)}),dt.jsxs(Zi.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:ee("relative w-full max-w-2xl p-8 space-y-6 border shadow-2xl transition-colors",Z?"border-zinc-200 bg-white":"border-zinc-800 bg-zinc-900"),children:[dt.jsxs("div",{className:"flex justify-between items-start",children:[dt.jsxs("div",{className:"flex items-center gap-4",children:[dt.jsx("img",{src:"/logo.svg",alt:"DS",className:"w-12 h-12 object-contain"}),dt.jsxs("div",{children:[dt.jsxs("span",{className:ee("text-[8px] font-black uppercase border px-2 py-0.5",Z?"border-zinc-200 text-zinc-400":"border-zinc-700 text-zinc-500"),children:[x.type,"  P",x.page]}),dt.jsx("h2",{className:"text-xl font-black uppercase mt-1 text-red-500",children:"Threat Fragment"})]})]}),dt.jsx("button",{onClick:()=>S(null),className:"text-zinc-500 hover:text-red-500 transition-colors",children:dt.jsx(xE,{size:20})})]}),dt.jsxs("div",{className:ee("p-4 border font-mono text-xs whitespace-pre-wrap overflow-auto max-h-40 transition-colors",Z?"bg-zinc-50 border-zinc-200 text-red-600":"bg-black border-zinc-800 text-red-400"),children:['"',x.context,'"']}),dt.jsx("button",{onClick:()=>S(null),className:ee("w-full py-4 border-2 border-[#C3FF00] font-black uppercase text-xs transition-all bg-[#C3FF00] text-black hover:bg-[#b0e600]"),children:"Close"})]})]})})]}),dt.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .docx-wrapper { width: 100%; min-height: 100%; }
        .docx-render { background: transparent !important; margin: 0 auto !important; width: 100% !important; padding: 0 !important; }
        .docx-render section { background: white !important; padding: 40px !important; margin-bottom: 20px !important; box-shadow: 0 10px 30px rgba(0,0,0,0.1) !important; color: black !important; }
        .docx-dark .docx-render section { background: #09090b !important; color: #f4f4f5 !important; border: 1px solid #27272a !important; box-shadow: none !important; }
        .docx-dark .docx-render p, .docx-dark .docx-render span, .docx-dark .docx-render h1, .docx-dark .docx-render h2, .docx-dark .docx-render h3, .docx-dark .docx-render li, .docx-dark .docx-render td { color: #f4f4f5 !important; background-color: transparent !important; }
        .docx-dark .docx-render table { border-color: #27272a !important; }
        .docx-render p, .docx-render span, .docx-render h1, .docx-render h2, .docx-render h3 { color: inherit !important; }
        @keyframes pulse-slow { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .animate-pulse-slow { animation: pulse-slow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
      `}})]})}q_.createRoot(document.getElementById("root")).render(dt.jsx(_t.StrictMode,{children:dt.jsx(NP,{})}));
